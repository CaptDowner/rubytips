--
-- PostgreSQL database dump
--

SET statement_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = off;
SET check_function_bodies = false;
SET client_min_messages = warning;
SET escape_string_warning = off;

SET search_path = public, pg_catalog;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- Name: schema_migrations; Type: TABLE; Schema: public; Owner: captdowner; Tablespace: 
--

CREATE TABLE schema_migrations (
    version character varying(255) NOT NULL
);


ALTER TABLE public.schema_migrations OWNER TO captdowner;

--
-- Name: tips; Type: TABLE; Schema: public; Owner: captdowner; Tablespace: 
--

CREATE TABLE tips (
    id integer NOT NULL,
    source character varying(255),
    rubytype character varying(255),
    subject character varying(255),
    category character varying(255),
    tip text,
    applies_to character varying(255),
    email character varying(255),
    posted timestamp without time zone,
    firstname character varying(255),
    lastname character varying(255),
    created_at timestamp without time zone NOT NULL,
    updated_at timestamp without time zone NOT NULL
);


ALTER TABLE public.tips OWNER TO captdowner;

--
-- Name: tips_id_seq; Type: SEQUENCE; Schema: public; Owner: captdowner
--

CREATE SEQUENCE tips_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MAXVALUE
    NO MINVALUE
    CACHE 1;


ALTER TABLE public.tips_id_seq OWNER TO captdowner;

--
-- Name: tips_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: captdowner
--

ALTER SEQUENCE tips_id_seq OWNED BY tips.id;


--
-- Name: tips_id_seq; Type: SEQUENCE SET; Schema: public; Owner: captdowner
--

SELECT pg_catalog.setval('tips_id_seq', 559, true);


--
-- Name: users; Type: TABLE; Schema: public; Owner: captdowner; Tablespace: 
--

CREATE TABLE users (
    id integer NOT NULL,
    email character varying(255),
    password_digest character varying(255),
    created_at timestamp without time zone NOT NULL,
    updated_at timestamp without time zone NOT NULL
);


ALTER TABLE public.users OWNER TO captdowner;

--
-- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: captdowner
--

CREATE SEQUENCE users_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MAXVALUE
    NO MINVALUE
    CACHE 1;


ALTER TABLE public.users_id_seq OWNER TO captdowner;

--
-- Name: users_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: captdowner
--

ALTER SEQUENCE users_id_seq OWNED BY users.id;


--
-- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: captdowner
--

SELECT pg_catalog.setval('users_id_seq', 1, false);


--
-- Name: id; Type: DEFAULT; Schema: public; Owner: captdowner
--

ALTER TABLE tips ALTER COLUMN id SET DEFAULT nextval('tips_id_seq'::regclass);


--
-- Name: id; Type: DEFAULT; Schema: public; Owner: captdowner
--

ALTER TABLE users ALTER COLUMN id SET DEFAULT nextval('users_id_seq'::regclass);


--
-- Data for Name: schema_migrations; Type: TABLE DATA; Schema: public; Owner: captdowner
--

COPY schema_migrations (version) FROM stdin;
20120502223017
20120427195329
20120515233229
20120516004109
\.


--
-- Data for Name: tips; Type: TABLE DATA; Schema: public; Owner: captdowner
--

COPY tips (id, source, rubytype, subject, category, tip, applies_to, email, posted, firstname, lastname, created_at, updated_at) FROM stdin;
361	ruby-talk	Array	Creating an array?	array, collect, method, iteration	> By short I mean without going through iteration loop:\r\n>\r\n> array=[]\r\n> (1..5).each do |i|\r\n>    array.push i*10\r\n> end\r\n\r\nWould you be pleased with something like this ?\r\n\r\n>> array = (1..5).collect {|i| i*10}\r\n=> [10, 20, 30, 40, 50]	1.9.3	jeanjulien.fleck@gmail.com	2009-12-28 12:34:00	Jean-Julien	Fleck	2012-05-02 12:46:57.303184	2012-05-03 23:25:33.217855
431	ruby-talk	Array	Array problem	array, select, match	> I have an array like this:\r\n> array = [ "manyThings.mp3", "myLike.gif", "moreCoco.bmp",\r\n> "theFormat.bmp"]\r\n>\r\n> and I want to make some comparison to eliminate all the words in the\r\n> array that are NOT of the bmp format.  So at the end the array will look\r\n> like this:\r\n>\r\n> array = ["moreCoco.bmp", "theFormat.bmp"]\r\n>\r\n> is there a way to do this???\r\n\r\nSee Array#select\r\nirb(main):007:0> array.select{|x| x.match(/.*.bmp/)}\r\n=> ["moreCoco.bmp", "theFormat.bmp"]	1.9.3	scott@thereisnoarizona.org	2008-12-17 21:51:00	Scott	Lillibridge	2012-05-02 13:00:34.202048	2012-05-03 19:19:32.974324
559	web	ActiveSupport::SafeBuffer	Obfuscate email addresses	obfuscate, string, email, address, html, entities, rails3	From: <a href="http://www.truespire.com/2009/05/30/obfuscating-email-addresses-in-ruby-on-rails/">http://truespire.com</a>\r\n\r\nHere's a function you can add to a rails3 app helper (or temporarily add to the String class) to obfuscate email addresses:\r\n\r\ndef obscure_email(email)\r\n  return nil if email.nil? # Don't bother if email string is nil\r\n  lower = ('a'..'z').to_a\r\n  upper = ('A'..'Z').to_a\r\n  email.split('').map { |char|\r\n    output = lower.index(char) + 97 if lower.include?(char)\r\n    output = upper.index(char) + 65 if upper.include?(char)\r\n    output ? "&##{output};" : (char == '@' ? '&#0064;' : char)\r\n  }.join\r\nend\r\n\r\nPlace this method in your app's helper file and call it like this:\r\n\r\nstr = "bat@man.net"\r\n\r\nobscure_email(str)\r\n\r\nProduces (I added spaces to prevent HTML entity translation): \r\n"&# 98;&# 97;&# 116;&# 0064;&# 109;&# 97;&# 110;.&# 110;&# 101;&# 116;"\r\n\r\nUsed in Rails 3, adding a call to html_safe, part of the ActiveSupport::SafeBuffer class:\r\n\r\nobscure_email(str).html_safe\r\n\r\nResults visibly on the HTML page as: "bat@man.net"\r\n\r\nBut, when you view the HTML page source, you see this: \r\n\r\n(spaces added to prevent HTML entity translation)\r\n"&# 98;&# 97;&# 116;&# 0064;&# 109;&# 97;&# 110;.&# 110;&# 101;&# 116;"\r\n\r\nNot foolproof, but a bit harder for spam bots to assimilate.	1.9.3, rails 3.2.2	captdowner@gmail.com	2012-05-14 23:50:00	Steve	Downie	2012-05-15 00:13:40.418103	2012-05-15 19:54:55.090003
418	ruby-talk	Dir	Inconsistent behaviour when working with a string	Dir, foreach, iterator, regex, match	> The Dir.foreach iterator always begins with the current directory '.'\r\n> and the parent directory '..'. If you don't skip these cases, the\r\n> iterator will throw an error on the first run:\r\n>\r\n> If file is '.', then file[/d{10,}/] is nil (there aren't any digits).\r\n> And if fileint is nil, then fileint[0,2] will fail, because nil doesnt\r\n> have a [] method.\r\n>\r\n> You should generally check the file parameter before processing it.\r\n> Otherwise, you will always run into trouble if there are any entries\r\n> that don't match the pattern.\r\n>\r\n> For example, you could write\r\n>\r\n> Dir.foreach(".") do |file|\r\n>   if file =~ /access(?:_denied)?(d+).merged.log.bz2/\r\n>     timestamp = $1\r\n>     year, month =\r\n>       timestamp[0, 2], month[2, 2]\r\n>     month = $months[month.to_i - 1]\r\n>     puts "year = #{year} month = #{month} and file was #{file}"\r\n>   end\r\n> end\r\n\r\nAbsolutely!  I'd go just a bit further and make the matching more \r\nrigorous and also extract all relevant data in one go:\r\n\r\nDir.foreach(dir) do |file|\r\n  if file =~ /Aaccess(?:_denied)?(d{2})(d{2})d{6}.merged.log.bz2z/\r\n    year = $1.to_i\r\n    month = $2.to_i\r\n    puts "year = #{year} month = #{$months[month - 1]} and file was \r\n#{file}"\r\n  end\r\nend\r\n\r\nNote: if there is a hierarchy of folders then also Find.find or \r\nPathname.find could be used.	1.9.3	shortcutter@googlemail.com	2012-03-06 10:42:00	Robert	Klemme	2012-05-02 12:57:36.099309	2012-05-05 01:15:49.897465
504	ruby-talk	Dir	Dir.entries showing . and .. , how come?	Dir, glob, .., ., filenames, return	>> Of course, this might still not do what you want -- it's going to include\r\n>> folders, too. If you just want files, you could do something like this:\r\n>>\r\n>> Dir.entries(myfolder).each do |filename|\r\n>>   puts filename if File.file?(filename)\r\n>> end\r\n \r\n> I would just do something like this:\r\n> \r\n> Dir.entries(dir).reject{|entry| entry =~ /^\\.{1,2}$/}\r\n> \r\n\r\nOn unix, Dir.glob doesn't return hidden files(like Dir.entries does):\r\n\r\ndirname = "whatever"\r\n\r\nDir.glob("#{dirname}/*").each do |fname|\r\n  puts fname\r\nend	1.9.3	bbxx789_05ss@yahoo.com	2012-05-04 00:22:00	7stud		2012-05-04 00:25:46.305776	2012-05-04 23:12:54.597008
20	ruby-talk	String	Use * before string	string, array, splat	And apparently you can do this:\r\n\r\nx, y, *remaining = ["snowboard", "skis", "sled", "boots"]\r\n\r\nputs x, y\r\np remaining\r\n\r\n--output:--\r\nsnowboard\r\nskis\r\n["sled", "boots"]	1.9.3	bbxx789_05ss@yahoo.com	2009-02-12 19:49:00	7stud		2012-05-02 11:44:38.857557	2012-05-11 17:36:10.960067
510	ruby-talk	String	How to indent strings(make them line up)?	string, indent, ip, dns, format, puts	>> # original code was\r\n>>\r\n>> puts (dns + " => " + ip)\r\n>>\r\n>> # I tried next code\r\n>>\r\n>> puts (dns + " ï¿½"*(20 - dns.length) + " = > " + ip)\r\n>>\r\n>> # but it did not work well. please teach me how to do it.\r\n> \r\n> "%-30s %s" % [dns, ip]\r\n\r\nThomas's suggestion of String Format (%) is correct, just revising \r\nexample to reflect the original code above.\r\n\r\nputs "%-20s => %s" % [dns, ip]	1.9.3, 1.8.6	steve@studio831.com	2009-12-08 18:59:00	Steve	Wilhelm	2012-05-04 15:02:36.906919	2012-05-04 15:05:32.051055
410	ruby-talk	Regexp	RegEx for a string between two symbols	regex, string, symbol, dictionary, build	>> Hey, thanks for the reply. I've been practicing my ruby but if you have\r\n>> a JSON or XML solution I will look at / learn those too as Ruby is often\r\n>> used in tandem with XML and JSON\r\n>>\r\n>> So I'm looking to start up a text file where I can type words and then\r\n>> its corresponding definition on the same line. For example.\r\n>>\r\n>> In dictionary.txt I would have\r\n>> word1 - definition1;\r\n>> word2 - definition2;\r\n>\r\n> If it's only one word and one definition per line, then XML or JSON is\r\n> probably too much. But I wouldn't use a hyphen as a separator, because\r\n> it may also appear in words or definitions. Use something special like a\r\n> double colon:\r\n>\r\n> word :: definition\r\n>\r\n> You don't have to mark the end of the definition, because you can simply\r\n> read the whole line.\r\n>\r\n> The "parser" could be something like this:\r\n>\r\n> ####\r\n> dictionary = {}\r\n> File.foreach 'C:/dictionary.txt' do |line|\r\n>   next if line.strip.empty?             # skip empty lines\r\n>   parts = line.split('::').map &:strip  # split line at the double colon\r\n\r\nThat's unsafe because it will break if there is a '::' in the \r\ndefinition.\r\n\r\n>   if parts.length == 2 and parts.none? &:empty?\r\n>     word, definition = parts\r\n>     raise "multiple definitions for #{word}" if\r\n>         dictionary.has_key? word.to_sym\r\n>     dictionary[word.to_sym] = definition\r\n>   else\r\n>     raise "invalid line: #{line}"\r\n>   end\r\n> end\r\n>\r\n> p dictionary\r\n> ####\r\n\r\nI would separate parsing and dictionary building.  For example\r\n\r\ndef read_dict(file_name)\r\n  File.foreach file_name do |line|\r\n    line.chomp!\r\n\r\n    if %r{As*(w+)s*::s*+(.*?)s*z} =~ line\r\n      yield $1, $2 # word, def\r\n    else\r\n      raise "invalid line: #{line}"\r\n    end\r\n  end\r\nend\r\n\r\ndef load_dict(file_name)\r\n  dict = {}\r\n\r\n  read_dict file_name do |word, definition|\r\n    raise "multiple definitions for #{word}" if\r\n      dict.has_key? word\r\n\r\n    dict[word] = definition\r\n  end\r\n\r\n  dict\r\nend\r\n\r\nBtw, I wouldn't use symbols for the words because there are potentially \r\nmany and they are not GC'ed.	1.9.3	shortcutter@googlemail.com	2012-04-04 10:05:00	Robert	Klemme	2012-05-02 12:56:17.520929	2012-05-05 01:41:56.380412
515	rubyonrails-talk	Rails::Validation	Validation	rails, validation, errors, messages, valid	> Does anyone know how to order validation messages in Rails?\r\n>\r\n> I have model , with following validation like:\r\n>\r\n> name, email, password\r\n>\r\n> but when it validates ,messages appear unordered..because rails stores\r\n> validation messages in hash...\r\n>\r\n> so please how can I solve this problem?\r\n\r\nYou can ask for specific error messages.  I usually do that right\r\nabove the field on the form.  Say you have an item object with a\r\nlocation property.\r\n\r\n  <%= error_message_on :item, :location %>\r\n  <%= f.label :location %>\r\n  <%= f.text_field :location %>\r\n\r\nThat will add the location error message above it.  Only when there is\r\nan error on the location property, will it show up.\r\n\r\nYou can also pull specific errors with the on method on the errors\r\ncollection.  Say you have a user, with an error on the name property.\r\n\r\nu = User.new\r\nu.valid?\r\nu.errors.on(:name)	1.9.3, 1.8.6	dusty.doris@gmail.com	2008-12-16 06:57:00	Dusty	Doris	2012-05-04 18:28:33.799609	2012-05-04 18:28:33.799609
404	ruby-talk	String	Negative grep	string, grep, negative, select, inverted, condition, reject	> biglist !~ /bar/\r\n>\r\n> !biglist.grep(/bar/)\r\n\r\nThis was a joke, wasn't it?\r\n\r\nirb(main):001:0> a=19.times.map &:to_s\r\n=> ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11",\r\n"12", "13", "14", "15", "16", "17", "18"]\r\nirb(main):002:0> a !~ /0/\r\n=> true\r\nirb(main):003:0> !a.grep /0/\r\n=> false\r\n\r\nI'd use #select with inverted condition or #reject\r\n\r\nirb(main):005:0> a.select {|s| /0/ !~ s}\r\n=> ["1", "2", "3", "4", "5", "6", "7", "8", "9", "11", "12", "13",\r\n"14", "15", "16", "17", "18"]\r\nirb(main):006:0> a.reject {|s| /0/ =~ s}\r\n=> ["1", "2", "3", "4", "5", "6", "7", "8", "9", "11", "12", "13",\r\n"14", "15", "16", "17", "18"]	1.9.3	shortcutter@googlemail.com	2012-01-12 17:40:00	Robert	Klemme	2012-05-02 12:56:17.327184	2012-05-07 00:37:24.819357
270	ruby-talk	Struct	How to order Structs based on two fields?	struct, array, sort, fields, sort_by, nonzero	>>> I expected that the following could work:\r\n>>>\r\n>>>  array.sort_by{|entry| entry.a or entry.b}\r\n>>>\r\n>>> but it generates:\r\n>>>\r\n>>>   [kk1, kk2, kk3, kk4]\r\n>>>\r\n>>> so obviously it does not work. I'm not very used to Enumerable.sort_by\r\n>>> method, any tip please?\r\n>>\r\n>> Maybe it would be better to use "class KK" rather than an struct, and\r\n>> then define <=> method for KK class (and include Enumerable module)?\r\n>\r\n> You can do\r\n>\r\n> array.sort_by {|e| [e.a, e.b]}\r\n>\r\n> But you can of course define <=> for a Struct class as well\r\n>\r\n> KK = Struct.new :a,:b do\r\n>  include Comparable\r\n>\r\n>  def <=>(o)\r\n>    cmp = a <=> o.a\r\n>    cmp == 0 ? b <=> o.b : cmp\r\n>  end\r\n> end\r\n\r\nActually, there's a method to help with exactly this sort of thing (pun intended).\r\n\r\ndef <=>(o)\r\n   (a <=> o.a).nonzero? || b <=> o.b\r\nend\r\n\r\nTake a look at Numeric#nonzero? and you'll find an example that's almost exactly this.	1.9.3	Rob@AgileConsultingLLC.com	2011-07-01 08:24:00	Rob	Biedenharn	2012-05-02 12:31:07.782636	2012-05-05 01:46:13.860437
299	ruby-talk	File	Reading specific columns on a text file	file, split	line.split(" ")[0 , 11] does, in fact, return 11 items, starting from 0th.\r\n\r\nTo return 0th and 11th column, use line.split(" ").values_at(0, 11),	1.9.3	matma.rex@gmail.com	2012-02-02 18:18:00	Bartosz	DziewoÅski	2012-05-02 12:35:56.298728	2012-05-11 17:02:28.808725
526	ruby-talk	rvm	How to make 1.9.2 my default version using rvm?	rvm, ruby, default, version, 	You may create file .rvmrc in your project directory\r\nwith such content: \r\n\r\n"rvm use 1.9.2"\r\nor with gemset\r\n"rvm use 1.9.2@my_project_gemset"	1.9.2, 1.9.3	ignar.name@yandex.ua	2011-11-24 18:36:00	Artem	Melnikov	2012-05-04 20:28:21.042831	2012-05-04 20:28:21.042831
149	ruby-talk	Array	Appending to an Array	array, aliasing, rows	>> > I am querying a database using DBI and ODBC.  After I run the execute, I\r\n>> > want to grab each row as an array, and add it to another array, essentially\r\n>> > creating an Array of Arrays.  I've tried this two ways with the same result:\r\n>> >\r\n>> > sth = dbh.execute("SELECT * FROM SOMETABLE")\r\n>> > rows = sth.fetch_all\r\n>> >\r\n>> > and\r\n>> >\r\n>> > rows = sth.fetch do |row|\r\n>> >    rows << row\r\n>> > end\r\n>> >\r\n>> > The result for both is that the last row is repeated in the array however\r\n>> > many times there are rows.  Why isn't it appending correctly?\r\n>>\r\n>> Probably because the DB driver optimizes object allocation and reuses\r\n>> the same instance.  Then this is what happens:\r\n>>\r\n>> irb(main):006:0> rows = []\r\n>> => []\r\n>> irb(main):007:0> a = %w{a b c d}\r\n>> => ["a", "b", "c", "d"]\r\n>> irb(main):008:0> rows << a\r\n>> => [["a", "b", "c", "d"]]\r\n>> irb(main):009:0> a[2] = 99\r\n>> => 99\r\n>> irb(main):010:0> rows << a\r\n>> => [["a", "b", 99, "d"], ["a", "b", 99, "d"]]\r\n>>\r\n>> The phenomenon is called "aliasing".\r\n>>\r\n>> You can solve it by copying row Arrays.\r\n>>\r\n>> rows = []\r\n>>\r\n>> sth.fetch do |row|\r\n>>   rows << row.to_a # if rows is not an Array\r\n>>  rows << row.dup # if rows is an Array\r\n>> end\r\n>>\r\n>\r\n> Would `Array(row)` not be a clean implementation of this ?\r\n>\r\n> peterv@ASUS:~$ irb\r\n> 001:0> row = "a string"\r\n> => "a string"\r\n> 002:0> Array(row)\r\n> => ["a string"]\r\n> 003:0> row = [:array_entry]\r\n> => [:array_entry]\r\n> 004:0> Array(row)\r\n> => [:array_entry]\r\n\r\nJudge for yourself:\r\n\r\nirb(main):001:0> a = [:x]\r\n=> [:x]\r\nirb(main):002:0> b = Array(a)\r\n=> [:x]\r\nirb(main):003:0> b.equal? a\r\n=> true\r\nirb(main):004:0> a.object_id == b.object_id\r\n=> true	1.9.3	shortcutter@googlemail.com	2012-02-08 09:52:00	Robert	Klemme	2012-05-02 12:09:07.875482	2012-05-03 18:48:42.678289
115	ruby-talk	Language	Numeric#coerce docs are a disaster	language, issue, track, open, ticket, coerce, docs, documentation	> 1) I don't know how coerce works.\r\n> 2) I don't know how to open a ticket, and I don't plan on learning. That's too much of a hassle.\r\n> 3) If I did know how coerce worked, I should be able to add my comments directly to the docs.\r\n\r\nI would think this information could have gone into the original email you sent with the complaints about the documentation. :)\r\n\r\nSince you've ruled out learning how to open a ticket (although I'm curious how you know it's too much hassle when you don't know what it involves), for the sake of anyone else wondering how it's done, these might be of use:\r\n\r\n<a href="http://blog.segment7.net/2011/05/09/ruby-1-9-3-documentation-challenge">http://blog.segment7.net/2011/05/09/ruby-1-9-3-documentation-challenge</a>\r\n<a href="http://blog.steveklabnik.com/2011/05/10/contributing-to-ruby-s-documentation.html">http://blog.steveklabnik.com/2011/05/10/contributing-to-ruby-s-documentation.html</a>\r\n\r\nThe Ruby issue tracker is at http://redmine.ruby-lang.org/ too.	1.9.3	adam@aprescott.com	2011-08-02 12:26:00	Adam	Prescott	2012-05-02 12:01:39.542521	2012-05-11 18:23:17.120875
349	ruby-talk	Gem	Suggestions for a distributed job queue	resque, queue, job, gem, link	> Given that, is there an existing job queue that meets my needs that I should be checking out?\r\n\r\nI don't think this exactly meets everything you are after, but it gets close in a lot of ways:\r\n\r\n  <a href="http://github.com/blog/542-introducing-resque">http://github.com/blog/542-introducing-resque</a>	1.9.3	james@graysoftinc.com	2009-12-22 13:35:00	James Edward	Gray II	2012-05-02 12:44:07.820362	2012-05-11 20:31:30.327343
518	ruby-talk	Archive	Organizing a complex gem	single, package, archive, howto, url	<a href="https://github.com/rubyworks/setup/wiki/Creating-Packages">https://github.com/rubyworks/setup/wiki/Creating-Packages</a>\r\n\r\n<a href="https://github.com/rubyworks/setup/wiki/Creating-Packages">https://github.com/rubyworks/setup/wiki/Creating-Packages</a>	1.9.3	transfire@gmail.com	2012-01-06 11:33:00	Intransition		2012-05-04 19:52:18.876765	2012-05-11 21:03:02.806817
506	ruby-talk	Array	Creating an array?	array, map, create, consise	> Is there a short way of creating array of numbers\r\n> with, for example, step of 10, like this:\r\n>\r\n> 10,20,30,40,50\r\n>\r\n> By short I mean without going through iteration loop:\r\n>\r\n> array=[]\r\n> (1..5).each do|i|\r\n>      array.push i*10\r\n> end\r\n>    \r\n\r\n(1..5).map do |i|\r\n   i*10\r\nend\r\n\r\nThis still has an explicit loop (or at least as explicit a loop as yours \r\ndoes), but is somewhat more concise.\r\n\r\nOn 1.8.7+ you can also do 10.step(50,10).to_a.	1.9.3	sepp2k@googlemail.com	2009-12-28 20:37:00	Sebastian	Hungerecker	2012-05-04 00:33:45.807414	2012-05-04 00:33:45.807414
311	ruby-talk	Struct	Problem with method	struct, new, method, parameter, class, reopen	> Why method pole= doesn't work??\r\n>\r\n> Kolo = Struct.new (:x,:y,:r)\r\n> Kwadrat = Struct.new (:x,:y,:a)\r\n> Prostokat = Struct.new (:x,:y,:a,:b)\r\n>\r\n> module Domieszka\r\n>   attr_accessor :x, :y\r\n>\r\n>   def moveto(x,y)\r\n>      @x = x\r\n>      @y = y\r\n>   end\r\n> end\r\n>\r\n> class Kolo\r\n>   include Domieszka\r\n>   def pole=\r\n>   @r = r\r\n>   pole = r * Math.PI\r\n>   return pole\r\n>   end\r\n> end\r\n\r\nThere's a bunch of things here to pay attention to.\r\n\r\n* Methods ending in equal signs need paramaters. e.g. `def pole=(radius)`\r\n\r\n* Assignments in Ruby always return the RHS of the assignment, so your\r\nexplicit `return pole` won't work.\r\n\r\n* If you want the parentheses to delimit a method call, you must put them\r\ndirectly after the name (to avoid ambiguous syntax). So this means\r\n`Struct.new(:a, :b, :c)` not `Struct.new (:a, :b, :c)`\r\n\r\n* Structs don't store their data in instance variables of the given name,\r\nso when you say `@r = r` you're not setting the variable that will be\r\nreturned when the method r is invoked. Instead, use the setter that the\r\nstruct provides (I consider this the right way to set things, anyway) So\r\n`self.r = r`\r\n\r\n* There are some other options for your Kolo class that I think would be better:\r\n\r\nKolo = Struct.new :x, :y, :r do\r\n  def pole=(...)\r\n    ...\r\n  end\r\nend\r\n\r\nor alternatively\r\n\r\nclass Kolo < Struct.new(:x, :y, :z)\r\n  def pole=(...)\r\n    ...\r\n  end\r\nend\r\n\r\nI like both of these better than reopening the class later.	1.9.3	josh.cheek@gmail.com	2012-02-02 22:00:00	Josh	Cheek	2012-05-02 12:38:01.250282	2012-05-06 17:54:16.335918
538	ruby-talk	Socket	Choosing target network for UDP broadcast	udp. braodcast, ibind, target, network	>> If I send a UDP packet containing 'foo' like this:\r\n>>\r\n>> socket = UDPSocket.new\r\n>> socket.setsockopt(Socket::SOL_SOCKET, Socket::SO_BROADCAST, true)\r\n>> socket.send('foo', 0, '<broadcast>', 40001)\r\n>>\r\n>> then wireshark tells me it gets sent from 192.168.x.y. However, my\r\n>> server is listening on localhost:40001. How can I choose the source\r\n>> address from which (and the interface via which) the socket will send\r\n>> its packet?\r\n>\r\n> Use #bind - http://ruby-doc.org/stdlib-1.9.3/libdoc/socket/rdoc/Socket.html#method-i-bind\r\n\r\nOops. Wrong link. This is the right one:\r\n\r\n<a href="http://ruby-doc.org/stdlib-1.9.3/libdoc/socket/rdoc/UDPSocket.html#method-ibind">http://ruby-doc.org/stdlib-1.9.3/libdoc/socket/rdoc/UDPSocket.html#method-ibind</a>		sean.ohalpin@gmail.com	2012-02-03 13:49:00	Sean	O'Halpin	2012-05-04 21:23:29.73439	2012-05-11 21:07:13.714823
64	ruby-talk	Array	Array problem	regex, array, string, filter	> > I have an array like this:\r\n> > array = [ "manyThings.mp3", "myLike.gif", "moreCoco.bmp",\r\n> > "theFormat.bmp"]\r\n> >\r\n> > and I want to make some comparison to eliminate all the words in the\r\n> > array that are NOT of the bmp format.  So at the end the array will look\r\n> > like this:\r\n> >\r\n> > array = ["moreCoco.bmp", "theFormat.bmp"]\r\n> >\r\n> > is there a way to do this???\r\n\r\nUse a regex with the end of string anchor:\r\n\r\narray.delete_if { |elem| not elem =~ /.bmp$/i }	1.9.3	chezball@gmail.com	2008-12-17 20:53:00	Joshua	Ball	2012-05-02 11:54:42.560808	2012-05-11 15:39:17.299118
408	ruby-talk	XPath	Using Nokogiri	xpath, tutorial, link, url, basic	> Now, I just need to understand completely WHY/HOW it works. :-)\r\n\r\nHere is a pretty good basic XPath tutorial:\r\n\r\n<a href="http://www.w3schools.com/XPath/xpath_nodes.asp">http://www.w3schools.com/XPath/xpath_nodes.asp</a>	1.9.3	bbxx789_05ss@yahoo.com	2009-11-13 08:09:00	7stud		2012-05-02 12:56:17.463665	2012-05-11 20:45:55.266395
291	ruby-talk	Time	Time and UTC problems	time, utc, output, convert, method	t = Time.now\r\nputs t\r\nputs Time.utc(*t.to_a)\r\n\r\n--output:--\r\n2011-07-22 19:25:26 -0700\r\n2011-07-22 19:25:26 UTC	1.9.3	bbxx789_05ss@yahoo.com	2011-07-23 04:26:00	7stud		2012-05-02 12:34:47.558713	2012-05-05 01:11:57.046866
252	ruby-talk	Array	Array problem	array, reject, compare	> I have an array like this:\r\n> array = [ "manyThings.mp3", "myLike.gif", "moreCoco.bmp",\r\n> "theFormat.bmp"]\r\n> \r\n> and I want to make some comparison to eliminate all the words in the\r\n> array that are NOT of the bmp format.  So at the end the array will look\r\n> like this:\r\n> \r\n> array = ["moreCoco.bmp", "theFormat.bmp"]\r\n> \r\n> is there a way to do this???\r\n\r\nYep, try this:\r\n\r\narray.reject! {|elem| elem.split(".").last != "bmp"}	1.9.3	swittenk@yahoo.com	2008-12-18 05:47:00	Sebastian	Witten	2012-05-02 12:29:21.452459	2012-05-11 15:39:32.945508
356	ruby-talk	String	How to indent strings(make them line up)?	string, indent, ljust, column, align	> I have a question about indenting string.\r\n>\r\n> There are strings like below:\r\n>\r\n> www.google.com => 123.123.123.12\r\n> www.ibm.com => 123.112.123.12\r\n> www.iowahawkeyes => 123.123.112.12\r\n>\r\n> i want to make above strings like the following:\r\n>\r\n> www.google.com     => 123.123.123.12\r\n> www.ibm.com        => 123.112.123.12\r\n> www.iowahawkeyes   => 123.123.112.12\r\n>\r\n>\r\n> original code was\r\n>\r\n> puts (dns + " => " + ip)\r\n>\r\n> I tried next code\r\n>\r\n> puts (dns + "  "*(20 - dns.length) + " = > " + ip)\r\n>\r\n> but it did not work well. please teach me how to do it.\r\n\r\nYou could do\r\n\r\nputs "#{dns.ljust(20)} => #{ip}"	1.9.3	justincollins@ucla.edu	2009-12-08 02:10:00	Justin	Collins	2012-05-02 12:46:38.828231	2012-05-11 16:18:36.432433
547	ruby-talk	File	What's up with "Dir.glob"?	File:FNM_CASEFOLD	hm the doc says that File::FNM_CASEFOLD is ignored but on my system it works:\r\n\r\nDir.glob("w{dp,rr,ip,sl,cr}*.pdf",File::FNM_CASEFOLD)	1.9.3	hanmac@gmx.de	2011-07-27 13:35:00	Hans	Mackowiak	2012-05-04 21:54:32.806791	2012-05-04 21:54:32.806791
549	ruby-talk	Char	Why doesn't return ascii code?	ruby, ord, chr, 1.9, ascii, value, return	> I don't understand what do you mean. Please explain it to me very basically.\r\n\r\nUse this instead for 1.9.2:\r\n\r\n'a'.ord\r\n97.chr\r\n\r\nif you want to keep with the semantics of ? then you can always add\r\nordinal after the ? sigil which will convert it to a string:\r\n?a.ord		stu@rubyprogrammer.net	2011-07-24 13:50:00	Stu		2012-05-04 22:01:29.907865	2012-05-11 17:40:22.706804
481	ruby-talk	Time	Error: to_date ...	time, error, Time.local, Time.now, false	> After a ruby upgrade I have an error with to_date.\r\n>\r\n> C:>ruby Test_todate.rb\r\n> Test_todate.rb:7:in `<main>': undefined method `to_date' for\r\n> "2011-01-01":String (NoMethodError)\r\n>\r\n> Any advice ?\r\n>\r\n> code is here\r\n> --\r\n> require 'rubygems'\r\n> require 'active_support'\r\n>\r\n>\r\n> t = Time.now\r\n>\r\n>  if  ( t > "2011-01-01".to_date )\r\n>    end\r\n\r\n16:49:38 $ ruby19 -e 'p(Time.now > Time.local("2011-01-01"))'\r\nfalse	1.9.3	shortcutter@googlemail.com	2010-11-15 16:50:00	Robert	Klemme	2012-05-02 14:10:27.244801	2012-05-05 19:15:50.58836
239	ruby-talk	Tutorial	Web Application from Scratch - like PHP	tutorial, links, rubykoans, rubymonk, testfirst.org, learntoprogram	> I intend to learn Ruby thoroughly before jumping to any Ruby web\r\n> framework. How do I create simple web applications using plain Ruby (and\r\n> a server like WEBrick of course)?\r\n\r\nIf Rack is too hardcore for you, try Sinatra. Here's the code for\r\nSinatra's Hello World app:\r\n\r\n  require "sinatra"\r\n\r\n  get "/hello" do\r\n    "<h1>Hello!</h1>"\r\n  end\r\n\r\nStick that in "hello.rb" and run "ruby hello.rb" and visit\r\n<a href="http://localhost:4567/hello">http://localhost:4567/hello</a> to see it in action. And it's easy to\r\ndeploy a Sinatra app to Heroku too.\r\n\r\nIt has support for a fair number of web features like HTML templates\r\nand status codes and such and plenty of docs at\r\nhttp://www.sinatrarb.com/\r\n\r\nSinatra doesn't do databases on its own, but there's nothing stopping\r\nyou from using ActiveRecord or DataMapper or Sequel or even DBI [1] to\r\naccess a relational DB inside your requests.\r\n\r\n[1] http://ruby-dbi.rubyforge.org/\r\n\r\n> I intend to learn Ruby thoroughly before jumping to any Ruby web\r\n> framework.\r\n\r\nI applaud your decision! Too many people learn Ruby as an afterthought\r\nto Rails, and pick up lots of misconceptions and bad habits as a\r\nresult.\r\n\r\nIf you need some pointers to online Ruby tutorials, let me recommend:\r\n\r\n  <a href="http://testfirst.org/">http://testfirst.org/</a> and <a href="http://testfirst.orglearn_ruby">http://testfirst.org/learn_ruby</a>\r\n  <a href="http://rubykoans.com/">http://rubykoans.com/</a>\r\n  <a href="http://rubymonk.com/">http://rubymonk.com/</a>\r\n  <a href=http://pine.fm/LearnToProgram/">http://pine.fm/LearnToProgram/</a>	1.9.3	alex@stinky.com	2012-01-24 12:13:00	Alex	Chaffee	2012-05-02 12:26:50.973612	2012-05-11 19:59:28.69825
552	ruby-talk	Language	Can't open url with a subdomain with an underscore	URI, underscore, invalid character. MRI	Underscore is not a valid character in a hostname, thus Ruby rejects it.\r\n\r\nTo allow it, you have to manually add it to the regex in library file\r\nuri/common.rb, line 368. (On my Windows install,\r\nF:\\Ruby193\\lib\\ruby\\1.9.1\\uri), to looks like this:\r\n\r\n  ret[:HOSTNAME] = hostname = "(?:[a-zA-Z0-9\\\\-._]|%\\\\h\\\\h)+"\r\n\r\n(I just added an underscore there.) This might of course break URI\r\nparsing for other protocols.	1.9.3	matma.rex@gmail.com	2012-03-30 13:28:00	Bartosz	DziewoÅski	2012-05-04 22:17:30.72587	2012-05-04 22:17:30.72587
204	ruby-talk	Block	What is define_method with block_given?	block, explicit, accept, &block	> I want to change following code:\r\n>\r\n> class A\r\n>  def method_name(*args)\r\n>    if block_given?\r\n>      # do something with the block\r\n>      yield(*args)\r\n>      :block_is_given\r\n>    else\r\n>      # do other stuff\r\n>      :block_not_given\r\n>    end\r\n>  end\r\n> end\r\n>\r\n> to this code:\r\n>\r\n> class A\r\n>  %w(a b c d).each do |method_name|\r\n>    define_method(method_name) do |*args|\r\n>      if block_given?\r\n>        # do something with the block\r\n>        yield(*args)\r\n>        :block_is_given\r\n>      else\r\n>        # do other stuff\r\n>        :block_not_given\r\n>      end\r\n>    end\r\n>  end\r\n> end\r\n>\r\n> But, I get this,\r\n>\r\n> A.new.a #=> :block_not_given\r\n> A.new.a { "Hello World" } #=> :block_not_given\r\n>\r\n> did I miss something?\r\n> How do I can get\r\n>\r\n> A.new.a { "Hello World" }\r\n>\r\n> to produce #=> :block_is_given and executes the block?\r\n>\r\n\r\nblock_given? gets confused about what context it should be looking in. To\r\nget around it, just explicitly accept a block.\r\n\r\nclass A\r\n %w(a b c d).each do |method_name|\r\n   define_method(method_name) do |*args, &block|\r\n     if block\r\n       # do something with the block\r\n       block.call(*args)\r\n       :block_is_given\r\n     else\r\n       # do other stuff\r\n       :block_not_given\r\n     end\r\n   end\r\n end\r\nend\r\n\r\n\r\nA.new.a # => :block_not_given\r\nA.new.a { "Hello World" } # => :block_is_given	1.9.3	josh.cheek@gmail.com	2012-01-22 01:27:00	Josh	Cheek	2012-05-02 12:16:53.585519	2012-05-11 17:38:49.467959
245	ruby-talk	Closure	How are closures implemented?	closure, implementation, gc, heap, stack, linked list	> How are closures implemented?  How does the closure know about its\r\n> environment?\r\n\r\nThe closure *is* the environment.\r\n\r\nAre you familiar with local variables allocated on a stack? Then instead \r\nimagine stack frames allocated out of the heap, in a linked list. \r\nInstead of being deallocated at the end of a function, they are \r\ngarbage-collected when there are no more references to them, just like \r\nany other object.	1.9.3	b.candler@pobox.com	2012-02-20 23:22:00	Brian	Candler	2012-05-02 12:26:51.205557	2012-05-05 01:38:36.454795
388	ruby-talk	Version Control	Accessing SVN repository through Ruby?	version control, svn	> Did anyone ever get comfortable with any interface to Subversion from \r\n> Ruby?\r\n\r\nI just came across detailed info on installing the ruby subversion bindings here:\r\n\r\n<a href="http://warehouseapp.com/installing/ruby-subversion-bindings">http://warehouseapp.com/installing/ruby-subversion-bindings</a>\r\n\r\nwarehouseapp itself is now open source, so you can look through it and see how they use it.\r\n 	1.9.3	b.candler@pobox.com	2009-05-20 22:00:00	Brian	Candler	2012-05-02 12:52:22.741134	2012-05-11 20:40:51.811494
249	ruby-talk	String	Why string.scan fails when match works?	string, gsub, mechanize, gem, link	> I'm very new to coding of any kind, and I'm trying to learn Ruby by\r\n\r\nWelcome to the world of Ruby - and programming!\r\n\r\n> working through some projects that are relevant to me. I'm working on a\r\n> small project to pull the headlines out of a news website for me. I'm\r\n> able to get match working just fine. I've tried switching to string.scan\r\n> to be able to iterate and nothing is returned. I can't figure out why\r\n> not, and would appreciate suggestions.\r\n\r\n> page_string='junk'\r\n> open("http://www.scatoday.net/") {|f|\r\n>    page_string = f.read\r\n>   }\r\n\r\nYou could simply do\r\n\r\npage_string = open("http://www.scatoday.net/") {|f| f.read}\r\n\r\nor even this if you want to get fancy\r\n\r\npage_string = open("http://www.scatoday.net/", &:read)\r\n\r\n> #THIS one works, one time\r\n>  #rezstring = //node/[0-9]+.*title=".*">/.match(page_string)\r\n> #THESE Don't\r\n> #page_string.scan(//node/[0-9]+.*title=".*">/)\r\n\r\nWhat does "does not work" mean?  I get 80 matches.\r\n\r\n> #page_string.gsub(//node/[0-9]+.*title=".*">/)\r\n\r\nThis cannot work since you either need a second argument or a block.\r\nPlease post error messages or a more clear description of what you think\r\ndoes not work.\r\n\r\nBtw, it seems for what you do Mechanize could be a good tool.\r\n\r\n<a href="http://mechanize.rubyforge.org/">http://mechanize.rubyforge.org/</a>	1.9.3	shortcutter@googlemail.com	2012-03-26 09:43:00	Robert	Klemme	2012-05-02 12:28:19.942363	2012-05-11 20:01:12.66817
221	ruby-talk	Process	How to know if a process is zombie?	process, zombie, detect, trep, SIGCHLD, pid	> After some forks I need to know if a process still is alive\r\n> or not, but in case it's alive I also need to know if it's a\r\n> zombie process (it died without Process.wait or Process.detach).\r\n>\r\n> Unfortunatelly I couldn't find how to know it using Process module:\r\n>\r\n> Is there any other way to determine if a given PID is zombie?\r\n\r\n  trap "SIGCHLD" do |sig| puts "A child became a zombie." end\r\n\r\nThis tells you when it happened. As far as I know there is no way to find out which process it was. I recommend waiting (Process.waitpid) for every pid you forked.	1.9.3	lists@bertram-scharpf.de	2009-12-26 20:18:00	Bertram	Scharpf	2012-05-02 12:20:59.06558	2012-05-11 15:21:58.081854
273	ruby-talk	Dir	Dir.entries showing . and .. , how come?	reject, entries, file, list, .., .	>> Why is it that there are '.' and '..' in my output?\r\n>\r\n> Those are hidden directories on Unix, pointing to the current and parent\r\n> directory. I'm not sure why they're on Windows, too...\r\n>\r\n>> I want to create a list of all the files in this directory without \r\n> showing the . and .. at the top of the list. What do you do for this?\r\n>\r\n> I'd do this:I\r\n>\r\n> #snippet\r\n> myfolder = "c:/myfolder"\r\n>\r\n> Dir.entries(myfolder).each do |filename|\r\n>  puts filename unless filename =~ /^..?$/\r\n> end\r\n> #end snippet\r\n>\r\n> You could do it other ways, too. I'm not sure which is faster.\r\n>\r\n> Of course, this might still not do what you want -- it's going to include\r\n> folders, too. If you just want files, you could do something like this:\r\n>\r\n> Dir.entries(myfolder).each do |filename|\r\n>  puts filename if File.file?(filename)\r\n> end\r\n\r\nI would just do something like this:\r\n\r\nDir.entries(dir).reject{|entry| entry =~ /^.{1,2}$/}\r\n\r\nBut my regex-fu may be weak. Since it's only 2 possibilities, it might\r\nbe simpler to just do this:\r\n\r\nDir.entries(dir).reject{|entry| entry == "." || entry == ".."}\r\n\r\nThat's really just semantics, though.	1.9.3	imphasing@gmail.com	2009-07-20 16:34:00	Alex		2012-05-02 12:31:07.851686	2012-05-03 23:59:23.534805
529	ruby-talk	Hash	Ruby Challenge	hash, word frequency, file, read, each	Why does this sound like a school assignment?\r\n\r\n    file = 'sample.txt'\r\n    freq = Hash.new{|h,k| h[k] = 0}\r\n    File.read(file).scan(/\\w+/) do |w|\r\n      freq[w] += 1\r\n    end\r\n    freq.each do |w,c|\r\n      puts "#{c} #{w}"\r\n    end\r\n\r\nUntested.	1.9.3	transfire@gmail.com	2011-11-04 20:53:00	Intransition		2012-05-04 20:37:49.729694	2012-05-11 17:12:42.726019
530	ruby-talk	lambda	Is it possible to break a loop from within an internal lambda function?	lambda, iteration, break, block, boolean	> This code works because 'exit' within the lambda within the block\r\n> stops the loop. However, I don't want to stop the program. I need to\r\n> use break rather than exit.\r\n>\r\n> #I want to use: solve_by_iter { |test| lambda{puts test; break}.call\r\n> if (1..6).all?{|num| test%num == (num-1)} }\r\n\r\n\r\nThis seems like an odd code arrangement.\r\n\r\nWhat's wrong with returning a boolean value from the inner lambda and\r\nbreaking in the block?\r\n\r\nsolve_by_iter { |test| break if lambda{puts test; false}.call }	1.9.3	skye.shaw@gmail.com	2010-11-14 01:18:00	Skye	Shaw	2012-05-04 20:41:42.886978	2012-05-04 20:41:42.886978
9	ruby-talk	Web	Web Application from Scratch - like PHP	web, application, app, url, link, rack	<a href="http://rack.rubyforge.org/">http://rack.rubyforge.org/</a>	1.9.3	steve@steveklabnik.com	2012-01-24 01:59:00	Steve	Klabnik	2012-05-02 11:37:03.222151	2012-05-11 18:03:40.29038
1	ruby-talk	Transpiler	Ruby to C transpiler	ruby to c, compiler, translator	> Are there any?\r\n\r\n<a href="http://lmgtfy.com/?q=%22ruby+to+c%22">http://lmgtfy.com/?q=%22ruby+to+c%22</a>	1.9.3	ryand-ruby@zenspider.com	2011-07-26 12:13:00	Ryan	Davis	2012-05-02 11:37:02.864035	2012-05-11 17:59:35.172444
259	ruby-talk	CSS	Truncation using Pixels	CSS3, text-overflow, ellipsis, after	> We need the truncation method to display the text in the browser.\r\n\r\nThat's what CSS is for. Set a width on the containing element and use\r\nthe overflow: hidden to truncate.\r\n\r\nThere's a CSS3 attribute 'text-overflow' which provides an ellipsis on\r\nthe end of line where truncation occurs; if you need to support older\r\nbrowsers you can use the :after pseudo-element.	1.9.3	hassan.schroeder@gmail.com	2011-12-08 13:46:00	Hassan	Schroeder	2012-05-02 12:30:23.474108	2012-05-05 00:50:43.915928
114	ruby-talk	Time	Add 10 minutes to parsed time stamp?	time, addition, parse	> How can I add 10 minutes to this time stamp? Thanks. MC\r\n> \r\n> ServerTime = 'Wed Dec 09 16:05:00 -0600 2009'\r\n\r\nHere ServerTime is a String and hence cannot do any time related \r\ncalculations.  You probably rather want:\r\n\r\nrequire 'date'\r\n\r\nirb(main):017:0> server_time = DateTime.parse 'Wed Dec 09 16:05:00 -0600 2009'\r\n=> #<DateTime: 707090521/288,-1/4,2299161>\r\nirb(main):018:0> server_time.to_s\r\n=> "2009-12-09T16:05:00-06:00"\r\n\r\nNow you can add 10 minutes:\r\n\r\nirb(main):019:0> (server_time + 10.0 / 24 / 60).to_s\r\n=> "2009-12-09T16:15:00-06:00"	1.9.3	shortcutter@googlemail.com	2009-01-06 17:15:00	Robert	Klemme	2012-05-02 12:01:39.510784	2012-05-03 17:57:31.487865
379	ruby-talk	HTTP	Http proxy, string chomp error is nil?	http, headers, order, random, rely	> I'm building a proxy, I'm having a problem with processing the get request\r\n> I receive from the client.\r\n> ...\r\n> this works every time in irb testing, but is inconsistent when my script\r\n> is running, the proxy works 90% of the time. when www.yahoo.com is\r\n> requested the script crashes with Host nil error but when yahoo.com is\r\n> request the script works fine...\r\n>...\r\n>host = header.to_a[1].chomp[6..-1] => nil\r\n\r\nDo you realize that the headers in an HTTP request can come in any order?\r\nThere is absolutely no guarantee that Host: will be first.  You're relying\r\non that assumption.	1.9.3	timr@probo.com	2012-01-08 22:21:00	Tim	Roberts	2012-05-02 12:51:40.111609	2012-05-05 20:07:48.917517
161	ruby-talk	Time	Is high-speed sorting impossible with Ruby?	time, ruby, sort, speed, readlines, map, faster	> Feel free to fork and add more.  Below is the result of running all the\r\n> solutions I have up there so far.  My takeaway from all of this: stick with\r\n> normal Ruby idioms (see the standard_ruby.rb solution) and you will get\r\n> pretty close.  The rest of the solutions are just optimizing for the\r\n> specific problem and doing this kind of thing is only necessary when you\r\n> really need the seconds.  Also, compiled languages beat interpreted\r\n> languages, but we all knew that, didn't we? We don't use Ruby for its\r\n> performance after all.\r\n>\r\n> time ruby standard_ruby.rb < million.txt > million_sorted_3.txt\r\n>\r\n> real 0m1.260s\r\n> user 0m1.156s\r\n> sys 0m0.101s\r\n\r\nI just poked at this. Here's your code:\r\n\r\n  GC.disable\r\n  count = STDIN.readline.to_i\r\n  list = []\r\n  while count > 0\r\n    list << STDIN.readline.to_i\r\n    count -= 1\r\n  end\r\n  puts list.sort\r\n\r\nSome notes:\r\n\r\n1) GC.disable was a good idea here and shaved off a bit (not that much, but a worthwhile amount), but will kill you on some of these problems.\r\n\r\n2) You're growing list as you add to it when you know the size from the beginning. Better to do one allocation.\r\n\r\n3) the input data seems to be "honest" (in that the count is actually right), so it is ignorable. Knowing this, the real ruby idiomatic way is to read the whole thing in in one go and that is faster than yours by about 13% on the top end:\r\n\r\n  $stdin.gets\r\n  puts $stdin.readlines.map(&:to_i).sort\r\n\r\nNeither solution seems fast enough to reach their arbritrary deadline of 5 seconds (with their data)... but it is good enough for me. I love the fact that I can write a 1-2 liner and be done and onto the next problem while others are still bit-twiddling in their lower level languages...	1.9.3	ryand-ruby@zenspider.com	2011-11-28 00:05:00	Ryan	Davis	2012-05-02 12:11:30.732289	2012-05-05 18:36:12.137839
23	ruby-talk	HTTP	Accessing a web page, finding and downloading a file	web, i/o, xml, search, regex	httparty / rest-client / standard Net::HTTP for Internet access;\r\n\r\nNokogiri / hpricot / a couple of regexps for HTML. That's all you need\r\nin most cases.	1.9.3	matma.rex@gmail.com	2012-02-23 15:11:00	Bartosz	DziewoÅski	2012-05-02 11:44:38.971814	2012-05-11 15:31:49.369732
236	ruby-talk	Emoticon	Rubymoticons	emoticon, ruby, examples, valid, code	I was demonstrating injection of a symbol, and noticed a familiar\r\npattern of characters.  That inspired a bit more investigation.  So\r\nnow I present some basic Rubymoticons:\r\n\r\n[].inject(       :-)\r\n{}[              :-]\r\n->() {           :-}\r\n\r\nThese are perfectly valid Ruby code, and evaluate to nil, nil, and a lambda.\r\n\r\nOf course, the nose is easily substitutable, and noseless ones can use any mouth they please... but what about changing the eyes, or the mouth on full-size ones, and additional adornments?  Let's see how creative you can get, especially in as few characters as possible on either side.	1.9.3	rubytalk2dave@davearonson.com	2012-02-28 12:02:00	Dave	Aronson	2012-05-02 12:26:14.894786	2012-05-07 00:39:50.78789
106	ruby-talk	String	How to replace "" from string?	string, delimiter, gsub, modify, path	I believe you need to add delimiters, it should look like\r\n\r\nPath.gsub(/"\\", "\\\\"/)	1.9.3	yourelguapo@gmail.com	2011-07-21 17:23:00	Nick	S	2012-05-02 12:00:12.481423	2012-05-05 18:37:18.747614
49	ruby-talk	Array	Creating 2-D array from 1-D array	array, 2d, construct, slice	Here are some suggestions, which should help reduce the use of indices\r\nand local variables.\r\n\r\nWhen constructing the array b, you don't need to reference a position.\r\nYou can start with an empty array, and push the new pairs onto the end:\r\n\r\ninstead of b = Array.new,  write b = []\r\ninstead of b[k] = [a1, a2], write b << [a1, a2]\r\n\r\nThat gets rid of k.\r\n\r\nTo get the pairs, I suggest you investigate 'slice'.\r\n\r\ne.g. a.slice(0, 2) returns a two-element array from the 0th position of\r\na: [1, 2]\r\n\r\nYou will also need to change your looping mechanism if you use slice,\r\nbut you should be able to get rid of a1 and a2.	1.9.3	peter.c.r.lane@googlemail.com	2011-11-27 14:43:00	Peter	Lane	2012-05-02 11:52:04.330277	2012-05-03 23:19:58.788521
395	ruby-talk	Gem	Check email accounts with a ruby script	email, web, captcha, Watir Webdriver	> I've seen a Ruby script that could check web-based email accounts (e.g.,\r\n> gmail, yahoo, hotmail, etc.) by opening a web browser. I'm not sure what\r\n> triggers the yahoo captcha challenge.  However, I'd like to know if\r\n> there was free Ruby code for a script to check email accounts.  In the\r\n> script you hardcode the username and password.  I don't have much\r\n> experience with Ruby.\r\n\r\nYears ago I used FireWatir to drive Firefox to hit GMail; Watir\r\nWebdriver looks to be the modern equivalent:\r\n\r\n<a href="http://watirwebdriver.com/">http://watirwebdriver.com/</a>\r\n\r\nrequire 'watir-webdriver'\r\nb = Watir::Browser.new\r\nb.goto 'bit.ly/watir-webdriver-demo'\r\nb.text_field(:id => 'entry_0').set 'your name'\r\nb.select_list(:id => 'entry_1').select 'Ruby'\r\nb.select_list(:id => 'entry_1').selected? 'Ruby'\r\nb.button(:value => 'Submit').click\r\nb.text.include? 'Thank you'\r\n\r\n<a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/374100">http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/374100</a>\r\n\r\nCaptchas would be a problem though :-)  A more reliable approach may\r\nbe to use another protocol or API for the service (e.g. REST,\r\nAtom/RSS, IMAP).	1.9.3	brabuhr@gmail.com	2011-11-26 22:41:00	B	Rabuhr	2012-05-02 12:53:10.169937	2012-05-11 20:43:39.546499
88	ruby-talk	1.9	Ruby 1.9.1 changes?	language, 1.9, changes	> Can someone give me a rational assessment of the differences between\r\n> the two language versions, and which one I should continue to pursue?\r\n\r\nVery short answer:\r\n- new virtual machine (previously just AST interpreter)\r\n- memory diet for some objects (Object, Array, String etc)\r\n- improved speed (see <a href="http://antoniocangiano.com/2008/12/09/the-great-ruby-shootout-december-2008/">http://antoniocangiano.com/2008/12/09/the-great-ruby-shootout-december-2008/</a>)\r\n- added character encoding support (previously works only with raw bytes)\r\n- new syntax for hashes with symbols as keys, hashes preserve keys order\r\n- many changes to API (improved, added consistency, removed deprecated code etc...)\r\n- changes in language semantics (for example block arguments now works (almost?) the same as method arguments)\r\n- new lambda literal:  ->\r\n- external iterators (class Enumerator) now are built in\r\n- new concept such a fiber (class Fiber)\r\n- native threads (but with GIL like python)\r\n- rubygems, rake are built in\r\n- minitest supercedes old test/unit	1.9	radek.bulat@gmail.com	2009-02-03 18:47:00	Radek	Bulat	2012-05-02 11:55:46.762915	2012-05-11 18:20:51.020024
535	ruby-talk	Present	Roots Module	christmas, present, code	As a Christmas/Holiday present to the Ruby community I finally\r\ncompleted creating a versatile module which will find the accurate\r\nreal and complex roots of +|- real values.\r\n\r\nThis work evolved from concerns raised in this thread:\r\n\r\n<a href="http://groups.google.com/group/comp.lang.ruby/browse_thread/thread/9b8a417b8f3b79f3#">http://groups.google.com/group/comp.lang.ruby/browse_thread/thread/9b8a417b8f3b79f3#</a>\r\n\r\nfrom which I expanded on this work and incorporated some suggestions.\r\n\r\nI have tested this mixed in this module to classes Float, Integer, and\r\nBigDecimal successfully.\r\n\r\nI tested this on Ruby versions 1.9.1p243, 1.8.7p174 and\r\nRuby Enterprise Edition 1.8.6 20090610.\r\n\r\nConstructive  feedback is welcome.\r\n\r\nFile: roots.rb\r\n------------------------------------------------------\r\nmodule Roots\r\n=begin\r\nMixin Roots into Integer, BigDecimal, Float to add\r\nmethods root & roots, to find the real|complex roots\r\nof +|- real values.\r\n\r\nUse syntax:  val.root(n,{k}}\r\nroot(n,k=0) n is root (1/n) exponent, integer > 0,\r\n            k is nth root 1..n , integer >=0\r\nIf k not given default root returned, which are:\r\nfor +val => real root |val**(1.0/n)|\r\nfor -val => real root -|val**(1.0/n)| when n is odd\r\nfor -val => first complex root -val   when n is even\r\nfor any val => first ccw root real|complex when k > 0\r\n\r\n9.root(2); 8.root(3,1), -32.root(5,3), -100.43.root 6,6\r\n\r\nUse syntax:  val.roots(n,{opt}}\r\nroots(n,opt=0) n is root (1/n) exponent, integer > 0,\r\n               opt area optional input options below\r\n0      : default (no input), return array of n ccw root vals\r\n'c'|'C': complex, return array of complex roots, nil if none\r\n'e'|'E': even, return array even numbered roots, nil if none\r\n'o'|'O': odd , return array odd  numbered roots, nil if none\r\n'i'|'I': imag, return array of imaginary roots, nil if none\r\n'r'|'R': real, return array of real roots, nil if none\r\n\r\n293481349432.roots(9); -892.roots(4,'real'); 22.2.roots 3,'i'\r\n=end\r\n\r\n  require 'complex'\r\n  include Math\r\n\r\n  def root(n,k=0) # k=1..n; k=0 for default root\r\n    raise "Root not integer >0" unless n.kind_of?(Integer) && n>=1\r\n\traise "Index k not an integer" unless k.kind_of?(Integer)\r\n    return self if n == 1 || self == 0\r\n    mag = self.abs**n**-1\r\n\treturn rootn(mag,k-1,PI/n) if k>0 # nth root, k = 1..n, of any real\r\n\treturn mag if self > 0            # pos real default\r\n\treturn -1*mag if n&1 == 1         # neg real default, n odd\r\n\treturn rootn(mag,0,PI/n)          # neg real default, n even\r\n  end\r\n\r\n  def roots(n,opt=0) #  returns an array of values, or nil if option\r\nnot valid\r\n    raise "Root not integer >0" unless n.kind_of?(Integer) && n>=1\r\n\traise "Invalid option" unless opt == 0 || opt =~ /^(c|e|i|o|r|C|E|I|O|R)/\r\n    return [self] if n == 1 || self == 0\r\n    mag = self.abs**n**-1\r\n\troots = []; theta = PI/n\r\n\tcase opt\r\n\t  when /^(o|O)/  # even roots 2,4,6...\r\n\t    0.step(n-1,2) {|k| roots << rootn(mag,k,theta)}\r\n\t  when /^(e|E)/  # odd roots 1,3,5...\r\n\t    1.step(n-1,2) {|k| roots << rootn(mag,k,theta)}\r\n\t  when /^(r|R)/  # real roots  Complex(x,0) =(x+i0)\r\n\t    n.times {|k|\r\n\t\t  x=rootn(mag,k,theta); roots << x if x.imag == 0}\r\n\t  when /^(i|I)/  # imaginry roots  Complex(0,x) = (0+ix)\r\n\t    n.times {|k|\r\n\t\t  x=rootn(mag,k,theta); roots << x if x.real == 0}\r\n\t  when /^(c|C)/  # complex roots Complex(x,y) = (x+iy)\r\n\t    n.times {|k|\r\n\t\t  x=rootn(mag,k,theta); roots << x unless\r\n\t\t  x.imag == 0 || x.real == 0}\r\n\t  else\r\n\t      n.times {|k| roots << rootn(mag,k,theta)}\r\n    end\r\n\treturn roots.empty? ? nil : roots\r\n  end\r\n\r\n=begin\r\nRuby currently produces incorrect values for x|y axis angles.\r\ncos PI/2   =>  6.12303176911189e-17\r\nsin PI     =>  1.22460635382238e-16\r\ncos 3*PI/2 => -1.83690953073357e-16\r\nsin 2*PI   => -2.44921970764475e-16\r\n\r\nThese all should be 0.0, which causes incorrect root values there.\r\nI 'fix' these errors by clipping absolute values less than a value\r\nI call TRiG-EPSILON so they produces the correct results.\r\n\r\nExtract this code into separate file and 'require' into your apps\r\nto get correct|exact results for x|y axis angles and still get same\r\naccurrcay for extremely small delta angles to the x|y axis.\r\ncosine(89.9999999999*PI/180) =>  1.74534333112399e-11\r\ncosine(90.0*PI/180)          =>  0.0\r\ncosine(90.0000000001*PI/180) => -1.74543140899798e-12\r\n=end\r\n\r\n  protected\r\n  TRIG_EPSILON = 1e-15\r\n  def sine(x); y=sin(x); y.abs < TRIG_EPSILON ? 0.0:y end\r\n  def cosine(x); y=cos(x); y.abs<TRIG_EPSILON ? 0.0:y end\r\n  def tangent(x); sine(x)/cosine(x) end # not used here but more\r\ncorrect\r\n\r\n  def angle(k,theta) # roots 1..n --> k = 0..n-1\r\n    angle = self > 0.0 ? 2*(k+1)*theta : (2*k+1)*theta\r\n  end\r\n\r\n  def rootn(mag,k,theta)\r\n    a = angle(k,theta); mag*Complex(cosine(a),sine(a))\r\n  end\r\nend	1.9.1p243, 1.8.7p174, ree 1.8.6 20090610.	jzakiya@mail.com	2009-12-25 13:42:00	J	Zakiya 	2012-05-04 21:05:22.515571	2012-05-11 21:06:42.218088
143	ruby-talk	Rubyconf	Ruby, SAFE, method interception, and plugins	rubyconf, 2011, presentation, good, bad, ugly, confreaks	I haven't watched this presentation yet, so obviously can't comment on\r\nthe content, but it does sound like it's in the right ballpark:\r\n\r\n<a href="http://confreaks.net/videos/713-rubyconf2011-sandboxing-ruby-the-good-the-bad-and-the-fugly">http://confreaks.net/videos/713-rubyconf2011-sandboxing-ruby-the-good-the-bad-and-the-fugly</a>	1.9.3	mark@scottishclimbs.com	2011-12-20 17:12:00	Mark	Somerville	2012-05-02 12:07:07.671308	2012-05-11 19:40:42.696788
258	ruby-talk	Enumerable	How to pass a list of conditions as parameters?	enumerable, condition, list, pass, string, lambda, grep, array, select	>> I'm unsure how to explain this one so I'll do my best.\r\n>>\r\n>> Technically, I would like to pass an array of numbers and an array of\r\n>> conditions as parameters in a method. The tricky part is that I would\r\n>> like to evaluate each number of that array to each condition of that\r\n>> other array.\r\n>>\r\n>> The reason I would like to achieve something like this is because I plan\r\n>> to change the list of rules/conditions each time I want to call this\r\n>> method.\r\n\r\nBut what is the desired output?  That's crucial for the solution (see below).\r\n\r\n>> Here's the unworking code so far:\r\n>>\r\n>> (see attachment)\r\n>>\r\n>> Thank you in advance for your valuable support! Any help or hyperlinks\r\n>> with explanations is greatly appreciated!\r\n>>\r\n>> Attachments: <a href="http://www.ruby-forum.com/attachment/6838/array_of_conditions.txt">http://www.ruby-forum.com/attachment/6838/array_of_conditions.txt</a>\r\n>>\r\n> Nothing pretty or fancy here, but seems to do it? Note, I think the hash interpolation is \r\n> a 1.9.x thing.\r\n>\r\n>\r\n> array_of_numbers = [0, 2, 4, 7, 10, 25]\r\n>\r\n> # these could easily come from a config file/ db/ whatevs\r\n> array_of_eval_conditions = [ "(%{number} == 2)", "(%{number} ===\r\n 5 and\r\n> %{number} == 5)", "(%{number} != 1)"]\r\n>\r\n> # these could too, but would require a few more hoops\r\n> array_of_lambda_conditions = [lambda {|x| x == 2}, lambda {|x| x === 5 and x == 5}, lambda {|x| x != 1}]\r\n\r\nWhy "more hoops"?  There is no point in having conditions in Strings if they are constant in the script.  There is no need for eval here.\r\n\r\nPlease note that an more recent versions of Ruby (at least 1.9.3)lamba implements operator === which is reasonable because then you can use a lambda as condition in a case expression and with Enumerable#grep:\r\n\r\nirb(main):004:0> pos = lambda {|x| x >= 0}\r\n=> #<Proc:0x100e300c@(irb):4 (lambda)>\r\nirb(main):005:0> vals = [-10,-5,0,5,10]\r\n=> [-10, -5, 0, 5, 10]\r\n\r\nirb(main):007:0> vals.each {|v| p v, pos[v], pos === v; case v;when\r\npos;puts "pos";else puts "not" end}\r\n-10\r\nfalse\r\nfalse\r\nnot\r\n-5\r\nfalse\r\nfalse\r\nnot\r\n0\r\ntrue\r\ntrue\r\npos\r\n5\r\ntrue\r\ntrue\r\npos\r\n10\r\ntrue\r\ntrue\r\npos\r\n=> [-10, -5, 0, 5, 10]\r\n\r\nThere do exists ways to do this already, e.g. assuming that conditions are in an array of lambdas:\r\n\r\n# get all which satisfy all conditions\r\nitems.select {|x| conditions.all? {|c| c[v]}}\r\n\r\n# get first which satisfies all conditions\r\nitems.find {|x| conditions.all? {|c| c[v]}}\r\n\r\n# get all which satisfy any condition\r\nitems.select {|x| conditions.any? {|c| c[v]}}\r\n\r\n# get first which satisfies any condition\r\nitems.find {|x| conditions.any? {|c| c[v]}}\r\n\r\nSee also Enumerable#reject etc.	1.9.3	shortcutter@googlemail.com	2011-12-14 09:27:00	Robert	Klemme	2012-05-02 12:30:23.425191	2012-05-11 20:04:20.968627
153	ruby-talk	Class	Loses scope?	class, block, closure, eval, variable, scope	>>> puts A.new.go # raises with "a not defined"\r\n>>\r\n>> You may want to call class_eval and define_method with blocks instead.\r\n>\r\n> Hmm. Perhaps an example using class_eval would help me understand that\r\n> better (define_method works great, BTW).\r\n\r\nirb(main):001:0> class A\r\nirb(main):002:1> end\r\n=> nil\r\nirb(main):005:0> a = 3\r\n=> 3\r\nirb(main):006:0> A.class_eval do\r\nirb(main):007:1* define_method(:go) do\r\nirb(main):008:2* puts a\r\nirb(main):009:2> end\r\nirb(main):010:1> end\r\n=> #<Proc:0xb7dbffd0@(irb):7>\r\nirb(main):011:0> A.new.go\r\n3\r\n=> nil\r\n\r\nWhen you already have the class A created and you open it to add the\r\n'go' method, you can use class_eval, which receives a block. Blocks\r\nare closures, so they see their surrounding scope, and thus, the\r\nvariable 'a'.	1.9.3	jgabrielygalan@gmail.com	2009-12-20 09:47:00	JesÃºs	Gabriel y Galan	2012-05-02 12:09:52.357518	2012-05-06 18:25:40.646967
280	ruby-talk	Testing	Scheduling jobs on PCs after work hours	condor, pc, testing, after hours, link	> There's a task that I want to do and while I can explain it to people, I\r\n> was having trouble finding the right keywords that would lead me home\r\n> with Google.\r\n>\r\n> Basically, we have 20 PCs in the office and we'd like to do some\r\n> simulation/ test runs/ builds, etc. when CPU capacity is available. When\r\n> there is an urgent demand, we reach "for the clouds", so to speak. But\r\n> right now, we are just keen to use spare CPU cycles to do some random\r\n> testing.\r\n>\r\n> So, what I'm looking for is something similar to SETI@Home and does this:\r\n> * Wake up at a pre-scheduled time (say, after office hours)\r\n> * Connect to a central job server (and optionally present credentials)\r\n> * Ask the job server for a job\r\n> * Download the necessary for the job\r\n>  > this may include updating the local executable for the job\r\n>  > this may include copying a bunch of input files/ basic data\r\n>  > this will include copying data specific for this job\r\n> * Set up the environment for the job - copy the executable to the\r\n> correct place, set up the data in the correct place and input files\r\n> * Call a batch file to run the job\r\n> * Once done, send the results to a central server and email the job owner\r\n> * Ask for the next job\r\n>\r\n> Is there any ready-made solution that would let me do this, or would\r\n> push me in the correct direction? The client needs to run on Windows PC\r\n> since that's what we have lying around in the office.\r\n>\r\n> If there's nothing, could you point me to the kind of technologies that\r\n> I should look at... this just might be a year-end hobby project :)\r\n\r\nI haven't looked at it in some time, but Condor is something that may \r\ninterest you. :)\r\n\r\n<a href="http://research.cs.wisc.edu/condor/">http://research.cs.wisc.edu/condor/</a>	1.9.3		2011-12-18 22:02:00			2012-05-02 12:33:03.578531	2012-05-11 20:09:59.632474
429	ruby-talk	Array	Sorting decimal index numbers?	array, sort, index, decimal, scan, map, &:to_i, 1.9	>> If there are a lot of these, however, it would be much better to do a\r\n>> keyed sort using sort_by. How to create keys depends on what you know\r\n>> about the data. If we knew for a fact that the second half was always\r\n>> between 1 and 99, it would be easy:\r\n>>\r\n>> arr = arr.sort_by do |x|\r\n>>   x1, x2 = x.split(".")\r\n>>   x1.to_i * 100 + x2.to_i\r\n>> end\r\n>>\r\n>> If the second half can be any length, though, you'll have to determine\r\n>> the maximum length first, and change that "100" multiplier accordingly.\r\n> \r\n> Either that or use arrays as sort keys:\r\n> \r\n>   arr = arr.sort_by do |x|\r\n>     x.split(".").map {|i| i.to_i}\r\n>   end\r\n\r\nHere's a variant (1.9 only):\r\n\r\narr.sort_by {|x| x.scan(/d+/).map(&:to_i)}	1.9.3	shortcutter@googlemail.com	2009-03-28 11:09:00	Robert	Klemme	2012-05-02 12:59:50.850121	2012-05-05 18:46:56.638444
413	ruby-talk	Datetime	How to convert long/milliseconds to DateTime?	datetime, convert, milliseconds, time, strftime	> Then, how to convert datetime to milliseconds in rails? \r\n\r\n<a href="http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html#method-i-strftime">http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html#method-i-strftime</a>\r\n\r\n > time = DateTime.now\r\n  => Wed, 25 Apr 2012 10:23:55 +0200\r\n\r\n > time.strftime("%L").to_i\r\n  => 329\r\n\r\n > time.strftime("%3N").to_i\r\n  => 329	1.9.3	ruby-talk@larshaugseth.com	2012-04-25 10:26:00	Lars	Haugseth	2012-05-02 12:56:17.593109	2012-05-11 20:47:25.156052
186	ruby-talk	Block	Understanding Ruby blocks	block, when, to use, examples, yehuda, katz, exception 	>> I have been practicing Ruby and believe it or not the hardest part for\r\n>> me to understand (so far) is the concept of using blocks, why used them\r\n>> and how to use them.\r\n>\r\n> There are several benefits and use cases for using blocks.\r\n>\r\n>> For instance, I know I don't fully understand blocks but why would you\r\n>> use a block in the following situation.\r\n>>\r\n>> text = "Some Text"\r\n>> File.open('test_file.txt', 'a+') do |file|\r\n>>   file.write(text)\r\n>> end\r\n>>\r\n>> Why not just ...?\r\n>>\r\n>> text = "Some Text"\r\n>>  file = File.open('test_file1.txt', 'a+')\r\n>> file.write(text)\r\n>> ..why use a block instead?\r\n>\r\n> This is quite straightforward: in this situation the use case is that\r\n> you want to ensure that something happens before and after the block\r\n> code. In this case, the File#open method opens the file, then calls\r\n> the block and then ensures that the file is closed, even in the face\r\n> of an exception within the block.\r\n>\r\n> So, first use case: when you want code executed around code that is\r\n> not under your control.\r\n>\r\n> Another use case is when you provide a generic functionality that can\r\n> applied to many situations, but you want to leave the exact detailed\r\n> behavior to the client code. For example, the Enumerable#each method\r\n> provides its clients with the capability of traversing an enumerable\r\n> instance, doing something with each element one at a time. What you do\r\n> with the element is responsibility of the client code, so the each\r\n> method just accepts a block to achieve that.\r\n>\r\n> Hope this helps and I hope the concept clicks soon, because it's one\r\n> of the things that make Ruby so wonderful.\r\n\r\n>> 1-What would be a good rule of thumb to know when to use blocks?\r\n>> 2-What would be the easiest way to understand block?\r\n>> 3-Can someone be so kind and explain block a little bit?\r\n\r\nHere is a blog post by Yehuda Katz about what sets Ruby blocks apart:\r\n\r\n<a href="http://yehudakatz.com/2010/02/07/the-building-blocks-of-ruby/">http://yehudakatz.com/2010/02/07/the-building-blocks-of-ruby/</a>\r\n\r\nThat should give you a few great examples.	1.9.3	sylvester.keil@gmail.com	2011-11-24 17:06:00	Sylvester	Keil	2012-05-02 12:13:45.426891	2012-05-11 19:50:53.65641
470	ruby-talk	String	How to parse this file?	string, matchdata, match, regex, position	> I have to parse a file of questions/answers for a quizbot in ruby.\r\n> The file is structured in this way:\r\n> "Question" "Answer"\r\n\r\n> "Question2" "Answer2"\r\n\r\n> "Questionn" "Answern"\r\n\r\n> How to parse it effectively?\r\n \r\nhere is the basic code, output followed by a basic explanation\r\n\r\nIO.foreach("testfile.txt") do |line|\r\n    data=line.match /"(w+)"s+"(w+)"/\r\n    puts data[1] # question\r\n    puts data[2] # answer\r\nend\r\n\r\n\r\n[output]\r\n\r\nQuestion\r\nAnswer\r\nQuestion2\r\nAnswer2\r\nQuestionn\r\nAnswern\r\n\r\n\r\nbasic explanation: match returns a MatchData object, which can be \r\naccessed like an array.\r\n\r\nyou will want to access the 2nd and 3rd position of the MatchData \r\nobject, the first (zero position) holds an array of the entire parsed \r\ndata set.\r\n\r\nirb(main):337:0> str='"Question" "Answer"'\r\n\r\nirb(main):338:0> data=str.match /"(w+)"s+"(w+)"/\r\n\r\nirb(main):339:0> data[0]\r\n=> ""Question" "Answer""\r\n\r\nirb(main):340:0> data[1]\r\n=> "Question"\r\n\r\nirb(main):341:0> data[2]\r\n=> "Answer"	1.9.3	devguy.ca@gmail.com	2009-12-26 12:03:00	Rajinder	Yadav	2012-05-02 14:06:00.77788	2012-05-05 19:00:31.388868
40	ruby-talk	Alias	$0 is truncated	frozen, $0, alias, workaround	>> I don't mind whether $0 is frozen. Actually, I wrote $0 = ... \r\n>> originally, and only changed it to $0.replace(...) as a workaround.\r\n\r\nYou can find a hint in ext/extmk.rb.\r\n \r\n  $progname = $0\r\n  alias $PROGRAM_NAME $0\r\n  alias $0 $progname\r\n \r\n  trace_var(:$0) {|val| $PROGRAM_NAME = val} # update for ps	1.9.3	b.candler@pobox.com	2009-05-17 12:48:00	Brian	Candler	2012-05-02 11:50:07.105742	2012-05-03 16:50:44.332892
209	ruby-talk	File	File.delete one-liner	file, delete, one-liner, exists, ternary 	> File.delete(File.exists?(lockfile) ? lockfile : @lockfile)\r\n\r\n[lockfile, @lockfile].any? {|f| File.delete(f) rescue false}	1.9.3	shortcutter@googlemail.com	2009-02-05 11:01:00	Robert	Klemme	2012-05-02 12:18:49.008631	2012-05-06 17:51:46.386313
290	ruby-talk	Symbol	Symbol vs String for hash keys	symbol, string, use, depend, input, keys, internal, program	>> Even so it would be good to know the general criteria to consider.\r\n>\r\n> Conceptually, I like to use these rules of thumb (I think Jim Weirich\r\n> noted it originally, but I am not sure):\r\n>\r\n> 1.) If the content and exact sequence of characters is the important\r\n> part, use a string.\r\n>\r\n> 2.) If the identity is the important part, use a symbol.\r\n\r\nI use a different rule of thumb which has been circulated before as well - I can't \r\nreally remember who came up with this.\r\n\r\n1. If the set is not fixed (typically because it depends on input obtained from somewhere) \r\n   use String.\r\n\r\n2. If the set of values is fixed (typically because the program includes just a fixed number of eys)\r\n   use Symbols.\r\n\r\nAccording to that standards Fileutils should really be using Symbols as keys and not Strings \r\nsince OPT_TABLE is completely used internally only (contains valid options of methods).\r\n\r\nBtw, if at all conversion between the two should be employed I'd do it as part of input processing.  \r\nThis means, typically, if you have a configuration file which may select a few items then a \r\nconversion from String to Symbol would be part of the process which reads the configuration file. \r\nInternally I would make the program always work with Symbols.	1.9.3	shortcutter@googlemail.com	2011-07-04 18:08:00	Robert	Klemme	2012-05-02 12:34:47.526368	2012-05-11 17:30:43.127083
347	ruby-talk	Book	Ruby syntax	book, recommend, ruby, tutorial, reference	> I never think rubydoc is useless.\r\n\r\nIt's just not the proper medium for documentation of the language.\r\nJavaDoc is also not used to document the language - for that the JLS\r\nis used.\r\n\r\n> In fact, I like ruby .  I just want to find some documents about this\r\n> language.\r\n\r\nI recommend:\r\n\r\n  <a href="http://www.amazon.com/Ruby-Programming-Language-David-Flanagan/dp/0596516177/">http://www.amazon.com/Ruby-Programming-Language-David-Flanagan/dp/0596516177/</a>\r\n  <a hreef="http://www.amazon.com/Programming-Ruby-1-9-Pragmatic-Programmers/dp/1934356085/">http://www.amazon.com/Programming-Ruby-1-9-Pragmatic-Programmers/dp/1934356085/</a>\r\n  <a href="http://www.amazon.com/Well-Grounded-Rubyist-David-Black/dp/1933988657/">http://www.amazon.com/Well-Grounded-Rubyist-David-Black/dp/1933988657/</a>	1.9.3	shortcutter@googlemail.com	2012-02-13 15:01:00	Robert	Klemme	2012-05-02 12:44:07.79536	2012-05-11 20:29:53.773456
177	ruby-talk	ARGV	Stupid optparse question	argv, print, usage, empty?, options, help	> How can I make my code print the usage even if zero options are given?\r\n> I had *thought* opts.on_tail would do this, but it doesn't seem to be\r\n> working.  The usage prints properly if I use -h though:\r\n\r\nwell... they are called "options", not "mandatories" :P\r\n\r\nI usually do this near the top:\r\n\r\nARGV << "-h" if ARGV.empty?	1.9.3	ryand-ruby@zenspider.com	2010-11-15 13:52:00	Ryan	Davis	2012-05-02 12:13:45.133625	2012-05-06 22:46:52.196082
87	ruby-talk	Array	About Array methods	array, index, last	# > l = [1,2,3,4,5]\r\n# > p l    # => [1,2,3,4,5]\r\n# >\r\n# > # I want '[4,5]'\r\n# >\r\n# > # Is that method in Array?\r\n#\r\n# l = l[3..-1]\r\n\r\nalso,\r\n\r\n  array.last(2)	1.9.3	botpena@gmail.com	2009-01-09 11:16:00	Phil	Delmonte	2012-05-02 11:55:46.748903	2012-05-14 19:36:56.213661
365	ruby-talk	Regexp	A regexp that does not contain comma	regex, string	>  I'm confused. Trying the regexp /^[^,]*$/ fails with the code below:\r\n>  \r\n>  #! /opt/csw/bin/ruby\r\n>  \r\n>  string = "Hello, world"\r\n>  #regexp = /w+(?>s*(?=,))+/\r\n>  regexp = /^[^,]*$/\r\n>  \r\n>  if string =~ regexp\r\n>      puts "string contains a comma"\r\n>  else\r\n>      puts "string does not contain a comma"\r\n>  end\r\n\r\n    case string\r\n      when /,/       then puts "#{string.inspect} contains a comma"\r\n      when /^[^,]*$/ then puts "#{string.inspect} has no comma"\r\n    end	1.9.3	glennj@ncf.ca	2009-07-14 10:32:00	Glenn	Jackman	2012-05-02 12:47:38.457171	2012-05-03 19:04:48.398961
35	ruby-talk	Regexp	Regexp extension to handle matching parens?	regex, parentheses, context, parser, struct, token 	> Can someone who has used this construct possibly please show me how \r\n> I would try it on my simple example?\r\n> \r\n>   sample = " caption{my table label{table-label} example: $sqrt{2+\r\n> sqrt{2}}$} more here {}"\r\n> \r\n> Accomplishing this is actually not ugly at all in perl:\r\n> \r\n>   use Regexp::Common;\r\n>   my $matchingarg = qr/$RE{balanced}{-parens=>'{ }'})/;\r\n>   /\\caption$matchingarg/;\r\n>   print "The \\caption argument is $1";\r\n> \r\n> Of course, perl is ugly in many other respects, but here, it does nicely.\r\n\r\nUgliness often means bad maintainability...  I'd probably use a \r\ndifferent approach which also works with simpler regular expressions:\r\n\r\n# untested\r\nNode = Struct.new :parent, :children\r\n\r\ncurrent = root = Node.new nil, []\r\ntokens = input.split(%r{([](){}])})\r\n\r\ntokens.each do |token|\r\n   case token\r\n     when %r{[({]}\r\n       current = Node.new current, []\r\n     when %r{[])}]}\r\n       current = current.parent\r\n     else\r\n       current.children << token\r\n   end\r\nend\r\n\r\nIn other words: build a rudimentary context free parser.  Depends of \r\ncourse on what you want to do.	1.9.3	shortcutter@googlemail.com	2009-01-24 17:35:00	Robert	Klemme	2012-05-02 11:47:56.636977	2012-05-11 17:04:47.955154
80	ruby-talk	String	Is there a more efficient way to remove data from a string?	ARGF, each_line,	> I'd probably do it something like this:\r\n>\r\n>     ARGF.each_line do |line|\r\n>       line.sub!(/#{reg1}.*/, '')\r\n>       puts line\r\n>     end\r\n\r\nActually, I did too literal a translation of your code.  If I was writing\r\nthis from scratch, I probably would have done this instead:\r\n\r\n    ARGF.each_line {|line| puts line.sub(/#{reg1}.*/, '') }\r\n\r\n# . . or this:\r\n\r\n    ARGF.each_line do |line|\r\n      puts line.sub(/#{reg1}.*/, '')\r\n    end\r\n\r\nWhich I would choose would depend on whether I felt it looked better\r\namidst my other code in the file on one line or three, and on whether I\r\nexpected I might need to add more lines later.	1.9.3	code@apotheon.net	2011-07-14 18:56:00	Chad	Perrin	2012-05-02 11:55:46.534038	2012-05-05 00:41:32.805938
537	ruby-talk	Date	Data retrieve for the current date	date, time, math, add, subtract, rails, console	> My database(PostgreSQL) have some amount of data, so i need to retrieve the\r\n> data for current date only.But my doubt is how to compare the today date\r\n> with created_at field. Now am trying so many ways to find that.\r\n>\r\n> Is this correct way * where created_at BETWEEN '2012-01-16 00:00:00.00000' \r\n> AND '2012-01-17 00:00:00.00000'...?*\r\n\r\nAnswer by example:\r\n\r\n$ rails console\r\n1.9.3-p0 :001 > today = Date.today\r\n => Fri, 03 Feb 2012\r\n1.9.3-p0 :002 > tomorrow = Date.today + 1.day\r\n => Sat, 04 Feb 2012\r\n1.9.3-p0 :003 > orders = Order.where(:created_at => today...tomorrow)\r\n  Order Load (0.7ms)  SELECT "orders".* FROM "orders" WHERE \r\n("orders"."created_at" >= '2012-02-03' AND "orders"."created_at" < \r\n'2012-02-04')	1.9.3		2012-02-03 19:12:00	Robert	Walker	2012-05-04 21:18:57.474327	2012-05-05 00:26:29.847126
522	ruby-talk	Boolean	Ruby way to define binary	binary, match, string, value, boolean	> I have some trouble. How can i define the binary of value in ruby? \r\n> (I have a value, and I want to know that's it true or false).\r\n\r\nUse match\r\n\r\nruby-1.9.2-p290 :001 > value = "road"\r\n => "road" \r\nruby-1.9.2-p290 :002 > if value.match('road')\r\nruby-1.9.2-p290 :003?>   puts "true"\r\nruby-1.9.2-p290 :004?>   else\r\nruby-1.9.2-p290 :005 >     puts "false"\r\nruby-1.9.2-p290 :006?>   end\r\ntrue\r\n => nil 	1.9.2		2011-12-06 12:41:00	Wayne	Brisette	2012-05-04 20:12:16.726497	2012-05-09 19:15:34.123076
42	ruby-talk	Irb	How to pass commandline arguments to a file loaded with "irb -r"?	irb, arguments, script, pass, execute, prompt	> I run "irb -r myfile.rb" and would like "myfile.rb" to receive commandline\r\n> arguments, and these not to conflict with irb parameters.\r\n>\r\n> Is it possible? I couldn't get it. What I'd like is something as:\r\n>\r\n> ~# irb -r myfile.rb -p 9898 -s lala\r\n>\r\n> so ARGVinspected in "myfile.rb" would contain:\r\n> ["-p", "9898", "-s", "lala"]\r\n>\r\n> Is it possible?\r\n\r\n#require is not built to pass arguments around - neither is #load.\r\nOne of the reasons is that you do not know whether the file is\r\nactually loaded at that moment.\r\n\r\nThe easier solution is probably to do it the other way round: build a\r\nscript which processes arguments and then fires off IRB.  You can look\r\nat your "irb" script to get a starting point how to do that.  The you\r\nwould do\r\n\r\nmyfile.rb -p 9898 -s lala\r\n\r\nand receive an IRB prompt.	1.9.3	shortcutter@googlemail.com	2009-12-23 12:52:00	Robert	Klemme	2012-05-02 11:50:07.186159	2012-05-11 15:19:53.751214
333	ruby-talk	Struct	Metaprograming question about initialize	struct, class, define_method	>> What I want to do is not change the interface but the implementation.  \r\n>> That is, I want to get a list of the names of the arguments by introspection.\r\n\r\nBD> It is much simpler and IMO makes much more sense not to figure out\r\nBD> variable names while already having variables, but to figure out their\r\nBD> contents while having names. Like this:\r\n\r\nBD> class Class\r\nBD>   def attr_accessor_init *meths\r\nBD>     attr_accessor *meths\r\nBD>     define_method :initialize do |*args|\r\nBD>       meths.each_with_index do |m, i|\r\nBD>         self.send :"#{m}=", args[i]\r\nBD>       end\r\nBD>     end\r\nBD>   end\r\nBD> end\r\n\r\nirb(main):013:0>> class A\r\nirb(main):014:1>> attr_accessor_init :a, :b, :c\r\nirb(main):015:1>> end\r\n\r\nirb(main):029:0>> A.new 4, 6, 8\r\n=>> #<A:0xd6cb18 @a=4, @b=6, @c=8>\r\n\r\nBD> (This is, essentially, what Struct class does.)\r\n\r\nThis is an elegant solution.	1.9.3	ralphs@dos32.com	2012-02-20 23:31:00	Ralph	Shnelvar	2012-05-02 12:42:28.287094	2012-05-05 01:49:43.210504
185	ruby-talk	Gem	Using rubyscript2exe	gem, ocra, use, example	ocra is very easy to use.\r\n\r\nocra --console script.rb	1.9.3	dickyhide@gmail.com	2011-12-09 11:53:00	CC	Chen	2012-05-02 12:13:45.394177	2012-05-06 23:03:51.817492
75	ruby-talk	Array	Why is dup is not working correctly?	array, deep copy, dup, objects, all	> However, unlike the irb session, the following code shows that\r\n> modification of the dupped object is somehow changing the original.\r\n\r\nNo, it isn't.\r\n\r\nYou have two separate arrays.\r\n\r\nHowever, each of those arrays contains the same strings -- the first string\r\nof each array is the same object.\r\n\r\nYou want a deep copy (where you duplicate all the objects in the array,\r\nnot just the arrays).  Something like:\r\n\r\n@maze_dup = @maze.map { |x| x.dup }\r\n\r\n... I think.	1.9.3	usenet-nospam@seebs.net	2009-12-29 05:41:00	Peter	Seebach	2012-05-02 11:55:46.395799	2012-05-05 19:11:59.399422
282	ruby-talk	Metaprogramming	Metaprograming question about initialize	metaprogramming, init, args, attr, accessor, build, assignments 	How many times have we seen this:\r\n\r\nclass X\r\n  attr_accessor :arg1, :arg2, :arg3, :arg4\r\n\r\n  def initialize(arg1, arg2, arg3, arg4)\r\n    @arg1, @arg2, @arg3, @arg4 = arg1, arg2, arg3, arg4\r\n  end\r\nend\r\n\r\nWouldn't it be nice if we (ok, I) could instead write\r\n\r\n\r\ndef initialize(arg1, arg2, arg3, arg4)\r\n  initargs\r\nend\r\n\r\nand have initargs create the attr_accessor as well as the assignments.\r\n\r\nI know I can do this in 1.9.2\r\n\r\nclass X\r\n  def initialize(arg1)\r\n    self.class.send(:attr_accessor, :arg1)\r\n    @arg1 = arg1\r\n  end\r\nend\r\n\r\nSo is it possible in Ruby to introspect on the _names_ of arguments passed in to a function so that I can build the attr_accessor as well as the assignments?	1.9.3	ralphs@dos32.com	2012-02-20 03:26:00	Ralph	Shnelvar	2012-05-02 12:33:03.64084	2012-05-05 19:21:30.437092
277	ruby-talk	Book	What is a good ruby tutorial / book for a beginner?	book, tutorial, ruby, array, class, fields	> I have been reading Chris Pine's book for a while now and I'm stuck at\r\n> the chapter where I have to write my own sorting method. All the code I\r\n> tried don't work and when I searched for sorting algorithms and programs\r\n> in ruby, ALL the source code I had a look at had a couple of elements in\r\n> it that the book I'm reading hasn't taught yet..\r\n\r\nLook at these two tutorials:\r\n\r\n<a href="http://www.devdaily.com/blog/post/ruby/ruby-how-sort-array-objects-one-field-column">http://www.devdaily.com/blog/post/ruby/ruby-how-sort-array-objects-one-field-column</a>\r\n\r\n<a href="http://www.devdaily.com/blog/post/ruby/how-sort-ruby-array-objects-multiple-class-fields-attributes">http://www.devdaily.com/blog/post/ruby/how-sort-ruby-array-objects-multiple-class-fields-attributes</a>\r\n\r\nI learned more from reading these two entries than in any book when it came to sorting. In particular, I fell in love with the multi class field sort. I have been able to do some sorting on data that I could have never done otherwise. Walk through the tutorials, if you have an IDE step through the code and watch the array and values that get put into it and experiment with various sorts.	1.9.3		2011-12-08 20:20:00	Wayne	Brissette	2012-05-02 12:33:03.473963	2012-05-11 20:08:42.963864
517	ruby-talk	Operator	Background on why Ruby doesn't support ++	operator, ++, ruby, language, support, immutable, integers	>> Anyone know the history on this deliberate omission?\r\n>\r\n> Matz addressed this in ruby-talk 2710:\r\n>\r\n> <a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/2710">http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/2710</a>\r\n\r\nBasically it is a consequence of the decision to make integers immutable which makes assignment \r\nnecessary for a variable which is incremented.  I guess Matz wanted to make this explicit, \r\nhence "+=" Co.\r\n\r\nOtherwise you need a counter class, e.g.\r\n\r\nCounter = Struct.new :value do\r\n  def initialize(x = 0)\r\n    self.value = x\r\n  end\r\n\r\n  def plusplus\r\n    self.value += 1\r\n  end\r\n\r\n  alias incr plusplus\r\n\r\n  def minusminus\r\n    self.value += 1\r\n  end\r\n\r\n  alias decr minusminus\r\nend	1.9.3, 1.8.6, 1.8.7	shortcutter@googlemail.com	2009-08-13 11:30:00	Robert	Klemme	2012-05-04 18:49:04.557965	2012-05-11 21:02:28.876383
18	ruby-talk	Language	Is high-speed sorting impossible with Ruby?	language, $stdin, readlines, eof, input, finish	> $stdin.gets\r\n> puts $stdin.readlines.map(&:to_i).sort\r\n> \r\n> It's interesting to take all the input at once but I run the code above \r\n> and it seems like it never stops taking input?\r\n\r\nIt depends on how you're running the code. I was doing it like:\r\n\r\nblah.rb < inputfile\r\n\r\n$stdin.readlines reads until input EOFs.	1.9.3	ryand-ruby@zenspider.com	2011-11-28 14:58:00	Ryan	Davis	2012-05-02 11:43:41.295796	2012-05-06 19:40:22.099391
50	ruby-talk	Struct	Is it safe to override #hash and #eql? to enable hash key equality?	struct, method, define, hash, key, datum	> I would like to use object instances as hash keys where two objects\r\n> containing the same datum both have the same key value.  This does not\r\n> work by default (as expected given that these are two different\r\n> instances):\r\n> \r\n> class Foo\r\n>   def initialize(datum)\r\n>     @datum = datum\r\n>   end\r\n> end\r\n> \r\n> # Two hash keys for the same datum\r\n> a = {Foo.new(:baz) => 1, Foo.new(:baz) => 2}\r\n> p a\r\n> \r\n> # => {#<Foo:0x2a95e68888 @datum=:baz>=>1, #<Foo:0x2a95e68860\r\n> @datum=:baz>=>2}\r\n> \r\n> However, this functionality can be obtained by overriding Object#hash\r\n> and Object#eql?:\r\n> \r\n> class Bar\r\n> \r\n>   attr_reader :datum\r\n> \r\n>   def initialize(datum)\r\n>     @datum = datum\r\n>   end\r\n> \r\n>   def hash\r\n>     @datum.hash\r\n>   end\r\n> \r\n>   def eql?(other)\r\n>     @datum.eql? other.datum\r\n>   end\r\n> \r\n> end\r\n> \r\n> # One hash key for the same datum\r\n> b = {Bar.new(:baz) => 1, Bar.new(:baz) => 2}\r\n> p b\r\n> \r\n> #=> {#<Bar:0x2a95e684f0 @datum=:baz>=>2}\r\n> \r\n> My simple question is if this is safe/normal/OK for my intentions.\r\n\r\nNot only that: this is exactly how one should do it.\r\n\r\n> Based on perusal of the online Ruby documentation it looks like #eql?\r\n> has been overridden in a number of sub-classes for the same purpose.\r\n> But I wanted to get feedback from the community - has anyone here\r\n> tried this?  Are there any known side-effects?\r\n\r\nNo, your use is absolutely correct.  This is what this methods are meant \r\nfor.  The only thing to remark is this: you can save yourself a lot \r\ntyping by doing:\r\n\r\nBar = Struct.new :datum\r\n\r\nIf you need additional methods in that class you can even do\r\n\r\nBar = Struct.new :datum do\r\n   def another_method\r\n      123\r\n   end\r\nend	1.9.3	shortcutter@googlemail.com	2009-03-18 19:04:00	Robert	Klemme	2012-05-02 11:52:04.370667	2012-05-05 20:22:00.02301
497	ruby-talk	Regexp	Very simple regexp question	regex, string, length test, non-inclusive	> I don't understand why the regex in the example below isn't identifying\r\n> that the string is longer than 12 characters long...\r\n\r\n>>> if line =~ /[a-zA-Z]{2,12}/\r\n\r\nThat succeeds if the string *contains* between 2 and 12 characters,\r\nnot if it consists solely of 2-12 characters.\r\n\r\nline = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxx"\r\nif line =~ /[a-zA-Z]{2,12}/\r\n  puts "good"  # you'll get this\r\nelse\r\n  puts "bad"\r\nend\r\n\r\nif line =~ /A[a-zA-Z]{2,12}Z/\r\n  puts "good"\r\nelse\r\n  puts "bad"  # you'll get this\r\nend	1.9.3	hassan.schroeder@gmail.com	2010-11-13 11:22:00	Hassan	Schroeder	2012-05-02 14:14:54.207877	2012-05-05 00:52:08.385142
396	ruby-talk	Array	Array max value	array, max, index	> When I set an array k = [3,5,6,0,1,4,5,6,9,1]\r\n> \r\n> And I used the k.max can know the max value is 9\r\n> \r\n> How do I get the number "8" (as k[8] = 9)??\r\n\r\nk.index(k.max) will work. It's not completely optimal, but it's concise =\r\nand asymptotically optimal.	1.9.3	adgar@carboni.ca	2011-07-21 02:32:00	Michael	Edgar	2012-05-02 12:53:10.198707	2012-05-03 19:15:19.545484
121	ruby-talk	Database	MySQL multithread	mysql, database, thread, single, connection	> I am using ruby-mysql gem 2.9.4 in a multithreaded application:\r\n> I have three threads trying to access db and get information from the\r\n> same table but I am getting sql exception with message:\r\n> invalid packet: sequence number mismatch(53 != 6(expected))\r\n>\r\n> Is there anything to do to solve this problem\r\n\r\nWild guess: you are using the same connection for all threads.\r\nSolution: create a connection for each thread.	1.9.3	jgabrielygalan@gmail.com	2011-12-29 23:35:00	JesÃºs	Gabriel y Galan	2012-05-02 12:03:37.05032	2012-05-11 15:20:43.608234
184	ruby-talk	Global	Help in Pointer?	rb_global_variable, global, variable, README.TXT, ruby source	> Actually i am trying to hide a data behind the pointer which is not in \r\n> the stack which the Garbage Collector keeps track of.\r\n\r\nrb_global_variable().  It's documented in README.EXT of the Ruby source.	1.9.3	normalperson@yhbt.net	2011-07-28 19:29:00	Eric	Wong	2012-05-02 12:13:45.358308	2012-05-05 01:03:16.887405
302	ruby-talk	String	Add text at beginning of a string?	string, regex, insert, text	>> irb(main):002:0> s.insert(0, "hello ")\r\n> \r\n> ['hello ', s].join\r\n> \r\n> ...and how about unshift?\r\n> \r\n> Any sicker ways out there?? Besides s = 'hello ' + s?\r\n\r\nirb(main):001:0> s = " world"\r\n=> " world"\r\nirb(main):002:0> s[/\\A/] = "hello,"\r\n=> "hello,"\r\nirb(main):003:0> s\r\n=> "hello, world"	1.9.3	vjoel@path.berkeley.edu	2008-12-20 12:39:00	Joel	VanderWerf	2012-05-02 12:36:24.254447	2012-05-03 18:16:07.813096
392	ruby-talk	Opinion	Cool things to say about Ruby	Ruby, url, links	> I'm trying to write about Ruby in my business plan - but what can I\r\n> say to impress my investors?\r\n\r\n  <a href="http://martinfowler.com/articles/rubyAtThoughtWorks.html">http://martinfowler.com/articles/rubyAtThoughtWorks.html</a>\r\n\r\nSlide 28:\r\n\r\n  <a href="http://www.slideshare.net/vishnu/the-top-10-reasons-the-ruby-programming-language-sucks">http://www.slideshare.net/vishnu/the-top-10-reasons-the-ruby-programming-language-sucks</a>\r\n\r\nA bit old:\r\n\r\n  <a href="http://www.devsource.com/c/a/Languages/Five-Things-You-Didnt-Know-You-Could-Do-with-Ruby/">http://www.devsource.com/c/a/Languages/Five-Things-You-Didnt-Know-You-Could-Do-with-Ruby/</a>	1.9.3		2009-06-28 15:45:00	Bil	Kleb	2012-05-02 12:53:10.088519	2012-05-11 20:42:09.025308
495	ruby-talk	String	Stripping double quotes	string, strip, double quotes, gsub	> I have the attached file, but my issue is that the file I am parsing, is\r\n> in this format:\r\n> \r\n> "45hc43j","sdfsdf","","Dead","sdfdsf ","sgfsdf","","sdfg","null","",\r\n> \r\n> That is why I escape quotes in the script. How do I get an output that\r\n> doesn't have double quotes? I tried using gsub but it was of no use.\r\n\r\nHow is gsub no use?\r\n\r\n    $ irb\r\n    >> string = '"45hc43j","sdfsdf","","Dead","sdfdsf ","sgfsdf","","sdfg","null","",'\r\n    => ""45hc43j","sdfsdf","","Dead","sdfdsf ","sgfsdf","","sdfg","null","","\r\n    >> new_string = string.gsub('"', '')\r\n    => "45hc43j,sdfsdf,,Dead,sdfdsf ,sgfsdf,,sdfg,null,,"\r\n\r\nThat seems to work just fine for me.	1.9.3	code@apotheon.net	2012-01-09 15:52:00	Chad	Perrin	2012-05-02 14:12:26.458059	2012-05-05 01:09:14.782418
269	ruby-talk	Rake	Rake --dry-run: how to see what sh commands will be run?	rake, tool, trace, sh, Jam, app	> I am trying to set up some rules to build files with locally installed\r\n> tools. I have no trouble getting my rules to work, and to invoke shell\r\n> commands with sh().\r\n>\r\n> However, what I can't figure out is how to get a display of shell\r\n> commands without actually executing them. I thought I could run 'rake\r\n> --dry-run' but that seems to display only the filenames that would be updated.\r\n>\r\n> I've found that setting 'verbose true' in my Rakefile causes the shell\r\n> commands to be displayed as they are executed. And I've found that\r\n> setting 'nowrite true' does EXACTLY what I want, but I can't figure out\r\n> how to turn it on via a rake command flag.\r\n>\r\n> I looked in the rake.rb source (rake-0.8.3), and it LOOKS like --dry-run\r\n> should set both 'verbose' and 'nowrite' for me. But I can't seem to get\r\n> actual verbose or dryrun behaviors unless I set them in my Rakefile.\r\n\r\nI'm pulling this completely out of my butt... but you might want to try something along the lines of:\r\n\r\nif Rake.application.trace then\r\n  alias old_sh sh\r\n\r\n  def sh(*a)\r\n    old_sh "echo", *a\r\n  end\r\nend\r\n\r\nP.S. I would LOVE to see a ruby port of Jam if you were so inclined. For C projects it is a vastly superior tool. :)	1.9.3	ryand-ruby@zenspider.com	2011-12-05 11:59:00	Ryan	Davis	2012-05-02 12:31:07.751377	2012-05-05 19:18:21.652348
69	ruby-talk	Language	Methods: private and protected	private, protected, implicit receiver, self	> Could anybody explain me this, please?\r\n>\r\n> class First\r\n>     def say\r\n>         self.phrase\r\n>     end\r\n>\r\n>     private\r\n>\r\n>     def phrase\r\n>         'something'\r\n>     end\r\n> end\r\n>\r\n> a = First.new\r\n> a.say\r\n> # got\r\n> NoMethodError: private method `b' called for #<A:0xb7756518>\r\n>     from (irb):44:in `say'\r\n>     from (irb):52\r\n>     from :0\r\n>\r\n> If i write the same code with 'protected' instead of 'private' I got no error.\r\n> If i write the same code with calling 'phrase' instead of 'self.phrase' \r\n> in 'say' method I got no error again.\r\n\r\nA private method may only be called with an implicit receiver - in\r\nself.phrase, self is explicit, which is why you get the exception. The\r\npractical upshot of this is that private methods may only be called by the\r\ncurrent instance, because the implicit receiver is understood to be "self".\r\n\r\nProtected methods may be called by the current instance, instances of its\r\nclass or instances of it subclasses, and require an explicit receiver,\r\nexcept when the receiver is the current instance. I would tend, even then,\r\nto pass it explicitly to help make the code's intent clearer.\r\n\r\nThis has been expressed much more elegantly in numerous places, so search\r\nthe web if I only served to confuse!	1.9.3	ruby@slightlystrange.org	2011-11-23 14:12:00	Daniel	Bye	2012-05-02 11:54:42.733991	2012-05-05 00:47:13.769915
37	ruby-talk	Array	Array overwrite question	array, map, dup	> like Brian says:\r\n>\r\n> cc2 = Marshal.load(Marshal.dump(aa2))\r\n\r\nIn this particular case #map also works because we know the depth to be \r\ntwo levels:\r\n\r\narr = [[1,2], [3,4], [5,6]]\r\ncopy = arr.map {|a| a.dup}	1.9.3	shortcutter@googlemail.com	2011-07-15 09:08:00	Robert	Klemme	2012-05-02 11:47:56.712334	2012-05-03 19:18:03.714556
281	ruby-talk	Enumerable	Enumerable Module	each, enumerable	Enumerable will work with any class that has a meaningful #each method.	1.9.3	matma.rex@gmail.com	2011-08-25 11:28:00	Bartosz	DziewoÅski	2012-05-02 12:33:03.60877	2012-05-11 15:54:56.688925
298	ruby-talk	rand	Question abour rand()	rand, year, add, test	> while pipi == TRUE\r\n>   if x > 1950 || x < 2000\r\n>      return  x\r\n>      pipi = FALSE\r\n\r\nHmm.  Looks as though you want the range 1951..1999.  Well, that's easy enough:\r\n\r\n\trand(49) + 1951\r\n\r\n(Note that rand(49) returns anything from 0 to 48, inclusive.)	1.9.3	usenet-nospam@seebs.net	2009-12-29 15:36:00	Peter	Seebach	2012-05-02 12:35:56.265454	2012-05-05 01:01:45.446697
135	ruby-talk	String	Add text at beginning of a string?	string, insert, text	> Sorry for this silly question, but I don't remember how to insert text\r\n> to the beginning of a string. It's like the concatenate (or <<) operator\r\n> but it adds text before.\r\n\r\nI recommend studying this page, it's good to be familiar with the\r\nmethods in class String:\r\n\r\n<a href="http://ruby-doc.org/core/classes/String.html">http://ruby-doc.org/core/classes/String.html</a>\r\n\r\nThe one you are looking for is:\r\n\r\nirb(main):001:0> s = "world"\r\n=> "world"\r\nirb(main):002:0> s.insert(0, "hello ")\r\n=> "hello world"\r\nirb(main):003:0> s	1.9.3	jgabrielygalan@gmail.com	2008-12-20 18:33:00	JesÃºs	Gabriel y Galan	2012-05-02 12:04:59.505882	2012-05-11 19:36:05.412271
400	ruby-talk	System	At_exit handling	system, exit, error	> Then suddenly one day, I required some files, one of which used at_exit,\r\n> and I had a weird bug in that the exiting no longer worked as-is,\r\n> instead it raised some SystemExit exception.\r\n> \r\n> This confused me a lot because that should not happen at all ever.\r\n\r\nIt should happen always, regardless of at_exit:\r\n\r\nbegin\r\n  exit 1\r\nrescue SystemExit => e\r\n  p e\r\nend\r\n\r\n# => #<SystemExit: exit>	1.9.3	ryand-ruby@zenspider.com	2012-01-13 12:09:00	Ryan	Davis	2012-05-02 12:55:39.185025	2012-05-03 19:26:38.709599
516	ruby-talk	method_missing	Use of instance_eval?	method_missing, instance_eval, pattern, methods	> def method_missing(method_name,*args)\r\n>  for @@y in(0..@@e-1) do\r\n>    if ("#{method_name}"==@@a[0][@@y])\r\n>      @@index=@@y\r\n>      break\r\n>      else if (@@y==@@e-1)\r\n>      puts "This method (#{method_name})does not belong to any field\r\n> value .. !!"\r\n>        end\r\n>   end\r\n> end\r\n>  instance_eval " def #{method_name}; puts '#{@@a[@@x][@@index]}'; end"\r\n> end\r\n>\r\n> and when i want to access this newly defined method i'm doing\r\n> following:-\r\n>\r\n> ro1=RecordOne.find("subject","algorithm")\r\n> ro1.author\r\n> ro1.author\r\n>\r\n> i'm not able to get value at single method call...:(\r\n\r\nA typical pattern is to redefine the method and then call it using\r\nsend:\r\n\r\n   class C\r\n     def method_missing(m,*args,&block)\r\n       instance_eval "def #{m}; puts 'In new method!'; end"\r\n       send(m)\r\n     end\r\n   end\r\n\r\n   C.new.blah   # In new method!\r\n\r\nIn your case that might look something like this (untested):\r\n\r\n   def method_missing(method_name,*args)\r\n     index = @@a[0].index(method_name)\r\n     if index\r\n       instance_eval <<-EOM\r\n         def #{method_name}\r\n           puts #{@@a[@@x][index]}\r\n         end\r\n       EOM\r\n       send(method_name)\r\n     else\r\n       super\r\n     end\r\n   end\r\n\r\nI don't know what all the class variables are for, and I've tried to\r\neliminate the ones that seem to be serving only as local variables.	1.9.3, 1.8.6	dblack@rubypal.com	2009-07-09 06:46:00	David A.	Black	2012-05-04 18:41:37.624779	2012-05-04 18:41:37.624779
66	ruby-talk	Time	Time. to_military_time?	time, military, 24 hour, am, pm	>>> Is there any time function to get military time:\r\n>>> eg.\r\n>>>\r\n>>> tim="0457"\r\n>>> Time.strptime(time,....)       ==> 16:57\r\n\r\n> Out of curiosity, isn't '0457' the same as 4:57 AM? If that's the case, then why wouldn't the \r\n> regular date parser do the job:\r\n\r\nYou are correct, and I was wondering the same thing. Unless he has some OS that's not giving him \r\nthe universal (except in North America) 24 hour time and using AM and PM suffixes, but then I \r\nwould think the issue would be just as easy, add 12 to PM, put in the exception to when midnight \r\nhappens so you don't end up with 2405 (unless that's your preference. In the Marines it was always \r\n2400 for midnight and 0001 for one minute past).	1.9.3		2012-03-07 05:28:00	Wayne	Brissette	2012-05-02 11:54:42.631162	2012-05-11 17:32:10.746576
13	ruby-talk	Regexp	Insert text after line "whatever"	regex, string, insert	> Does anyone have a solution on how to do read a file line by line and\r\n> inserting text after a specific line?\r\n\r\nSomething like this should work:\r\n\r\nFile.open("destination.txt", "w") do |out|\r\n  File.foreach("original.txt") do |line|\r\n    out.puts line\r\n    if line =~ /YOUR_REGEX/\r\n      out.puts "THE NEW LINE"\r\n    end\r\n  end\r\nend	1.9.3	jgabrielygalan@gmail.com	2012-04-17 09:32:00	JesÃºs	Gabriel y Galan	2012-05-02 11:37:03.36111	2012-05-11 16:25:17.418734
200	ruby-talk	Array	Why are there so many similar/identical methods in core classes	array, replace, assignment, irb, example	> Useless methods? : replace. Why do you need an explicit method for this.\r\n> Can't you just use the assignment operator ?\r\n\r\nNo, you can't.\r\n\r\nirb(main):001:0> a = 5.times.to_a\r\n=> [0, 1, 2, 3, 4]\r\nirb(main):002:0> b = a\r\n=> [0, 1, 2, 3, 4]\r\nirb(main):003:0> a = %w{foo bar}\r\n=> ["foo", "bar"]\r\nirb(main):004:0> b\r\n=> [0, 1, 2, 3, 4]\r\nirb(main):005:0> # BUT ---------------------------\r\nirb(main):006:0* a = 5.times.to_a\r\n=> [0, 1, 2, 3, 4]\r\nirb(main):007:0> b = a\r\n=> [0, 1, 2, 3, 4]\r\nirb(main):008:0> a.replace %w{foo bar}\r\n=> ["foo", "bar"]\r\nirb(main):009:0> a\r\n=> ["foo", "bar"]\r\nirb(main):010:0> b\r\n=> ["foo", "bar"]\r\nirb(main):011:0>	1.9.3	shortcutter@googlemail.com	2011-12-02 09:17:00	Robert	Klemme	2012-05-02 12:16:53.489166	2012-05-05 19:53:09.687719
181	ruby-talk	String	Method Missing as Filter	ternary, match, truthy, both	> Let's say I have a model called User. User has two attributes or table\r\n> columns: id, username\r\n>\r\n> I can check that there is indeed a username ("Tom") and return 1 if\r\n> there is one and 0 by using this code\r\n> User.find_by_username("Tom")? 1 : 0\r\n>\r\n> How would I find out Tom's corresponding id?\r\n\r\n1) This is a rails question, not a ruby question. Please use the appropriate forum.\r\n\r\n2) You do know that both 0 and 1 are truthy in ruby, yes? Don't get bit by that.	1.9.3	ryand-ruby@zenspider.com	2012-04-25 17:38:00	Ryan	Davis	2012-05-02 12:13:45.262283	2012-05-05 01:52:44.851209
169	ruby-talk	Operator	CLI: "System" command	operator, system, command, capture, output	You can use the %x[] construction to get the output of a system command\r\n\r\nFor example:\r\noutput = %x[ls] #no quotes needed	1.9.3	jakesmmrs2@gmail.com	2011-12-22 03:47:00	Jake	Sommers	2012-05-02 12:13:44.881931	2012-05-05 01:44:27.356073
199	ruby-talk	String	Need help with gsub a string	string, remove, trailing, slash, strip	> Or on the off chance there might be additional slashes in there --\r\n>\r\n>> s.split('/').last.strip\r\n\r\nFile.basename(s).strip	1.9.3	ryand-ruby@zenspider.com	2011-11-23 11:32:00	Ryan	Davis	2012-05-02 12:16:53.457257	2012-05-05 18:45:33.244286
108	ruby-talk	Array	Is high-speed sorting impossible with Ruby?	array, first, i/o, input, stdin	> $stdin.readlines will return when it reads EOF; to my understanding, that's why Ryan said the input data needs to be 'honest' in his previous post. On a Unix system you can test this by pressing Ctrl-D (to send EOF to the input stream).\r\n\r\nIf it isn't honest, you can still address this by using Array#first(size). You'll read in more than necessary, but it is still worth the boost by only doing 1 IO.	1.9.3	ryand-ruby@zenspider.com	2011-11-28 14:59:00	Ryan	Davis	2012-05-02 12:00:59.698153	2012-05-05 18:31:48.727344
117	ruby-talk	System	CLI: "System" command	system, command, backtick, string, trueclass 	> I was messing around with the "system" command in Ruby!\r\n> That's really cool, but a question immediately sprang out while using it\r\n> : I noticed that its output is a TrueClass, but how could I use the\r\n> output made of directories and files as string?\r\n> For example : if I cast a\r\n> \r\n> system('ls')\r\n> \r\n> it will return me a variety of directories and files. So, let's put that\r\n> I want to scan this result to find out which directories are named how\r\n> (with a Regexp), is there a way to read this output or the is solely a\r\n> TrueClass?\r\n\r\nRelated to the system method is backticks (`):\r\n\r\noutput = `ls`\r\nputs "These are the directories and files:\r\n#{output}"\r\n\r\nThe backticks run a command similarly to the system method, but the\r\noutput of the command you give them is captured into a string and\r\nreturned.  You can slice and dice the string as you please at that point.\r\n\r\nKeep in mind though that there are more efficient ways to handle this\r\nparticular example than using an external command to acquire a\r\nfile/directory listing.	1.9.3	jeremy@bopp.net	2011-12-20 08:37:00	Jeremy	Bopp	2012-05-02 12:01:39.581341	2012-05-06 18:17:38.049597
336	ruby-talk	String	Using "puts" in ternary operator	string, scope, ambiguous, ternary, dry	> SyntaxError: (irb):3: syntax error, unexpected tSTRING_BEG, expecting\r\n> keyword_do or '{' or '('\r\n> x == 2 ? puts "two" : puts "one"\r\n>               ^\r\n> (irb):3: syntax error, unexpected ':', expecting $end\r\n> x == 2 ? puts "two" : puts "one"\r\n\r\nI think the lack of parens creates an ambiguous scope for the argument to the initial `puts` whereas your next form doesn't.\r\n\r\n> x == 2 ? puts("two") : puts("one")\r\n\r\nRegardless you could DRY it up (without even parens) as\r\n\r\nputs x == 2 ? "two" : "one"	1.9.3	hassan.schroeder@gmail.com	2011-07-22 17:13:00	Hassan	Schroeder	2012-05-02 12:43:01.722645	2012-05-07 00:43:39.936887
553	ruby-talk	Thread	Write to kernel buffer?	password, clear, kernel, buffer, wipe, thread, synchronize	> memstore = Thread.new {\r\n> start = Time.now.to_i\r\n> loop do\r\n> if Time.now.to_i == (start + 2) then\r\n> wipe = StringIO.new("\\0" * @password.bytesize)\r\n> wipe.read(@password.bytesize, @password)\r\n> puts "password cleared"\r\n> break\r\n> end\r\n> end\r\n> }\r\n\r\nI think there's a simpler way to achieve wiping:\r\n\r\n# read\r\n@password = ...\r\n\r\n# wipe after 2 secs\r\nThread.new do\r\n  sleep 2\r\n  @password.replace("#" * @password.length)\r\nend\r\n\r\nNote though that for both approaches you need proper synchronization.	1.9.3	shortcutter@googlemail.com	2012-03-26 11:07:00	Robert	Klemme	2012-05-04 22:23:17.213332	2012-05-04 22:23:17.213332
335	ruby-talk	Time	Display computation time in IRB?	time, compute, irbrc, elapsed time	>> Is there an easy way to display the time it takes to compute any\r\n>> function from within IRB?\r\n> \r\n> It's not unheard of for people to add something like this to their\r\n> irbrc:\r\n> \r\n>   def time\r\n>     start = Time.now\r\n>     result = yield\r\n>     puts "Completed in #{Time.now - start} seconds."\r\n>     result\r\n>   end\r\n> \r\n> In use:\r\n> \r\n>   016:0> time { ('a'*10_000_000).sub(/a+/,'hi') }\r\n>   Completed in 0.446504 seconds.\r\n>   "hi"\r\n\r\nOr something like this:\r\n\r\nirb(main):005:0> def time\r\nirb(main):006:1>   start = Process.times.inject{|s,x|s+x}\r\nirb(main):007:1>   result = yield\r\nirb(main):008:1>   finish = Process.times.inject{|s,x|s+x}\r\nirb(main):009:1>   puts "Completed in #{finish - start} cpu seconds"\r\nirb(main):010:1>   result\r\nirb(main):011:1> end\r\n=> nil\r\nirb(main):012:0> time {sleep 1}\r\nCompleted in 0.0 cpu seconds\r\n=> 1\r\nirb(main):013:0> time {1000000.times {1.23**42}}\r\nCompleted in 0.57 cpu seconds\r\n=> 1000000	1.9.3	vjoel@path.berkeley.edu	2009-03-20 16:01:00	Joel	VanderWerf	2012-05-02 12:42:28.348073	2012-05-04 00:02:21.287583
369	ruby-talk	File	Reading file to list	file, read, line, scan, map, readlines, leading, trailing, space	> That fails when numbers are separated by more than one space.\r\n> And what about leading or trailing space?\r\n\r\nThis is easily fixed:\r\n\r\nFile.readlines("blob.txt").map{|line| line.scan(/d+/).map{|s| s.to_i }}\r\n\r\nBtw, this will also read in the advertised Lisp notation with leading\r\nand trailing bracket per line. :-)	1.9.3	shortcutter@googlemail.com	2009-02-25 13:27:00	Robert	Klemme	2012-05-02 12:49:26.437262	2012-05-06 18:54:00.795148
536	ruby-talk	Array	Creating an array?	array, new, iteration, loop	> Is there a short way of creating array of numbers\r\n> with, for example, step of 10, like this:\r\n> \r\n> 10,20,30,40,50\r\n> \r\n> By short I mean without going through iteration loop:\r\n> \r\n> array=[]\r\n> (1..5).each do |i|\r\n>     array.push i*10\r\n> end\r\n\r\nTake a look at Array.new[1]:\r\n\r\nirb(main):001:0> Array.new(5){|i| i * 10}\r\n=> [0, 10, 20, 30, 40]\r\n\r\nWith a little bit of math you should be able to get your desired result.	1.9.3	sutniuq@gmx.net	2009-12-28 12:35:00	Marvin (Quintus)	Vale	2012-05-04 21:11:34.054175	2012-05-04 21:11:34.054175
557	ruby-talk	Regexp	Problem replacing $data[abc] with $data['abc'] using gsub	regex, string, match, exponential	>> The part ".*?" of the regular expression is very inefficient\r\n>\r\n> Is it? Have you measured it?\r\n>\r\n>> because it will at first consume every character until the end of the \r\n>> line and then try to find the minimum of characters needed.\r\n>\r\n> Does it? There are many implementations of ruby, which particular one(s)\r\n> are you referring to?\r\n>\r\n> Your argument suggests that\r\n>\r\n>   /(.+?)(.+?)(.+?)(.+?)(.+?)/ =~ "a"*1_000_000\r\n>\r\n> would be extremely inefficient, but actually it runs very fast for me.\r\n>\r\n> So let's demonstrate if you are right or wrong:\r\n\r\nSorry, but you're both wrong. :) The expression, as far as I know, *will not* first \r\nconsume eveyrthing, and then back off (or at least this is implementation-defined). \r\nSuch regexps can, however, be slow. (Although .+ can be slow as well.)\r\n\r\nLet's try something a tiny bit more complicated (but still simple).\r\n\r\nirb(main):001:0> re = /.+?a.+?b/\r\n=> /.+?a.+?b/\r\nirb(main):002:0> s = "ac"*1_000_000 + "b"; nil\r\n=> nil\r\nirb(main):003:0> s =~ re\r\n=> 0\r\n\r\nThis run fasts. Now, what if it can't match?\r\n\r\nirb(main):004:0> s = "ac"*1_000_000; nil\r\n=3D> nil\r\nirb(main):005:0> s =~ re\r\n\r\nI have no idea what the output is - it's been running for a few minutes... the same happens \r\nif you substitute .+? with .+.\r\n\r\nThis is a bad case of catastrophic backtracking:\r\n\r\n<a href="http://www.regular-expressions.info/catastrophic.html">http://www.regular-expressions.info/catastrophic.html</a> \r\n\r\n- and stems from the fact that matching a regex to a string is asymptotically exponential.\r\n\r\nIn short - you should never use .+ or .+?, unless you have a very good reason or know \r\nprecisely what kinds of input you will get.\r\n\r\n</code>\r\n\r\n<p>Addendum:</p>\r\n\r\n<p>A much cleaner, more concise, and "classic" example would be:</p>\r\n\r\n<code>\r\nirb(main):001:0> re = /(a+)+b/\r\n=> /(a+)+b/\r\nirb(main):002:0> s = "a"*50 + "b"\r\n=> "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaab"\r\nirb(main):003:0> s =~ re\r\n=> 0\r\nirb(main):004:0> s = "a"*50\r\n=> "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"\r\nirb(main):005:0> s =~ re\r\n(hangs)	1.9.3	matma.rex@gmail.com	2012-03-13 21:42:00	Bartosz	DziewoÅski	2012-05-04 22:40:19.181587	2012-05-11 21:14:37.855802
473	ruby-talk	CLI	Data stream variables	ruby, line numbers, print, command line	> I want to print all lines witch contain the string "Open" from a bunch\r\n> of 'xml' files. Additionally I want to print the filename and the line\r\n> number of the match.\r\n> \r\n> The problem with the following snippet is, that the variable '$.' does\r\n> not reset the line number at the beginning of a new file.\r\n> \r\n> That menas, the printed file numbers are not correct except for the\r\n> first file of '*.xml'\r\n> \r\n> ruby -n -e 'puts ($FILENAME + " " + $..to_s + "" + $_) if /Open/' *.xml\r\n> \r\n> Does anybody have a idea, on how to print the correct line number?\r\n\r\nI'm not Alain, but... :-)  Just kidding.\r\n\r\nHere's how to do it:\r\n\r\nruby -ne 'puts "#$FILENAME #$. #$_" if /Open/; $.=0 if ARGF.eof?' *.xml	1.9.3	shortcutter@googlemail.com	2009-01-12 20:12:00	Robert	Klemme	2012-05-02 14:06:00.803036	2012-05-03 23:36:15.488221
327	ruby-talk	Hash	Changing output from my hash?	hash, output, change, url, HAML, sort	> i have a program who gets urls and category from pages on a certain\r\n> directory, i put this data on a hash like this example:\r\n> \r\n> pages{general =>[link1,link2)],producst => [link1, link2], services =>\r\n> [link1, link2], downloads => [link1,link2]}\r\n> \r\n> I'm using haml on my view page\r\n> so the output code looks like this\r\n> \r\n> - pages.each do |category, links|\r\n>   .span-6\r\n>     %h1= category\r\n>     %ul\r\n>       - links.each do |link|\r\n>         %li= link\r\n> \r\n> so this give me the result:\r\n> Downloads       General       products     services\r\n> link1            link1          link1       link1\r\n> link2            link2          link2       link2\r\n> \r\n> \r\n> i wish the general come to the left side and the downloads go to right,\r\n> is there any way to sort my hash?\r\n\r\nSort your hash keys and then iterate over the sorted list in order to\r\npull the values from the hash in the same order.  I'm not familiar with\r\nHAML, but here is my guess as to what it should be using a hard coded\r\nordered list of categories:\r\n\r\n- ordered_categories = %w(general products services downloads)\r\n- ordered_categories.each do |category|\r\n-   links = pages[category]\r\n    .span-6\r\n      %h1= category\r\n      %ul\r\n        - links.each do |link|\r\n          %li= link\r\nend\r\n\r\nIf your categories are more dynamic, you'll need to find a more creative\r\nway to sort them.  The keys method on the pages variable will give you\r\nthe keys of the hash as an array, and you can use the sort method of\r\nthat to go wild. :-)	1.9.3	jeremy@bopp.net	2011-12-29 09:05:00	Jeremy	Bopp	2012-05-02 12:41:15.323491	2012-05-03 19:51:54.431664
387	ruby-talk	Database	Connecting to an oracle database	database, oracle, driver, db, connection, open	> I have problems connection to an oracle database using dbi.\r\n>\r\n> machine: debian lenny,\r\n> ruby: ruby 1.8.7 (2008-08-11 patchlevel 72)\r\n>\r\n> Using several descriptions on internet I have downloaded\r\n> ruby-oci8-1.0.3.tar and installed it.\r\n>\r\n> The result is that I can open a database using a OCI8 object, but not\r\n> using a DBI object. I understood that the way to use DBI is by\r\n> installing that package.\r\n>\r\n> Following a test script and its output. Can someone tell me what could\r\n> be wrong? Do I need to install another package?\r\n>\r\n> ============ script\r\n> require 'oci8'\r\n> require 'dbi'\r\n>\r\n> connection = OCI8.new( 'user', 'pwd', 'database')\r\n> cursor = connection.exec('select id, description, name from role')\r\n>  while r = cursor.fetch()\r\n>   puts r.join(',')\r\n>  end\r\n>  cursor.close\r\n>  connection.logoff\r\n>\r\n> puts "and now using DBI"\r\n>\r\n> puts DBI.available_drivers\r\n> db = DBI.connect('DBI:OCI8:database', 'user', 'pwd')\r\n> sql = "select id from role"\r\n>\r\n> dbh.select_all(sql) do | row |\r\n>            p row\r\n>        end\r\n>\r\n> dbh.disconnect\r\n>\r\n> ==============output\r\n> 1,admin,admin\r\n> 2,traffic,traffic\r\n> and now using DBI\r\n> dbi:ODBC:\r\n> /usr/lib/ruby/1.8/DBD/ODBC/ODBC.rb:95:in `connect': IM002 (0)\r\n> [iODBC][Driver Manager]Data source name not found and no default\r\n> driver specified. Driver could not be loaded (DBI::DatabaseError)\r\n>        from /usr/lib/ruby/1.8/dbi.rb:424:in `connect'\r\n>        from /usr/lib/ruby/1.8/dbi.rb:215:in `connect'\r\n>        from leesdb:18#\r\n\r\nNote, I am not using DBI just trying to throw in my 0.02EUR Oracle knowledge.\r\n\r\nLooks like it attempts to not use OCI but ODBC instead. Did you check\r\noutput of these:\r\n\r\nDBI.available_drivers\r\nDBI.data_sources( driver )\r\n\r\nYou could also try DBI.trace to get more interesting output.\r\n\r\nBtw, you do have an Oracle client installed, do you?	1.9.3	shortcutter@googlemail.com	2009-02-05 13:57:00	Robert	Klemme	2012-05-02 12:52:22.703637	2012-05-03 23:04:56.349536
554	ruby-talk	Gem	CL interface to rubygems.org's search	gem, search, tool, gemqs, query	I created a gem to search for gems from the command line:\r\n\r\ninstall:\r\ngem install gemqs\r\n\r\nusage:\r\ngemqs [[searchterm1] [searchterm2] ... ]\r\n   <..search results >\r\n\r\n<a href="github: https://github.com/daveheitzman/gemqs">github: https://github.com/daveheitzman/gemqs</a>\r\n\r\n</code>	1.9.3	rubyinfo@aptifuge.com	2012-03-18 20:41:00	David	Heitzman	2012-05-04 22:26:15.705557	2012-05-11 21:12:12.188452
2	ruby-talk	Regexp	Scan - variable as pattern	regex, variable, pass, scan, instance, match	> The docs for rRegexp (<a href="http://www.ruby-doc.org/core-1.9.3/Regexp.html">http://www.ruby-doc.org/core-1.9.3/Regexp.html</a>)\r\n> have a example\r\n> you need str.scan /#{s}/\r\n\r\nI'd prefer to pass a Regexp instance directly in the variable:\r\n\r\n# any of these will do\r\nr = /./\r\nr = Regexp.new '.'\r\nr = /#{s}/\r\n\r\nstr.scan r do |match|\r\n...\r\nend	1.9.3	shortcutter@googlemail.com	2011-12-26 19:20:00	Robert	Klemme	2012-05-02 11:37:02.912749	2012-05-11 18:00:59.777037
182	ruby-talk	Class	Display instance variable values	instance, variable, class, display, instance_variable_get	> If I have a people class with instance variables @name @age and @gender\r\n> and an instance of that class called peep (justa an example).\r\n> If I want to see all the available instance variables I can do:\r\n>\r\n> p peep.instance_variables => ["@age", "@name", "@gender"]\r\n>\r\n> Is there a way to get the value of those instance variables for the peep\r\n> instance without calling a class method ? Say there is full r/w access\r\n> to the instance variables.\r\n>\r\n> Something like:\r\n>\r\n>\r\n> peep.instance_variables.each do |var|\r\n>\r\n>   var.(display value somehow)\r\n>\r\n> end\r\n\r\nreplace the line "var.(display value somehow)" with   "puts\r\npeep.instance_variable_get(var)"	1.9.3	josh.cheek@gmail.com	2010-11-13 15:40:00	Josh	Cheek	2012-05-02 12:13:45.305315	2012-05-05 20:02:21.72916
223	ruby-talk	Object	Top level function definition gets in Kernel module?	object, kernel, instance_methods, methods, sort	> irb(main):001:0> def test_fun\r\n> irb(main):002:1> end\r\n> => nil\r\n> irb(main):003:0> p Object.instance_methods.sort\r\n> [...]\r\n> singleton_methods", "taint", "tainted?", "tap", "test_fun", "to_a",\r\n> "to_enum", "to_s", "type", "untaint"]\r\n> => nil\r\n> irb(main):004:0> p Kernel.methods.sort\r\n> [...]\r\n> "tainted?", "tap", "test", "test_fun", "throw", "to_a", "to_enum",\r\n> "to_s", "trace_var", "trap", "type", "untaint", "untrace_var", "warn"]\r\n> => nil\r\n\r\nYou wrote Kernel.methods, not Kernel.instance_methods. Kernel.methods\r\nreturns the names of all the methods on the Kernel object itself. "Kernel" is\r\na reference to an object of class Module, which is a subclass of Object.\r\n\r\nThus, since test_fun is an instance method on Object, and Kernel is an instance\r\nof a subclass of Object, it has access to that method as well.\r\n\r\nI think you were confused between Kernel.methods and Kernel.instance_methods.\r\nKernel.instance_methods does not include "test_fun" given this example, as expected.	1.9.3	adgar@carboni.ca	2011-07-23 17:05:00	Michael	Edgar	2012-05-02 12:20:59.129782	2012-05-06 21:10:13.754976
247	ruby-talk	String	Q: most efficient way to remove duplicate spaces in a string?	string, speed, gsub, split, join, gsub!, benchmark, squeeze	> For gsub/gsub!, instead of replacing one or more white space with a\r\n> white space, speed it up by replacing two or more white space with a\r\n> white space.  This saves unneeded processing by not replacing single\r\n> white space.  I.e., instead of gsub(/ +/, ' '), try gsub(/  +/, ' ') or\r\n> gsub(/ {2,}/, ' ') and benchmark them (they should be faster).  Of\r\n> course, it's still not going to be as fast as split.join or\r\n> squeeze.strip (at least depending on the version of ruby used, as older\r\n> ruby versions may put squeeze.strip markedly slower than split.join.\r\n\r\n#!/usr/bin/ruby\r\n\r\nrequire 'benchmark'\r\n\r\nn = 1_000_000\r\n\r\nBenchmark.bm(15) do |x|\r\n  x.report("gsub") { n.times do\r\n      a_string = "This     is  a test   string."\r\n      a_string.gsub(/ +/, ' ')\r\n    end\r\n  }\r\n  x.report("gsub!") { n.times do\r\n      a_string = "This     is  a test   string."\r\n      a_string.gsub!(/ +/, ' ')\r\n    end\r\n  }\r\n  x.report("gsub2") { n.times do\r\n      a_string = "This     is  a test   string."\r\n      a_string.gsub(/ {2,}/, ' ')\r\n    end\r\n  }\r\n  x.report("gsub!2") { n.times do\r\n      a_string = "This     is  a test   string."\r\n      a_string.gsub!(/ {2,}/, ' ')\r\n    end\r\n  }\r\n  x.report("gsub s") { n.times do\r\n      a_string = "This     is  a test   string."\r\n      a_string.gsub(/s+/, ' ')\r\n    end\r\n  }\r\n  x.report("gsub! s") { n.times do\r\n      a_string = "This     is  a test   string."\r\n      a_string.gsub!(/s+/, ' ')\r\n    end\r\n  }\r\n  x.report("gsub2 s") { n.times do\r\n      a_string = "This     is  a test   string."\r\n      a_string.gsub(/s{2,}/, ' ')\r\n    end\r\n  }\r\n  x.report("gsub!2 s") { n.times do\r\n      a_string = "This     is  a test   string."\r\n      a_string.gsub!(/s{2,}/, ' ')\r\n    end\r\n  }\r\n  x.report("split.join") { n.times do\r\n      a_string = "This     is  a test   string."\r\n      a_string.split.join(' ')\r\n    end\r\n  }\r\n  x.report("squeeze.strip") { n.times do\r\n      a_string = "This     is  a test   string."\r\n      a_string.squeeze(' ').strip\r\n    end\r\n  }\r\nend\r\n\r\n$ ./stringcleanup.rb\r\n                     user     system      total        real\r\ngsub             7.250000   0.120000   7.370000 (  8.386002)\r\ngsub!            7.240000   0.130000   7.370000 (  9.007479)\r\ngsub2            7.110000   0.140000   7.250000 (  9.302915)\r\ngsub!2           6.830000   0.150000   6.980000 (  9.309362)\r\ngsub s           7.410000   0.140000   7.550000 ( 10.864572)\r\ngsub! s          7.400000   0.130000   7.530000 ( 10.286886)\r\ngsub2 s          7.020000   0.100000   7.120000 (  8.977424)\r\ngsub!2 s         6.860000   0.100000   6.960000 (  8.421220)\r\nsplit.join       4.420000   0.110000   4.530000 (  5.716684)\r\nsqueeze.strip    3.120000   0.110000   3.230000 (  3.651918)\r\n\r\nI haven't run it enough to do any statistical analysis, but after\r\n5 runs it seems like the various flavors of gsub/gsub! don't really\r\nperform any differently.  splitting and squeezing look like much\r\nbetter options.	1.9.3	pat.eyler@gmail.com	2009-01-10 13:46:00	pat	eyler	2012-05-02 12:26:51.290677	2012-05-06 18:56:09.047742
127	ruby-talk	String	"aaabbccccdadd" => [ [a, 3], [b, 2], [c, 4], [d, 1], [a, 1], [d,	array, string, map, scan	> I'm thinking to translate string to an array like this:\r\n> "aaabbccccdadd" => [ [a, 3], [b, 2], [c, 4], [d, 1], [a, 1], [d, 2] ]\r\n>\r\n> this is my code:\r\n>\r\n> ary = []\r\n> "aaabbccccdadd".scan(/((.)*)/){ |a,b| ary << [b, a.size] }\r\n>\r\n> ary #=> [["a", 3], ["b", 2], ["c", 4], ["d", 1], ["a", 1], ["d", 2]]\r\n>\r\n> But, I wonder if there are more effective or beautiful solution than this.\r\n\r\n\r\nHm....\r\n\r\nirb(main):008:0> ary = "aaabbccccdadd".to_enum(:scan,/(.)\\2*)/).map{|a,| [a, $&.length]}\r\n=> [["a", 3], ["b", 2], ["c", 4], ["d", 1], ["a", 1], ["d", 2]]\r\n\r\nirb(main):013:0> ary = "aaabbccccdadd".scan(/((.)*)/).map {|a,b| [b, a.length]}\r\n=> [["a", 3], ["b", 2], ["c", 4], ["d", 1], ["a", 1], ["d", 2]]\r\n\r\nOnly marginally nicer.\r\n\r\nBtw.\r\n\r\nirb(main):018:0> "aaabbccccdadd".gsub(/(.)+/){|m| m[0]+m.length.to_s}\r\n=> "a3b2c4dad2"\r\n\r\nRLE for Characters. :-)	1.9.3	shortcutter@googlemail.com	2011-12-13 16:24:00	Robert	Klemme	2012-05-02 12:04:59.278398	2012-05-08 21:29:32.681014
483	ruby-talk	Hash	Hash access	hash, equal keys, #==, equality, test	> I was playing around with an idea after reading the thread about defining\r\n> #hash. My understanding was that #hash gives a unique identifier, and that\r\n> #eql? allows the hash to determine whether the two objects are equal in\r\n> terms of being the same hash key. So I wrote some code that should take an\r\n> equivalent instance, or a string for quick access. But it behaves in a way\r\n> that I completely don't understand. Hoping someone can help:\r\n>\r\n>\r\n> User = Struct.new :name, :age, :identifier do\r\n>  def hash\r\n>    name.hash\r\n>  end\r\n>\r\n>  def eql?(other)\r\n>    puts "#{name} was asked if they were equal to #{other.inspect}"\r\n>    (other == name) || (other.name == name && other.age ===\r\n age)\r\n>  end\r\n> end\r\n>\r\n> josh = User.new 'Josh', 28, 'first Josh'\r\n> hash = {josh => josh}\r\n>\r\n> hash[josh]                               \r\n # => #<struct User name="Josh",\r\n> age=28, identifier="first Josh">\r\n> hash[User.new 'Josh', 28, 'second Josh']  # => #<struct User name="Josh", age=28, identifier="first Josh">\r\n> hash['Josh']                              #= \r\n=> nil\r\n>\r\n> # >> Josh was asked if they were equal to #<struct User name="Josh",\r\n> age=28, identifier="first Josh">\r\n>\r\n> So I would have expected all three to go through eql? Instead, we see that\r\n> only the case where the key was the same object goes through. However, it\r\n> identifies that the second Josh is the same key, without invoking User#eql?\r\n> How does it do this?\r\n>\r\n> And why does the string "Josh" not find the instance?\r\n>\r\n> This is all probably in my copy of the Pickaxe, but it's in Chicago and I'm\r\n> out of town :/\r\n\r\nHere is how Hash in Ruby works when it tries to determine if two keys are equal:\r\n\r\n* the #hash method on both objects are called to calculate their hash codes\r\n* if their hash codes are not equal, they are not equal\r\n* if their hash codes are equal, then #== is called to determine if two objects are equal\r\n\r\nIn your example, all three objects actually return the same hash\r\ncodes, so #== (instead of eql?) is used to check their equality.\r\n\r\nThe "first Josh" and the "second Josh" are equal because their #==\r\n(inherited from Object#==) simply calls #eql? which you have\r\noverridden to make them equal.\r\n\r\nThe "first Josh" is not equal to "Josh" because they are of different\r\nclasses, and User#== (inherited from Object#==) does not allow obje=\r\ncts\r\nof different classes to be equal.\r\n\r\nAs a side note: you should always define #hash and #== together and\r\nmake sure whenever #== returns true #hash mush return the same number,\r\notherwise, using these objects as hash keys will break the hash\r\nsemantics. Also, avoid using mutable objects as hash keys unless their\r\n#hash number is immutable.	1.9.3	gilbertly@gmail.com	2011-12-30 15:41:00	Yong	Li	2012-05-02 14:11:20.359983	2012-05-11 15:26:28.798962
116	ruby-talk	Array	Explanation of "awk print $4" in ruby?	array, split, script	>>>>      df -k | ruby -lane 'print $F[3]'\r\n>>>\r\n>>> yes and no.  I prefer it in script form no CLI form.\r\n>>>\r\n>>> dfstr = Array.new\r\n>>> dfstr << %x(df -m)\r\n>>> dfstr.each do |line|\r\n>>>     ?????\r\n>>> end\r\n>>\r\n>> Tried this too:\r\n>>\r\n>> $; = 'Avail'\r\n>> dfstr = %x(df -m)\r\n>> puts dfstr[$;]\r\n>\r\n> I got it using, but ideally would not like to use a file on the FS.\r\n>\r\n> DFSTR = "/tmp/dfstr.out"\r\n> %x(df -m > "#{DFSTR}")\r\n> file = File.open("#{DFSTR}", "r")\r\n> file.each do |ln|\r\n>    ln.chomp\r\n>    fsaray = []\r\n>    fsaray = ln.split\r\n>    puts fsaray[3]\r\n> end\r\n\r\nYou don't need a file, cause it will return a string with each line\r\nseparated by ", which the "each" method in string defaults to as a separator:\r\n\r\nirb(main):001:0> s = %x{df -k}\r\nirb(main):002:0> s.each {|line| p line}\r\n"Filesystem           1K-blocks      Used Available Use% Mounted on"\r\n"/dev/sda1            147549816  17405644 122649048  13% /"\r\n"tmpfs                  1815116         0   1815116   0% /lib/init/rw"\r\n"varrun                 1815116       132   1814984   1% /var/run"\r\n"varlock                1815116         0   1815116   0% /var/lock"\r\n"udev                   1815116      2864   1812252   1% /dev"\r\n"tmpfs                  1815116       560   1814556   1% /dev/shm"\r\n"lrm                    1815116      2204   1812912   1% /lib/modules/2.6.27-14-generic/volatile"\r\n\r\nSo, now, for each line, you want to split as you did and take the 4th element:\r\nirb(main):003:0> s.map {|line| line.split[3]}\r\n=> ["Available", "122649048", "1815116", "1814984", "1815116","1812252", "1814556", "1812912"]\r\n\r\nIf you want to output this array, one element in each line, you can use puts on the full array:\r\n\r\nirb(main):004:0> puts s.map {|line| line.split[3]}\r\nAvailable\r\n122649048\r\n1815116\r\n1814984\r\n1815116\r\n1812252\r\n1814556\r\n1812912	1.9.3	jgabrielygalan@gmail.com	2009-12-23 18:23:00	JesÃºs	Gabriel y Galan	2012-05-02 12:01:39.560608	2012-05-11 15:57:16.993184
174	ruby-talk	Array	Sort_by different variables?	array, concat, sort_by, activated_at, created_at, sort	> I have a user control panel that generates an event log by merging\r\n> various things that can happen on the site. These are:\r\n>\r\n> user joins\r\n> user receives invitation\r\n> user completes invitation\r\n> user refers someone\r\n> user referee activates account\r\n>\r\n> So I want to merge these events into a single array and sort them. It\r\n> works well sorting by created_at. However, I do not have unique classes\r\n> for all of the events I want to merge (yeah, REST would have worked well\r\n> here).  So when I populate the array I do this:\r\n>\r\n>      # create array of all events for the log\r\n>      @events = []\r\n>      @events << @user.invitations\r\n>      @events << @user.pending_referrals\r\n>      @events << @user.active_referrals\r\n>      @events = @events.flatten!.sort_by {|x| x.created_at }.reverse\r\n\r\nFirst of all, I believe you want #concat and not #<<:\r\n\r\nirb(main):003:0> a = []\r\n=> []\r\nirb(main):004:0> a << [1,2,3]\r\n=> [[1, 2, 3]]\r\nirb(main):005:0> a << [6,7,8]\r\n=> [[1, 2, 3], [6, 7, 8]]\r\nirb(main):006:0> a\r\n=> [[1, 2, 3], [6, 7, 8]]\r\n\r\nirb(main):007:0> a = []\r\n=> []\r\nirb(main):008:0> a.concat [1,2,3]\r\n=> [1, 2, 3]\r\nirb(main):009:0> a.concat [6,7,8]\r\n=> [1, 2, 3, 6, 7, 8]\r\nirb(main):010:0> a\r\n=> [1, 2, 3, 6, 7, 8]\r\n\r\n> A pending_referral and active_referral are the same object,but pending\r\n> has an activated_at = nil and an active_referral has activated_at =\r\n> datetime.  So, it is possible to sort this array by created_at OR\r\n> activated_at?\r\n\r\narr.sort_by {|x| x.activated_at || x.created_at}	1.9.3	shortcutter@googlemail.com	2009-02-09 17:51:00	Robert	Klemme	2012-05-02 12:13:45.055844	2012-05-05 20:19:32.472329
86	ruby-talk	String	Regexp oddity	string, scan, behavior, position, increase, end, regex	> Anybody know why this occurs?\r\n>\r\n>>> 'a'.scan /.*/\r\n> => ["a", ""]\r\n>\r\n> Is this normal/expected?\r\n\r\nYes.  Scanning will start at pos 0 of the string and match as long as it can (i.e. until the end of the string): you get "a".  Next, position is increase (now 1, *at* the end) and since .* matches the\r\nempty string alas we have a match here as well: "".  Next position is *after* the end => no more matches.\r\n\r\nIf you want to see regexp engine matching in action you can use regexp coach which is a nice tool to explore such things (albeit not with ruby's regexp engine).	1.9.3	shortcutter@googlemail.com	2011-07-23 18:01:00	Robert	Klemme	2012-05-02 11:55:46.717601	2012-05-07 00:47:46.885428
243	ruby-talk	Encoding	Invalid byte sequence in US-ASCII (ArgumentError)?	encoding, default, invalid, utf-9, environment.rb	The magic encoding comment didn't cut it for me. I found the answer in\r\nmy case by adding the following to my environment.rb (I run a mixed 1.8\r\nand 1.9 environment):\r\n\r\nif RUBY_VERSION =~ /1.9/\r\n    Encoding.default_external = Encoding::UTF_8\r\n    Encoding.default_internal = Encoding::UTF_8\r\nend	1.9.3	jason@thefirstfriends.com	2010-11-10 19:39:00	Jason	O	2012-05-02 12:26:51.112905	2012-05-05 19:42:56.585701
446	ruby-talk	String	ANSI v1.4.0 released	string, colorize, underline, isna, Col	> Alternatively you can use isna which has simpler approach.\r\n>\r\n> https://github.com/ktlacaelel/isna\r\n>\r\n> puts "Hello World".to_ansi.red\r\n> puts "Hello World".to_ansi.underline.blue\r\n> [...]\r\n\r\nThere's also my "Col" library, created when I wanted efficient control\r\nover terminal colors without busting into core classes.\r\n\r\n<a hred="https://github.com/gsinclair/col">https://github.com/gsinclair/col</a>\r\n\r\n    require 'col'\r\n\r\n    puts Col("Hello world!").red.bold\r\n    puts Col("Hello world!").rb\r\n    puts Col("Hello world!").fmt [:red, :bold]\r\n    puts Col("Hello world!").fmt :rb\r\n\r\n    puts Col("Hello ", "world!").fmt :red, :green\r\n    puts Col("Hello ", "world!").fmt "r,g"\r\n\r\n    puts Col("Hello ", "world!").fmt [:red, :bold], [:green, :bold]\r\n    puts Col("Hello ", "world!").fmt "rb,gb"\r\n\r\n    puts Col("Hello ", "world!").fmt [:bold], [:cyan, :italic, :on_white]\r\n    puts Col("Hello ", "world!").fmt "_b,ciow"\r\n\r\n    puts Col("Hello ", "world!").fmt [:blue, :on_yellow], [:on_green]\r\n    puts Col("Hello ", "world!").fmt "b_oy,__og"\r\n\r\n    puts Col.inline( "Hello ", :red, "world!", :blue )\r\n\r\n    puts Col.inline(\r\n      "Hello ",   [:red, :bold, :on_white],\r\n      "world!",   :b_oy\r\n    )	1.9.3	gsinclair@gmail.com	2011-12-04 23:34:00	Gavin	Sinclair	2012-05-02 13:55:56.396908	2012-05-11 20:53:43.701353
21	ruby-talk	EventMachine	Is there a current ruby binding to libevent?	gem, eventmachine, loop, event, library, libdev	> https://github.com/ayanko/libevent\r\n\r\nThere are a couple of good event loop libraries in Ruby, probably the most\r\npopular is EventMachine which has its own event loop system.\r\n\r\n<a href="http://rubyeventmachine.com/">http://rubyeventmachine.com/</a>\r\n\r\nAnother good one is cool.io <a href="http://coolio.github.com/">http://coolio.github.com/</a> which is a wrapper around and includes: <a href="http://software.schmorp.de/pkg/libev.html">http://software.schmorp.de/pkg/libev.html</a>	1.9.3	jeremy@hinegardner.org	2011-11-22 13:43:00	Jeremy	Hinegardner	2012-05-02 11:44:38.891952	2012-05-11 18:06:38.018803
305	ruby-talk	Class	How to call an array from one ruby script to another?	class, array, yaml, file, each_document, require	> Variables that begin with dollar signs are global. So if you name it\r\n> $names, then it will be available everywhere.\r\n\r\nThis is true, but global variables are generally a bad idea - they can\r\ngum up the works in unexpected ways...  probably best to avoid them if\r\nyou can.\r\n\r\n> Depending on what you're trying to do, there are a number of possible\r\n> ways to handle this.\r\n\r\nThis is also true...  if you give more background on what you want to\r\ndo, it would make it easier to offer helpful solutions.\r\n\r\nA couple of things you could think about are a creating a Class in the\r\nfirst script that defines the array to be used in the second (as Josh\r\nmentions,) or using YAML to store and retrieve the array.\r\n\r\n  using a Class to define the array could look something like this:\r\n\r\n  ### 1.rb ###\r\n  class GroupsOfStuff\r\n    attr_accessor :people, :cats\r\n\r\n    def initialize\r\n      @people = ["Joe", "Po", "So"]\r\n      @cats = ["Bill", "BooBoo", "Felix"]\r\n    end\r\n  end\r\n\r\n\r\n  ### 2.rb ##\r\n  require '1'\r\n\r\n  groups = GroupsOfStuff.new\r\n\r\n  p groups.people\r\n  p groups.cats\r\n\r\n  ## returns:\r\n  =>["Joe", "Po", "So"]\r\n    ["Bill", "BooBoo", "Felix"]\r\n\r\n  using YAML could look like this:\r\n\r\n  ### 1.rb ###\r\n  require 'yaml'\r\n\r\n  people = ["Joe", "Po", "So"]\r\n  cats = ["Bill", "BooBoo", "Felix"]\r\n\r\n  File.open("groups_of_stuff.yml", "w") do |file|\r\n    file.puts people.to_yaml\r\n    file.puts cats.to_yaml\r\n  end\r\n\r\n  ### 2.rb ###\r\n  require '1'\r\n\r\n  data = File.open("groups_of_stuff.yml")\r\n\r\n  YAML.each_document(data) do |doc|\r\n   p doc\r\n  end\r\n\r\n  data.close\r\n\r\n  ## returns:\r\n  =>["Joe", "Po", "So"]\r\n    ["Bill", "BooBoo", "Felix"]	1.9.3	jakekaiden@yahoo.com	2011-11-29 00:34:00	jake	kaiden	2012-05-02 12:37:00.329558	2012-05-11 16:05:11.80082
132	ruby-talk	Regexp	Basic Ruby performance	string, regex, whitespace	> Here's another example with significantly bigger performance difference:\r\n> \r\n> Ruby:\r\n> \r\n> s = "This is a test string"\r\n> \r\n> re = Regexp.new( / test / )\r\n> \r\n> for a in 0..1E7\r\n>        re.match( s )\r\n> end\r\n> \r\n> Perl:\r\n> \r\n> my $s = "This is a test string";\r\n> \r\n> for my $a ( 0..1E7 ) {\r\n>       $s =~ / test /;\r\n> }\r\n> \r\n> Perl takes about 1.5 seconds to execute this, while Ruby takes a \r\n> whopping 16!!! :((( I have a very strong feeling that I didn't compile \r\n> Ruby properly - there can't be such a huge difference in regexp matching \r\n> :(\r\n\r\nIt's all the parens, whitespace, and use of tabs that slows ruby down:\r\n\r\n# takes 26.6 seconds on my laptop:\r\n\r\ns = "This is a test string"\r\n\r\nre = Regexp.new( / test / )\r\n\r\nfor a in 0..1E7\r\n  re.match( s )\r\nend\r\n\r\n# takes 8.67 seconds on my laptop:\r\n\r\ns = "This is a test string"\r\n\r\nfor a in 0..1E7\r\n  s =~ / test /\r\nend	1.9.3	ryand-ruby@zenspider.com	2012-02-02 15:20:00	Ryan	Davis	2012-05-02 12:04:59.428972	2012-05-03 19:34:03.489775
46	ruby-talk	Regexp	String manuplation example	string, regex, match, w+, search	Then you can go with only regular expression given by Hans:\r\n\r\nst = "/dev/sda1256             45225016   3702464  39225208   9% /"\r\nst.match(/[/w]+/)[0]\r\nthis will give you your search	1.9.3	chirag.sweng@gmail.com	2011-07-27 15:09:00	Chirag	Shah	2012-05-02 11:50:07.25905	2012-05-07 00:38:51.966373
250	ruby-talk	Rails	Access a dll file from a RubyOnRails	rails, file, access, dll	> Could anybody please suggest ways to access dll files from a rails\r\n> application?\r\n\r\nruby/dl might help.	1.9.3	rogerpack2005@gmail.com	2009-05-09 21:47:00	Roger	Pack	2012-05-02 12:28:19.995111	2012-05-12 01:54:45.114491
241	ruby-talk	XPath	Finding a <p> text which contains <br>	xpath, nokogiri, gem, xml, expression	> I am trying to locate using exists? a <p> in my page which is separated\r\n> by two <br> tags, as shown below. In the IRB, these show as when I\r\n> retrieve the text, but using that same value to locate it is not working.\r\n>\r\n> The html:\r\n> <p>The Promotional Code you have entered has not been\r\n> recognised.<br><br>Please check your Promotional Code and try again.<p>\r\n\r\nYou can do this with XPath expression "//p[br]":\r\n\r\nPreparation, parsing HTML into a DOM:\r\n\r\n$ irb -r nokogiri\r\nirb(main):001:0> doc = '<r><p>empty<p>foo<br>bar</r>'\r\n=> "<r><p>empty<p>foo<br>bar</r>"\r\nirb(main):002:0> dom = Nokogiri.HTML(doc)\r\n=> #<Nokogiri::HTML::Document:0x837ab38 name="document"\r\nchildren=[#<Nokogiri::XML::DTD:0x837a976 name="html">,\r\n#<Nokogiri::XML::Element:0x837a598 name="html"\r\nchildren=[#<Nokogiri::XML::Element:0x837a494 name="body"\r\nchildren=[#<Nokogiri::XML::Element:0x837a37c name="r"\r\nchildren=[#<Nokogiri::XML::Element:0x837a23c name="p"\r\nchildren=[#<Nokogiri::XML::Text:0x837a124 "empty">]>,\r\n#<Nokogiri::XML::Element:0x837a020 name="p"\r\nchildren=[#<Nokogiri::XML::Text:0x8379efe "foo">,\r\n#<Nokogiri::XML::Element:0x8379e7c name="br">,\r\n#<Nokogiri::XML::Text:0x8379d64 "bar">]>]>]>]>]>\r\n\r\n<p>'s with nested <br>:\r\n\r\nirb(main):007:0> dom.xpath('//p[br]')\r\n=> [#<Nokogiri::XML::Element:0x837a020 name="p"\r\nchildren=[#<Nokogiri::XML::Text:0x8379efe "foo">,\r\n#<Nokogiri::XML::Element:0x8379e7c name="br">,\r\n#<Nokogiri::XML::Text:0x8379d64 "bar">]>]\r\nirb(main):008:0> dom.xpath('//p[br]').map &:to_s\r\n=> ["<p>foo<br>bar</p>"]\r\n\r\nAll <p>'s:\r\n\r\nirb(main):009:0> dom.xpath('//p').map &:to_s\r\n=> ["<p>empty</p>\r\n", "<p>foo<br>bar</p>"]	1.9.3	shortcutter@googlemail.com	2012-01-18 16:50:00	Robert	Klemme	2012-05-02 12:26:51.032924	2012-05-05 20:25:59.526878
373	ruby-talk	reconfig	How to find ruby header file without platform dependency?	rbconfig, keys, sort, CONFIG, puts	> | Now I am wondering to have a way to find a location of the ruby header\r\n> | file in various platforms whenever I try to configure to compile my sources.\r\n> |\r\n> | In case of python, it provide the 'python-config' executable file to find a location of python.h.\r\n> |\r\n> | How about ruby? Is there any possible way to get a location(path) of it.\r\n\r\nYou can look at the Config module and, in particular, at Config::CONFIG, which \r\nis a hash containing a number of build-time settings.\r\n\r\nFor example (using ruby 1.9):\r\n\r\nrequire 'rbconfig' #you don't need this line in ruby 1.8\r\nputs Config::CONFIG.keys.sort\r\n\r\n=>\r\n["ALLOCA", "AR", "ARCHFILE", "ARCH_FLAG", "AS", "ASFLAGS", "BASERUBY", \r\n"BUILTIN_TRANSSRCS", "CC", "CCDLFLAGS", "CFLAGS", "COMMON_HEADERS", \r\n"COMMON_LIBS", "COMMON_MACROS", "COUTFLAG", "CP", "CPP", "CPPFLAGS", \r\n"CPPOUTFILE", "CXX", "CXXFLAGS", "DEFS", "DESTDIR", "DLDFLAGS", "DLDLIBS", \r\n"DLEXT", "DLEXT2", "DLLWRAP", "ECHO_C", "ECHO_N", "ECHO_T", "EGREP", \r\n"ENABLE_SHARED", "EXEEXT", "EXPORT_PREFIX", "EXTOUT", "EXTSTATIC", "GNU_LD", \r\n"GREP", "INSTALL", "INSTALL_DATA", "INSTALL_PROGRAM", "INSTALL_SCRIPT", \r\n"LDFLAGS", "LDSHARED", "LDSHAREDXX", "LIBEXT", "LIBPATHENV", "LIBPATHFLAG", \r\n"LIBRUBY", "LIBRUBYARG", "LIBRUBYARG_SHARED", "LIBRUBYARG_STATIC", \r\n"LIBRUBY_A", "LIBRUBY_ALIASES", "LIBRUBY_DLDFLAGS", "LIBRUBY_LDSHARED", \r\n"LIBRUBY_SO", "LIBS", "LINK_SO", "LN_S", "MAINLIBS", "MAJOR", "MAKEDIRS", \r\n"MAKEFILES", "MANTYPE", "MINOR", "NM", "NROFF", "OBJCOPY", "OBJDUMP", \r\n"OBJEXT", "OUTFLAG", "PACKAGE_BUGREPORT", "PACKAGE_NAME", "PACKAGE_STRING", \r\n"PACKAGE_TARNAME", "PACKAGE_VERSION", "PATH_SEPARATOR", "PREP", "RANLIB", \r\n"RDOCTARGET", "RM", "RMALL", "RMDIRS", "RPATHFLAG", "RUBYW_INSTALL_NAME", \r\n"RUBY_INSTALL_NAME", "RUBY_SO_NAME", "SET_MAKE", "SHELL", "SOLIBS", "STATIC", \r\n"STRIP", "TEENY", "THREAD_MODEL", "TRY_LINK", "WINDRES", "arch", "archdir", \r\n"bindir", "build", "build_alias", "build_cpu", "build_os", "build_vendor", \r\n"cflags", "configure_args", "cppflags", "datadir", "datarootdir", \r\n"debugflags", "docdir", "dvidir", "exec_prefix", "host", "host_alias", \r\n"host_cpu", "host_os", "host_vendor", "htmldir", "includedir", "infodir", \r\n"libdir", "libexecdir", "localedir", "localstatedir", "mandir", \r\n"oldincludedir", "optflags", "pdfdir", "prefix", "psdir", "ruby_install_name", \r\n"ruby_version", "rubyhdrdir", "rubylibdir", "rubyw_install_name", "sbindir", \r\n"setup", "sharedstatedir", "sitearch", "sitearchdir", "sitedir", "sitehdrdir", \r\n"sitelibdir", "sysconfdir", "target", "target_alias", "target_cpu", \r\n"target_os", "target_vendor", "topdir", "vendorarchdir", "vendordir", \r\n"vendorhdrdir", "vendorlibdir", "warnflags"]	1.9.3	stefano.crocco@alice.it	2009-11-12 10:58:00	Stefano	Crocco	2012-05-02 12:50:49.626389	2012-05-11 16:17:33.016837
524	ruby-talk	Enumerator	Is high-speed sorting impossible with Ruby?	enumerator, sort, iteration, stdin, each_line	Just playing with the code a little, more education than speed.\r\n\r\n>    $stdin.gets\r\n>    puts $stdin.readlines.map(&:to_i).sort\r\n\r\nYour solution could be written like\r\n\r\n> $stdin.gets\r\n>\r\n> a = $stdin.readlines\r\n> b = a.map(&:to_i)\r\n> c = b.sort\r\n>\r\n> puts c\r\n\r\nwhile processing of a, b, and c is completely sequential. All three \r\nobjects created are arrays full of data: a contains all string lines \r\nread in, b makes all these entries into integers, c is the same sorted. \r\nThree large arrays. All sequentially processed.\r\n\r\nA similar solution, at first glance only marginally different, is the \r\nfollowing:\r\n\r\n> $stdin.gets\r\n> puts $stdin.each_line.sort_by(&:to_i)\r\n\r\nBesides the fact that this solution is slower than yours, it uses a neat \r\nlittle technique of Ruby 1.9, Enumerators. Here, only a single big array \r\nis created, which is the result array. IO#each_line() does not read in \r\nthe whole file at once but provides an Enumerator â iteration fiber â \r\nthat passes each read line to the .sort_by() call _while they are read_. \r\nOnly sort_by will exhaustively fetch the items and eventually sort them \r\nbased on the sorting criteria.\r\n\r\nDriving pipelining with the Enumerators to the max, we need a filter \r\nchain. Letâs set up a generic filter (which is still not there in \r\nEnumerator?) similar to the one described ages ago in issue #707:\r\n\r\n<a href="http://redmine.ruby-lang.org/issues/707">[http://redmine.ruby-lang.org/issues/707]</a>\r\n\r\n> class Enumerator\r\n>   def filter1(&blk)\r\n>     self.class.new do |y|\r\n>       each do |*input|\r\n>         y << blk.call(*input)\r\n>       end\r\n>     end\r\n>   end\r\n> end\r\n>\r\n> $stdin.gets\r\n> puts $stdin.each_line.filter1(&:to_i).sort\r\n\r\nLetâs expand the last line into smaller chunks, similar to the \r\nexplanation of your code:\r\n\r\n> a = $stdin.each_line\r\n> b = a.filter1(&:to_i)\r\n> c = b.sort\r\n>\r\n> puts c\r\n\r\nNow, walking the code, nothing really happens until we hit b.sort â the \r\ncreation of the objects a and b will just setup the filter chain and not \r\nyet pull any data from $stdin. Once called on an Enumerator, #sort \r\ncannot perform its action and return even a single entry before knowing \r\nall entries, so it will call up b.next until it receives a \r\nÂ»StopIterationÂ« exception. But for b to return a new value, it first has \r\nto apply .to_i to the next value on its input, which is again an \r\niterator, a. So next is the call to a.next which will return the first \r\nline read from $stdin. Finally we can walk our way back to sort: The \r\nvaue is returned to the filter so it can be converted (to_i) and \r\nreturned from b.next. Finally the number can take part in the sorting \r\nprocess.\r\n\r\nIn theory, if all these operations were considered non-destructive, \r\n.each_line, .filter1 and .sort could run in three different threads \r\nasynchronously, with buffers in between, utilizing the whole CPU and \r\nprobably reducing the overall execution time. But this is not the case: \r\nThere must not be any read-ahead by any of these designated threads, \r\ndrastically limiting their achievable concurrency performance from the \r\nbeginning.\r\n\r\nEnd of the Enumerator lesson. :)\r\n\r\n</code>	1.9.3	matthias@waechter.wiz.at	2011-11-29 00:21:00	Matthias	Waechter	2012-05-04 20:22:23.936698	2012-05-11 21:04:25.008802
118	ruby-talk	Integer	Greed Dice Game Scoring from Ruby Koans	integer, dice, game, rubykoan, hash, uniq, divmod, +=, 	> I'm working through the Edgecase Ruby Koans (<a href="http://www.rubykoans.com/">http://www.rubykoans.com/</a>), and\r\n> have written a solution to scoring the game of dice called "greed."\r\n> However, while it passes all the assertion tests, I am wondering if my code\r\n> is sufficiently "Rubyesque"?  I appreciate any and all feedback!\r\n>\r\n> # Greed is a dice game where you roll up to five dice to accumulate\r\n> # points.  The following "score" function will be used calculate the\r\n> # score of a single roll of the dice.\r\n> #\r\n> # A greed roll is scored as follows:\r\n> #\r\n> # * A set of three ones is 1000 points\r\n> # * A set of three numbers (other than ones) is worth 100 times the\r\n> #   number. (e.g. three fives is 500 points).\r\n> # * A one (that is not part of a set of three) is worth 100 points.\r\n> # * A five (that is not part of a set of three) is worth 50 points.\r\n> # * Everything else is worth 0 points.\r\n> #\r\n> # Examples:\r\n> #\r\n> # score([1,1,1,5,1]) =>  1150 points\r\n> # score([2,3,4,6,2]) =>  0 points\r\n> # score([3,4,5,3,3]) =>  350 points\r\n> # score([1,5,1,2,4]) =>  250 points\r\n> #\r\n> # More scoring examples are given in the tests below:\r\n> #\r\n> # Your goal is to write the score method.\r\n>\r\n> def score(dice)\r\n>    total = 0\r\n>    dice.uniq.each do |num|\r\n>\r\n>      if num == 1\r\n>        if dice.count(1)>= 3\r\n>          total += 1000\r\n>          total += 100 * (dice.count(1) - 3)\r\n>        else\r\n>          total += 100 * dice.count(1)\r\n>        end\r\n>      elsif num == 5\r\n>        if dice.count(5)>= 3\r\n>          total += 5  * 100\r\n>          total += 50 * (dice.count(5) - 3)\r\n>        else\r\n>          total += 50 * dice.count(5)\r\n>        end\r\n>      else\r\n>        total += num * 100 if dice.count(num)>= 3\r\n>      end\r\n>    end\r\n>    total\r\n> end\r\n\r\nThis is quite a fun exercise, and interesting to see what people come up \r\nwith. The only suggestion I have is that you can gain a lot of economy \r\nby 'baking' the score values from the getgo. If the rules of the game \r\never changed (you could roll more dice, or the score values changed), \r\nthere would be a lot less stuff to have to fiddle. This seems to pass \r\nthe tests.\r\n\r\ndef score(dice)\r\n   \r\n#============================================================================\r\n# This bit bakes the scores on first invocation\r\n#============================================================================\r\n   @greed_scores ||= (Hash.new { |h, k|\r\n     h[k] = {:singles=>0, :triples=>k*100}\r\n   }).merge!({1=>{:singles=>100, :triples=>1000}, 5=>{:singles=>50, \r\n:triples=>500}})\r\n   \r\n#============================================================================\r\n# This bit does the actual scoring\r\n#============================================================================\r\n   score = 0\r\n   dice.uniq.each { |n|\r\n     triples, singles = dice.count(n).divmod(3)\r\n     score += (@greed_scores[n][:singles] * singles)+(@greed_scores[n][:triples] * triples)\r\n   }\r\n   score\r\n   \r\n#============================================================================\r\nend	1.9.3	sduncan@wetafx.co.nz	2011-12-09 11:18:00	Sam	Duncan	2012-05-02 12:01:39.604305	2012-05-11 18:24:37.900232
489	ruby-talk	Regexp	Cannot remove multiple space> nuts!	regex, match, groups, capture	> That's beautifully economical, and reveals a far better grasp of regex \r\n> than I was able to attain last night. However, I'm having trouble with \r\n> this line:\r\n> \r\n> data.gsub!(/<(h[1-6])>/, "\\1. ")\r\n> \r\n> It certain works, but I don't grasp the "\\1. " part. I haven't yet \r\n> found anything that might shed light on this magic. How does it retain \r\n> the 'h' and whatever digit follows it? It looks somehow like "\\" == \r\n> retain matched alpha, and the "1" does the same for matched digits, but \r\n> I really haven't a clue. Can you elucidate just a bit?\r\n\r\nThe keyword is "capturing groups".  Brackets in the regexp denote groups \r\nof characters which can be referenced later via their numeric index as \r\nyou have seen.  You can even use them for matching repetitions\r\n\r\n/(fo+)/ =~ s # will match "fofo", "foofoo", "fooofooo" etc.	1.9.3	shortcutter@googlemail.com	2009-02-07 21:56:00	Robert	Klemme	2012-05-02 14:12:26.407823	2012-05-03 19:45:58.748251
438	ruby-talk	ObjectSpace	Explain delete from class	ObjectSpace, tool, special, finalization handling	> I have found this tutorial <a href="http://juixe.com/techknow/index.php/2007/01/22/ruby-class-tutorial/">http://juixe.com/techknow/index.php/2007/01/22/ruby-class-tutorial/</a>\r\n>  where there is the following class:\r\n>\r\n> ###\r\n> class Person\r\n>  attr_accessor :fname, :lname\r\n>\r\n>  def initialize(fname, lname)\r\n>    @fname = fname\r\n>    @lname = lname\r\n>  end\r\n>\r\n>  def to_s\r\n>    @lname + ", " + @fname\r\n>  end\r\n>\r\n>  def self.find_by_fname(fname)\r\n>    found = nil\r\n>    ObjectSpace.each_object(Person) { |o|\r\n>    found.push(o) if o.fname == fname\r\n>    }\r\n>    found\r\n>  end\r\n> end\r\n\r\nThat's an awful and inefficient way to do it.  A proper implementation\r\nwould at least hold an Array or Hash with all Persons in some global\r\nplace instead of resorting to ObjectSpace.  ObjectSpace is a tool for\r\nrather special situations and finalization handling.\r\n\r\n> Is it possible to add a self.delete that will delete the entry found by the self.find_by_fname?\r\n\r\nNo.  What would "deleting" mean here?  There can be arbitrary many\r\nreferences pointing to that instance found (including null, if GC has\r\nnot reclaimed an unreachable object):\r\n\r\n~$ ruby19 -e 's="foo";id=s.object_id;s=nil;ObjectSpace.each_object(String){|st|\r\np st if st.object_id == id}'\r\n"foo"\r\n\r\ns is unreachable yet you see it through ObjectSpace.	1.9.3	shortcutter@googlemail.com	2012-02-17 11:57:00	Robert	Klemme	2012-05-02 13:47:48.261066	2012-05-11 20:50:36.069506
558	ruby-talk	String	Explain delete from class	ObjectSpace, string, array, hash, global	> I have found this tutorial <a href="http://juixe.com/techknow/index.php/2007/01/22/ruby-class-tutorial/">http://juixe.com/techknow/index.php/2007/01/22/ruby-class-tutorial/</a>\r\n> where there is the following class:\r\n>\r\n> ###\r\n> class Person\r\n> attr_accessor :fname, :lname\r\n>\r\n>   def initialize(fname, lname)\r\n>     @fname =3D fname\r\n>     @lname =3D lname\r\n>   end\r\n>\r\n>   def to_s\r\n>     @lname + ", " + @fname\r\n>   end\r\n>\r\n>   def self.find_by_fname(fname)\r\n>     found =3D nil\r\n>     ObjectSpace.each_object(Person) { |o|\r\n>       found.push(o) if o.fname =3D=3D fname\r\n>     }\r\n>     found\r\n>   end\r\n> end\r\n> ###\r\n\r\nThat's an awful and inefficient way to do it.  A proper implementation\r\nwould at least hold an Array or Hash with all Persons in some global\r\nplace instead of resorting to ObjectSpace.  ObjectSpace is a tool for\r\nrather special situations and finalization handling.\r\n\r\n> Is it possible to add a self.delete that will delete the entry found by the self.find_by_fname?\r\n\r\nNo.  What would "deleting" mean here?  There can be arbitrary many\r\nreferences pointing to that instance found (including null, if GC has\r\nnot reclaimed an unreachable object):\r\n\r\n~$ ruby19 -e 's="foo";id=s.object_id;s=nil;ObjectSpace.each_object(String){|st|\r\np st if st.object_id == id}'\r\n"foo"\r\n\r\ns is unreachable yet you see it through ObjectSpace.	1.9.3	shortcutter@googlemail.com	2012-02-17 11:57:00	Robert	Klemme	2012-05-04 22:47:18.330261	2012-05-11 21:15:21.478139
468	ruby-talk	Regexp	Regexp inconsistency	regex, string, match, end, $, ^, matchdata	> I observed a inconsistent behavior between ruby (ruby 1.8.6 (2009-06-08\r\n> patchlevel 369) [x86_64-linux]), running in my host, and ruby in\r\n> www.rubular.com (reports "Rubular runs on Ruby 1.8.7."). The expression:\r\n> / (w+(-w+)?) . (log|txt) [.-]? (d{1}) ( . (gz|bz2))? /x\r\n> in my host returns (among others):\r\n> net-snmpd.log-20110629.bz2\r\n>\r\n> In rubular site, recognize (correctly, I suppose!) just until:\r\n> net-snmpd.log-2 (stop here, i.e. don't recognize the string).\r\n>\r\n> NB: My code (just for test) is:\r\n> #! /usr/bin/ruby -w\r\n>\r\n> require 'find'\r\n>\r\n> re_logdir = Regexp.new(//log$|/log/|/logs$|/logs//)\r\n> dias = 5\r\n>\r\n> ###\r\n> a='(w+(-w+)?)'\r\n> d='(d{4}[.-]?d{2}[.-]?d{2})'\r\n> h='(d{2}[.-]?d{2}[.-]?d{2,6})'\r\n> l='(log|txt)'\r\n> z='(gz|bz2)'\r\n> n1='(d{1})'\r\n> s='[.-]'\r\n>\r\n> re_logfile = Regexp.new(/ #{a} . #{l} #{s}? #{n1} ( . #{z})? /x )\r\n> p re_logfile\r\n>\r\n> Find.find('/') do |f|\r\n>  if File.file?(f) and\r\n>     re_logdir.match( File.dirname(f) ) and\r\n>     re_logfile.match( File.basename(f) )\r\n>     p f\r\n>  end\r\n> end\r\n\r\nRuby is right. The regexp matches the string.\r\n\r\n$ ruby -e 'p (/ (w+(-w+)?) . (log|txt) [.-]? (d{1}) ( . (gz|bz2))?\r\n/x).match("net-snmpd.log-20110629.bz2")'\r\n#<MatchData "net-snmpd.log-2" 1:"net-snmpd" 2:"-snmpd" 3:"log" 4:"2" 5:nil\r\n6:nil>\r\n\r\nIf you need that the whole string should match, and not part of it, you need\r\nto end your regexp with "$", like:\r\n\r\n/ (w+(-w+)?) . (log|txt) [.-]? (d{1}) ( . (gz|bz2))? $/x\r\n\r\nAlso, I recommend that you start your regexp with "^"\r\n\r\n/^ (w+(-w+)?) . (log|txt) [.-]? (d{1}) ( . (gz|bz2))? $/x\r\n\r\nThis one should do the job.	1.9.3	luizluca@gmail.com	2011-07-22 16:13:00	Luiz Angelo 	Daros de Luca	2012-05-02 14:05:38.221762	2012-05-06 17:57:07.467128
56	ruby-talk	Symbol	Symbol vs String for hash keys	symbol, string, use, criteria, identity, character, sequence, importance	> What are the important factors to consider when deciding whether to\r\n> use symbols or strings for hash keys?\r\n>\r\n> I ask b/c I noticed that fileutils.rb uses strings[1], though the keys\r\n> represent method names. Seems to me that symbols would be more\r\n> appropriate.\r\n>\r\n> Even so it would be good to know the general criteria to consider.\r\n>\r\n> [1]<a href="https://github.com/ruby/ruby/blob/trunk/lib/fileutils.rb">https://github.com/ruby/ruby/blob/trunk/lib/fileutils.rb</a>\r\n> (OPT_TABLE)\r\n\r\n> Even so it would be good to know the general criteria to consider.\r\n\r\nConceptually, I like to use these rules of thumb (I think Jim Weirich noted it originally, but I am not sure):\r\n\r\n1.) If the content and exact sequence of characters is the important part, use a string.\r\n\r\n2.) If the identity is the important part, use a symbol.	1.9.3		2011-07-03 11:43:00	John	Feminella	2012-05-02 11:53:03.548318	2012-05-11 18:13:28.752063
352	ruby-talk	Variables	Accessing class instance variables from an instance?	variables, class, instance	>> Actually, now that I'm thinking about it the existing behavior sort of\r\n>> what makes more sense.  I'd think that subclasses would be better\r\n>> instantiating their own class vars rather than expecting a unique copy\r\n>> of the superclass var.  I can see why you'd want the class instance vars\r\n>> rather than modifying the existing mechanic.  On the other hand, maybe a\r\n>> new variable type to encapsulate the behavior of a class instance var in\r\n>> the way that it's being used here would be something worth discussing?\r\n\r\nI opt for completely removing class variables because they lead to\r\nconfusion without end.  I don't see the need for a new type of\r\nvariable either.  For one, it is an open question if state really\r\nshould be managed on the class level.  It may be much more appropriate\r\nfor Shareed to have a container object which holds a number of\r\ninstances and manages common state.  If you need that state in\r\ninstances you can always have a backward reference to the container.\r\n(You need that anyway if you want to avoid joining multiple containers\r\nfor a 1:n relationship.)  If state is managed by the class then you\r\ncannot partition the set of instances.  And in case of this thread it\r\nseems state is better not held in the class instance, because that\r\nshould manage class state while here we are talking about state which\r\nis common to all instances.  Just because it's easy to do or\r\nconvenient does not mean that storing this in the class is necessary a\r\ngood idea.\r\n\r\n> I don't see any point in that, class ivars seem sufficient to me. What\r\n> would be nice, though, is an attr_accessor equivalent that defines methods\r\n> for both the class and instance.\r\n\r\nI find that a bad idea: this easily leads to confusion and if you want\r\nthe same attribute in the class and all instances then you better make\r\nthat explicit.  This should be a very rare case anyway.  The only\r\nthing which comes to mind where this seems remotely useful would be\r\ndefault values for fields.  But in this case I'd rather name fields\r\ndifferently because they mean something different:\r\n\r\nclass Foo\r\n  class <<self\r\n    attr_accessor :name_default\r\n  end\r\n\r\n  attr_writer :name\r\n\r\n  def name\r\n    @name || self.class.name_default\r\n  end\r\nend\r\n\r\n\r\nirb(main):025:0> Foo.name_default = "X"\r\n=> "X"\r\nirb(main):026:0> f = Foo.new\r\n=> #<Foo:0x1018c06c>\r\nirb(main):027:0> f.name\r\n=> "X"\r\nirb(main):028:0> f.name = "bar"\r\n=> "bar"\r\nirb(main):029:0> f.name\r\n=> "bar"\r\nirb(main):030:0> Foo.name_default\r\n=> "X"	1.9.3	shortcutter@googlemail.com	2011-12-21 09:50:00	Robert	Klemme	2012-05-02 12:44:07.892238	2012-05-03 17:52:52.087968
301	ruby-talk	Gem	Did you know? - Wirble Reverse	wirble, brice, gem, reverse	> Why isn't :reverse the default? I have no idea. I wish it were.\r\n> But such is the nature of legacy decisions some times.\r\n\r\ntrue. but it's the default in /brice/, which inherited most of\r\nwirble's functionality after i abandoned my fork of it (plus: it\r\npreserves the history across overlapping irb sessions).\r\n\r\n<a href="https://github.com/blackwinter/brice/blob/master/lib/brice/history.rb#L39-40">https://github.com/blackwinter/brice/blob/master/lib/brice/history.rb#L39-40</a>\r\n\r\nHowever, note that brice, by default, does more than wirble - and\r\ndifferently. to more or less mimic wirble's behaviour you'd have to\r\ndo something like this:\r\n\r\n---- [~/.irbrc] ----\r\nrequire 'brice'\r\nBrice.init { |config| config.only(:history, :colours) }\r\n--------------------\r\n\r\nwhich isn't much less than what you had to do for wirble to change\r\nits :history_uniq option.	1.9.3	jens.wille@uni-koeln.de	2011-12-13 10:10:00	Jens	Wille	2012-05-02 12:36:24.223709	2012-05-12 01:56:14.348283
485	ruby-talk	Operator	How does && work in ruby?	operator, double ampersand, useage	> Can someone explain to me how the && operator works \r\n>\r\n> More specifically, why does this piece of code assign a user object (or\r\n> nil) to @current_user, not true or false?\r\n>\r\n> @current_user = current_user_session && current_user_session.user\r\n\r\nIt's the "and" operator. It evaluates from left to right its operands,\r\nstopping when one of them is falsy (nil or false). The fact that it\r\nstops when it finds the first value that will render the whole\r\nexpression false is called "short circuit". If all operands are truthy\r\n(not nil nor false) it returns the last operand. The above line is\r\n(roughly) equivalent to:\r\n\r\n@current_user = current_user_session.nil? ? nil : current_user_session.user\r\n\r\nI said roughly because it's different if current_user_session is\r\nfalse, but due to the usage I would guess that the intent was to check\r\nfor nil only.	1.9.3	jgabrielygalan@gmail.com	2012-02-10 13:03:00	JesÃºs	Gabriel y Galan	2012-05-02 14:12:02.799452	2012-05-03 14:53:21.837257
534	ruby-talk	IO	Explanation of "awk print $4" in ruby?	io, popen, array, split	How about this?\r\n\r\nIO.popen('df -h').each_line do |line|\r\n  fsarray = line.chomp.split\r\n  puts fsarray[3]\r\nend\r\n\r\n</code>	1.9.3	mark@thomaszone.com	2009-12-23 09:54:00	Mark	Thomas	2012-05-04 21:00:45.905778	2012-05-04 21:00:45.905778
83	ruby-talk	Language	Ruby C API:How to prevent a VALUE being collected by the	language, api, garbage, collection, rb_mark	> > Ruby C API:How to prevent a VALUE being collected by the garbage\r\n> > collecter Is there any function to call\r\n\r\nIf you want it to never be collected, make it a global variable. rb_mark will\r\nonly do what you want until the next GC cycle.	1.9.3	kim@burgestrand.se	2011-07-02 20:35:00	Kim	Burgestrand	2012-05-02 11:55:46.626289	2012-05-14 19:37:26.169131
92	ruby-talk	Regexp	A regexp that does not contain comma	regex, string	> Could anybody please tell how to write the validates_format_of a\r\n> string(in rails) which is only valid when it does not contain a\r\n> comma.For example\r\n>\r\n> The are valid\r\n>\r\n> hi welcome\r\n> Hello\r\n> h123 kk\r\n> hh gg hh\r\n>\r\n> The are not valid\r\n>\r\n> Hello,\r\n> Hi , world\r\n> Hello,welcome\r\n>\r\n\r\nI believe\r\n\r\n/^[^,]*$/\r\n\r\nwill do what you need, including matching empty strings. rubular.com is \r\na good place to try out regular expressions.	1.9.3	justincollins@ucla.edu	2009-07-14 02:38:00	Justin	Collins	2012-05-02 11:58:38.341583	2012-05-03 19:02:59.660304
231	ruby-talk	Integer	Simple even and odd number loop in Ruby	loop, mod	For example this would work:\r\n\r\ndef f n # this function calculates next number in your sequence\r\n  if n % 2 == 0 # n is even\r\n    return n / 2\r\n  else\r\n    return n * 3\r\n  end\r\nend\r\n\r\nnum = gets.to_i # read in a number\r\nwhile true # infinitely...\r\n  num = f(num) # find the next number\r\n  puts num # print it\r\n  sleep 1 # wait one second\r\nend	1.9.3	matma.rex@gmail.com	2012-02-05 16:13:00	Bartosz	DziewoÅski	2012-05-02 12:23:16.272479	2012-05-11 17:20:37.323558
422	ruby-talk	Proc	Higher order ruby	proc, lambda, alias, 1.9, link	> But also not the same thing on Ruby 1.9, so it's important to be\r\n> careful about this generally, even if it works fine with either in the\r\n> above example.\r\n\r\nYep, it's best to avoid proc{} entirely, since in ruby 1.8 it's an alias \r\nfor lambda{}, but in ruby 1.9 it has changed to be an alias for Proc.new{}.\r\n\r\nFor the full gory details see \r\n\r\n<a href="http://innig.net/software/ruby/closures-in-ruby.rb">http://innig.net/software/ruby/closures-in-ruby.rb</a>	1.9.3	b.candler@pobox.com	2009-01-19 10:23:00	Brian	Candler	2012-05-02 12:57:36.180576	2012-05-11 20:47:57.476528
19	ruby-talk	Irb	Irb session history	irb, session, history, readline, input, method, array	> Is there any way to access the current session's IRB history as an\r\n> array of commands from within IRB?\r\n\r\ndoes this help?\r\n\r\n  IRB::ReadlineInputMethod::HISTORY.to_a	1.9.3	joelvanderwerf@gmail.com	2011-12-21 15:58:00	Joel	VanderWerf	2012-05-02 11:44:38.822919	2012-05-06 22:23:00.628301
133	ruby-talk	CGI	Displaying the html from a ruby .cgi script?	html, cgi, display, ruby, console, telnet, command line	> I have a script, foobar.cgi\r\n> \r\n> I can load it into my browser, as in\r\n> http://localhost/foobar.cgi\r\n> \r\n> It generates html code. I am using Apache on Linux here, everything is local only.\r\n> \r\n> My question is:\r\n> \r\n> Is there an easy way to grab that generated html code and display it (as a long string) \r\n> on a console?\r\n\r\n(1) curl http://localhost/foobar.cgi\r\n\r\nWith appropriate command-line options you can also POST to the CGI easily enough. \r\n> (Maintaining a session with cookies would be more awkward though)\r\n\r\n(2) I believe you should just be able to run the CGI from the command line:\r\n\r\n/path/to/foobar.cgi\r\n\r\nor\r\n\r\nruby /path/to/foobar.cgi\r\n\r\nin which case it'll prompt you for any parameters, then press ^D to get \r\nthe response.\r\n\r\n(3) The very manual way:\r\n\r\ntelnet localhost 80\r\nGET /foobar.cgi HTTP/1.0\r\nHost: localhost\r\n<Enter>	1.9.3	b.candler@pobox.com	2009-12-23 21:31:00	Brian	Candler	2012-05-02 12:04:59.457546	2012-05-06 18:29:36.727334
198	ruby-talk	OptionParser	Sending variable from a controller to other file.rb	optionparser, split, process, fork, load, DRb	There is a number of choices some of which have been mentioned already. \r\nWhat is appropriate depends on the use case which is not entirely clear.\r\n\r\n1. Use a command line option to transfer the value.  This is most \r\nexplicit and makes the interface of the sub process visible.  Conversion \r\ncan even be made automatic with OptionParser.\r\n\r\n2. Get rid of the split into two processes.  Since the call is \r\nsynchronous your calling process must wait anyway so it can as well do \r\nall the processing.  This may introduce memory leaks though depending on \r\nthe code in WWW.rb and the lifetime of the calling process.\r\n\r\n3. Set an environment variable (via ENV) before invoking the other Ruby \r\nprocess which then can read the value from there.  This is far less \r\nobvious than the variant mentioned before and requires additional \r\nconversion if other values than strings must be transferred.\r\n\r\n4. Keep the local variable but instead of system use fork and load. \r\nThis avoids conversions but some care should be taken with regard to \r\nopen file descriptors.\r\n\r\nOf course you can invent even more complex schemes (e.g. two processes \r\nwith DRb connection) but I have the impression that you are reinventing \r\nthe wheel.  There are working solutions for web services already.	1.9.3	shortcutter@googlemail.com	2011-07-19 09:55:00	Robert	Klemme	2012-05-02 12:16:53.427416	2012-05-06 18:22:46.68664
14	ruby-talk	Object	Scope resolution operator	object, constant, sort, scope, resolution, rails	>> I'm familiar with the following: ActiveRecord::Base\r\n>>\r\n>> Basically says, look inside ActiveRecord for a class or module named Base.\r\n>>\r\n>> But what about the following: ::Attachment\r\n>>\r\n>> Does that basically say, no matter what scope you are in, jump to the\r\n>> highest level to look for the class or module named Attachment?\r\n>\r\n> According to "The Ruby Programming Language", ::Something is a shortcut for\r\n> Object::Something. The idea is that ::Something should look up a constant\r\n> called Something in the global scope, but since ruby doesn't truly have a\r\n> global scope, it looks it up in the Object class, which is the nearest thing\r\n> in ruby to a global scope.\r\n\r\nAs an illustration:\r\n\r\n14:52:57 ~$ ruby -e 'puts Object.constants.sort'\r\nARGF\r\nARGV\r\nArgumentError\r\nArray\r\nBignum\r\nBinding\r\nClass\r\nComparable\r\nContinuation\r\nData\r\nDir\r\nENV\r\nEOFError\r\nEnumerable\r\nErrno\r\nException\r\nFALSE\r\nFalseClass\r\nFile\r\nFileTest\r\nFixnum\r\nFloat\r\nFloatDomainError\r\nGC\r\nHash\r\nIO\r\nIOError\r\nIndexError\r\nInteger\r\nInterrupt\r\nKernel\r\nLoadError\r\nLocalJumpError\r\nMarshal\r\nMatchData\r\nMatchingData\r\nMath\r\nMethod\r\nModule\r\nNIL\r\nNameError\r\nNilClass\r\nNoMemoryError\r\nNoMethodError\r\nNotImplementedError\r\nNumeric\r\nObject\r\nObjectSpace\r\n...\r\n\r\nYou see all the globally scoped classes (later on there will be String\r\netc.). Notice also the nice element of self referentiality. :-)	1.9.3	shortcutter@googlemail.com	2009-01-27 14:55:00	Robert	Klemme	2012-05-02 11:42:45.260997	2012-05-11 17:17:52.123254
434	ruby-talk	Array	How can I switch over an array?	array, map, char, call, value, freeze	> I have the following code snippet:\r\n> \r\n> def call(char,value)\r\n>   case char\r\n>     when " ","#","!","@","$","%","^","&","*","(",")","{","}","\r\n> [","]","'",""","<",">",",",".","?",";","\r\n","\r\n"\r\n>        @map[char].call(value)\r\n>     when "digit"\r\n>        @map[char].call(value)\r\n>     when "char"\r\n>        @map[char].call(value)\r\n>     else\r\n>        puts "don't know what to do with #{char} and #{value}"\r\n>     end\r\n> end\r\n> \r\n> can the first when be written in a simpler way ?\r\n\r\nPATTERN = [" ","#","!","@","$","%","^","&","*","(",")","{","}",",","digit", "char"].freeze\r\n\r\ndef call(char, value)\r\n   if PATTERN.include? char\r\n     @map[char].call(value)\r\n   else\r\n     puts "don't know what to do with #{char} and #{value}"\r\n   end\r\nend\r\n\r\nOr, even more efficient\r\n\r\nPATTERN2 = Regexp.new("\\A#{Regexp.union(PATTERN)}\\z")\r\n\r\ndef call(char, value)\r\n   if PATTERN2 =~ char\r\n     @map[char].call(value)\r\n   else\r\n     puts "don't know what to do with #{char} and #{value}"\r\n   end\r\nend\r\n\r\nOr, even better (i.e. if @map is filled properly)\r\n\r\ndef call(char, value)\r\n   c = @map[char]\r\n   if c\r\n     c.call(value)\r\n   else\r\n     puts "don't know what to do with #{char} and #{value}"\r\n   end\r\nend	1.9.3	shortcutter@googlemail.com	2009-01-28 07:50:00	Robert	Klemme	2012-05-02 13:17:21.598797	2012-05-11 16:14:25.165731
334	ruby-talk	Regexp	Regular expression / gsub question	regex, repetition, extract, precise, index	>> Do you know how use a regular expression to get only the scripname from\r\n>> the each filename below? I have long filename and I want to pull out a\r\n>> segment "scriptname" only. I have been using a regular expression with\r\n>> gsub for this.\r\n>>\r\n>> filename\r\n>>\r\n>> userfilename_scriptname_030109.txt\r\n>> userfilename3_scriptname1_031109.txt\r\n>> userfilename_scriptname0_031209.txt\r\n>>\r\n>>\r\n>> The gsub didn't work because the _ on both sides causes me to delete the\r\n>> whole filename. What would you recommend?\r\n>>\r\n>> stripfirstpart = filename.gsub(/*_/,"")\r\n>> stripsecondpart = filename.gsub(/_.*/,"")\r\n> \r\n> I like using #[] for this because it lets you think in terms of what you \r\n> want to keep rather than what you want to remove.\r\n> \r\n> filename[/_(.*?)_/, 1]\r\n> \r\n> The ? is there in case there are more underscores later in the filename.\r\n\r\nAFAIK it is more robust and also more efficient to do\r\n\r\nfilename[/_([^_]+)_/, 1]\r\n\r\nor even\r\n\r\nfilename[/_(scriptnamed*)_/, 1]\r\n\r\nor even\r\n\r\nfilename[/Auserfilenamed*_(scriptnamed*)_d+.txtz/, 1]\r\n\r\nIn other words, rather explicitly define precisely what you want to \r\nmatch than rely on (non)greediness of repetition operators.	1.9.3	shortcutter@googlemail.com	2009-03-14 10:58:00	Robert	Klemme	2012-05-02 12:42:28.321148	2012-05-06 18:41:09.630088
218	ruby-talk	String	Ruby output formater	string, printf, puts, efficient, sprintf, short, notation	> I personally find % cleaner than printf:\r\n>\r\n> puts "%03d" % val\r\n\r\nWhy is that?  As soon as you start using this with multiple arguments it will look ugly:\r\n\r\nputs "%03d: %-30s [%4d]" % [val, label, level]\r\n\r\nvs.\r\n\r\nprintf "%03d: %-30s [%4d]", val, label, level\r\n\r\nPlus, printf is potentially more efficient since the implementation does\r\nnot need to create a Ruby String object (which is what happens with %\r\nwhich is basically just a short notation for sprintf).	1.9.3	shortcutter@googlemail.com	2011-07-18 15:43:00	Robert	Klemme	2012-05-02 12:20:40.34962	2012-05-06 19:38:55.92848
54	ruby-talk	Apache	Ruby + apache, need to export path	apache, etc/profile, modify, edit, setenv, path	>>> Is there a way to set up this variable through apache?\r\n>> \r\n>> <a href="http://httpd.apache.org/docs/2.2/mod/mod_env.html#setenv">http://httpd.apache.org/docs/2.2/mod/mod_env.html#setenv</a>\r\n> \r\n> \r\n> Looks like there is a bug in mod_env which doesn't take the modified path.\r\n>\r\n> <a href="https://issues.apache.org/bugzilla/show_bug.cgi?id=43906">https://issues.apache.org/bugzilla/show_bug.cgi?id=43906</a>\r\n> \r\n> I eventually modified apachectl script and added the path in the configuration section.\r\n>\r\n> PATH=$PATH:/opt/ruby/bin ;\r\n> export PATH\r\n\r\nyou could modify /etc/profile instead.	1.9.3	ryand-ruby@zenspider.com	2009-12-28 22:40:00	Ryan	Davis	2012-05-02 11:52:04.494162	2012-05-11 18:12:15.570256
358	ruby-talk	String	Need help with gsub a string	string, gsub, split, scan, first, strip	> this is simpler...\r\n>\r\n> ruby-1.9.2-p290 :023 > s = "(linux) alpha / beta"\r\n>  => "(linux) alpha / beta"\r\n> ruby-1.9.2-p290 :024 > s.split("/")[1].strip\r\n>  => "beta"\r\n\r\nOr on the off chance there might be additional slashes in there --\r\n\r\n> s.split('/').last.strip\r\n\r\nAlternately:\r\n\r\n> s.scan(/(w+)Z/).first.first\r\n\r\nTMTOWTDI!	1.9.3	hassan.schroeder@gmail.com	2011-11-23 10:14:00	Hassan	Schroeder	2012-05-02 12:46:57.20464	2012-05-06 19:06:11.337915
363	ruby-talk	FileUtils	Creating a range of directories	fileutils, make directory, numbered filenames	> Thanks a lot. I didn't realise that FileUtils.mkdir accepted a format string.\r\n\r\nIt doesn't. Philip's code is wrong.\r\n\r\n> 10000 % ruby\r\n> require 'fileutils'\r\n>\r\n> (1..100).each do |num|\r\n>  FileUtils.mkdir("prefix-%03d", num)\r\n> end\r\n\r\n/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/fileutils.rb:1436:in `dup': can't dup Fixnum (TypeError)\r\n> ...\r\n\r\nWhat you really want to execute is:\r\n\r\n> (1..100).each do |num|\r\n>   FileUtils.mkdir "Prefix-%03d" % num\r\n> end\r\n\r\nwhich is just syntactic sugar for:\r\n\r\n>   FileUtils.mkdir("Prefix-%03d".%(num))	1.9.3	ryand-ruby@zenspider.com	2011-07-13 15:29:00	Ryan	Davis	2012-05-02 12:46:57.364274	2012-05-14 19:41:20.006498
251	ruby-talk	Kernel	Kernel.load and local scope	kernel, loac, scope, local, variable, parse, parse-time	> Kernel.load documentation states: "In no circumstance will any local\r\n> variables in the loaded file be propagated to the loading environment."\r\n> Are we to infer that it also works the other way around? If so, why?\r\n\r\nBecause local variables are local :-)\r\n\r\nYou get a new local scope inside every class definition introduced by \r\nthe 'class' keyword, and inside every method definition introduced by \r\nthe 'def' keyword. And as you found, whenever you load() a file.\r\n\r\nThe reason for keeping local variables local is very important, because \r\nin ruby you can call methods just by their bare name, and also reference \r\nlocal variables just by their bare name.\r\n\r\nSo if I were to write a piece of ruby code like this:\r\n\r\n  puts var2\r\n\r\nRuby has to decide if v2 is a local variable, or if it's a method call. \r\nNote that if you force a method call, there's no ambiguity:\r\n\r\n  puts var2()\r\n  puts self.var2\r\n\r\nBut without this hint, it has to decide for itself. This decision is \r\nmade at parse-time, not at run-time (which would be too inefficient). \r\nThe rule is simple: inside the current scope, if you've seen a possible \r\nassignment to this variable - even if it is never executed - then it's a \r\nvariable.\r\n\r\nif false\r\n  var2 = 123\r\nend\r\n\r\nputs var2    # nil\r\nputs var3    # NameError: undefined local variable or method `v3'	1.9.3	b.candler@pobox.com	2011-08-04 12:30:00	Brian	Candler	2012-05-02 12:29:21.411126	2012-05-11 16:43:55.149472
95	ruby-talk	Irb	Ruby bash replacement	irb, replacements, pry, ripl, dietrb	> My current thought is that it will be a lot easier to simply override the\r\n> class Irb.  I'm not sure if this is a bad idea as my code might become tied\r\n> to a specific version of ruby/irb.\r\n\r\nAlternately, you could base it on one of the third-party IRB\r\nreplacements, like pry, ripl, dietrb, etc. (pry already has commands\r\nlike `cd`.)	1.9.3		2012-01-22 13:24:00			2012-05-02 11:59:02.601602	2012-05-05 20:28:54.499539
341	ruby-talk	Float	Question abour rand()	float, rand, class, loop, condition, iterate	> I'm looking for a way to create a random sequence of numbers using the 'rand' method. \r\n> I can think of something like:\r\n> \r\n> while pipi == TRUE\r\n>   if x > 1950 || x < 2000\r\n>      return  x\r\n>      pipi = FALSE\r\n\r\n> Since however the book that I'm reading has not introduced while/else/if etc. I'm \r\n> thinking that there must be an easier and probably more sensible way to approach this. \r\n> As far as I've read rand(2000) will give random numbers from 0-to-2000 no matter what.\r\n> \r\n> NOTE:  I don't want to use another method just to do the job.\r\n\r\nThe "rand" method has been mentioned. Here are just some\r\nconsiderations about the above code.\r\n\r\nYou don't need a loop for calculating a random value. (There is a\r\nrandom algorithm below.) But when use a loop, then you either say\r\n"return" or leave it by a condition but not both.\r\n\r\n  cond = true\r\n  while cond do\r\n    ...\r\n    if some_condition then\r\n      cond = false\r\n    end\r\n    ...\r\n  end\r\n\r\n_or_\r\n\r\n  loop do\r\n    ...\r\n    break if some_condition\r\n    ...\r\n  end\r\n\r\nNote that "break" can even return values:\r\n\r\n  result = loop do\r\n    break "hi"\r\n  end\r\n  result == "hi"\r\n\r\nAnd here is an example of a very simple random implementation:\r\n\r\n  class R\r\n    def initialize\r\n      @r = 0\r\n    end\r\n    def nextval\r\n      @r =  ((@r * 0xabcd) + 0x73737) % 0x1_0000_0000\r\n      @r >> 16 \r\n    end\r\n  end\r\n  r = R.new\r\n  new_random_value = r.iterate\r\n  random_value_below_fifty = r.iterate % 50	1.9.3	lists@bertram-scharpf.de	2009-12-29 18:55:00	Bertram	Scharpf	2012-05-02 12:44:07.641519	2012-05-06 18:45:57.58759
158	ruby-talk	String	Very Very simple problem	string, slice, index, for, loop	> Have a look at String's slice method..\r\n> <a href="http://ruby-doc.org/core/classes/String.html#M001213">http://ruby-doc.org/core/classes/String.html#M001213</a>\r\n\r\n+1 for s[1..-1]	1.9.3	Carey.Nation@turner.com	2011-07-25 14:09:00	Carey	Nation	2012-05-02 12:10:33.117051	2012-05-11 19:43:15.645176
421	ruby-talk	Language	How to use Ruby like shell script?	language, shell, backticks, scripting, bourne, arg list 	Backticks work very well as well and are in the bourne scripting\r\nmetaphor. Interpolation (i.e. #{self} will also work inside ruby's\r\nback ticks.\r\n\r\nThey will return string. to be used within the program. pipes and\r\nredirection can be used inside as so:\r\n\r\nps = "$2"\r\npid =  `ps aux | awk '{print #{ps}}'`\r\nprintf pid\r\n\r\n$$ gives you the ruby programs process id\r\n$0 returns a string of the program that is running\r\n$* will give you arg list\r\n\r\nhere = <<FILE\r\n  will work as\r\n  well which also\r\n  include #{interpolation}\r\nFILE\r\n\r\nOthers can be found in a file called English.rb	1.9.3	stu@rubyprogrammer.net	2010-11-27 13:43:00	Stu 		2012-05-02 12:57:36.164062	2012-05-11 16:23:02.750013
461	ruby-talk	Block	Koans: About_Regexp Question	block, koan, ruby, sub, lookbehind, lookahead	> As the title implies, I'm pretty new to Ruby (and programming) and I've\r\n> got a question regarding regular expressions in the above Koans\r\n> exercises, specifically with the "sub" and "gsub" methods.\r\n>\r\n> What I would like to know is: is my thinking correct here:\r\n>\r\n> def test_sub_is_like_find_and_replace\r\n>    assert_equal ["one t-three"], "one two-three".sub(/(tw*)/) { $1[0=\r\n,\r\n> 1] }\r\n>  end\r\n>\r\n> So, as I see it, the "sub" method is looking for the first "t" in the\r\n> string. The hash says that it will replace [0, 1] elements of the string\r\n> following the "t" ("w" and "o" respectively) with "$1", which has not\r\n> been defined, meaning it will take these letters out of the string.\r\n>\r\n> The gsub exercise is the same code, but with gsub instead of sub, so in\r\n> that instance it looks to find and replace the [0, 1] elements following\r\n> *every* "t" in the string.\r\n>\r\n> I think I'm way off base here, but any advice you can lend me will be\r\n> greatly appreciated.\r\n\r\nActually not: your interpretation leads to the correct result although\r\nyou are a bit off in some details:\r\n\r\n- What you see at the end of the line is not a Hash but a block passed\r\nto the method call #sub.\r\n\r\n- The block comes only into play when matching has finished (see below).\r\n\r\n- Matching does not look for the first "t" _only_, instead it will\r\nmatch the first "t" followed by as much "word" characters as possible\r\n(this is what the "w*" is for).\r\n\r\n- $1 *is* defined, actually the value in $1 is a side effect of the\r\nmatching which takes place in #sub.\r\n\r\n- $1 is filled from everything which is matched by the first capturing\r\ngroup in the regexp (there is also $2, $3 etc.); capturing groups are\r\ndenoted by "(...)" and there are also non capturing groups denoted by\r\n"(?:...)" and a few other variants: in this case the capturing group\r\nhappens to span the whole expression, which is a deprecated case\r\nbecause usually you use capturing groups to extract _parts_ from a\r\nmatch. For the whole expression there is $& already - and in the case\r\nof #sub, #gsub and #scan it's also stored in the block argument.\r\n\r\n- The expression $1[0,1] denotes the part of $1 which is used for the\r\nreplacement (literally the first character).  You can as well use\r\n$1[0] here.\r\n\r\n- Basically using $1 in the block is superfluous here since you know\r\nthe first character is always "t", so you can use it literally.\r\n\r\nIn IRB\r\n\r\nirb(main):006:0> "one two-three".sub(/(tw*)/) { $1[0,1] }\r\n=> "one t-three"\r\nirb(main):007:0> "one two-three".sub(/(tw*)/) { $1[0] }\r\n=> "one t-three"\r\nirb(main):008:0> "one two-three".sub(/(tw*)/) { 't' }\r\n=> "one t-three"\r\nirb(main):009:0> "one two-three".sub(/tw*/) { 't' }\r\n\r\nirb(main):017:0> "one two-three".sub(/tw*/) {|m| m[0,1] }\r\n=> "one t-three"\r\nirb(main):018:0> "one two-three".sub(/tw*/) {|m| m[0] }\r\n=> "one t-three"\r\n\r\nOther simplifications:\r\n\r\nirb(main):010:0> "one two-three".sub(/(t)w*/) { $1 }\r\n=> "one t-three"\r\nirb(main):011:0> "one two-three".sub(/(?<=t)w*/) { '' }\r\n=> "one t-three"\r\nirb(main):012:0> "one two-three".sub(/(?<=t)w*/, '')\r\n=> "one t-three"\r\n\r\n11 and 12 work with lookbehind.  Lookbehind and -ahead ensure\r\nsomething is there but do not include it in the match.  So in this\r\ncase we replace sequences of any word characters of arbitrary length\r\nwith the empty string, effectively removing it.\r\n\r\nYou can even use String#[]= to immediately assign.\r\n\r\nirb(main):014:0> s = "one two-three"\r\n=> "one two-three"\r\nirb(main):015:0> s[/(?<=t)w*/]=''\r\n=> ""\r\nirb(main):016:0> s\r\n=> "one t-three"\r\n\r\netc.	1.9.3	shortcutter@googlemail.com	2011-12-23 10:39:00	Robert	Klemme	2012-05-02 14:03:21.370896	2012-05-05 18:48:52.661484
315	ruby-talk	Web	Ruby web crawler for https	web, ETL extract, tranform, tool, membrana	Simple ETL (Extract Transform Load) Tool for web\r\n\r\n<a hrefe="https://github.com/alexeypetrushin/wetl">https://github.com/alexeypetrushin/wetl</a>\r\n\r\nHere's the complete sample how to fully grab & parse the membrana.ru site\r\n\r\n<a href="https://github.com/alexeypetrushin/wetl/tree/master/examples/membrana">https://github.com/alexeypetrushin/wetl/tree/master/examples/membrana</a>	1.9.3	axyd80@gmail.com	2011-08-05 21:23:00	Alexey	Petrushin	2012-05-02 12:39:13.493718	2012-05-11 20:19:25.453231
144	ruby-talk	IO	File#size	io, class, tell, method, file, stat, size	>> How about file.stat.size ?\r\n> \r\n> ooh that's really close.\r\n> I might want one that takes into account unflushed buffers, though. \r\n> Apparently .stat.size doesn't quite.\r\n> \r\n>>> a.write 'abc'\r\n> => 3\r\n>>> a.stat.size\r\n> => 0\r\n>>> a.flush\r\n> => #<File:README>\r\n>>> a.stat.size\r\n> => 3\r\n> \r\n> But at least it's pretty close.\r\n\r\nSo you want to know how much you have written?  Then use #tell\r\n\r\n<a href=http://www.ruby-doc.org/core/classes/IO.html#M002304">http://www.ruby-doc.org/core/classes/IO.html#M002304</a>	1.9.3	shortcutter@googlemail.com	2009-02-07 17:30:00	Robert	Klemme	2012-05-02 12:07:07.684351	2012-05-11 19:41:16.175616
179	ruby-talk	Class	ruby Programming Help	class, xml, write, homework, suggestion, explicit	> I need your help regarding ruby programming.\r\n\r\n<a href="http://www.catb.org/~esr/faqs/smart-questions.html#courtesy">http://www.catb.org/~esr/faqs/smart-questions.html#courtesy</a>\r\n\r\n> I have two classes.\r\n> 1) Companies Class\r\n> 2) Writer Class\r\n> I want to generate a site-map XML file according to the companies names.\r\n> In the Companies class I get the data about companies and I want to pass\r\n> it to the writer class to write site-map\r\n> Following are the classes... Anyone plz help me its very urgent\r\n\r\n<a href="http://www.catb.org/~esr/faqs/smart-questions.html#urgent">http://www.catb.org/~esr/faqs/smart-questions.html#urgent</a>\r\n<a href="http://www.catb.org/~esr/faqs/smart-questions.html#volume">http://www.catb.org/~esr/faqs/smart-questions.html#volume</a>\r\n\r\nAnd the question is?\r\n\r\n<a href="http://www.catb.org/~esr/faqs/smart-questions.html#beprecise">http://www.catb.org/~esr/faqs/smart-questions.html#beprecise</a>\r\n<a href="http://www.catb.org/~esr/faqs/smart-questions.html#explicit">http://www.catb.org/~esr/faqs/smart-questions.html#explicit</a>\r\n\r\nAnd, just in case\r\n\r\n<a href="http://www.catb.org/~esr/faqs/smart-questions.html#homework">http://www.catb.org/~esr/faqs/smart-questions.html#homework</a>	1.9.3	shortcutter@googlemail.com	2011-12-21 16:02:00	Robert	Klemme	2012-05-02 12:13:45.208911	2012-05-11 19:50:17.156511
51	ruby-talk	GTK	Using any trick to omit () in constant lookup?	gtk, const_missing, overwrite, toolkit, instance	O\r\n\r\n> or an idea, forgot your Button class, and override const_missing\r\n\r\nThere is a much simpler solution\r\n\r\nrequire 'gtk2'\r\n\r\n$use_gtk = true\r\n\r\ndef Button\r\n if $use_gtk\r\n   Gtk::Button\r\n else # else use something else.\r\n   raise "unknown"\r\n end.new\r\nend\r\n\r\nx = Button\r\nputs x.class\r\n\r\nBut the problem will come later, i.e. when using all those toolkit\r\ninstances.  They most likely have different interfaces.  So you better\r\nwrap all the classes with your own classes which exhibit a standard\r\ninterface (which you must define) and work with specific toolkit\r\nclasses behind the scenes.  The ugly thing then will be to find the\r\nway back from a toolkit class to its corresponding wrapper.  Another\r\noption could be to add methods to toolkit classes to create the\r\nuniform interface.\r\n\r\nI am not sure whether all the effort pays off though...	1.9.3	shortcutter@googlemail.com	2011-12-08 11:53:00	Robert	Klemme	2012-05-02 11:52:04.405908	2012-05-06 18:51:05.389771
79	ruby-talk	Struct	Creating a ruby class with mass assignment?	struct, create, map, to_sym, mass assignment	> How do I create a ruby class that has mass assignment functionality?  I\r\n> want it to work in a similar way to the way in which ActiveRecord does,\r\n> ie.\r\n> MyClass.new\r\n> => #<MyClass:>\r\n> MyClass.new(:name => "Cool class")\r\n> => #<MyClass: @name="s">\r\n> MyClass.new(:name => "Cool class", :other_attribute => "some other")\r\n> => #<MyClass: @name="s", @other_attribute="some other">\r\n>\r\n> I have found the following code snippit which works for the mass\r\n> assignment part but doesn't work if I initialize the class without any\r\n> arguments:\r\n>\r\n> class MyClass\r\n>  attr_accessor :name\r\n>  attr_accessor :other_attribute\r\n>\r\n>  def initialize(args)\r\n>    args.keys.each { |name| instance_variable_set "@" + name.to_s,\r\n> args[name] }\r\n>  end\r\n> end\r\n>\r\n> MyClass.new\r\n> ArgumentError: wrong number of arguments (0 for 1)\r\n>        from (irb):19:in `initialize'\r\n>        from (irb):19:in `new'\r\n>        from (irb):19\r\n>\r\n> What is the best way of achieving mass assignment whilst still allowing\r\n> to initialize without parameters?\r\n\r\nYou can make your life considerably easier by using Struct:\r\n\r\nirb(main):001:0> Test = Struct.new :foo, :bar, :baz do\r\nirb(main):002:1*   def self.create(h = {})\r\nirb(main):003:2>     new(*members.map {|m| h[m.to_sym]})\r\nirb(main):004:2>   end\r\nirb(main):005:1> end\r\n=> Test\r\nirb(main):006:0> Test.create(:foo => 1)\r\n=> #<struct Test foo=1, bar=nil, baz=nil>\r\nirb(main):007:0> Test.create(:bar => 3, :foo => 123)\r\n=> #<struct Test foo=123, bar=3, baz=nil>	1.9.3	shortcutter@googlemail.com	2009-01-30 14:36:00	Robert	Klemme	2012-05-02 11:55:46.50258	2012-05-03 23:26:53.841577
451	ruby-talk	File	How to parse this file?	file, parse, line, match, chomp, regex	> here is the basic code, output followed by a basic explanation\r\n\r\n>   data=line.match /"(w+)"s+"(w+)"/\r\n\r\n?? That won't remotely work, unless the "Question" and "Answer" are both single words, \r\n> which seems unlikely :-)\r\n\r\nTry something like    line.chomp.match /"([^"]+)"s+"([^"]+)"/\r\n\r\n>> '"What is the temperature?" "Pretty cold"'.match /"(w+)"s+"(w+)"/\r\n=> nil\r\n>> '"What is the temperature?" "Pretty cold"'.match /"([^"]+)"s+"([^"]+=)"/\r\n=> #<MatchData ""What is the temperature?" "Pretty cold"" 1:"What is the temperature?" 2:"Pretty cold">\r\n>> result = '"What is the temperature?" "Pretty cold"'.match /"([^"]+)"=s+"([^"]+)"/\r\n=> #<MatchData ""What is the temperature?" "Pretty cold"" 1:"What is the temperature?" 2:"Pretty cold">\r\n>> result[1]\r\n=> "What is the temperature?"\r\n>> result[2]\r\n=> "Pretty cold"	1.9.3	hassan.schroeder@gmail.com	2009-12-26 09:20:00	Hassan	Schroeder	2012-05-02 13:58:50.309158	2012-05-06 19:04:48.709589
345	ruby-talk	Method	Control Structures	inject, last, until, control, optimization	I am not sure if you want this optimization\r\n\r\na = 3\r\nm = a.times.inject([]){ |r,| x=rand(a); x < (r.last||0) && break; r <<\r\nx } until m\r\n\r\nor if you prefer\r\n\r\nm = a.pred.times.inject( [rand( a )]){ |r,| x=rand(a); x < r.last &&\r\nbreak; r << x } until m\r\n\r\nnow apart of not creating the full array when it is already unsorted\r\nit is also a brain teaser to work all those new methods out, but that\r\nis the beauty of Ruby.\r\n\r\nP.S Ruby 1.8.7 needed works with PL 72 and 1.9 of course.	1.9.3		2008-12-01 18:53:00	Robert	Dober	2012-05-02 12:44:07.762147	2012-05-03 23:06:40.426812
178	ruby-talk	Array	Array to string in different lines	array, format, error	> I am collecting errors like object.errors.on(:field) \r\n> So some times= i get it like an array\r\n> ["error1_message","error2_message"]  or\r\n> "error1_message" a string\r\n>\r\n> So how can i format this in more than one line if its an array(or\r\n> either case)\r\n> example in first case how can i get it like\r\n> "error1_message"\r\n> "error2_message"\r\n\r\nA way that works for both cases (array of strings and string):\r\n\r\nirb(main):002:0> s => ["a", "b"]\r\n=> ["a", "b"]\r\nirb(main):003:0> puts [*s].join("\r\n")\r\na\r\nb\r\n=> nil\r\nirb(main):004:0> s => "a"\r\n=> "a"\r\nirb(main):005:0> puts [*s].join("\r\n")\r\na\r\n\r\nAnother one:\r\nirb(main):004:0> s = "a"\r\n=> "a"\r\nirb(main):006:0> puts [s].flatten.join("\r\n")\r\na\r\n=> nil\r\nirb(main):007:0> s = ["a", "b"]\r\n=> ["a", "b"]\r\nirb(main):008:0> puts [s].flatten.join("\r\n")\r\na\r\nb	1.9.3	jgabrielygalan@gmail.com	2009-05-06 12:29:00	JesÃºs	Gabriel y Galan	2012-05-02 12:13:45.172166	2012-05-11 15:40:25.862694
167	ruby-talk	Array	A beginner case question	array, sort, reverse, block	> I didn't know you could .reverse a code block.\r\n> I had tried that with parenthesis but not just on the block itself.\r\n\r\nWell, you are not reversing the code block, you are reversing the\r\nresult of the call to sort_by, which is an array.\r\n\r\nThe line is functionally identical to:\r\n\r\n(answers.sort_by {|answer| answer.text}).reverse\r\n\r\nThe  sort_by method receives no params and a block, and returns an\r\narray. You are then calling reverse on the resulting array.\r\nIt's more clear in Brian's explanation, where he used a temporary\r\nvariable to store the result of the sort_by call.	1.9.3	jgabrielygalan@gmail.com	2009-01-14 17:37:00	JesÃºs	Gabriel y Galan	2012-05-02 12:13:44.82353	2012-05-11 15:28:59.928594
45	ruby-talk	String	How to indent strings(make them line up)?	string, format, printf, dns, ip	>>> www.google.com=EF=BF=BD =EF=BF=BD => 123.123.123.12www.ibm.com=EF=BF=\r\n=BD =EF=BF=BD =EF=BF=BD =EF=BF=BD=> 123.112.123.12www.iowahawkeyes=EF=BF=\r\n=BD => 123.123.112.12\r\n>>>\r\n>>> original code was\r\n>>>\r\n>>> puts (dns + " => " + ip)\r\n>>>\r\n>>> I tried next code\r\n>>>\r\n>>> puts (dns + " =EF=BF=BD"*(20 - dns.length) + " = > " + ip)\r\n>>>\r\n>>> but it did not work well. please teach me how to do it.\r\n>>\r\n>> "%-30s %s" % [dns, ip]\r\n>\r\n> Thomas's suggestion of String Format (%) is correct, just revising\r\n> example to reflect the original code above.\r\n>\r\n> puts "%-20s => %s" % [dns, ip]\r\n\r\nI'd prefer printf in that case\r\n\r\nprintf "%-20s => %s", dns, ip	1.9.3	shortcutter@googlemail.com	2009-12-08 14:47:00	Robert	Klemme	2012-05-02 11:50:07.239212	2012-05-06 19:08:10.910909
139	ruby-talk	Block	Define a constant in dynamically defined class	block scope, Module#const set, context, dynamic	>       k = Class.new() do\r\n>         class X; end\r\n>       end\r\n>\r\n>      k::X.object_id\r\n>\r\n> results in\r\n>\r\n>      (irb):7: warning: toplevel constant X referenced by #<Class:\r\n> 0x00000001954380>::X\r\n>\r\n[...]\r\n> Is there any way to isolate X to k? And then apply it to the more\r\n> general dynamic case?\r\n>\r\n\r\nYou can use Module#const_set.\r\n\r\nconst_set :X, Class.new\r\n\r\nEntering the block scope does not automatically change the current \r\ncontext for constant definition (the core developers call it the \r\n`cref'), nor does instance_eval and class_eval.	1.9.3	su.comp.lang.ruby@gmail.com	2011-07-05 19:57:00	Su	Zhang	2012-05-02 12:07:07.552881	2012-05-03 23:38:13.597058
98	ruby-talk	JSON	Simplest way for secure, JSON-based client/server solution?	json, http, https, rpc, rabbitmq, messaging, layer	> Long time since I was actively involved in Ruby community so would\r\n> like to get your up-to-date view of what would be the simplest way to\r\n> support secure (ssh-encrypted typically) client/server communication\r\n> via JSON between ruby scripts. I want to use encrypted JSON since some\r\n> of the clients might later need to be implemented in other languages\r\n> than Ruby and JSON is widespread. But other ideas/comments also\r\n> appreciated.\r\n\r\nIf you've already decided you want to use ssh to handle the encryption, \r\nthen you would use ssh tunnelling. This lets you pass a TCP session \r\nsecurely over ssh to a remote endpoint, but the two endpoints are not \r\ndoing any encryption.\r\n\r\n    Client ----- ssh ================ sshd ------ Server\r\n\r\nssh -L <localport>:<serverhost>:<serverport>  <username>@<sshd-host>\r\n\r\nYour two other main options for securing the connection are SSL and \r\nIPSEC.\r\n\r\nHowever, that doesn't define what application-layer protocol you are \r\ngoing to use; JSON is just a way to encode Javascript objects, it is not \r\na protocol for request/response exchanges.\r\n\r\nMany people just use JSON over HTTP/HTTPS - this is essentially the \r\nRESTful approach. You GET a JSON object from a particular URL; or you \r\nPUT or POST a JSON object to a URL, and get another JSON object in the \r\nresponse.\r\n\r\nThere is also a JSON RPC proposal - json-rpc.org - but I don't know what \r\nstate this proposal is in, nor the ruby implementations of it.\r\n\r\nIn both cases, the semantics of handling interrupted communication are \r\nup to you (e.g. if you POST an object but didn't get a response, it's \r\npossible that the object was received and acted upon, but the response \r\nwas interrupted. What would happen if you resubmit the original request? \r\nIf this is a financial transaction, would the customer be charged \r\ntwice?)\r\n\r\nIf you want the messaging layer to handle this sort of issue for you \r\nthen you should look at using a dedicated messaging layer instead (e.g. \r\nan AMQP engine like rabbitmq)	1.9.3	b.candler@pobox.com	2011-11-27 20:21:00	Brian	Candler	2012-05-02 11:59:32.60815	2012-05-06 19:16:04.448232
453	ruby-talk	Class	Design pattern question	duck typing, abstract classes, exception	> Abstract classes are sometimes useful (although rarely). For example,\r\n> how else could you do the kind of database adapter handling Sequel[1] does?\r\n\r\nUse duck typing.\r\n\r\nThis:\r\n\r\nclass Abstract\r\n  def foo\r\n    throw NotImplementedException\r\n  end\r\nend\r\n\r\nclass Foo < Abstract\r\n  def foo\r\n    puts "in foo!"\r\n  end\r\nend\r\n\r\nclass Bar < Abstract\r\n  def foo\r\n    puts "in bar's foo"\r\n  end\r\nend\r\n\r\nIs the exact same thing as\r\n\r\nclass Foo\r\n  def foo\r\n    puts "in foo!"\r\n  end\r\nend\r\n\r\nclass Bar\r\n  def foo\r\n    puts "in bar's foo"\r\n  end\r\nend\r\n\r\nin fact...\r\n\r\nclass Baz\r\nend\r\n\r\nBaz.new.foo # => NoMethodError\r\n\r\nclass Baz < Abstract\r\nend\r\n\r\nBaz.new.foo # => NotImplementedError\r\n\r\nAlmost the exact same thing. Just a different exception.	1.9.3	steve@steveklabnik.com	2012-04-05 17:26:00	Steve	Klabnik	2012-05-02 13:59:21.853863	2012-05-03 23:51:17.117548
211	ruby-talk	Class	Inverse Operation of Module#include	class, inheritance, duck typing, template, method, financial 	>> Abstract base classes are silly in Ruby; why bother with that\r\n>> inheritance? Just take advantage of duck typing.\r\n\r\n> I was under the impression that it does make sense to have an abstract\r\n> base class that has a number of generic methods and then derived classes:\r\n> * add some specific methods\r\n> * add some specific attributes\r\n> * override some of the inherited methods\r\n\r\n=> Template method pattern\r\n\r\n> I have a specific example I was just implementing with an abstract\r\n> base class for an "account" (think "bank account"). There are different\r\n> derived classes, e.g. for simple money, but also for credits. Certain\r\n> functions are generic (e.g. balance), but certain functions are specific\r\n> (e.g. put funds on the account will use decimals for "money", but only\r\n> accept integers for "credits"). I have put some demo code below.\r\n>\r\n> Very curious to hear how this design could be improved with duck typing.\r\n\r\nNot really duck typing, but this is how template method could look in this case\r\n\r\nclass Account\r\n  def initialize\r\n    extend MonitorMixin\r\n    @balance = 0\r\n  end\r\n\r\n  def balance\r\n    synchronize do\r\n      @balance\r\n    end\r\n  end\r\n\r\n  def put(amount)\r\n    ensure_proper_amount(amount)\r\n\r\n    synchronize do\r\n      @balance += amount\r\n    end\r\n  end\r\n\r\nend\r\n\r\nclass MoneyAccount < Account\r\n  def ensure_proper_amount(amount)\r\n    raise "you can only put decimal amounts in a MoneyAccount" unless\r\n      BigDecimal === amount\r\n  end\r\nend	1.9.3	shortcutter@googlemail.com	2011-12-04 19:23:00	Robert	Klemme	2012-05-02 12:19:46.094002	2012-05-06 19:50:05.825936
171	ruby-talk	Class	About singleton_methods	class, singleton, singleton_methods	# private method is not a singleton method.. Why?\r\n# Anyway 'ccc' is defined in a singleton class of A ?\r\n\r\nclass A\r\n  class << A\r\n    def aaa\r\n    end\r\n\r\n    protected\r\n    def bbb\r\n    end\r\n\r\n    private\r\n    def ccc\r\n    end\r\n  end\r\nend\r\n\r\np A.singleton_methods # => ["aaa", "bbb"]	1.9.3	kdream95@gmerce.co.kr	2009-01-08 08:30:00	Kyung	won Cheon	2012-05-02 12:13:44.956312	2012-05-11 15:30:42.118514
164	ruby-talk	Regexp	How to find all matches using ruby regexp?	string, match, scan, filename	> I have the following ruby code and I want to find all matched\r\n> "data-1.2.5.tar.gz" and "data-1.2.7.tar.gz", then stored in $1 and $2.\r\n> When I executed it and I found $1 is "data-1.2.5.tar.gz", but $2 is nil.\r\n> How can I get $2 is "data-1.2.7.tar.gz"?\r\n>\r\n> string1 = "data-1.2.5.tar.gz and data-1.2.7.tar.gz and readme."\r\n>\r\n> if string1 =~ /(data-d+.d+.d+.tar.gz)/\r\n>  print "Matched on ", $1, ""\r\n>  print "Matched on ", $2, ""\r\n>\r\n> else\r\n>  puts "NO MATCH"\r\n> end\r\n\r\nAre you sure there are always exactly two of them?  If not, #scan is better:\r\n\r\nirb(main):001:0> string1 = "data-1.2.5.tar.gz and data-1.2.7.tar.gz and readme."\r\n=> "data-1.2.5.tar.gz and data-1.2.7.tar.gz and readme."\r\nirb(main):002:0> string1.scan /data-d+(?:.d+)*.tar.gz/\r\n=> ["data-1.2.5.tar.gz", "data-1.2.7.tar.gz"]	1.9.3	shortcutter@googlemail.com	2011-08-25 10:32:00	Robert	Klemme	2012-05-02 12:12:26.75323	2012-05-11 16:16:26.891193
343	ruby-talk	Array	Add a string on the end of values before splitting new line	file, array, split	@file="value1,value2,value3,value4"\r\n# @output=[]\r\n# @file.split(/,/).each do |record|\r\n# @output << record + " comments"\r\n# end\r\n\r\noutput = @file.split(/,/).map {|record| record + comments}\r\n\r\neach + filling an array => map	1.9.3	jgabrielygalan@gmail.com	2009-03-06 13:42:00	JesÃºs	Gabriel y Galan	2012-05-02 12:44:07.714929	2012-05-03 15:02:00.476614
7	ruby-talk	System	Multiple commands in shell	system, command, multiple, shell, run, +, script	>> I'm trying to run multiple commands in the shell from ruby but I can't\r\n>> seem to grasp how I keep the "state" from the previous shell command.\r\n>>\r\n>> For example, how would I perform the following sequence of commands in\r\n>> ruby:\r\n>>\r\n>> 1. cd /dir\r\n>> 2. ls\r\n>>\r\n>> Not counting "ls /dir" that is ;)\r\n>>\r\n>> I've tried using:\r\n>>\r\n>> system "cd /dir"\r\n>> system "ls"\r\n>>\r\n>> .but it doesn't work.\r\n\r\n> $ pwd\r\n> /Users/dusty\r\n> [dusty@dustylaptop:~] $ ls tmp/\r\n> test.txt\r\n> \r\n> irb(main):003:0> system('pwd; cd tmp; ls')\r\n> /Users/dusty\r\n> test.txt\r\n> => true\r\n\r\nHere's another way to do it using a here document by having multiple \r\ncommands on separate lines - much the same way as in a shell script:\r\n\r\n$ ruby /tmp/x.rb\r\n+ pwd\r\n/cygdrive/c/Dokumente und Einstellungen/robert\r\n+ cd /tmp\r\n+ pwd\r\n/tmp\r\n+ ls\r\nx.rb\r\n\r\n$ cat /tmp/x.rb\r\n\r\nsystem <<EOC\r\nset -x\r\npwd\r\ncd /tmp\r\npwd\r\nls\r\nEOC	1.9.3	shortcutter@googlemail.com	2009-01-07 23:18:00	Robert	Klemme	2012-05-02 11:37:03.155751	2012-05-11 16:48:00.995869
463	ruby-talk	String	String delimiter?	delimiter, assignment, string	> I've found a code part that I don't understand:\r\n> \r\n> def runCode\r\n>  return <<STARTCODE\r\n>   (..)\r\n>  STARTCODE\r\n> end\r\n> \r\n> \r\n> Unfortunately the google search doesn't work because the << will be\r\n> ignored. Could you explain what it's doing?\r\n> \r\n> Oh, and I can't try out what it's doing because I'll get the error that\r\n> STARTCODE can't be found until EOF...\r\n> \r\n\r\nIt's another form of string literal, just as ' ' or " ". The string content\r\nstart from the line after STARTCODE and continues until a line starting with\r\nSTARTCODE is found. Note that the line must truly start with STARTCODE, it\r\ncan't have any leading whitespace (this is the reason you get an error). If\r\nyou want to have whitespace before the closing STARTCODE, you must put a -\r\nafter the <<:\r\n\r\nreturn <<-STARTCODE\r\n\r\nNote that the delimiting string doesn't need to be STARTCODE, it can be\r\nanything you like, as long as you use the same string at the beginning and\r\nend of the string.\r\n\r\nI hope this helps	1.9.3	stefano.crocco@alice.it	2012-01-22 19:06:00	Stefano	Crocco	2012-05-02 14:04:28.018772	2012-05-03 22:51:50.526533
374	ruby-talk	Hash	Hash key : string or symbol!?	hash, key, string, symbol, to_sym	> I had to manipulate a hash (delete pairs, add pairs, )\r\n>\r\n> But my problem is that the data comes sometimes as string and other\r\n> times as symbol, and this makes problems in updating the hash (sometimes\r\n> I have an entry 2 times with a symbol key and string key).\r\n>\r\n> for example in this code:\r\n> hash = {:a => :b, 2 => 3, "g"=> 5 }\r\n> => {2=>3, "g"=>5, :a=>:b}\r\n> h = {:a => :b, 2 => 4, :g=> 6 }\r\n> => {:g=>6, 2=>4, :a=>:b}\r\n> hash.merge(h)\r\n> => {:g=>6, 2=>4, "g"=>5, :a=>:b}\r\n>\r\n> I want that the value of hash["g"] changes to 6 without adding another\r\n> pair {:g => 6}\r\n>\r\n> Someone has any idea?\r\n\r\nnew_hash = {}\r\nhash.each { |k,v| new_hash[k.to_sym] = v }\r\nh.each { |k,v| new_hash[k.to_sym] = v }	1.9.3	andrew@andrewtimberlake.com	2009-04-09 10:54:00	Andrew	Timberlake	2012-05-02 12:50:49.642863	2012-05-06 20:04:06.887693
319	ruby-talk	YAML	Single quoted string to become double quoted - is it possible?	yaml, template, language, erb, pass, binding	> >> Imagine I have single quoted string:\r\n> >> a = 'bla bla #{name} bla bla'\r\n> >> name = 'Andrew'\r\n> >> Is it possible to make a act as double quoted string: puts a => 'bla\r\n> >> bla Andrew bla bla' instead of' bla bla #{name} bla bla'?\r\n> >\r\n> > Why do you need to use single quotes?\r\n> I use yaml configuration file. in this file I set string template like\r\n> this:\r\n> :event:\r\n>  :template: "bla bla #{name} bla bla" #in order to be flexible\r\n>\r\n> Then  I load this yaml into @options variable and define @template:\r\n> @template = @options[:event][:template] #=> "bla bla #{name} bla bla" So\r\n> the effect is the same as using single quotes. And it seems I cannot change\r\n> the way Ruby reads yaml strings.\r\n> Later in my program I want to use the @template to generate string with\r\n> real value of name.\r\n> I use Steve's approach and it works fine:\r\n> a = eval "/"#{template}/""  # => "bla bla Andrew bla bla"\r\n\r\nUse a templating language instead:\r\n\r\ndata = '\r\n:event:\r\n :template: "bla bla <%= name %> bla bla" #in order to be flexible\r\n\r\nrequire 'yaml'\r\nyaml = YAML.load data\r\nyaml # => {:event=>{:template=>"bla bla <%= name %> bla bla"}}\r\nto_parse = yaml[:event][:template] # => "bla bla <%= name %> bla bla"\r\n\r\nrequire 'erb'\r\nname = "Jefferson"\r\nERB.new(to_parse).result # => "bla bla Jefferson bla bla"\r\n\r\n# note that you may have to pass a binding depending on how you want to use it.	1.9.3	josh.cheek@gmail.com	2011-12-17 16:13:00	Josh	Cheek	2012-05-02 12:39:44.769331	2012-05-11 17:22:22.280264
544	ruby-talk	Method	Calling a descendant's method	method, descendant, calling, sequence, explanation	> No it returns "Hoho"!\r\n> Now i am confused...\r\n\r\nruby moves up the inheritance hierarchy until it finds f():\r\n\r\n   def f\r\n      g()\r\n    end\r\n\r\nf() executes and inside f() ruby finds the statement:\r\n\r\n    g()\r\n\r\n\r\nruby must call all methods with an object, and if you don't specify the \r\nobject that is calling the method, then ruby uses self.  So g() is \r\nequivalent to:\r\n\r\n   self.g()\r\n\r\n\r\nWhat is self?  self is the object that called the method.  What object \r\ncalled the method?  An instance of B called f(), so inside f() self='the \r\nB instance'.  That means self.g is equivalent to:\r\n\r\n\r\n  'the b instance'.g()\r\n\r\n\r\nSo ruby checks the B class for a method called g().	1.9.3	bbxx789_05ss@yahoo.com	2011-08-26 04:27:00	7stud		2012-05-04 21:46:15.979028	2012-05-04 21:46:15.979028
61	ruby-talk	Method	Concept of instance variable in Ruby	method, local variable, self	> If your program consists entirely of this code:\r\n>\r\n>    @x = 'hello'\r\n>    def printMe\r\n>      puts x\r\n>      puts @x\r\n>    end\r\n...\r\n> x is a local variable whose scope is limited to printMe(), and is\r\n> undefined.\r\n\r\nNo, that's not quite right. x here is a method call, not a local \r\nvariable, because there has been no assignment to x earlier in the scope \r\n(in this case the body of method 'printMe'). That is:\r\n\r\n    puts x\r\n\r\nis interpreted as if you had written\r\n\r\n    puts self.x\r\nor  puts x()\r\n\r\nHowever, if you had written instead:\r\n\r\n    def printMe\r\n      if false\r\n        x = 123\r\n      end\r\n      puts x\r\n    end\r\n\r\nthen x would indeed be a local variable, and its value is 'nil' (because \r\nthe assignment which occurs earlier in the scope is not actually \r\nexecuted)	1.9.3	b.candler@pobox.com	2011-12-12 10:17:00	Brian	Candler	2012-05-02 11:53:50.687052	2012-05-03 22:57:18.258872
36	ruby-talk	Array	Join multiple arrays	array, join, method	>> How to Join multiple arrays in a single method in ruby\r\n>> Ex:\r\n>>      a= [ 1 ,2 , 3]\r\n>>       b = [4,5,6]\r\n>>       c = [7,8,9]\r\n>> Using single method i want b and c array content into the a array.\r\n>\r\n> Hey , what is this ? are you read documentation for ruby or any thing\r\n> else ?.\r\n>\r\n> Answer is ,\r\n>      a + b + c\r\n\r\nI expect that was what the OP was looking for. But on the other hand,\r\nyour solution involves two methods, not one. One way to do it with one\r\nmethod is the following:\r\n\r\nrequire 'pp'\r\n\r\nclass Array\r\n  def concat_multi! *lists\r\n    lists.each {|list| self.concat(list) }\r\n  end\r\nend\r\n\r\na = [1, 2, 3]\r\nb = [4, 5, 6]\r\nc = [7, 8, 9]\r\nd = [10, 11]\r\n\r\na.concat_multi!(b, c, d)\r\n\r\npp a	1.9.3		2009-02-25 00:14:00	Brian	Adkins	2012-05-02 11:47:56.682593	2012-05-03 19:10:12.548806
307	ruby-talk	Rake	Rake question	rake, files, task, run, pathname, magic, output, iterate	O\r\n\r\n> I have a general question regarding rake:\r\n>\r\n> Say I have a list of files (based on file extension), that all need to\r\n> be processed in the same way. The output of this processing is required\r\n> by a downstream task. How do I run this in rake?\r\n>\r\n> My approach was:\r\n>\r\n> my_files.each do |file|\r\n>\r\n>   target_file = '#{file}.transformed'\r\n>   file target_file =>  file do\r\n>     # transform here\r\n>   end\r\n>\r\n>   task :transform =>  target_file\r\n> end\r\n>\r\n> next_file = 'transformed_files.txt'\r\n> file next_file =>  :transform do\r\n>   # Do something with all transformed files to produce 1 output file\r\n> end\r\n>\r\n> And this fails, complaining that it does not know how to build\r\n> :transform\r\n>\r\n> Is this a syntactic issue? The workflow above correctly iterates over\r\n> the input files, creates transformed files and then complains that it\r\n> doesn't know how to build :transform. I am at a loss...\r\n> Any 'better' ways of doing this?\r\n>\r\nActually what I would do in your position would be to create rules \r\n(since your tasks depend on file extensions):\r\n\r\n#this rules says that if a foo.transformed Filetask is called it depends \r\non foo.regular\r\nrule ".transformed" => [".regular"] do |r|\r\n  # do the processing here to create the .transformed file\r\n  # r gives you the actual FileTask triggering the rule and you can get \r\nthe path out of it\r\nend\r\n\r\nWhen you have your list of files do\r\n\r\ndeps=FileList["*.regular"].gsub(".regular",".transformed") #you can \r\nobviously do all kinds of pathname magic here\r\n\r\nand add it to a task\r\n\r\ntask :transform => deps do\r\n# at this point you know that all transformed files are there and waiting\r\nend\r\n\r\nIf it's the output file you want to tie up then\r\n\r\nfile foo.output => deps	1.9.3	eldestdamphyr@gmail.com	2011-12-07 13:19:00	Vassilis	Rizopoulos	2012-05-02 12:37:00.404517	2012-05-06 20:16:24.118274
91	ruby-talk	Integer	Factorial	integer, factorial, calculate, mongodb, database, complexity	> Just pre calculate all the factorials and put them in Mongodb.\r\n\r\nThis gives pretty good performance:\r\n\r\n@stat = []\r\ndef fact n\r\n  n == 0 ? 1 : @stat[n] ||= n * fact(n-1)\r\nend\r\n\r\nThough for big numbers ( > 10k) you have to go up by multiples of 5k in\r\norder to not have a stack overflow...  in that case you can use the inject\r\nmethod given above...  and if you then have a *huge* table, you can stick\r\nit into something like mongodb...  increase complexity only when needed.	1.9.3	serialhex@gmail.com	2012-02-18 23:03:00	Serial	Hex	2012-05-02 11:58:38.306406	2012-05-06 21:04:50.130064
386	ruby-talk	Net	Parsing XML with Ruby	https, http, parse, link, curl, xml, user, password, pass, nokogiri	> I need to hit an https link and pass a username and password in order to\r\n> pull down some records in xml format. I was thinking that the easiest\r\n> way to do this is to shell out to curl and then parse my xml provided\r\n> that I could pass the username/password in the url.\r\n>\r\n> Can anyone recommend an easy way to accomplish this?\r\n\r\nThe ruby way of doing this would be to use the Net::HTTP from the\r\nstandard library. It does https too. The docs are at:\r\n\r\n  <a href="http://ruby-doc.org/stdlib/libdoc/net/http/rdoc/index.html">http://ruby-doc.org/stdlib/libdoc/net/http/rdoc/index.html</a>\r\n\r\nAs for parsing XML, there are a few options, but Nokogiri is probably\r\nthe easiest to learn and deal with. Easily googlable, and there are a\r\nfew blog posts with samples.	1.9.3	ammarabuali@gmail.com	2010-11-12 02:55:00	Ammar	Ali	2012-05-02 12:52:22.669248	2012-05-11 20:40:14.620344
17	ruby-talk	Set	DRYing a Regexp	regex, set, hash, dry, dup, remove, duplicates, scan, to_set	>> With your insights,  I was able to cut down 18 lines of somewhat\r\n>> obscure code to 6 lines that I find very readable.  That's such and\r\n>> improvement on the quality of the code.\r\n>\r\n> I believe you can go further. For example, these three lines:\r\n>\r\n>  sNewList = %{TMxxx CSCO COL INTC BRCM FDX AA CAT BUR FSLR MSFT',\r\n>               PNC HPQ CSCO AMAT ORCL FCX ABX PVTB XHB CSCO =\r\nTM FDX}\r\n>  aRawNewList = sNewList.scan(/[A-Z]+/)\r\n>  aNewList = Set.new(aRawNewList ).to_a.sort\r\n>\r\n> can be replaced by one:\r\n>\r\n>  aNewList = %W{TMxxx CSCO COL INTC BRCM FDX AA CAT BUR FSLR MSFT',\r\n>                PNC HPQ CSCO AMAT ORCL FCX ABX PVTB XHB CS=\r\nCO TM FDX}\r\n\r\nI don't think so because that appears to be input from the outside\r\nwhich is provided as single String.\r\n\r\n> (you can add .sort to the end but I don't think you need it)\r\n>\r\n> also, consider something like this:\r\n>\r\n>  hCurrentList.delete_if { |key,v| aNewList.include?key }\r\n\r\nBasically the question is which of the two is larger.  But if you do\r\nit this way round (i.e. iterate the Hash and check for existence in\r\nthe new list then that should definitively be a Set).\r\n\r\nHere's my suggestion\r\n\r\nrequire 'set'\r\n\r\n# dumy base\r\ncurrent = {"CSCO" => 1, "COL" => 2, "INTC" => 3, "BRCM" => 4, "FO=\r\nO" => 99}\r\n\r\n# user input\r\ninput = %{TMxxx CSCO COL INTC BRCM FDX AA CAT BUR FSLR MSFT\r\n  PNC HPQ CSCO AMAT ORCL FCX ABX PVTB XHB CSCO TM FDX}\r\n\r\n# algorithm\r\nsymbols = input.scan(/[A-Z]+/)\r\ndeduped = symbols.to_set\r\n\r\nold_size = current.size\r\ndeduped.each {|sym| current.delete sym}\r\n\r\np(deduped.sort,\r\n  10,\r\n  sprintf("New List (unique:%d, dups:%d, deleted:%s)",\r\n    deduped.size,\r\n    symbols.size - deduped.size,\r\n    old_size - current.size),\r\n  true)\r\n\r\np current	1.9.3	shortcutter@googlemail.com	2009-11-13 15:17:00	Robert	Klemme	2012-05-02 11:43:41.260088	2012-05-06 22:16:01.958348
57	ruby-talk	Emoticon	Emoticon Code	emoticon, example, :/, code	> > Can anyone think of more emoticons that I could use in my code?\r\n\r\n:/ works, though it is easily confused with this :, which does not.	1.9.3		2012-03-25 12:22:00	Jonan	Scheffler	2012-05-02 11:53:03.57824	2012-05-06 22:55:29.450884
214	ruby-talk	Operator	Error with splat params in method definition	operator, splat, conditional, params, default, pop, hash	> I'd like to ask why having:\r\n> \r\n> ```\r\n> def my_method(*param1, param2 = "default"); end\r\n> ```\r\n> \r\n> returns\r\n> \r\n> ```\r\n> SyntaxError: (irb):15: syntax error, unexpected '=', expecting ')'\r\n> ```\r\n> \r\n> My workaround is explicitly wrap param in brackets like this:\r\n> \r\n> ```\r\n> def my_method((*param1), param2 = "default"); end\r\n> ```\r\n\r\nHave you tried calling your method with the workaround with exactly 0 or\r\nmore than 2 arguments?  I think you'll find that your workaround doesn't\r\nreally work around anything aside from the syntax error.\r\n\r\nNow, I could be wrong about the details, and I believe there are some\r\nsubtle changes coming soon with respect to parameter handling for\r\nmethods, but I'll see if I can clarify what is going on.  Ruby attempts\r\nto associate method parameters as follows:\r\n\r\n1) Assign the first parameters given in the method call to all the\r\npositional parameters that do not have defaults defined and report an\r\nerror if there are not enough given parameters to do this.\r\n2) If there are still more given parameters, assign those to the\r\npositional parameters that would otherwise have defaults set.\r\n3) Assign any remaining parameters that are NOT key-value definitions\r\nfor a hash to the splat parameter.\r\n4) Assign the key-value hash definitions to the final parameter as a\r\nsingle hash.\r\n\r\nThese rules require that method definitions first specify positional\r\nparameters without defaults, followed by positional parameters with\r\ndefaults, followed by the splat parameter, followed by a single\r\nparameter that will receive the hash parameters.\r\n\r\nI'm sure that I'm going to get all sorts of corrections about the above,\r\nbut that's the gist as I understand things at least.\r\n\r\nIt appears that you would like to instead specify your positional\r\nparameters (param2) after your splat parameter (param1).  I don't\r\nbelieve Ruby yet has any facility to handle that in the language, but\r\nyou can emulate it:\r\n\r\ndef my_method(*params)\r\n  param1 = params\r\n  param2 = params.size > 1 ? params.pop : "default"\r\n  ...\r\nend	1.9.3	jeremy@bopp.net	2012-02-05 22:20:00	Jeremy	Bopp	2012-05-02 12:19:46.196825	2012-05-06 22:24:22.922896
477	ruby-talk	Regexp	How to put unique lines from regexped file?	regex, xml, grep, each, set, unique, hash, foreach, rexml	>> I have such a question, when i open a file doing some grep stuff...\r\n>>\r\n>> ---\r\n>> File.open('aa.xml').each do |line|\r\n>> dev_name = ARGV[1]\r\n>>         if line =~  /<prf:CcppAccept>/..line =~  /</prf:CcppAccept>/\r\n>>                 if line =~ /<rdf:li>(image|audio|video).*</rdf:li>/\r\n>>         line.gsub('<rdf:li>image/jpeg', "INSERT INTO VMPOLICY_VALUES\r\n>> VALUES('#{dev_name}','jpginpage','true','#{$ver}')")).gsub(\r\n>> "</rdf:li>", ";").each do |ss|\r\n>> ----\r\n>>\r\n>> I recive output like\r\n>>\r\n>> INSERT INTO TABLE VALUES(1,1,1)\r\n>> INSERT INTO TABLE VALUES(1,2,2)\r\n>> INSERT INTO TABLE VALUES(1,1,1)\r\n>>\r\n>> now  i wanted to put only that lines which are uniqe...\r\n>> INSERT INTO TABLE VALUES(1,1,1)\r\n>> INSERT INTO TABLE VALUES(1,2,2)\r\n>>\r\n>>\r\n>>  how i can do this ??\r\n>>\r\n>> i thought about...\r\n>>\r\n>> puts ss.unque\r\n>>\r\n>> but that doesn't work\r\n> \r\n> \r\n> OK i figured it out :)\r\n> \r\n> puts ss unless ss == @prev; @prev = ss\r\n\r\nThat works only if the input is ordered.  For unordered input here's an more efficient way:\r\n\r\nrequire 'set'\r\n\r\nunique = Set.new\r\n\r\nFile.foreach('aa.xml') do |line|\r\n   x = ... line ...\r\n   puts x if unique.add? x\r\nend\r\n\r\nOf course you can also use a Hash for this.\r\n\r\nunique = {}\r\n\r\nFile.foreach('aa.xml') do |line|\r\n   x = ... line ...\r\n\r\n   unique.fetch x do\r\n     unique[x] = true\r\n     puts x\r\n   end\r\nend\r\n\r\nBtw, since your input appears to be XML it's probably a better idea to \r\nprocess it with XML tools like REXML and the like.	1.9.3	shortcutter@googlemail.com	2009-12-20 13:47:00	Robert	Klemme	2012-05-02 14:07:00.842649	2012-05-06 22:28:33.340587
364	ruby-talk	Hash	Unique values in hash?	hash, unique, values, uniq, loop	> I have a hash that contains duplicate data, for example, :username =>\r\n> "alex" comes many times.\r\n> I want to loop around and print their names just once (only unique). In\r\n> simple loop it would print "alex" repeatedly.\r\n\r\nirb(main):001:0> {:foo=>1,:bar=>1}.values.uniq\r\n=> [1]\r\n\r\nYou can of course have more involved solutions, e.g. (shameless self promotion):\r\n\r\n<a href="http://redhanded.hobix.com/bits/klemmeSSilentHash.html">http://redhanded.hobix.com/bits/klemmeSSilentHash.html</a>	1.9.3	shortcutter@googlemail.com	2008-12-16 10:18:00	Robert	Klemme	2012-05-02 12:47:38.434151	2012-05-11 20:34:32.298003
128	ruby-talk	Range	<, >, and ranges in a case statement	range, infinity	By the way, this is a real good way to lock up your cpu, i just discovered :)\r\n\r\ninfinity = 1.0/0\r\n(0..infinity).to_a\r\n\r\ngrrrrrrriiiiiiinnnnnnnddddddddd	1.9.3	toastkid.williams@gmail.com	2009-06-02 23:29:00	Max	Williams	2012-05-02 12:04:59.310384	2012-05-03 18:33:55.558072
266	ruby-talk	Thread	Ruby multithread	thread, value, map, &:value, url, new, use	> This pattern should work, although it's a bit ugly:\r\n>\r\n> t1=Thread.new{work(url1)}\r\n> t2=Thread.new{work(url2)}\r\n> t3=Thread.new{work(url3)}\r\n> t1.join\r\n> t2.join\r\n> t3.join\r\n>\r\n> A better approach would be:\r\n>\r\n> threads = [url1, url2, url3].map { |url| Thread.new { work(url) } }\r\n\r\nThis is unsafe, because you reuse "url": because of the scoping rules\r\na thread might see another thread's value.  Better do this:\r\n\r\nthreads = [url1, url2, url3].map { |url| Thread.new(url) {|u| work(u) } }\r\n\r\n> # joins each thread and obtains the value returned from the block you\r\n> passed to Thread.new\r\n> results = threads.map(&:value)\r\n\r\nYep, Thread#value is vastly useful although rarely used.	1.9.3	shortcutter@googlemail.com	2011-12-21 09:26:00	Robert	Klemme	2012-05-02 12:31:07.658341	2012-05-06 22:45:42.757311
237	ruby-talk	Array	A better way?	array, sample, random	> As I am learning to program, I am finding things I think can probably be\r\n> done in a better way. The following code seems like something\r\n> programmers must run into all the time and I am wondering if there is a\r\n> better way to write the code in this situation. I'm having fun and\r\n> trying to get better at this....\r\n>\r\n> Â  Â  Â  Â  if random_insert == 0\r\n> Â  Â  Â  Â  Â  Â correct_answer_shuffled = "A"\r\n> Â  Â  Â  Â  Â elsif random_insert == 1\r\n> Â  Â  Â  Â  Â  Â correct_answer_shuffled = "B"\r\n> Â  Â  Â  Â  Â elsif random_insert == 2\r\n> Â  Â  Â  Â  Â  Â correct_answer_shuffled = "C"\r\n> Â  Â  Â  Â  Â elsif random_insert == 3\r\n> Â  Â  Â  Â  Â  Â correct_answer_shuffled = "D"\r\n> Â  Â  Â  Â  Â elsif random_insert == 4\r\n> Â  Â  Â  Â  Â  Â correct_answer_shuffled = "E"\r\n> Â  Â  Â  Â  Â end\r\n>\r\n> Is there a better way??  \r\n\r\nIf you want to pick a random item from a list Array#sample is the simplest:\r\n\r\nirb(main):011:0> a = %w{A B C D E}\r\n=> ["A", "B", "C", "D", "E"]\r\nirb(main):012:0> a.sample\r\n=> "E"\r\nirb(main):013:0> a.sample\r\n=> "D"\r\nirb(main):014:0> a.sample\r\n=> "E"\r\nirb(main):015:0> a.sample\r\n=> "D"	1.9.3	shortcutter@googlemail.com	2012-02-07 23:09:00	Robert	Klemme	2012-05-02 12:26:14.936188	2012-05-03 17:21:47.654408
482	ruby-talk	File	Reading a file in chunks, to a byte array	file, read, header, offset, tell, bytes, send_to_web, array	> I've written a simple SOAP client that interfaces with a web app used for \r\n> file transfer... It works great, however, if a file is over a certain size \r\n> it just hangs - and I know the reason why... \r\n>\r\n> The webapp receives the file as a chunk, in the form of a byte array, the great thing \r\n> about Ruby is that strings are basically an arrangement of arbitrary bytes, so I can \r\n> just pass a string with the file object into the web service and upload small files. \r\n> \r\n> But I'd like to split a file into "chunks" .. I know that I can do this: \r\n> \r\n> def get_chunk(bytearray) \r\n>   bytearray.read(61440) #read a 60kb chunk of the byte array \r\n> end \r\n> \r\n> localFile = File.open('test.dat') \r\n> \r\n> get_chunk(localFile) \r\n> \r\n> But I need to keep track of more information .. The web app is looking for \r\n> an offset integer , which basically works like this: \r\n> \r\n> (with a 60k chunksize) \r\n> \r\n> the first request will be: \r\n> offset = 0 \r\n> \r\n> second request: \r\n> offset = 61440 \r\n> \r\n> third request: \r\n> offset = 122880 \r\n> \r\n> Does anyone know how I could iterate over a bytearray, keeping track of the offset, \r\n> and read 60k chunks all at the same time? \r\n>\r\n> in pseudo code: \r\n> \r\n> get_chunk(bytearray) \r\n> \r\n> bytearray.read(61440) \r\n> offset = 0 \r\n> puts bytearray.pos \r\n> => 61440 \r\n> \r\n> bytearray.read(61440) \r\n> offset += 61440 \r\n> puts offset \r\n> => 61440 \r\n> puts bytearray.pos \r\n> => 122880 \r\n> ... \r\n> After I have the proper offset, and chunks of a bytearray - I need to keep calling \r\n> the web service method with that data until the file = eof. \r\n\r\n\r\nIt's not fully clear to me which one is the driving application here. If it is your client application, it's easy:\r\n\r\nFile.open "foo", "rb" do |io|\r\n   pos = io.tell\r\n   while buffer = io.read(CHUNK_SIZE)\r\n     send_to_web_app(pos, buffer)\r\n     pos = io.tell\r\n   end\r\nend	1.9.3	shortcutter@googlemail.com	2009-01-29 22:59:00	Robert	Klemme	2012-05-02 14:11:20.332493	2012-05-11 17:01:54.876556
78	ruby-talk	Module	Include constants from one scope into another ( A::* )	constants, module, class	> Is there a way to include constants from one class into another?\r\n> Something like "include A::*"?\r\n>\r\n> SAMPLE:\r\n>\r\n>    class A\r\n>        class B; end\r\n>        class C; end\r\n>        class D; end\r\n>    end\r\n>\r\n>    class E\r\n>        # include A::*\r\n>        B; C; D;\r\n>    end\r\n\r\n$ ruby <<EOF\r\n>\r\n>    class A\r\n>        class B; end\r\n>        class C; end\r\n>        class D; end\r\n>    end\r\n>\r\n>    class E\r\n> B=::A::B\r\n> C=::A::C\r\n> D=::A::D\r\n> end\r\n> p E::C.new\r\n> EOF\r\n#<A::C:0x1002ebc0>\r\n\r\nYou can as well do something like this\r\n\r\nclass Module\r\n  def import_all(mod)\r\n    mod.constants.each do |c|\r\n      const_set(c, mod.const_get(c))\r\n    end\r\n  end\r\nend\r\n\r\nirb(main):016:0> class E\r\nirb(main):017:1> import_all A\r\nirb(main):018:1> end\r\n=> ["C", "B", "D"]\r\nirb(main):019:0> E::B.new\r\n=> #<A::B:0x7ff60548>	1.9.3	shortcutter@googlemail.com	2008-12-29 19:17:00	Robert	Klemme	2012-05-02 11:55:46.473704	2012-05-11 16:24:45.712224
359	ruby-talk	Language	Proc.new v. lambda	language, design, proc, lambda, subclass, superclass	> In terms of design, why isn't lambda a super or sub class of Proc?\r\n\r\nIt is always hard to answer 'why?' with respect to design decisions.\r\n\r\nI don't have any special insight but Ruby tends towards shallow inheritance graphs and 'wide' interfaces.  Instead of Collection, Array, Stack, Queue, Dequeue, FixedArray, VariableArray, etc., there is just Array with 88 methods (ruby 1.9.3-p125).\r\n\r\nSimilarly instead of Proc and Lambda, there is just Proc.\r\n\r\nI guess the most accurate, but perhaps unsatisfying answer, regarding the design of core Ruby classes is that they are that way because that is what Matz likes. :-)	1.9.3	gwtmp01@mac.com	2012-03-07 21:53:00	Gary	Wright	2012-05-02 12:46:57.237658	2012-05-05 19:34:55.687058
443	ruby-talk	REXML	Remove newline characters in d anchors	rexml, formatter, remove, line break, file, i/o	> I am working on this code where I need to list the files in a dir and\r\n> store it in a xml, which I managed to do. However in the generated xml\r\n> there are newline characters appearing before and after the actual\r\n> text value of each node.\r\n>\r\n> below is the code i am using\r\n>\r\n> require 'rexml/document'\r\n> require 'find'\r\n>\r\n> doc = REXML::Document.new\r\n> main = doc.add_element 'main'\r\n>\r\n> main.attributes['name'] = ""\r\n>\r\n> # Find.find('./'){|path| puts path[2,path.length] }\r\n> Find.find('./'){|path|\r\n>  if path != './dirlisting.rb'\r\n>    if ! File::directory? ( path )\r\n>      newfile = main.add_element 'file'\r\n>      newfile.text = path[2,path.length]\r\n\r\nI think you want\r\n\r\nnewfile.text = path[2...path.length]\r\n\r\nor\r\n\r\nnewfile.text = path[2..-1]\r\n\r\nThat won't solve your nl issue but is more correct.\r\n\r\n>  end\r\n>  end\r\n> }\r\n>\r\n> outfile = open('dirlist.xml', 'w')\r\n> doc.write(outfile, 0)\r\n\r\nYou do not close the file properly.  Better do\r\n\r\nopen('dirlist.xml', 'w') {|outfile| doc.write(outfile)}\r\n\r\n> how can i get rid of those line breaks in each nodes and have a clean\r\n> node with just the text value?\r\n\r\nYou want REXML::Formatters::Pretty#compact\r\n\r\nirb(main):001:0> doc = REXML::Document.new\r\n"<root><foo>123</foo><bar><foo>444</foo></bar></root>"\r\n=> <UNDEFINED> ... </>\r\nirb(main):002:0> fmt = REXML::Formatters::Pretty.new\r\n=> #<REXML::Formatters::Pretty:0x10615890 @indentation=2, @level=0,\r\n@ie_hack=false, @width=80, @compact=false>\r\nirb(main):003:0> fmt.compact\r\n=> false\r\n\r\nirb(main):004:0> fmt.compact=true\r\n=> true\r\nirb(main):005:0> fmt.write(doc, $stdout)\r\n<root>\r\n  <foo>123</foo>\r\n  <bar>\r\n    <foo>444</foo>\r\n  </bar>\r\n</root>=> [<?xml ... ?>, <root> ... </>]\r\n\r\nirb(main):006:0> fmt.compact=false\r\n=> false\r\nirb(main):007:0> fmt.write(doc, $stdout)\r\n<root>\r\n  <foo>\r\n    123\r\n  </foo>\r\n  <bar>\r\n    <foo>\r\n      444\r\n    </foo>\r\n  </bar>\r\n</root>=> [<?xml ... ?>, <root> ... </>]	1.9.3	shortcutter@googlemail.com	2011-12-08 09:45:00	Robert	Klemme	2012-05-02 13:55:56.372252	2012-05-11 17:08:22.909129
193	ruby-talk	String	1.9 inverse of String#ord	string, ord, chr, encoding	> Is there a simple inverse of String#ord in ruby 1.9?\r\n>\r\n> This is the best I can come up with:\r\n>\r\n>>> cp = "=C5=82".ord\r\n> => 322\r\n>>> [cp].pack("N").force_encoding("UTF-32BE").encode!("UTF-8")\r\n> => "Å";\r\n>\r\n> Note that Integer#chr only works up to 255.\r\n\r\nActually, it can take an encoding now:\r\n\r\nirb(main):001:0> 322.chr("UTF-8")\r\n=> "Å"	1.9.3	james@graysoftinc.com	2009-07-30 12:25:00	James Edward	Gray II	2012-05-02 12:16:53.288178	2012-05-11 15:27:34.670919
274	ruby-talk	Gem	Create Excel Sheet(.xls/.xlsx)	gem, excel, aslxs, acts_as_axlsx	> I need to create a excel sheet(.xls or .xlsx).\r\n> My Code:\r\n>\r\n>    if File.exists?("test.xls")\r\n>       puts "File EXISTS"\r\n>       -----my code----\r\n>     else\r\n>       File.open(fileToTest, File::WRONLY|File::CREAT|File::EXCL)\r\n>   puts "-------FILE CREATED--------"\r\n>         ----my code----\r\n>     end\r\n>\r\n> It creates an excel file(test.xls), but when I try to open the file I\r\n> get an alert box as shown in the attachment.\r\n>\r\n> I working on Windows 7, MS Office 2007\r\n\r\nYou should look at axlsx and act_as_xlsx\r\nIt supports ruby 1.8.7 - 1.9.3, is fully documented and supports much \r\nmore that spreadsheet does.\r\n\r\n<a href="http://rubygems.org/gems/axlsx">http://rubygems.org/gems/axlsx</a>\r\n\r\nor if you are building a rails app:\r\n\r\n<a href="http://rubygems.org/gems/acts_as_xlsx">http://rubygems.org/gems/acts_as_xlsx</a>\r\n\r\nThe examples in the README will show you how to do it.\r\nIt requires rmagick to automatically format column widths so be sure to \r\nread this:\r\nrmagick.rubyforge.org/install-faq.html	1.9.3	digital.ipseity@gmail.com	2011-12-03 02:27:00	Randy	Morgan	2012-05-02 12:32:26.007623	2012-05-11 20:06:49.887226
423	ruby-talk	Gem	FasterCSV	fastercsv, csv, generate, header, map, key, value, hash	> How Can I sort attributes.values for similar order as csv_header? Just \r\n> consider that I already order by csv_header on my query but i did not work.\r\n> \r\n> @custom_csv = User.find(:all, :select=>"name, lastname, address " :order \r\n> => "name, lastname, address")\r\n> \r\n> csv_header = [name,lastname,address]\r\n> \r\n> csv_string = FasterCSV.generate do |csv|\r\n> \r\n> csv << csv_header\r\n> \r\n> @custom_csv.each do |v|\r\n> \r\n> csv << v.attributes.values\r\n\r\nI think you can replace the above line with:\r\n\r\n  csv << csv_header.map { |h| v[h] }	1.9.3	james@graysoftinc.com	2010-11-16 14:41:00	James Edward	Gray II	2012-05-02 12:58:59.010649	2012-05-06 23:25:16.384924
480	ruby-talk	Enumerable	Array problem	enumerable, methods, iterate	And just another note: generally, for transforming and/or iterating over \r\narrays, finding/removing elements, extracting values, and so on, you'll \r\nwant to take a look at Ruby's "Enumerable" module. It's available on all \r\nthe main collections in Ruby and is extremely handy.\r\n\r\nParticularly, the "each", "select", "map", "partition" and "reject" \r\nmethods are very handy. I use "map" and "select" all the time.	1.9.3	swittenk@yahoo.com	2008-12-18 05:49:00	Sebastian	Witten	2012-05-02 14:10:27.236856	2012-05-03 19:22:30.517485
160	ruby-talk	Graphics	Which graphical/gui library is used for ruby?	graphics, gui, recommend, shoes, shoesrb, url	I've also used gtk2 - it's extensive and looks good, though the code \r\ncan get a bit lengthy and 'weird' at times.\r\n\r\nMake sure to check out Shoes!!  it's easy to use, multi-platform, and \r\nhas a great community for questions and support...\r\n\r\n  <a href="http://shoesrb.com/">http://shoesrb.com/</a>	1.9.3	jakekaiden@yahoo.com	2012-04-19 04:47:00	jake	kaiden	2012-05-02 12:10:33.173114	2012-05-11 19:43:53.745502
112	ruby-talk	Hash	How can I do h["foo"] += "bar" if h["foo"] does not exist?	hash, key, equality, string, append, freeze, index	>> You can have something like this to check whether the key is present or not\r\n>>\r\n>> h["key"] += value if h["key"]\r\n>\r\n> Values can be false/nil.\r\n\r\nAlso, this is inelegant.  Either do this to prevent accidental\r\nmodification of the default object:\r\n\r\nirb(main):006:0> h = Hash.new("".freeze)\r\n=> {}\r\nirb(main):007:0> h[:e] += "foo"\r\n=> "foo"\r\nirb(main):008:0> h[:f] += "bar"\r\n=> "bar"\r\nirb(main):009:0> h\r\n=> {:e=>"foo", :f=>"bar"}\r\nirb(main):010:0> h[:f] += "foo"\r\n=> "barfoo"\r\nirb(main):011:0> h\r\n=> {:e=>"foo", :f=>"barfoo"}\r\n\r\nOr, what I'd consider better because it is more efficient, use\r\nString#<< to append and not create new instances all the time:\r\n\r\nirb(main):012:0> h = Hash.new {|ha,k| h[k] = ""}\r\n=> {}\r\nirb(main):013:0> h[:e] << "foo"\r\n=> "foo"\r\nirb(main):014:0> h[:f] << "bar"\r\n=> "bar"\r\nirb(main):015:0> h\r\n=> {:e=>"foo", :f=>"bar"}\r\nirb(main):016:0> h[:f] << "foo"\r\n=> "barfoo"	1.9.3	shortcutter@googlemail.com	2011-12-09 10:22:00	Robert	Klemme	2012-05-02 12:01:39.462715	2012-05-06 19:47:37.908194
104	ruby-talk	Array	Sort order dilemma	array, sort, sort_by	> I've got a array that I need sorted in a certain way and I'm struggling to\r\n> figure out how to make it happen the way I want.\r\n>\r\n> Basically the array needs to be sorted like this:\r\n>\r\n> [A, B, C, AA, AB, AF ]\r\n>\r\n> that is, a single alpha character before it sorts the next character.\r\n> However, what I end up with when I sort is:\r\n>\r\n> [A, AA, AB, AF, B, C]\r\n>\r\n> How would I sort A to Z then AA-ZZ?\r\n\r\narray.sort_by {|s| [s.size, s]}	1.9.3	jan.h.xie@gmail.com	2011-11-02 11:28:00	Jan H.	Xie	2012-05-02 12:00:12.43438	2012-05-03 14:22:41.386927
402	ruby-talk	Gem	Stupid optparse question	optparse, gem, argv, ARGV, empty?, parse	> How can I make my code print the usage even if zero options are given? I had *thought* \r\n> opts.on_tail would do this, but it doesn't seem to be working.  The usage prints properly \r\n> if I use -h though:\r\n> ---\r\n> require 'optparse'\r\n>\r\n> options = {}\r\n\r\no = OptionParser.new do |opts|\r\n\r\n>    opts.banner = "Usage: #$0 [options] [terms]"\r\n>\r\n>    opts.on("-a", "--automatic", "Use current Git repo to determine\r\n> current and next release branch and tag names") do |a|\r\n>      options[:automatic] = a\r\n>    end\r\n>\r\n>    opts.on("-n", "--next-branch [nextbranch]", "The branch you want\r\n> this script to create.") do |n|\r\n>      options[:nextbranch] = n\r\n>    end\r\n>\r\n>    opts.on("-t", "--tag [tag]", "The tag you want the new branch\r\n> created from.") do |t|\r\n>      options[:tag] = t\r\n>    end\r\n>\r\n>    opts.on_tail("-h", "--help", "Show this help message.") do\r\n>       puts opts\r\n>       exit\r\n>    end\r\n>\r\n> end\r\n\r\no.parse!\r\n\r\nif ARGV.empty?\r\n   puts o\r\nelse\r\n   # do whatever\r\nend	1.9.3	shortcutter@googlemail.com	2010-11-15 22:44:00	Robert	Klemme	2012-05-02 12:55:39.253211	2012-05-06 23:27:36.881343
62	ruby-talk	Thread	1.9.x Thread problem	thread, mutex, sleep, queue	Here is a bare solution using a mutex and a counter.  The next thing\r\nwould be to use a condition variable to put the main thread to sleep\r\nwhile the child threads initialize, rather than spinning wheels /\r\nburning rubber while waiting.\r\n\r\nAlso look into monitor.rb, sync.rb, and producer/consumer strategies.\r\n\r\nrequire 'thread'\r\nTHREADS = 10\r\n\r\nparent_id = Thread.current.object_id\r\n\r\nmutex = Mutex.new\r\nnum_threads_ready = 0\r\n\r\nqueue = Queue.new\r\nTHREADS.times do |i|\r\n   queue << Thread.new do\r\n      th = Thread.current\r\n      th[:index] = i\r\n      mutex.synchronize { num_threads_ready += 1 }  # <-----\r\n      raise "Running inside parent" if th.object_id == parent_id\r\n      sleep(2)\r\n   end\r\nend\r\n\r\n# wait until threads have initialized\r\nuntil mutex.synchronize { num_threads_ready == THREADS }\r\n   Thread.pass\r\nend\r\n\r\nTHREADS.times do\r\n   th = queue.pop\r\n   raise "Running inside parent" if th.object_id == parent_id\r\n   puts "Joining thread #{th[:index]}"\r\n   th.join()\r\nend	1.9.3	quixoticsycophant@gmail.com	2009-03-09 05:20:00	James	Lawrence	2012-05-02 11:53:50.723372	2012-05-11 15:27:50.834887
159	ruby-talk	Block	C extension: How to get a block passed to a method?	block, method, passed, invoke, c	If I understand your question correctly, you're asking how to invoke a\r\nblock that's passed into a method written as a native extension. Is\r\nthat correct?\r\n\r\nIn a Ruby extension written in C, you would use something like this:\r\n\r\n// if a block was passed to this method then invoke it\r\nif(rb_block_given_p())\r\n  {\r\n    rb_yield(/* args */);\r\n  }\r\n\r\nrb_block_given_p() returns true if a code block was passed into the\r\nmethod being processed. And rb_yield invokes that block with the\r\nprovided arguments (you can pass 0 or more args to the rb_yield).	1.9.3	mcpierce@gmail.com	2012-04-18 12:53:00	Darryl L.	Pierce	2012-05-02 12:10:33.148783	2012-05-09 20:18:37.772963
15	ruby-talk	Array	Adding, multiplying array	array, each_index, multiplication, addition	> require 'pp'\r\n> d=[]\r\n> a.each_with_index{|o, i| d[i] = a[i] + b[i] * c[i] };\r\n> pp d\r\n\r\nSince you don't use the 'o' block variable, you can also use\r\nArray#each_index (which is what I used in my first reply to this\r\nthread).\r\n\r\nc.each_index { |i| c[i] += a[i] * b[i] }	1.9.3	citizen428@gmail.com	2009-06-07 23:36:00	Michael	Kohl	2012-05-02 11:42:45.298008	2012-05-03 18:08:55.159766
288	ruby-talk	Language	Writing ruby to [LANGUAGE] "compiler"	language, compile, srite, link, ebook, C, syntax, ruby, subset	> Say I write something in Ruby. Then I want to translate this code into C.\r\n>\r\n> I do not aim for 100% translation. 60% is sufficiently well.\r\n>\r\n> For instance, think you are using only classes, and "def method"\r\n> in those classes. No metaprogramming, no blocks etc...\r\n>\r\n> You use only a small subset of Ruby.\r\n>\r\n> And now you want to translate this into C. (Pure C, not Ruby-C).\r\n>\r\n> I can do this by hand (if given enough time), but I want to reduce\r\n> this amount spent.\r\n>\r\n> The language C is just an example. You can insert any-other language\r\n> into this.\r\n>\r\n> My question is - how to approach this goal?\r\n>\r\n> My most simple way would be via using readlines of the .rb file\r\n> and then analyzing it. And then inserting what seems appropriate.\r\n>\r\n> But I could do this without the use of a scanner.\r\n>\r\n> Do I have to use a scanner though and tokenize the stream?\r\n\r\nYou'd probably need to build a lexer/parser that can understand this subset\r\nof C. I've never successfully built a parser, it's hard, but check out gems\r\nlike Treetop and Citrus. They should allow you to build an abstract syntax\r\ntree that represents the code. Then you'll probably have to analyze the AST\r\nto do some sort of type determining (ie if I pass it a string, then I know\r\nits argument has type of string) check out\r\n<a href="http://en.wikipedia.org/wiki/Hindley%E2%80%93Milner">http://en.wikipedia.org/wiki/Hindley%E2%80%93Milner</a> for that purpose. Once\r\nyou've got all of that, just write it back out, only when writing it out,\r\nuse the C syntax instead of the Ruby syntax.\r\n\r\nOther thoughts:\r\n* Racc might also be useful, but looked pretty formidable to me when I tried to play with it.\r\n* There is an ebook \r\n\r\n<a href="http://gilesbowkett.blogspot.com/2010/07/review-create-your-own-freaking-awesome.html">http://gilesbowkett.blogspot.com/2010/07/review-create-your-own-freaking-awesome.html</a>\r\n\r\nthat might help. I wasn't able to figure out how to do anything more complex than the example, though.\r\n\r\n* This also looked promising to me:\r\n\r\n<a href="http://www.bayfronttechnologies.com/mc_tutorial.html ">http://www.bayfronttechnologies.com/mc_tutorial.html</a>\r\n\r\nIt was recommended in a talk by Alan Kay, but I haven't tried to go through it yet.	1.9.3	josh.cheek@gmail.com	2011-12-17 18:55:00	Josh	Cheek	2012-05-02 12:34:19.799779	2012-05-11 20:13:11.60621
242	ruby-talk	String	Literal syntax for array of arrays of strings	string, each_line, map, scan, line, iteration	> We have this:\r\n>\r\n> a = %w{ a b c d e f }\r\n> p a # ==> ["a", "b", "c", "d", "e", "f"]\r\n>\r\n> Has anyone ever felt the need for something like\r\n>\r\n> a = %t{\r\n>  a b c\r\n>  d e f\r\n> } # ==> [["a", "b", "c"], ["d", "e", "f"]]\r\n>\r\n> It's probably too special (this is the first time in 8 years I've wanted\r\n> it), and it is easy to implement it as a method rather than a literal:\r\n>\r\n> def table s\r\n>  s.split("\r\n").map!{|t|t.split}\r\n> end\r\n>\r\n> t = table %q{\r\n>  a b c\r\n>  d e f\r\n> }\r\n>\r\n> p t  # ==> [["a", "b", "c"], ["d", "e", "f"]]\r\n>\r\n> Really just an idle question...\r\n\r\nYou can also exploit the line iteration capabilities of String, which\r\nis especially easy in 1.9.x\r\n\r\n09:20:42 ddl$ irb19\r\nRuby version 1.9.1\r\nirb(main):001:0> s = <<EOF\r\nirb(main):002:0" a b c\r\nirb(main):003:0" 1 2 3\r\nirb(main):004:0" r t z\r\nirb(main):005:0" EOF\r\n=> "a b c\r\n1 2 3\r\nr t z\r\n"\r\nirb(main):006:0> s.each_line.map {|x| x.scan /S+/}\r\n=> [["a", "b", "c"], ["1", "2", "3"], ["r", "t", "z"]]\r\nirb(main):007:0> exit\r\n09:21:14 ddl$ irb\r\nRuby version 1.8.7\r\nirb(main):001:0> s = <<EOF\r\nirb(main):002:0" a b c\r\nirb(main):003:0" 1 2 3\r\nirb(main):004:0" r t z\r\nirb(main):005:0" EOF\r\n=> "a b c\r\n1 2 3\r\nr t z\r\n"\r\nirb(main):006:0> s.map {|x| x.scan /S+/}\r\n=> [["a", "b", "c"], ["1", "2", "3"], ["r", "t", "z"]]\r\nirb(main):007:0> exit\r\n09:21:48 ddl$	1.9.3	shortcutter@googlemail.com	2009-02-19 09:23:00	Robert	Klemme	2012-05-02 12:26:51.067828	2012-05-06 17:46:57.283421
332	ruby-talk	StringIO	Assignment to $stdout deprecated?	string, i/o, STDIN, STDOUT, STDERR	> In pickaxe2, on p. 335, it says that assigning to $stdout is deprecated\r\n> and to use $stdout.reopen() instead:\r\n\r\nIt depends what you're trying to do. I'll describe this from a Unix \r\npoint of view.\r\n\r\nYour Ruby program runs as a process which starts with three open file \r\ndescriptors: stdin (fd 0), stdout (fd 1), stderr (fd 2). These are \r\nwrapped in Ruby objects STDIN, STDOUT, STDERR, and the global variables \r\n$stdin, $stdout, $stderr point to these objects too.\r\n\r\nIf you do STDOUT.reopen(...) then you are closing fd 1 and replacing it \r\nwith a different file in the Unix file descriptor table. When your Ruby \r\nprogram writes to STDOUT it will write to this file; but also any child \r\nprocess spawned by your Ruby program will inherit this too (e.g. using \r\nsystem() or backticks)\r\n\r\nIf you reassign $stdout to point to a completely different Ruby object, \r\nthen any code you write which does $stdout.puts will write to this \r\nobject - but FD 1 still remains connected to the original stdout. \r\nTherefore, STDOUT.puts will still write to the original destination, as \r\nwill any child process.\r\n\r\n  $stdout = File.open("/tmp/stdout.txt","w")\r\n\r\n  puts "Hello"            # uses $stdout, goes to the file\r\n  STDOUT.puts "World"     # goes to the terminal (FD 1)\r\n  system("echo Wheee")    # goes to the terminal (FD 1)\r\n\r\nIf you need to redirect to a StringIO object, then you have little \r\nchoice but to use $stdout, because a StringIO is not a Unix file, i.e. \r\nit doesn't have an entry in the file descriptor table.\r\n\r\n(If you wanted to get very fancy, you could perhaps set up a pipe, \r\nconnect stdout to the writer end, and have a Ruby thread reading from \r\nthe reader end and appending to a StringIO object. But you'd only jump \r\nthrough those hoops if you wanted the stdout from spawned child \r\nprocesses to write to the StringIO too, and in that case you'd be better \r\noff using IO.popen anyway)	1.9.3	b.candler@pobox.com	2009-02-09 12:17:00	Brian	Candler	2012-05-02 12:41:36.28309	2012-05-03 19:25:20.797914
110	ruby-talk	Block	Understanding Ruby blocks	block, template, method pattern, anonymous, function, best practice 	>> I know I don't fully understand blocks but why would you\r\n>> use a block in the following situation.\r\n>>\r\n>> text = "Some Text"\r\n>> File.open('test_file.txt', 'a+') do |file|\r\n>>   file.write(text)\r\n>> end\r\n>>\r\n>> Why not just ...?\r\n>>\r\n>> text = "Some Text"\r\n>>  file = File.open('test_file1.txt', 'a+')\r\n>> file.write(text)\r\n>> ..why use a block instead?\r\n\r\nTo make the code robust and ensure the resource is freed under all circumstances (especially \r\nexceptions, but also control flow which uses break, return or throw).\r\n\r\n> This is quite straightforward: in this situation the use case is that > you want to ensure that \r\n> something happens before and after the block code. In this case, the File#open method opens \r\n> the file, then calls the block and then ensures that the file is closed, even in the face\r\n> of an exception within the block.\r\n\r\nShameless self advertizing: More explanations here:\r\n\r\nhttp://blog.rubybestpractices.com/posts/rklemme/001-Using_blocks_for_Robustness.html\r\nhttp://blog.rubybestpractices.com/posts/rklemme/002_Writing_Block_Methods.html\r\n\r\n> So, first use case: when you want code executed around code that is not under your control.\r\n\r\nYep, a block is just an anonymous function with a nice invocation syntax.  In other programming \r\nlanguages one _sometimes_ uses template method pattern in such situations\r\n\r\nhttp://en.wikipedia.org/wiki/Template_method_pattern	1.9.3	shortcutter@googlemail.com	2011-11-24 17:21:00	Robert	Klemme	2012-05-02 12:01:39.401418	2012-05-11 17:34:12.904527
494	ruby-talk	Gem	Look at code in a gem	gem, unpack, source, code, english	> I wanted to compare some strings for similarity, and found  \r\n> this ruby gem called "english" (<a href="http://english.rubyforge.org/">http://english.rubyforge.org/</a>) which  \r\n> has a method called "similarity" that gives me back a similarity score  \r\n> when used.  I wanted to know how that score is being calculated - and  \r\n> I looked through the docs and couldn't find it.\r\n> \r\n> I'm wondering if there's a way to easily "see" the code for a  \r\n> particular method from a gem - can i somehow use irb to show me the  \r\n> code for "similarity" to see how it is coming up with that score?\r\n\r\nType\r\n\r\ngem unpack english\r\n\r\nIt will unpack the gem into cwd and you can search the code.	1.9.3	severus@post.cz	2009-01-14 22:41:00	Jakub	Pavl	2012-05-02 14:12:26.449474	2012-05-11 21:00:07.769848
330	ruby-talk	Module	C module calling ruby code cause cfp consistency error	call handler, c, ruby, thread, blocking	> I've written some module in C that uses wnck(on linux) to get window\r\n> title. There must be some event loop which I run in different thread.\r\n> When event window-changed occurs i want to call ruby method, to report\r\n> window title.\r\n> I've used some kind of observer pattern here, so ruby registers handler\r\n> method in C module, and do something else.\r\n> \r\n> When there is no handler function call in C code - everything is great,\r\n> but it makes no sense.\r\n> \r\n> Problem is that when I call ruby handler from different thread it causes\r\n> cfp consistency error and rest of code in ruby file isn't working\r\n> properly. It hangs waiting for window-change. When window is changed\r\n> then it goes to next instruction.\r\n\r\nYes. You cannot call Ruby functions from a thread not created by Ruby. When\r\nit comes to MRI, you must be the owner of the GIL to call ruby functions, and\r\nsince the thread is not a ruby-created thread you have no way of owning the GIL.\r\n\r\nYou *can* work around this, but it is not easy. But before you try working around\r\nit with the solution I am about to (try to) explain, I urge you to read the later parts\r\nof my post about "rb_thread_blocking_region".\r\n\r\nAnyway, Dealing with this kind of asynchronous callback in Ruby means you will need\r\na thread in Ruby (either main thread, or just another thread, we call it the callback\r\nthread) waiting for the callback to happen. This waiting needs to be implemented\r\nin C, as you will need to convert all the data you need from the callback to Ruby\r\nVALUEs from C values.\r\n\r\nBecause the "call_handler" is in a non-ruby thread, it cannot call ruby functions.\r\nSo, to pass information when this handler is called you need to have something\r\nthat *can* call Ruby functions wait for the "call_handler" to be called, and then\r\ngrab data from "call_handler", convert it to Ruby values and then use it however\r\nyou want.\r\n\r\nThe only way I know of doing this is by setting up a global condition variable that,\r\nfrom a Ruby-created thread, you wait for signals on (make sure you use the \r\n"rb_thread_blocking_region" function or you will block all of Ruby). When "call_handler" \r\nis called you put the title in a memory location accessible from both the waiting C\r\nfunction from Ruby, and "call_handler" itself.\r\n\r\n"call_handler" will then put the raw title (or any kind of information) in this shared\r\nmemory location and then signal the Ruby C waiting-function that the callback has\r\nbeen called. Once it has signaled, this "call_handler" can exit. Just make sure that\r\nyou don't lose the parameters from memory when you exit the "call_handler.\r\n\r\nAnyhow, now when Ruby C waiting function has been signaled it knows that it has\r\nsome data. It will take this data from the previously mentioned shared memory \r\nlocation and convert it to Ruby VALUEs that you can use in your Ruby code.\r\n\r\nI'm sorry if this seems confusing. I've tried explaining this before by writing a blog\r\npost about it: http://burgestrand.se/articles/asynchronous-callbacks-in-ruby-c-extensions.html\r\n(keep in mind, the code might not work on windows, it is only for explanation of concept)\r\n\r\nIf you need another implementation, you can also look at Ruby FFI, that does a very\r\nsimilar thing to handle callbacks: https://github.com/ffi/ffi/blob/master/ext/ffi=5Fc/Function.c\r\n(look for words gvl, cb, async; do keep in mind Ruby FFI's solution works on windows,\r\nruby 1.8.7 and is a more general solution than what I have in my blog post)\r\n\r\n> I've tried not to use native thread and call this blocking wnck's loop\r\n> in ruby's Thread.new, but it hangs totally then.\r\n> \r\n\r\nIf you try a blocking operation in any Ruby thread it will not allow other threads to run.\r\nThis, again, is because of the GIL. If you need to do a blocking operation in C, you can\r\nuse "rb_thread_blocking_region" to do it:\r\n\r\n<a href="https://github.com/ruby/ruby/blob/ruby=5F1=5F9=5F3/thread.c=23L1079">https://github.com/ruby/ruby/blob/ruby=5F1=5F9=5F3/thread.c=23L1079</a>\r\n\r\nThis method will first unlock the GIL, allowing other Ruby threads to run, and then call\r\nyour blocking operation (supplied as first parameter). If you need to pass additional data\r\nyou can use the second parameter, which will be given to the blocking function as its\r\nargument.\r\n\r\nIf Ruby needs to abort the blocking function (any reason, for example if user tries to exit\r\nyour script) it will call the unblocking function given as third parameter, with the fourth\r\nparameter as its argument.\r\n\r\nPS: You might find "rb_thread_call_with_gvl" when you look through the source, and it\r\nmight look promising. Problem with this function is that it is useless when you are in a\r\nnon-Ruby thread. It is only useful if you are within a function that you came into by using\r\n"rb_thread_blocking_region", to temporarily jump back into Ruby and do some operation.	1.9.3	kim@burgestrand.se	2011-12-05 16:44:00	Kim	Burgestrand	2012-05-02 12:41:36.220796	2012-05-14 19:32:53.601909
31	ruby-talk	Test	Uniq with count; better way?	test, link, 1.9.3, code, examples	> I added your algorithm to the list and tested on ruby 1.9.3\r\n\r\nThe full code for my recent tests is here:\r\n\r\n  <a href="https://gist.github.com/1663455">https://gist.github.com/1663455</a>	1.9.3	peter@vandenabeele.com	2012-01-23 15:43:00	Peter	Vandenabeele	2012-05-02 11:44:39.207292	2012-05-11 18:10:54.829118
44	ruby-talk	Regexp	Simple Regexp help	regex, word, test, char, include, =~, ^, anchor	>> How can I test a word to make sure it ONLY contains certain characters?\r\n>>\r\n>> Say i have an expression like /[A-Z]/i\r\n>>\r\n>> How could i have "Testing" pass but "Testing123" fail?\r\n>>\r\n>> PS. I can not dynamically create the expression so it looks like this\r\n>> /[A-Z{10}]/\r\n> \r\n> If you only want a-z, set the character class to start and end the\r\n> string, otherwise it'll match anything with a character that's in the\r\n> alphabet, regardless of what follows it.  I.e., /^[a-z]+$/i will only\r\n> match a-z characters from start to end.\r\n\r\nNote, this is not totally safe:\r\n\r\nirb(main):001:0> s = "foo"\r\n=> "foo"\r\nirb(main):002:0> /^[a-z]+$/i =~ s\r\n=> 0\r\n\r\nAs you can see, even a string with a newline at the end passes.  This version \r\nis safer because anchors do actually use start and end of the string:\r\n\r\nirb(main):003:0> /A[a-z]+z/i =~ s\r\n=> nil\r\n\r\n>  You can then change the\r\n> character class to whatever you wish.  ^ is the start of the string and\r\n> $ is the end of the string.\r\n\r\nActually ^ is a line start and $ is a line end (see above).  For proper anchoring \r\nstring start and end you need A and z.\r\n\r\n> + is one or more characters, so ^[a-z]+$ is\r\n> one of more characters in the character class [], being a-z, and noting else. \r\n\r\nNote also that, depending on definition of legal string the expression should probably \r\ncontain * instead of + because also the empty string does not contain any illegal characters.	1.9.3	shortcutter@googlemail.com	2009-01-07 07:52:00	Robert	Klemme	2012-05-02 11:50:07.230786	2012-05-11 17:21:46.878257
267	ruby-talk	Range	Why this works not right	range, array, element, to_a	> Please take a look at below:\r\n> \r\n> def mytest\r\n>    return [1..10]\r\n> end\r\n> \r\n> x = mytest\r\n> x.each do |c| puts c end\r\n> \r\n> \r\n> this works not as I expected.\r\n> I want the output of:\r\n> 1\r\n> 2\r\n> 3\r\n> 4\r\n> 5\r\n> 6\r\n> 7\r\n> 8\r\n> 9\r\n> 10\r\n> \r\n> But if I change return [1..10] to return 1..10 it will work.\r\n> So what's the difference between 1..10 and [1..10]?\r\n\r\n1..10 is a Range. [1..10] is an Array with one element (that happens to \r\nbe a Range, but that's irrelevant).  Range#each returns each element in \r\nthe range, so you get 1, 2, 3, etc.  Array#each likewise returns each \r\nelement in the array -- but your array only has one element, the Range \r\nobject itself!\r\n\r\nIf you want an Array with the elements 1 to 10, you need something like \r\n(1..10).to_a 	1.9.3	marnen@marnen.org	2009-12-25 15:41:00	Marnen	Laibow-Koser	2012-05-02 12:31:07.691076	2012-05-11 20:05:48.642413
323	ruby-talk	Array	Get common entries in two arrays	array, common, members, entries, &, operator	>> > Is there a way to generate a new array with the common elements in\r\n>> > array A and arra B? This is:\r\n>> >\r\n>> >  arrayA = ["qqq", "www", "eee"]\r\n>> >  arrayB = ["www", "eee", "rrr", "ttt"]\r\n>> >\r\n>> > the result should be:  ["www", "eee"]\r\n>>\r\n>> Of course I mean a method which perhaps I miss in Array class. If not,\r\n>> I can do it manually :)\r\n\r\n> arrayA | arrayB should do the trick\r\n\r\ndamn. arrayA & arrayB is it.	1.9.3	g.diemant@gmx.net	2011-07-19 12:20:00	Gunther	Diemant	2012-05-02 12:40:17.173881	2012-05-11 15:24:16.558129
465	ruby-talk	Array	Is high-speed sorting impossible with Ruby?	array, sort, sorting, to_ary, store, return, value, block, index, run 	>>>>> a = Array.new(1e6+1) {|n| ""}\r\n>>>>\r\n>>>\r\n>>> The above creates an Array of 1,000,001 slots.  The block syntax lets you\r\n>>> provide a default object dynamically.  The first time you reference a\r\n>>> particular index in the array, the block is called to allocate the default\r\n>>> object at that position.\r\n>>>\r\n\r\n>> What's the difference between Array.new(1e6+1) {|n| ""} and Array.new(1e6+1, "")?\r\n>\r\n> The former always returns a new string instance (this is what you want); the former \r\n> creates one string and always returns a reference.\r\n\r\nI don't think this really explains it adequately. The former initializes the array by running the block on every index. The latter assigns the same object to every index.\r\n\r\nFrom ri:\r\n\r\n  Array.new(size=0, obj=nil)\r\n  Array.new(array)\r\n  Array.new(size) {|index| block }\r\n\r\nReturns a new array. In the first form, the new array is empty. In the second\r\nit is created with size copies of obj (that is, size references to the same obj). \r\nThe third form creates a copy of the array passed as a parameter (the array is generated \r\nby calling to_ary on the parameter). In the last form, an array of the given size is created. \r\nEach element in this array is calculated by passing the element's index to the given block and storing the return value.	1.9.3	ryand-ruby@zenspider.com	2011-11-28 15:01:00	Ryan	Davis	2012-05-02 14:04:45.163278	2012-05-06 23:45:05.927677
371	ruby-talk	ActiveRecord	Method Missing as Filter	activerecord, find, id, boolean, and	>> I can check that there is indeed a username ("Tom") and return 1 if\r\n>> there is one and 0 by using this code\r\n>> User.find_by_username("Tom")? 1 : 0\r\n>>\r\n>> How would I find out Tom's corresponding id?\r\n>\r\n> Here's a couple of ways:\r\n>\r\n>  @user = User.find_by_username("Tom") ? @user.id : 0\r\n>\r\n>  User.find_by_username("Tom").id rescue 0\r\n\r\nWhy waste a member variable for this?  I'd also stick with the truthy semantics:\r\n\r\ndef find_user_id_by_name(name)\r\n  user = User.find_by_username(name) and user.id\r\nend\r\n\r\n> I'll bet there will be other suggestions :-)\r\n\r\nYou won.	1.9.3	shortcutter@googlemail.com	2012-04-26 10:11:00	Robert	Klemme	2012-05-02 12:50:49.566085	2012-05-06 22:21:13.065695
122	ruby-talk	ObjectId	Integers and floats	object_id, true, false, test	> I have no idea what, if anything, has the object_ids 0, and 2.\r\n\r\nPretty easy: false and true.\r\n\r\nirb(main):001:0> true.object_id\r\n=> 2\r\nirb(main):002:0> false.object_id\r\n=> 0	1.9.3	flo@andersground.net	2009-12-22 11:12:00	Florian	Gilcher	2012-05-02 12:04:06.668073	2012-05-06 23:51:39.916594
206	ruby-talk	pdf	How to generate a pdf calendar?	pdf, calendar, generate, html, wkhtmltopdf, princexml, prawn, generator	 \r\n\r\n> I want to generate a pdf calendar, and I have incoming calendar data\r\n> from a json interface.  Any advice on things I should investigate to\r\n> implement this?\r\n\r\nIn my research, there are two main ways to generate a PDF:\r\n\r\n 1. use an html -> pdf generator such as wkhtmltopdf or princexml (and \r\n invoke the command line from ruby)\r\n\r\n 2. use another library (Prawn seems to be the big one for ruby). You'll \r\n have to learn the markup syntax for Prawn, but I think if you're willing \r\n to get over that hurdle then you have more control than if you used an \r\n html-> pdf generator.	1.9.3	kclair@pickledradish.com	2011-12-13 13:02:00	K	Clair	2012-05-02 12:16:53.626089	2012-05-06 22:34:43.167777
74	ruby-talk	Graphics	Which graphical/gui library is used for ruby?	visualruby, link, gui, lib, graphics, shoes	I use gtk.  I'd suggest looking at my program, visualruby:\r\n\r\n<a href="http://www.visualruby.net">http://www.visualruby.net</a>\r\n\r\nYou'd use the glade interface designer to build forms, and ruby to animate them.  \r\nThere are several options including gtk, QT, Tk, wxRuby, shooooes, but you have \r\nto write all the code yourself.  That's why I wrote visualruby.	1.9.3		2012-04-19 04:21:00	Eric	C	2012-05-02 11:55:46.37608	2012-05-11 18:18:09.71754
432	ruby-talk	Dir	Directory within directorry??	mkdir, RAILS_ROOT, Dir	> I want to create a directory, i used command:\r\n>\r\n> Dir.mkdir("#{RAILS_ROOT}/public/public1/public2/public3")\r\n>\r\n> but its not working. don't know the reason.\r\n> So i tried for:\r\n>\r\n> Dir.mkdir("#{RAILS_ROOT}/public/public1")\r\n> Dir.mkdir("#{RAILS_ROOT}/public/public1/public2")\r\n> Dir.mkdir("#{RAILS_ROOT}/public/public1/public2/public3")\r\n>\r\n> and it worked.\r\n>\r\n> Can the code be minimized?\r\n> Please suggest me, can the three lined code be made one lined?\r\n>\r\n\r\nrequire 'fileutils'\r\nFileUtils.mkdir_p "#{RAILS_ROOT}/public/public1/public2/public3"	1.9.3	phasis@gmail.com	2009-03-18 15:31:00	Heesob	Park	2012-05-02 13:00:34.225267	2012-05-03 23:56:42.885028
475	ruby-talk	Enumerable	XOR two binary strings	enumerable, to_enum, each_byte, join, array of bytes, xor	I'm not sure if "binary string" meant a string of the form "000101...", \r\nor if it meant two strings treated as arrays of bytes.\r\n\r\nIf the latter, then\r\n\r\nirb(main):001:0> require 'enumerator'\r\n=> true\r\nirb(main):002:0> s1 = "abc".to_enum(:each_byte)\r\n=> #<Enumerable::Enumerator:0xb7cc85dc>\r\nirb(main):003:0> s2 = "".to_enum(:each_byte)\r\n=> #<Enumerable::Enumerator:0xb7cc02c4>\r\nirb(main):004:0> s1.zip(s2).map{ |x,y| (x^y).chr }.join\r\n=> "cfe"\r\n\r\nruby 1.9 lets you shorten this to\r\n\r\nirb(main):001:0> "abc".bytes.zip("".bytes).map { |x,y| \r\n(x^y).chr }.join\r\n=> "cfe"	1.9.3	b.candler@pobox.com	2009-01-13 10:21:00	Brian	Candler	2012-05-02 14:06:43.039501	2012-05-11 20:58:38.516583
442	ruby-talk	Regexp	Program design - template design pattern	regex, design, pattern, uri, feed, hash, parser, write, fetch, parse, content	> While a lot depends on several other aspects of your project, this specific\r\n> problem depends on a principle question:\r\n>\r\n> Do you have any control over the feed object?\r\n\r\nI second that.  Also, what type is "feed"?  That's not clear to me.\r\n\r\n> If you have any control, then you could make a polymorphic superclass called\r\n> Feed and go on from there where each separate feed has its own related\r\n> methods to deal with its idiosyncrasies and polymorphic methods that deal\r\n> with common tasks. For ex:\r\n>\r\n> class Feed\r\n>   def initialize\r\n>   end\r\n>   def parse_content\r\n>   end\r\n\r\nOne could also add\r\n\r\n  # download the feed\r\n  def fetch(uri)\r\n     ....\r\n  end\r\n\r\n> end\r\n>\r\n> class BbcFeed < Feed\r\n>   def parse_content\r\n>      # do something relevant here\r\n>      # probably return a string/hash/or content object\r\n>   end\r\n>   # define other methods specific to BbcFeed etc\r\n> end\r\n>\r\n> Once this is done, you just have to create the right object at runtime,\r\n> perhaps have a factory object detailing this.\r\n\r\nOr stuff the relationship between feed URI's and class that deals with it in a Hash:\r\n\r\nFEEDS = {\r\n  'http://foo.bar/feed.rdf' => BbcFeed,\r\n  'http://baz.boz.buz/path.rdf' => BbcFeed,\r\n  'http://what.ever.you/like' => OtherFeed,\r\n}.freeze\r\n\r\nThen you can do\r\n\r\nFEEDS.each |uri, cl|\r\n  feed_handler = cl.new\r\n  feed_handler.fetch\r\n  feed_handler.parse_content\r\nend\r\n\r\n> If you don't have control, there isn't a way to run away from doing checks\r\n> on the object. Depending on how you determine the regex to use, you could\r\n> have specific solutions. Perhaps each feed has a different URL that you\r\n> could use to determine the parsing, or perhaps something else in the\r\n> xml...either way, you have to know what object you are dealing with, or you\r\n> have to write a parser that deals with it.\r\n\r\nFeed type checks could be done on the URI or the content.  Depending on that a different approach needs to be followed but the basic pattern stays the same.	1.9.3	shortcutter@googlemail.com	2009-03-26 11:56:00	Robert	Klemme	2012-05-02 13:55:56.363087	2012-05-06 23:49:12.776465
491	ruby-talk	String	Gsub and single quote issue	string, gsub, single, quote, replacement, pre match	> a = " Ruby's gem "\r\n> \r\n> puts a.gsub(/[']/, "") #=> 1. Rubys gem\r\n> puts a.gsub(/[']/, "'") #=> 2. Ruby's gem\r\n> puts a.gsub(/[']/, "'") #=> 3. Ruby's gem\r\n> puts a.gsub(/[']/, "\\'") #=> 4. Rubys gem s gem\r\n> puts a.gsub(/[']/, "\\'") #=> 5. Rubys gem s gem\r\n> puts a.gsub(/[']/, "\\\\'") #=> 6. Ruby's gem\r\n> \r\n> puts " "\r\n> \r\n> I couldn't understand the result for #4 and #5. Any explanation is appreciated.\r\n\r\nThe sequence ' in a replacement string is interpreted as the post match.  That's why you see the duplication.  You'll see this nicely by bracketing the replacement:\r\n\r\nirb(main):012:0> a = " Ruby's gem "\r\n=> " Ruby's gem "\r\nirb(main):013:0> a.gsub /'/, "<\\'>"\r\n=> " Ruby<s gem >s gem "\r\n\r\nThere is also pre match:\r\n\r\nirb(main):014:0> a.gsub /'/, "<\\`>"\r\n=> " Ruby< Ruby>s gem "	1.9.3	shortcutter@googlemail.com	2009-03-24 22:12:00	Robert	Klemme	2012-05-02 14:12:26.424747	2012-05-06 23:55:00.938623
471	ruby-talk	Regexp	if statement not working with Hash object	regex, match, string, wildcard, operators, =~, ===, !~	>>> So if my Date1 has any value after it, I will have to have a string\r\n>>> wildcard, correct? What are you all using for wildcards? Thanks, MC\r\n\r\n>> I don't know what you mean.\r\n \r\n> Well what I meant was that I don't understand how to check if a line in \r\n> the text file contains at least 'Date1'.\r\n> \r\n> So anytime it the line has at least contains Date1, then it should be \r\n> ignored in my code. I thought that I could use the regular expression \r\n> such as:\r\n> \r\n> if word != /Date1/\r\n\r\nif word !~ /Date1/\r\n\r\n> however, I can't use the reg ex and don't know how to do that with a string. I was \r\n> thinking there is a wild card so that I could use something like: \r\n>   if word !~ "Date1*" with '*' being any value after Date1.\r\n\r\nAgain, if you want to do regexp matching you need to use operators "=~", "===" or "!~" but NOT "==" or "!="!  These are totally different things.	1.9.3	shortcutter@googlemail.com	2009-01-21 07:47:00	Robert	Klemme	2012-05-02 14:06:00.786109	2012-05-07 00:02:59.516068
4	ruby-talk	OpenSSL	Ruby openssl ECC help plz	openssl, cypher, class, support, aes-128-ctr	> Thanks I have it working now. I have one other question, why doesn't\r\n> ruby openssl support counter mode of operation??\r\n\r\nRuby's Cipher class supports whatever OpenSSL's EVP_CIPHER interface\r\nsupports. Unfortunately, CTR mode never made it there until just recently.\r\nNow finally, 1.0.1 supports AES in CTR mode. If you are interested in using\r\nit, you may want to upgrade to 1.0.1 and then you can also use it from Ruby\r\nlike this:\r\n\r\ncipher = OpenSSL::Cipher.new('aes-128-ctr')\r\n...	1.9.3	martin.bosslet@googlemail.com	2012-03-31 14:52:00	Martin	Bosslet	2012-05-02 11:37:02.999213	2012-05-05 19:33:24.805984
472	ruby-talk	WWW	Emulating a web browser	www, mechanize, hpricot, open-uri, gem, search, cookies, nokogiri	> I am looking for a library to help me emulate a web browser, at least at the\r\n> network level.  By this I mean I would like to run a program that, from  the\r\n> point of view of a web server, behaves just like, say, Firefox, but I don't\r\n> care about actually displaying text or images or anything like that. \r\n>\r\n> What I would like it to do is speak HTTP, store and send cookies, automatically\r\n> fetch embedded content like images and style sheets, and so forth.  I thought Mechanize \r\n> was what I wanted, but it doesn't fetch embedded content. It doesn't even recognize it.  \r\n> I could perhaps tell Nokogiri to find all the images and have Mechanize fetch them, \r\n> but I've never used Nokogiri before, I don't know an exhaustive list of types of \r\n> embedded content Firefox loads automatically (images, JavaScript, Flash, anything else?), \r\n> and it seems like getting Mechanize to emulate FF's HTTP request for these objects is difficult.\r\n> \r\n> Are there libraries that are meant for this type of interaction with websites?  Perhaps I'm \r\n> better off abandoning Ruby and making a Firefox extension.\r\n\r\nFor static content, like images, stylesheets, js files, etc. all you need is an html parser.  hpricot is an html parser with good docs (I can't find many examples for nokogiri but it uses the same syntax as hpricot for searching a document):\r\n\r\nrequire 'rubygems'\r\nrequire 'hpricot'\r\nrequire 'open-uri'\r\n\r\ndoc = Hpricot(open("http://blog.segment7.net/"))\r\n\r\n#images:\r\nimgs = doc.search("img")\r\nputs imgs[0][:src]\r\n\r\n#stylesheets:\r\ncss = doc.search('//link[@type="text/css"]')\r\nputs css[0][:href]\r\n\r\n#javascript:\r\njs = doc.search('//script[@type="text/javascript"]')\r\nputs js[0][:src]\r\n\r\n--output:--\r\n/images/spinner-blue.gif?1140249801\r\nhttp://segment7.net/styles/s7.css\r\n/javascripts/cookies.js?1142467953\r\n\r\n<a href="http://wiki.github.com/why/hpricot">http://wiki.github.com/why/hpricot</a>\r\n\r\nCheck out both Hpricot Basics and Hpricot Challenge for lots of examples.\r\n\r\nI don't think there are programs yet that can produce the page that the user sees after javascript executes in a browser and does dynamic html replacements.  I know they are trying to write them.\r\n\r\nAs for cookies, dealing with them usually goes hand in hand with filling out forms, so you could use mechanize for that.  Also, mechanize incorporates nokogiri, so you can use mechanize as an html parser to search for the same things I did with hpricot:\r\n\r\nrequire 'rubygems'\r\nrequire 'mechanize'\r\n\r\nagent = WWW::Mechanize.new\r\npage = agent.get("http://blog.segment7.net/")\r\ncss = page.search('//link[@type="text/css"]')\r\nputs css[0][:href]\r\n\r\n--output:--\r\nhttp://segment7.net/styles/s7.css	1.9.3	bbxx789_05ss@yahoo.com	2009-04-30 11:56:00	7stud		2012-05-02 14:06:00.794837	2012-05-11 20:58:09.73023
317	ruby-talk	Tests	How to test an iterator method?	test, test-unit, collection, iterate, expect, shift, array	> I have a class that looks like this\r\n> \r\n> class MyClass\r\n>   def each_object\r\n>     # do something really fun\r\n>   end\r\n> end\r\n> \r\n> I'd like to write some tests for the #each_object method but don't\r\n> know how to. Could you please suggest a way to test methods that\r\n> iterate over the elements of a collection?\r\n\r\nDepends on what you want to check.  If for example you want to make sure \r\nelements are returned in the proper order you can do something like this:\r\n\r\nclass X\r\n   include Test::Unit::Assertions\r\n\r\n   def test_a\r\n     v = 1..5\r\n     expect = [1,2,3,4,5]\r\n\r\n     v.each do |x|\r\n       assert_equal expect.shift, x\r\n     end\r\n   end\r\nend\r\n\r\nThis is of course just a silly test but should demonstrate the point.	1.9.3	shortcutter@googlemail.com	2009-12-24 13:43:00	Robert	Klemme	2012-05-02 12:39:13.558986	2012-05-06 21:20:13.118837
262	ruby-talk	Regexp	Regexp to match a , and seperate	regex, match, comma, scan. map, recursive	irb(main):007:0> str = "server[1,2].localhost.com,server[2-5].localhost.com,server1.localhost.com"\r\n=> "server[1,2].localhost.com,server[2-5].localhost.com,server1.localhost.com"\r\n\r\nirb(main):008:0> str.scan %r{(?:[^,[]]+|[[^]]*])+}\r\n=> ["server[1,2].localhost.com", "server[2-5].localhost.com", "server1.localhost.com"]\r\n\r\nNow, if you want to be safe against multiple nesting levels you can use\r\nrecursive matching:\r\n\r\nirb(main):033:0> str = "server[1,2].localhost.com,server[2-5[3-9]].localhost.com,server1.localhost.com"\r\n=> "server[1,2].localhost.com,server[2-5[3-9]].localhost.com,server1.localhost.com"\r\n\r\nirb(main):034:0> str.scan( %r{ (?<name> (?: [^,[]]+ | (?<gr> [ (?: [^[]] | g<gr> )* ] ) )+ ) }x ).map { $~[:name] }\r\n=> ["server1.localhost.com", "server1.localhost.com", "server1.localhost.com"]\r\n\r\nwith a bit friendlier formatting\r\n\r\nirb(main):046:0* str.scan(\r\nirb(main):047:1*   %r{\r\nirb(main):048:1/     (?<name>\r\nirb(main):049:1/       (?:\r\nirb(main):050:1/           [^,[]]+\r\nirb(main):051:1/         | (?<gr> [ (?: [^[]]+ | g<gr> )* ] )\r\nirb(main):052:1/       )+\r\nirb(main):053:1/     )\r\nirb(main):054:1/   }x ).map { $~[:name] }\r\n=> ["server1.localhost.com", "server1.localhost.com", "server1.localhost.com"]\r\n\r\n\r\nor (basically the same regexp without the outer named group):\r\n\r\nirb(main):035:0> str.scan %r{ (?: [^,[]]+ | (?<gr> [ (?: [^[]]+ |\r\ng<gr> )* ] ) )+ }x do puts $& end\r\nserver[1,2].localhost.com\r\nserver[2-5[3-9]].localhost.com\r\nserver1.localhost.com\r\n=> "server[1,2].localhost.com,server[2-5[3-9]].localhost.com,server1.localhost.com"	1.9.3	shortcutter@googlemail.com	2011-07-15 11:16:00	Robert	Klemme	2012-05-02 12:30:48.193843	2012-05-11 17:06:04.623993
501	ruby-talk	Platform	Unique identify computer (both Windows and MacOSX)	rbconfig, host_os, platform, determine	> How can I unique identify the OS where my Ruby code is running?\r\n>\r\n> I can do this using specific Win32 features but I looking for an OS\r\n> independent approach...maybe using the HD serial?\r\n\r\nNo, don't use RUBY_PLATFORM because it won't work with JRuby, and\r\npossibly other implementations.\r\n\r\nInstead, require "rbconfig", then check Config::CONFIG['host_os'].	1.9	djberg96@gmail.com	2009-01-10 19:18:00	Daniel	Berger	2012-05-04 00:13:26.788704	2012-05-04 00:13:26.788704
148	ruby-talk	Regexp	Regular expression match	regex, compare	> Can anyone explain to me this regular expression, please:\r\n> str[/A([a-z]w*)/, 1]\r\n>\r\n> what's the use of 1 in this expression\r\n\r\nThis syntax is used to return the matching portion of supplied regxp. For\r\nexample:\r\n\r\n"hello world"[/(w+)(s)(w+)/, 0] #=> "hello world"\r\n"hello world"[/(w+)(s)(w+)/, 1] #=> "hello"\r\n"hello world"[/(w+)(s)(w+)/, 2] #=> " "\r\n"hello world"[/(w+)(s)(w+)/, 3] #=> "world"	1.9.3	ustc.flyingfox@gmail.com	2011-11-21 17:27:00	ToMaTo@Google		2012-05-02 12:09:07.818765	2012-05-03 14:26:04.485329
238	ruby-talk	String	Name Extraction	string, scan, flatten, array, extract, name	> I have following string:\r\n>\r\n> jayabharathy@angleritech.com~Vs~kannan@angleritech.com\r\n>\r\n> The above string has 2 email ids in it.but i need only names of it.\r\n>\r\n> I want to extract only the names:\r\n>\r\n> jayabharathy\r\n>\r\n> kannan\r\n\r\nSomething like this can work, depends of course on the names that you want to allow:\r\n\r\nnames = str.scan(/(w+)@[a-z._-]+/i).flatten	1.9.3	shortcutter@googlemail.com	2009-01-27 14:51:00	Robert	Klemme	2012-05-02 12:26:14.989018	2012-05-11 16:48:47.249089
59	ruby-talk	Language	Step By Step for Ruby	language, ruby, rails, rubykoans, learn	> I need a little help with a step by step of Ruby. How I should I begin?\r\n\r\nWhere are you starting from? How much programming experience do you have?\r\n\r\n> How did you start?\r\n\r\nI started with the Rubykoans by EdgeCase. It was a good way to learn the\r\nsyntax and the good parts.\r\n\r\n> What was the biggest problem you've ran into?\r\n\r\nIt was hard to understand some of the common practices. However, after\r\nreading "Eloquent Ruby" and "Design Patterns in Ruby", I have learned a lot.\r\n\r\n> What is the point of Ruby?\r\n\r\nidk if there is a real __point__ to it.\r\n\r\n> How does it all transfer to Rails?\r\n\r\nRails is an entirely separate language within ruby. I suggest you get proficient in Ruby before you touch rails. It will make more sense in the long run.	1.9.3	isaacbfsanders@gmail.com	2011-11-25 20:15:00	Isaac	Sanders	2012-05-02 11:53:03.645779	2012-05-06 23:02:55.936908
34	ruby-talk	Lambda	Elegant expression of sorting	lambda, sort_by, test, nonzero, ascending, descending	>>> I've found that for the current project I am working on that I am frequently\r\n>>> doing sorts based on multiple keys. The comparisons on each key tend to\r\n>>> vary, ie. sometimes I want descending rather than ascending, and other times\r\n>>> the comparison itself is complex.\r\n>>>\r\n>>> I usually do something like this:\r\n>>>\r\n>>> foo.sort! {|a,b|\r\n>>>  # Ascending, primary.\r\n>>>  rv = a.key0<=>  b.key0\r\n>>>  # Descending, secondary.\r\n>>>  rv = b.key1<=>  a.key1 if rv == 0\r\n>>>  # A tricky and expensive comparison, tertiary.rv = a.magic(b) if rv == 0\r\n>>>  rv\r\n>>> }\r\n>>>\r\n>>> Does anyone have any suggestions as to a more elegant way to express this?\r\n>>> I'm after something that is logically equivalent, but easier to write and\r\n>>> clearer to read.\r\n\r\n>> A general way to perform a multi-key sort is:\r\n>> # assuming sort() is a stable sort algorithm, e.g. merge sort\r\n>>   foo.sort! {|a,b|\r\n>>      # starting from the least important key\r\n>>      a.magic(b)\r\n>>   }\r\n>>   foo.sort! {|a,b|\r\n>>      # sort again using the second-least important key\r\n>>      b.key1<=>  a.key1\r\n>>   }\r\n>>   # repeat until you are done with the most important key\r\n>>\r\n>> I guess you can generalize this using an array of Lambdas.\r\n>> One potential disadvantage of this for your particular case is that,\r\n>> a.magic(b) is always performed even if a.key0 != b.key0. As you have\r\n>> stated, this is quite expensive, and can make the above general scheme\r\n>> much more expensive than your way.\r\n\r\nThis is totally inefficient because it goes through the original data\r\nset (which might be large) multiple times.  The complexity of #magic\r\nonly adds to this.\r\n\r\n> Cool- thanks for that. I won't be able to use it directly as the last key\r\n> sort for most of the things I am doing is typically expensive, but I'm still\r\n> quite interested in different possible approaches. Thankyou. :)\r\n\r\nPlease don't, there are much better approaches (see botp's for\r\nexample).  Here are more\r\n\r\nfoo.sort! {|a,b|\r\n # Ascending, primary.\r\n (a.key0 <=> b.key0).nonzer0? ||\r\n # Descending, secondary.\r\n (b.key1 <=> a.key1).nonzero? ||\r\n # A tricky and expensive comparison, tertiary.\r\n a.magic(b)\r\n}\r\n\r\nfoo.sort_by {|a|\r\n  [\r\n  # Ascending, primary.\r\n  a.key0,\r\n  # Descending, secondary, only if numeric.\r\n  -a.key1,\r\n   # A tricky and expensive comparison, tertiary.\r\n  a.create_magic_key\r\n  ]\r\n}\r\n\r\nAll these approaches can also be stored in a lambda and used from there\r\n\r\nYourClass::SORT_FOO = lambda {|a| [a.key0, -a.key1, a.create_magic_key]}\r\nYourClass::SORT_BAR = lambda {|a,b| (a.key0 <=> b.key0).nonzero? || ...=\r\n }\r\n\r\nenum.sort_by &YourClass::SORT_FOO\r\nenum.sort &YourClass::SORT_BAR	1.9.3	shortcutter@googlemail.com	2012-01-19 10:22:00	Robert	Klemme	2012-05-02 11:47:56.594871	2012-05-11 15:19:29.574323
192	ruby-talk	File	Make a file read-only?	permissions, write bit, remove, chmod, mask	> I can make a file writeable easy enough,\r\n> \r\n>     mode = File.stat(file).mode\r\n>     File.chmod(mode | 0000200, file)\r\n> \r\n> But how do I make a file read-only?\r\n> \r\n>     mode = File.stat(file).mode\r\n>     File.chmod(mode - 0000222, file)\r\n> \r\n> Subtraction doesn't work. And I've tried `&`, `|` and `^`. Do I have to\r\n> do some sort compliments operation here? What's the trick to this?\r\n> \r\n> FYI, on the command line it's as easy as:\r\n> \r\n>   $ chmod a-w file\r\n\r\nMore specifically, then, you want to remove the write permission from\r\nthe file, leaving it whatever other permissions were already set\r\n(possibly none!).  In other words, you want to /mask out/ the write bits\r\nfrom whatever the current file mode is.  Try the following:\r\n\r\nmode = 0100664\r\nmask = mode ^ 0222\r\nnew_mode = mode & mask	1.9.3	jeremy@bopp.net	2012-02-06 14:14:00	Jeremy	Bopp	2012-05-02 12:16:53.247896	2012-05-11 15:21:38.231513
326	ruby-talk	File	Reading specific columns on a text file	file, opening, iteration, simpler, foreach	>> I'm working on script here and I need do read the 1st and the 10th\r\n>> columns on a file like this\r\n>>\r\n>> R357    10011G1   0 0.0   0 0 0.0 381654.8 7993255.6 827.9  1235959\r\n>>\r\n>> As reference I used the code found in this post:\r\n>>\r\n>> <a href="http://www.ruby-forum.com/topic/161462#new">http://www.ruby-forum.com/topic/161462#new</a>\r\n>>\r\n>> The difference is on that snippet the user only wanted to read the first\r\n>> column, so I tried something like this\r\n>>\r\n>> file = File.open(" ")\r\n>> columns = []\r\n>> file.each_line do |line|\r\n>> columns << line.split(" ")[0 , 11]\r\n\r\nFile opening and iteration can be done simpler:\r\n\r\nFile.foreach do |line|\r\n  a, b = line.split.values_at(0, 10)\r\nend\r\n\r\n>  "R357    10011G1   0 0.0   0 0 0.0 381654.8 7993255.6 827.9 1235959".split(" ").values_at(0,10)\r\n> => ["R357", "1235959"]\r\n\r\nMinor nitpick: you do not even need the argument to #split because\r\nsplitting at whitespace is the default.	1.9.3	shortcutter@googlemail.com	2012-02-04 13:53:00	Robert	Klemme	2012-05-02 12:40:17.307745	2012-05-11 20:21:37.688828
420	ruby-talk	String	Add a string on the end of values before splitting new line	string, split, join, array	> Do you know how to add a string on the end of each value before\r\n> splitting into a new line? For instance...\r\n> \r\n> textfile contents: value1,value2,value3...\r\n> \r\n> value1 comments\r\n> value2 comments\r\n> value3 comments\r\n> \r\n> I tried this using Robert's code, however, it put the comments on a\r\n> newline.\r\n> \r\n> File.foreach "temp.txt" do |line|\r\n>    puts "", line.split(/,/),"comments" + @usercomments\r\n> end\r\n\r\n1. Collect all data from file and store it as a single String variable \r\n@a. So @a.class==String\r\n\r\n2. Ex, @file="value1,value2,value3,value4"\r\n\r\n3. Code\r\n\r\n@file="value1,value2,value3,value4"\r\n@output=[]\r\n@file.split(/,/).each do |record|\r\n  @output << record + " comments"\r\nend\r\nputs @output # => It gives => ["value1 comments","value2 \r\ncomments","value3 comments","value4 comments"]\r\n\r\nSo use puts @output.join(" ").\r\n\r\nIt will gives output like:\r\n\r\nvalue1 comments\r\nvalue2 comments\r\nvalue3 comments\r\nvalue4 comments	1.9.3	jazzezravi@gmail.com	2009-03-06 13:16:00	Jazzez	Ravi	2012-05-02 12:57:36.131363	2012-05-11 15:33:10.362598
337	ruby-talk	File	Append static text for all files in a directory	append, text, static	> How to append static text for all files in application .\r\n> I want to append comment lines on top of each file in app/controllers/\r\n\r\nAppending is "inserting" text at the end of the file. If you want to\r\nmodify something before the end you got to read it all in, do your\r\nchanges, and write it out again.\r\n\r\nIf your Files are small enough to be read in whole, it's quite easy in\r\nRuby:\r\n\r\ncontent = File.read(filename)\r\nFile.open(filename, "w") do | f |\r\n  f << "# comment\\n"\r\n  f << content\r\nend	1.8	overlord@gmx.li	2009-02-24 08:53:00	Simon	Krahnke	2012-05-02 12:43:01.759435	2012-05-14 19:09:44.405084
253	ruby-talk	Regexp	A hopefully simple question	regex, string, search	> I downloaded an irc bot written in Ruby. Basically I am trying to add \r\n> additional string recognition statements to this bot, so it says things \r\n> in response to things people say in the channel.\r\n>\r\n> Is there a simple way to accomplish this task by replacing the ==\r\n> comparison operator with something else that searches a string variable\r\n> for a substring?\r\n\r\n/Everybody stand back/\r\nI know regular expressions\r\n\r\nif msg.text =~ %r{lol}i\r\n    reply(msg, " LOLOLOLOL")	1.9.3		2009-04-09 16:12:00	Michael	Malone	2012-05-02 12:29:21.50117	2012-05-11 15:35:22.716476
107	ruby-talk	System	Copy range of lines to another file based on regexp match	sed, search, save to file	> I am writing a script to search for a particular string in a file and\r\n> then copy all lines starting from matching-line to another file.\r\n> Following should make it clear again:\r\n> * search for first occurrence of a particular string in a file\r\n> * find it's line number\r\n> * copy certain text in all lines or entire line, starting from above\r\n> line number to EOF to another file\r\n\r\n$ sed -n -e '/rx/,$ {s/foo/bar/g; p}' a_file	1.9.3	shortcutter@googlemail.com	2011-07-20 11:20:00	Robert	Klemme	2012-05-02 12:00:59.665521	2012-05-03 23:14:02.454113
82	ruby-talk	String	"aaabbccccdadd" => [ [a, 3], [b, 2], [c, 4], [d, 1], [a, 1], [d,	string, array, scan	> I'm thinking to translate string to an array like this:\r\n> "aaabbccccdadd" => [ [a, 3], [b, 2], [c, 4], [d, 1], [a, 1], [d, 2] ]\r\n>\r\n> this is my code:\r\n>\r\n> ary = []\r\n> "aaabbccccdadd".scan(/((.)*)/){ |a,b| ary << [b, a.size] }\r\n>\r\n> ary #=> [["a", 3], ["b", 2], ["c", 4], ["d", 1], ["a", 1], ["d", 2]]\r\n>\r\n> But, I wonder if there are more effective or beautiful solution than\r\n\r\nyou can use the enumerator form of scan (ruby1.9):\r\n\r\n"aaabbccccdadd".scan(/((.)*)/).map { |a,b| [b, a.size] }	1.9.3	martindemello@gmail.com	2011-12-13 02:19:00	Martin	DeMello	2012-05-02 11:55:46.592606	2012-05-11 15:28:25.331721
309	ruby-talk	System	Input: gets() not stopping to accept input	system, $stdin, gets, double quotes, required, capture, input	> I am using "Programmers Notepad" to write Ruby code. I tried following\r\n> code, but gets() is not waiting to accept the input. The whole program\r\n> execution finishes when I run the program.\r\n>\r\n>========= CODE ==========\r\n>puts 'Enter your name'\r\n>name = gets()\r\n>puts 'Hello #{name}'\r\n>=========================\r\n\r\nUnless you are specifying a file name on the command line, you probably\r\nwant this to read from the console.  For that, you need STDIN.gets.\r\n\r\nAlso, the string substitution in your third line will only happen if you\r\nuse double quotes.  So, I think you want:\r\n\r\n  puts 'Enter your name'\r\n  name = STDIN.gets\r\n  puts "Hello #{name}"	1.9.3	timr@probo.com	2010-11-16 22:45:00	Tim	Roberts	2012-05-02 12:38:01.175129	2012-05-06 23:50:46.668154
403	ruby-talk	FileUtils	Directory within directory?	fileutils, mkpath, RAILS_ROOT, mkdir	> I want to create a directory, i used command:\r\n> Dir.mkdir("#{RAILS_ROOT}/public/public1/public2/public3")\r\n> Can the code be minimized?\r\n\r\nrequire 'fileutils'\r\nFileUtils::mkpath("#{RAILS_ROOT}/public/public1/public2/public3")	1.9.3	no@spam.please.net	2009-03-18 17:35:00	Clifford	Heath	2012-05-02 12:55:39.300519	2012-05-11 15:50:12.450337
24	ruby-talk	Kernel	How to detect Linux Kernel and glibc version?	kernel, detect, version, system, command, extend, comparable	> ----------------------------------\r\n> case RUBY_PLATFORM\r\n> when /linux/\r\n>   if KERNEL_VERSION >= "2.6.28" and GLIBC_VERSION >= "2.10"\r\n>     add_define 'HAVE_ACCEPT4'\r\n>   end\r\n> ----------------------------------\r\n>\r\n>\r\n> Well, I could run "uname -r" but that is dangerous, example:\r\n>\r\n>   "2.6.3" >= "2.6.28"\r\n>   => true    OPSSSSS !!!\r\n>\r\n> And unfortunately I cannot add more gems (i.e. versionomy) as\r\n> dependency.\r\n\r\nBut you could add a few lines, couldn't you?  Why not\r\n\r\nirb(main):001:0> class String\r\nirb(main):002:1> def to_v\r\nirb(main):003:2> scan(/d+/).map(&:to_i).extend Comparable\r\nirb(main):004:2> end\r\nirb(main):005:1> end\r\n=> nil\r\nirb(main):006:0> "2.6.3".to_v > "2.6.28".to_v\r\n=> false	1.9.3	shortcutter@googlemail.com	2012-03-06 17:07:00	Robert	Klemme	2012-05-02 11:44:39.014126	2012-05-05 20:15:04.545067
354	ruby-talk	Enumerable	Dummy question about method in class	enumerable, empty, return, nil, inject, return, 0	> [1,2,3,4,5].inject { |sum,n| sum+n }\r\n> The inject method in this case is to calculate the sum of array.\r\n\r\nAdditional to Florian's good explanation: be aware that the version you \r\nposted has a special property: it will return nil for empty Enumerables.\r\n\r\nConsider this version which in most cases is the one you want (an empty \r\nlist summed up results in 0):\r\n\r\n[1,2,3,4,5].inject(0) { |sum,n| sum+n }	1.9.3	shortcutter@googlemail.com	2009-02-18 22:48:00	Robert	Klemme	2012-05-02 12:45:55.740073	2012-05-06 21:02:43.582857
338	ruby-talk	EventMachine	1k+ concurrent connections	connection, limit, EventMachine	> Today i have something like 1k concurrent connections, but i expect that\r\n> this number increase alot soon, maybe 3k or even more.... The\r\n> application was made in c#, but doesn't seam so good, need restart all\r\n> day, its slow and so... I need rewrite, and now is my question, what\r\n> should i use?\r\n\r\nYou can exceed that 1k connections threshold if you are using\r\nEventMachine on a system that supports epoll (Linux) or kqueue.\r\n\r\nEM performance is quite good.  Whether the rest of your app would be\r\nfast or not depends on how you write the code, probably.  As for what\r\nyou should use....use what you are comfortable with.  Ruby may or may\r\nnot be a good choice.  If you are unsure, try to prototype what you\r\nneed, and see how well it works, and how you like it.	1.9.3	wyhaines@gmail.com	2009-05-14 15:06:00	Kirk	Haines	2012-05-02 12:43:20.304501	2012-05-11 15:28:09.685387
520	ruby-talk	Encoding	Encoding woes with command prompt output	html, utf-8, unicode, chars, output, ruby	>> It seems that the actual encoding of test.rb is not CP850 but UTF-8.\r\n>>\r\n>> The string "Ã|ÃÂ¸ÃÂ¥" is encoded as "\\xC3\\xA6\\xC3\\xB8\\xC3\\xA=\r\n5" in UTF-8.\r\n>\r\n> Well, I've tried marking the file with # Encoding: UTF-8 as well, but it\r\n> still doesn't help me getting my "Ã|ÃÂ¸ÃÂ¥" string printed properly to the\r\n> screen. So my problem remains, how do I need to configure this so that a\r\n> string like "Ã|ÃÂ¸ÃÂ¥" in my Ruby file gets printed, and not having to use\r\n> the 'ugly' hex injections?\r\n>\r\n\r\nDid you check your console is actually using TrueType fonts?\r\n\r\nHave you tried setting the codepage to Unicode? (chcp 65001)	1.9.3	luislavena@gmail.com	2011-12-15 13:12:00	Luis	Lavena	2012-05-04 20:06:12.426772	2012-05-04 20:06:12.426772
521	ruby-talk	Gem	Did you know? - Wirble Reverse	wirble, reverse, tip, colorize, history_uniq	Did you know Wirble is about a 1000x more helpful if you set `:history_uniq` to `:reverse`:\r\n\r\n    # ~/.irbrc\r\n    require 'wirble'\r\n    Wirble.init(:history_uniq=>:reverse)\r\n    Wirble.colorize\r\n\r\nNow what you type will remain closer to where you're at!\r\n\r\nWhy isn't :reverse the default? I have no idea. I wish it were. But such is \r\nthe nature of legacy decisions some times.	1.9.3, 1.8.6	transfire@gmail.com	2011-12-12 20:02:00	Intransition		2012-05-04 20:08:48.456026	2012-05-12 01:55:47.106593
525	ruby-talk	Array	Is high-speed sorting impossible with Ruby?	array, sort, integer, string, speed, convert	> Here's the link to the puzzle. It's just a normal sorting.\r\n\r\nYou _can_ treat it as a normal sorting puzzle, but you will not be able \r\nto write a good implementation regarding the execution time if you did.\r\n\r\n> And this is my solution\r\n> array ||= []\r\n\r\narray is still empty/unassigned, so a direct assignment array = [] would \r\nbe sufficient.\r\n\r\n> gets.to_i.times do\r\n>    array<<  gets\r\n> end\r\n\r\nwell, how about converting the strings returned by gets to integer \r\nfirst? sorting integers is way faster than sorting strings.\r\n\r\n> puts array.sort\r\n>\r\n> My question is, is there any other way I can achieve high-speed sorting\r\n> with Ruby? I'm using the basic Array#sort here, but is there a way to do\r\n> it faster (even though it means lot more lines of code)?\r\n\r\nYes, there is, and I donât think it requires a lot more code. Think \r\nabout sorting the numbers while reading them in, as the quick solutions \r\ntend to approach the problem in this way.	1.9.3	matthias@waechter.wiz.at	2012-11-25 19:52:00	Matthias	Waechter	2012-05-04 20:25:47.218728	2012-05-04 20:25:47.218728
314	ruby-talk	String	DRYing a Regexp	string, regex, scan, extract	> I've got a routine that works fine at building an array of upper-case\r\n> strings extracted from a string:\r\n>\r\n> aNewList = []\r\n> s = StringScanner.new sNewList\r\n> upper = /[A-Z]+/\r\n> not_upper= Regexp.new(  upper.source.sub( /[/, '[^' )  )\r\n> while not s.eos?\r\n>  case\r\n>     when s.skip(upper); aNewList << s.matched\r\n>     else s.skip(not_upper)\r\n>  end\r\n> end\r\n>\r\n> But the not_upper Regexp definition is really a kludge.  It somewhat\r\n> camouflages what is really /[^A-Z]+/\r\n>\r\n> I'd like to DRY it by expressing it as something like !upper.  I need\r\n> something like !~ we use normally with string searches.\r\n>\r\n> Any ideas?\r\n\r\nWell, you don't really need a StringScanner for this simple task. Your code really just rebuilds String#scan():\r\n\r\n  a_new_list = s_new_list.scan(/[A-Z]+/)\r\n\r\nNote that I've also switched your variable naming style to the snake_case that we Rubyists prefer.	1.9.3	james@graysoftinc.com	2009-11-12 17:50:00	James Edward	Gray II	2012-05-02 12:38:01.364986	2012-05-05 00:57:03.466682
399	ruby-talk	Compile	Cross-compiling 1.9.1-p0 to bfin-uclinux?	bfin-uclinux, cross compile, blackfin, openwrt	> Some Google searches show that others have had success (1.8.6-p114 and\r\n> -p287 are mentioned).  However, I'd like to use the latest and greatest\r\n> if possible -- are there any known solutions for 1.9.1?\r\n\r\nruby 1.9 is *much* bigger than ruby 1.8, so for embedded applications, \r\nI'd stick with 1.8 (pref 1.8.6) unless you really need 1.9 features.\r\n\r\nopenwrt has a working ruby 1.8.6 port. I don't know what the status is \r\nof openwrt with blackfin, but a google search suggests maybe someone is \r\nworking on it:\r\n\r\n<a href="https://dev.openwrt.org/changeset/7306/trunk/tools/mkimage">https://dev.openwrt.org/changeset/7306/trunk/tools/mkimage</a>	1.9.3	b.candler@pobox.com	2009-05-05 12:44:00	Brian	Candler	2012-05-02 12:53:10.280112	2012-05-11 20:44:20.387048
398	ruby-talk	Regexp	Ruby regexp match hex string	regex, match, hex, string, efficient, capture, group	<code\r\n\r\n>> /A([0-9a-fA-F]{1,2},{1})*([0-9a-fA-F]{1,2}){1}Z/\r\n>\r\n> You can use h to match a hexadecimal digit as well, which match both\r\n> lower and upper case a-f.\r\n>\r\n>   /A(h{1,2},)*h{1,2}z/\r\n\r\nJust a tiny remark: this one should be more efficient\r\n\r\n/Ah{1,2}(?:,h{1,2})*z/\r\n\r\nBecause it avoids backtracking of the NFA and does not use a capturing\r\ngroup.	1.9.3	shortcutter@googlemail.com	2012-04-02 09:40:00	Robert	Klemme	2012-05-02 12:53:10.260252	2012-05-11 17:14:41.572838
29	ruby-talk	Language	Ruby to C transpiler	language, transpiler, link, complex, performance, gain, marginal	> translating an ruby program into an c program is not as simple possible\r\n> because of ducktyping and dynamic stuff like including and extending\r\n> objects ans classes\r\n\r\nPerformance gains would probably be marginal - unless all the dynamic \r\nfeatures were omitted.\r\n\r\n> c or c++ chould not handle that as simple\r\n\r\nNobody talked about "simple" though.\r\n\r\nBtw, this is exactly what was asked:\r\n\r\n<a href="http://en.wikipedia.org/wiki/Transpiler">http://en.wikipedia.org/wiki/Transpiler</a>	1.9.3	shortcutter@googlemail.com	2011-07-26 16:10:00	Robert	Klemme	2012-05-02 11:44:39.134471	2012-05-11 18:10:14.796195
172	ruby-talk	String	Most efficient way to remove duplicate spaces in a string?	string, spaces, remove, duplicate, gsub, split, squeeze, join	On\r\n\r\n>> Note that these behave differently...\r\n>> Interesting figures btw.  I would have guessed that gsub! is fastest -\r\n>> live and learn\r\n>\r\n> It still might be - the benchmark doesn't run long enough to\r\n> compare the GC overhead of making dozens of little strings\r\n> that get used once each.\r\n\r\nIs this better?\r\n\r\n#!/usr/bin/ruby\r\n\r\nrequire 'benchmark'\r\n\r\nn = 1_000_000\r\n\r\nBenchmark.bm(10) do |x|\r\n  x.report("gsub") { n.times do\r\n      a_string = "This     is  a test   string."\r\n      a_string.gsub(/ +/, ' ')\r\n    end\r\n  }\r\n  x.report("gsub!") { n.times do\r\n      a_string = "This     is  a test   string."\r\n      a_string.gsub!(/ +/, ' ')\r\n    end\r\n  }\r\n  x.report("split.join") { n.times do\r\n      a_string = "This     is  a test   string."\r\n      a_string.split.join(' ')\r\n    end\r\n  }\r\n  x.report("squeeze.strip") { n.times do\r\n      a_string = "This     is  a test   string."\r\n      a_string.squeeze(' ').strip\r\n    end\r\n  }\r\nend\r\n\r\n$ ./stringcleanup.rb\r\n                user     system      total        real\r\ngsub        7.170000   0.140000   7.310000 ( 11.034766)\r\ngsub!       6.900000   0.150000   7.050000 ( 14.113575)\r\nsplit.join  4.450000   0.110000   4.560000 (  7.518476)\r\nsqueeze.strip  3.180000   0.100000   3.280000 (  4.943830)	1.9.3	pat.eyler@gmail.com	2009-01-10 11:59:00	pat	eyler	2012-05-02 12:13:44.990169	2012-05-05 01:35:49.64384
389	ruby-talk	Time	Removing directories older than x days old	time, dir, foreach, delete, old, files, subtract, calculate	> I am trying to write a script that will remove directories that are\r\n> older than 5 days old.  I can't seem to get the datetime for the\r\n> directory to be usable for comparison.\r\n>\r\n> require 'fileutils'\r\n>\r\n> class CleanupDirs\r\n>  def cleanup()\r\n>    Dir.foreach("/mydir/") do |entry|\r\n>      puts entry\r\n>      etime = File.stat(entry)\r\n>      vAgeInDays = ageInDays( etime.ctime )\r\n>      if vAgeInDays > 5\r\n>        Dir.delete(entry)\r\n>\r\n>      end\r\n>    end\r\n>  end\r\n>\r\n>  def ageInDays(days)\r\n>    ydate = Time.new\r\n>    ydate = ydate - ( 24 * 60 * 60 * days)\r\n\r\nYou do not want to substract the number of seconds from a timestamp to\r\nget the age.  For the age of something you need to calculate now -\r\ntimestamp.\r\n\r\n>    return ydate\r\n>  end\r\n> end\r\n>\r\n> CleanupDirs.new.cleanup\r\n>\r\n> I keep getting the error  Time can't be coerced into Fixnum (TypeError)=\r\n.\r\n>\r\n> Can someone point out what I am doing wrong?\r\n\r\nBetter do\r\n\r\ndef age_in_days(time_stamp)\r\n  (Time.now - time_stamp) / (24 * 60 * 60)\r\nend\r\n\r\nThe whole thing might be a tad more efficient if you do\r\n\r\ndef age_in_days(time_stamp, now = Time.now)\r\n  (now - time_stamp) / (24 * 60 * 60)\r\nend\r\n\r\nnow = Time.now\r\n...\r\nif age_in_days(ts, now) > 5\r\n...\r\nend\r\n\r\nAlso that way you have a single reference point which might make some\r\nthings easier.\r\n\r\nFew more remarks: you do not need a class for this as the only method\r\n(cleanup) does not have any parameters and does not work with instance\r\nstate.\r\n\r\nNote also that you might rather want to use #mtime instead of #ctime.\r\n\r\nYou should also treat entries different which are directories.  Maybe\r\nyou rather want to use Find.find or a glob pattern like Dir['**/*'].	1.9.3	shortcutter@googlemail.com	2011-11-22 11:39:00	Robert	Klemme	2012-05-02 12:52:22.779264	2012-05-11 15:25:14.344638
440	ruby-talk	String	ANSI v1.4.0 released	string, colorize, underline, isna	Alternatively you can use isna which has simpler approach.\r\n\r\n<a href="https://github.com/ktlacaelel/isna">https://github.com/ktlacaelel/isna</a>\r\n\r\nrequire 'rubygems'\r\nrequire 'isna'\r\n"Hello World".to_ansi\r\n"Hello World".to_ansi.red\r\nputs "Hello World".to_ansi.red\r\nputs "Hello World".to_ansi.underline.blue\r\nputs "Hello World".to_ansi.blink.yellow\r\nputs "Hello World".to_ansi.cyan\r\nputs "Hello World".to_ansi.negative.cyan\r\nputs "Hello World".to_ansi.green_background.yellow\r\nputs "Hello World".to_ansi.green_background.bright.red\r\nputs "Hello World".to_ansi.green_background.red\r\nputs "Hello World".to_ansi.green_background.dark.red\r\n# *bright* and *dark* only work when a background is applied.\r\nputs "Normal String" + ' concatenated-with-a ' + "Ansi\r\nString".to_ansi.green.to_s	1.9.3	kazu.dev@gmail.com	2011-12-04 03:00:00	Kazuyoshi	Tlacaelel	2012-05-02 13:52:40.018293	2012-05-11 20:52:01.274495
187	ruby-talk	Matlab	Ruby interaction with matlab	matlab, ruby, use, matlab-ruby, link, discussion, group	> how can we run ruby code in matlab and print results in matlab?\r\n\r\nThere is a way to call Matlab code from Ruby in matlab-ruby:\r\n\r\n    <a href="http://matlab-ruby.rubyforge.org/matlab-ruby/">http://matlab-ruby.rubyforge.org/matlab-ruby/</a>\r\n\r\nbut to run Ruby code in Matlab, probably you should ask this question in\r\nthe Matlab discussion group.	1.9.3	admin@tensor.heliohost.org	2011-12-19 20:01:00	Admin	Tensor	2012-05-02 12:13:45.447451	2012-05-11 19:51:22.957058
368	ruby-talk	Collection	Dynamically creating variables	collection, hash, key, value, csv, output	> I'm trying to write a script for an SNMP poller but I'm getting stuck trying\r\n> to work out how to create my variables. The script will be processing a CSV\r\n> of unknown length. It might be just 2 servers or it could be up to 20. I\r\n> cant work out how I can find the list of servers from the CSV and then\r\n> create variables for each one that I can keep track off through out the\r\n> programs life to out put what I want.\r\n\r\nYou do not want to create variables.  Instead, you use collections.\r\nWith a Hash you can pick an appropriate key (e.g. IP or domain name of\r\nserver).  Yo could also store values in Hashes.\r\n\r\nExample\r\n\r\n13:25:53 Temp$ ruby19 csv.rb\r\n{"172.16.0.1"=>\r\n  {"host"=>"172.16.0.1",\r\n   "port"=>"161",\r\n   "community"=>"Public",\r\n   "cluster"=>"Library",\r\n   "shortName"=>"mwg1",\r\n   "type"=>"mwg7",\r\n   "rpsTotal"=>"0",\r\n   "clientTotal"=>"0",\r\n   "serverTotal"=>"0"},\r\n "172.16.0.2"=>\r\n  {"host"=>"172.16.0.2",\r\n   "port"=>"161",\r\n   "community"=>"Public",\r\n   "cluster"=>"Library",\r\n   "shortName"=>"mwg2",\r\n   "type"=>"mwg7",\r\n   "rpsTotal"=>"0",\r\n   "clientTotal"=>"0",\r\n   "serverTotal"=>"0"}}\r\n13:26:12 Temp$ cat dat.csv\r\nhost,port,community,cluster,shortName,type,rpsTotal,clientTotal,serverTotal\r\n172.16.0.1,161,Public,Library,mwg1,mwg7,0,0,0\r\n172.16.0.2,161,Public,Library,mwg2,mwg7,0,0,0\r\n13:26:27 Temp$ cat -n csv.rb\r\n     1  require 'csv'\r\n     2  require 'pp'\r\n     3\r\n     4  head = nil\r\n     5  data = {}\r\n     6\r\n     7  CSV.foreach("dat.csv") do |row|\r\n     8    if head\r\n     9      tmp = {}\r\n    10\r\n    11      head.zip row do |h,v|\r\n    12        tmp[h] = v\r\n    13      end\r\n    14\r\n    15      data[row.first] = tmp\r\n    16    else\r\n    17      head = row.each &:freeze\r\n    18    end\r\n    19  end\r\n    20\r\n    21  pp data\r\n13:26:34 Temp$	1.9.3	shortcutter@googlemail.com	2012-01-24 13:27:00	Robert	Klemme	2012-05-02 12:49:26.415424	2012-05-05 20:20:53.787303
65	ruby-talk	Array	Array overwrite question	array, copy, marshal, load, dup	>> If on multi-dimension array?\r\n>>\r\n>> I try .dup it cant work!!\r\n\r\n> What version of ruby are you using? With both 1.8.7 and 1.9.2 Array#dup works for me...\r\n>\r\n> bb = [[1,2], [3,4], [5,6]]\r\n> cc = bb.dup\r\n>\r\n> p cc\r\n\r\nBut of course, the subarrays in cc and the subarrays in bb are the same \r\nobjects.\r\n\r\nbb = [[1,2], [3,4], [5,6]]\r\ncc = bb.dup\r\nbb[0] << 3\r\np cc\r\n# [[1, 2, 3], [3, 4], [5, 6]]\r\n\r\nYou can do the dups for the second level too yourself, or use this deep \r\ncopy trick:\r\n\r\ncc = Marshal.load(Marshal.dump(bb))	1.9.3	b.candler@pobox.com	2011-07-13 23:18:00	Brian	Candler	2012-05-02 11:54:42.596477	2012-05-11 15:38:50.138967
109	ruby-talk	Array	An array problem	array, include?, hash	> i have a 3 arrays(A,B,C) which are results of some analysis.\r\n\r\nI'd rather not make those constants (A,B,C) because they aren't as you stated.\r\n\r\n> Array A has all members such that array B and C are actually subsets of\r\n> A. The order of elements in array A is important.\r\n>\r\n> What i want is to list all members of A such that if an element in A is\r\n> a found in B or C produce a report such as\r\n>\r\n> element1 -b\r\n> element2 -b\r\n> element3 -c\r\n> element4 -b\r\n> ....\r\n>\r\n> where the order of elements in the report is as was in array A.\r\n>\r\n>\r\n> my rather silly implementation was\r\n> A.each do |element|\r\n>  if B.detect(element)\r\n>    puts "#{element}- b"\r\n>  end\r\n> end\r\n>\r\n> however i don't think this is the right way to do it since it does not\r\n> give me the designed result. Can someone help me spot the bug?\r\n\r\nYou want #include? instead of #detect:\r\n\r\na.each do |el|\r\n  case\r\n    when b.include? el\r\n      puts "#{el} -b"\r\n    when c.include? el\r\n      puts "#{el} -c"\r\n  end\r\nend\r\n\r\nAnother hint: if A is really large (say 10_000 elements or more) it\r\nmight be more efficient to convert B and C into Sets which have faster\r\ninclusion test.\r\n\r\nOr do it this way:\r\n\r\noccurrences = {}\r\n\r\n{b => "b", c => "c"}.each do |ar,label|\r\n  ar.each {|el| occurrences[el] = label}\r\nend\r\n\r\na.each do |el|\r\n  label = occurrences[el] and\r\n    puts "#{el} -#{label}"\r\nend	1.9.3	shortcutter@googlemail.com	2009-04-02 18:23:00	Robert	Klemme	2012-05-02 12:01:39.362172	2012-05-03 18:32:34.286237
130	ruby-talk	Language	Performance optimization using profile results	language, super, super(), arguments, implicit, ffi, library, ||=, save, time 	For those of you following along, I was able to shave off another 50 microseconds per client. I learned a few things along the way.\r\n\r\n1. Most Ruby runtimes cannot optimize a call to #super with implicit arguments very well.\r\n\r\ne.g.\r\n  def foo(a, b, c)\r\n    super  # <- slow because it has to figure out to pass (a,b,c)\r\n    a + b + c\r\n  end\r\n\r\nIt is more efficient to pass the specific arguments that the super-method should receive. If it should not receive any, use #super(). This let's the runtime avoid the work of interrogating the current method for its arguments and remarshalling them for the super-method.\r\n\r\n2. When using FFI and FFI::Struct, it is *not* efficient to call MyStruct.size on a regular basis. The FFI library has to recalculate the size of the structure each time and return that value. Stash the size in an ivar somewhere and use that instead of calling #size.\r\n\r\n3. When storing a few values, it's sometimes cheap & easy to just use a Hash. But in hot code, the work to look the element up is sometimes not worth it. If you are only storing a few values, use an ivar.\r\n\r\n4. Constants in Ruby are (unfortunately) not really constant. You can change the value of a constant though the runtime will kick out a warning. Since the Constants aren't constant, each access of a constant can incur a guarded lookup. The guard is there to see if the value referred to by the constant has changed since the last access. Again, in hot code this extra check can add up particularly if you are using lots of constants. Again, just stash the value in an ivar where lookup is fast.\r\n\r\n5. As always, there is no faster code than "no code." I found a few spots where I was recalculating the same value 3 times in a hot path. The calculation was fairly cheap, but when that hot path is called millions of times even the cheap calcs can be expensive. \r\n\r\n@value ||= cheap_when_called_once_but_expensive_when_called_millions_of_times\r\n\r\nThat does the trick. Wow, got to love those ivars.\r\n\r\n6. In hot code when looking up a value in an array, it's a tad faster to use #at instead of #[]. The reason is that #[] can take different arguments other than a simple index (like a Range). Those extra argument checks can add up.\r\n\r\nThese are all micro-optimizations and may not even be valid on your runtime of choice. However, if you are running time critical code and your lingua franca is Ruby, then some of these tricks can eek out a few extra microseconds for you.	1.9.3	cremes.devlist@mac.com	2011-12-15 16:28:00	Chuck	Remes	2012-05-02 12:04:59.370314	2012-05-06 19:22:51.055811
550	ruby-talk	instance_variable	Special cased?	obvject, self, class, @@var, @var, instance_variable	>> This confused me a bit\r\n>>\r\n>> class A\r\n>>  @a = 2\r\n>>  @@a = 3\r\n>>  def self.a\r\n>>    puts [@a, @@a]\r\n>>  end\r\n>> end\r\n>>\r\n>> class B < A; end\r\n>>\r\n>> A.a # [2, 3]\r\n>> B.a # [nil, 3]\r\n>>\r\n>> shouldn't @a just lookup @@a in the parent?  Different treatment for\r\n>> different types of variables?\r\n>\r\n> When you write:\r\n>\r\n>  class A\r\n>    @a = 2\r\n>\r\n> take into account that @a=2 is just parsed when loading class A for first\r\n> time.\r\n> When you later do "class B < A; end", the Ruby interpreter doesn't read the\r\n> line "@a = 2" again as it already parsed class A and just stored in memory the\r\n> methods of class A.\r\n\r\nAlso, instance variables are always pegged to "self".\r\n\r\n   class A\r\n     puts self    # A\r\n     @x = 1\r\n   end\r\n\r\n   class B < A\r\n     puts self    # B\r\n     puts @x      # nil\r\n   end\r\n\r\nEvery object, including every Class object, has its own supply of\r\ninstance variable "slots", and the meaning of @var is always\r\nself.instance_variable_get("@var").	1.9.3	dblack@rubypal.com	2009-12-19 14:16:00	David A.	Black	2012-05-04 22:04:12.01602	2012-05-04 22:04:45.211503
99	ruby-talk	Object	A define_method question	method, unbound, callable	> Is there any other way to take a method from another object and store it\r\n> into a proc or lambda object?\r\n\r\nYes. The result isn't a proc/lambda, but it is callable.\r\n\r\ns = "foo"\r\nm = s.method :reverse\r\nm2 = m.unbind\r\n\r\ns2 = "bar"\r\nm3 = m2.bind(s2)\r\nputs m3.call # ==> rab\r\n\r\nSee docs for Method and UnboundMethod.	1.9.3	vjoel@path.berkeley.edu	2009-07-07 12:06:00	Joel	VanderWerf	2012-05-02 11:59:32.64107	2012-05-03 18:19:04.128541
189	ruby-talk	System	Why "system" command does not read Ruby output file?	system, command, sort, verbose, output	Oh...\r\n\r\n$VERBOSE = true\r\n\r\nopen "tmp_out.txt", "w" do |file|\r\n  DATA.each do |line|\r\n    _, start, stop = line.split\r\n    (Integer(start)..Integer(stop)).each do |n|\r\n      file.puts n\r\n    end\r\n  end\r\nend\r\n\r\nsystem "sort tmp_out.txt"	1.9.3	kachick1@gmail.com	2012-02-17 18:14:00	Kenichi	Kamiya	2012-05-02 12:13:45.507381	2012-05-06 20:02:18.66888
447	ruby-talk	Array	Storing methods in arrays or hashes	array, hash, sequence, anonymous function, 1.9	> I have programmed in a language called lua before (which had real full-\r\n> fledged anonymous functions), and with a lua table, which is Lias\r\n> version of a hash and an arrary combined, you could do something like\r\n\r\nJust out of curiosity: where is the array in your Lua case?  In Ruby you \r\nwould not need an Array for this - or rather, you need either an Array \r\nor a Hash.\r\n\r\n> this:\r\n> \r\n> newtable = { 1 = function() print("hi from 1") end,\r\n>                    2 = function() print("hi from 2") end\r\n> }\r\n> \r\n> even though some of you haven't even ever heard of lua before, it's\r\n> easy to guess what this does: it creates two keys, 1 and 2, in a\r\n> table, newtable, and assigns two functions as their values. After\r\n> doing that, you can do this:\r\n> \r\n> newtable[1]()\r\n> \r\n> To call the function stored in newtable[1]. All that begs the\r\n> question: is something similar available in ruby?\r\n\r\nYes.  (I'm inclined to say "Of course!" :-))  Please see Bill's explanation.\r\n\r\nAdditional note: since the advent of Ruby 1.9 you can also use another syntax for anonymous functions:\r\n\r\nf = ->(args) { code }\r\n\r\nnewtable = {\r\n   1 => -> { puts "hi from 1" },\r\n   2 => -> { puts "hi from 2" },\r\n}\r\n\r\nIf you only have numeric indexes in sequence you can also use an Array instead of a Hash:\r\n\r\nnewtable = [\r\n   -> {}, # index 0\r\n   -> { puts "hi from 1" },\r\n   -> { puts "hi from 2" },\r\n]	1.9.3	shortcutter@googlemail.com	2009-12-24 13:59:00	Robert	Klemme	2012-05-02 13:55:56.405111	2012-05-11 17:23:54.566861
439	ruby-talk	Compile	Cross-Compile Ruby with OpenSSL for Angstrom Linux?	OpenSSL, cross compile, ruby, header files	> Is there something special i must use as command line parameter\r\n> of configure / make ? E.g. a path to include / libs ?\r\n> What is the file / directory structure of OpenSSL needed by ruby ?\r\n\r\nI'm not 100% sure about this (can't verify from where I'm at), but IIRC\r\nwhen compiling Ruby from scratch it will check for the availability of OpenSSL\r\nheaders in the standard locations.\r\n\r\nIf that somehow fails in your case, you could try to build the extension\r\nafter you compiled your Ruby w/o it.\r\n\r\nNavigate to the ext/openssl directory of your Ruby sources. Run\r\n\r\nruby extconf.rb --with-openssl-dir=/path/to/openssl\r\n\r\nWhere "path/to/openssl/" is the directory where OpenSSL was installed.\r\nIt's the right one if it contains a "lib" and an "include" directory.\r\n\r\nIf successful, this will generate a Makefile for you. Run\r\n\r\nmake && make install\r\n\r\nand it should now build the OpenSSL extension and deploy it.\r\n\r\nPS: Just found this, might help: <a href="http://www.ruby-forum.com/topic/90083">http://www.ruby-forum.com/topic/90083\r\n</a>	1.9.3	martin.bosslet@googlemail.com	2012-01-17 14:26:00	Martin	Bosslet	2012-05-02 13:52:40.009599	2012-05-11 20:51:23.071141
331	ruby-talk	SSH	pasing data between 2 win XP boxes via internet	ssh, openserver, logmein, link, net, data, pass	> I am needing to pass via the internet data from a Desktop PC to a Laptop\r\n> and viceversa in an adhoc manner.\r\n\r\nWhile not a Ruby solution:\r\nTake a look at LogMeIn[0].\r\n\r\nIt might be enough for your needs.\r\n\r\nNot a Ruby solution, either:\r\nIt'd be easy to setup an OpenSSH server on Windows[1] (one on each of \r\nyour machines), and simply use PuTTY, or WinSCP to transfer commands / \r\nfiles.\r\n\r\nKeep in mind: You *will* need a server/client combination. That's pretty \r\nmuch required (even P2P networks are client/server, it's just that you \r\nneed only one program to do both, on the same port). ;)\r\n\r\n[0] <a href="https://secure.logmein.com/US/products/free/">https://secure.logmein.com/US/products/free/</a>\r\n[1] <a href=http://sshwindows.sourceforge.net/">http://sshwindows.sourceforge.net/</a>	1.9.3	pg@thimian.com	2009-12-26 09:00:00	Phillip	Gawlowski	2012-05-02 12:41:36.262251	2012-05-11 20:26:40.344825
222	ruby-talk	Enumerable	Is high-speed sorting impossible with Ruby?	enumerable, sort, speed, $stdin, drop, sort_by, method	> A similar solution, at first glance only marginally different, is the\r\n> following:\r\n>\r\n>  $stdin.gets\r\n>> puts $stdin.each_line.sort_by(&:to_**i)\r\n>>\r\n>\r\n> Besides the fact that this solution is slower than yours, it uses a neat\r\n> little technique of Ruby 1.9, Enumerators.\r\n\r\n\r\n$stdin is already enumerable, so each_line isn't necessary\r\n\r\nputs $stdin.drop(1).sort_by(&:to_i)	1.9.3	josh.cheek@gmail.com	2011-11-28 19:05:00	Josh	Cheek	2012-05-02 12:20:59.098662	2012-05-11 16:42:24.779262
353	ruby-talk	Integer	"10,000" -> 10000	delimit, integer	> Besides .gsub(',', '').to_i, what's a good way to un-delimit a big number?\r\n\r\n  str.delete ","\r\n\r\nIf you like to check the syntax:\r\n\r\n  str.gsub /,(ddd)\b/, "\\1"	1.9.3	lists@bertram-scharpf.de	2009-06-13 19:09:00	Bertram	Scharpf	2012-05-02 12:44:07.912214	2012-05-11 15:24:33.837504
512	ruby-talk	Range	<, >, and ranges in a case statement	case, range, <, >, 	> category = case age\r\n>   when < 12 : "child"\r\n>   when 13..17 : "minor"\r\n>   when 18..24 : "young ad*lt"\r\n>   when 25..49 : "ad*lt"\r\n>   when 50..64 : "middle aged"\r\n>   when > 65   : "senior"\r\n>   else        : "not an age"\r\n> end\r\n\r\nAs the others pointed out, there's no easy way to do what you want to.\r\nOn the other hand, if you know the bounds of your inputs, your method\r\nisn't bad ; I'd write :\r\n\r\ncategory = case age\r\n  when  0...12  then "child"\r\n  when 12...18  then "minor"\r\n  when 18...25  then "young ad*lt"\r\n  when 25...50  then "ad*lt"\r\n  when 50...65  then "middle aged"\r\n  when 65...999 then "senior"\r\n  else               "not an age"\r\nend\r\n\r\nNote that the use of : within if's and case's has been deprecated in\r\nRuby 1.9 and the next versions.	1.8.6, 1.8.7	fred@lacave.net	2009-06-02 13:02:00	Fred	Senault	2012-05-04 15:13:16.577111	2012-05-04 15:13:16.577111
26	ruby-talk	Dir	Output: "puts"ing an array	dir, glob, array, file.puts, file	2\r\n\r\n>> In the "pickaxe" book I see how to use a "puts" to populate a file with\r\n>> data. I try the same thing, and, it works, but, it's listing the data as\r\n>> an array. How can I get separate lines for each item in the array?\r\n>> Thanks,\r\n>> Peter\r\n>>\r\n>> In the book:\r\n>> File.open("output.txt", "w") do |file|\r\n>> file.puts "Hello"\r\n>> file.puts "1 + 2 = #{1+2}"\r\n>> end\r\n>> # Now read the file in and print its contents to STDOUT\r\n>> puts File.read("output.txt")\r\n>> produces:\r\n>> Hello\r\n>> 1 + 2 = 3\r\n>>\r\n>> My script:\r\n>> Dir.chdir("L:/png/69000")\r\n>> files = Dir.glob("*.png")\r\n>\r\n> Dir.glob returns an Array\r\n>>\r\n>> File.open("F:/workflows/graphics/receipts/pngfiles.txt", "w") do |file|\r\n>>  file.puts "#{files}"\r\n>> end\r\n>\r\n> The default Array#to_s is like Array#join('').  You probably want to do\r\n> either:\r\n>  file.puts files.join("\r\n")\r\n> or iterate on the files:\r\n>  files.each do |pngfilename|\r\n>    file.puts pngfilename\r\n>  end\r\n\r\nIt's even simpler:\r\n\r\nfile.puts files	1.9.3	shortcutter@googlemail.com	2009-06-09 16:07:00	Robert	Klemme	2012-05-02 11:44:39.058117	2012-05-05 20:05:01.080898
103	ruby-talk	Array	Dynamically create an unknown number of arrays	array, overwrite, superfluous, assignment	> I need to create an unknow number of arrays on the fly (could be 1 array\r\n> could be 10, I don't know), is there a way to do this in Ruby and also\r\n> name them dynamically? I also need to set those array's to a collection\r\n> of stuff found in a table. My Ruby is pretty rusty, and I am not sure if\r\n> I can simply set an array to a group of stuff. If I have rows in a table\r\n> that can be accessed by saying @user.table_name, can I say:\r\n> \r\n> a = Array.new\r\n> a = @user.table_name\r\n\r\nYou can say, or rather: write, that - but the effect would be \r\ndisappointing.  The second assignment simply overwrites the first one \r\nrendering it completely superfluous.\r\n\r\nYou can do this\r\n\r\narrays = Array.new(how_many) {[]}	1.9.3	shortcutter@googlemail.com	2009-02-06 18:02:00	Robert	Klemme	2012-05-02 12:00:12.40464	2012-05-05 20:10:07.877636
264	ruby-talk	Symbol	Please give simple example of when to use symbols	symbol, string, use, preferred, rule, internal, data	> When do you normally use a symbol instead of a string?\r\n\r\nMy rule of thumb is:\r\n- use a String when handling external data, e.g.\r\n  data read/written to a file/database or\r\n  data displayed to the user ...\r\n- use a Symbol when handling internal data, e.g.\r\n  description of a state, name of a method ...	1.9.3	kd.gundermann@zwick-edelstahl.de	2011-07-25 13:21:00	Klaus-dieter	Gundermann	2012-05-02 12:31:07.562915	2012-05-06 22:13:29.376404
145	ruby-talk	Array	Searching an array for a pattern derived from another array	array, search, generated pattern, ip, address, exception, semantics 	> Here is what I'm trying to find:\r\n> \r\n> Given two arrays containing IP addresses like the ones below, how would I\r\n> search for the first element in 'servers' that pattern matches and element\r\n> in 'nics' where only the first 2 parts of the IP addresses need to match,\r\n> like 192.168.*.* or 10.14.*.* or 98.139.*.*\r\n>\r\n> servers = Array["192.168.0.251","10.14.0.142","98.139.180.149"]\r\n> nics = Array["10.10.0.255","173.194.37.16","10.14.0.170"]\r\n>\r\n> I've got some kind of beginning with the code below but I'm stuck. Any\r\n> hints?\r\n>\r\n> ----------------\r\n> log_server = "nothing"\r\n>\r\n> until log_server != "nothing" servers.each |thisip| do\r\n>\r\n> # Consider only the first two parts of the 'thisip' IP address (192.168.*.*\r\n> or 10.14.*.* or 98.139.*.*)\r\n> # Compare it with each element in 'nics'\r\n> # Set 'log_server' equal to the first value of 'thisip' that pattern\r\n> matches an element in 'nics'\r\n> log_server = thisip\r\n>\r\n> end\r\n> ----------------\r\n\r\nI would approach this like this:\r\n\r\n1. Write a method which receives two arguments (servers and nics of course).\r\n2. Let the method start by preparing the data, i.e. #map both arrays into something which is quicker to match.\r\n3. iterate by doing servers_converted.each or maybe servers_converted.each_with_index and returning from the method on first match.\r\n4. return nil at the end of the method (nothing found) or raise an exception depending on the wanted semantics\r\n\r\nNow, how to do the matching?  I would not use regular expressions for the matching as you really want to match numeric values.  Conversion could use ip.scan(/d+/).map(&:to_i).  You could use Array#[] to\r\nobtain a two element Array from a four element Array.\r\n\r\nYou could as well search for a gem which deals with IP addresses. Since the problem is so common chances are that such a beast exists.	1.9.3	shortcutter@googlemail.com	2011-12-13 11:12:00	Robert	Klemme	2012-05-02 12:07:07.701976	2012-05-11 17:19:07.878599
427	ruby-talk	Emoticons	Emoticon Code	emoticon, example, beardy, code, use, example	> Can anyone think of more emoticons that I could use in my code?\r\n\r\nThere's the beardy one, :[]=\r\n\r\n(I have actually used this one for real)	1.9.3	b.candler@pobox.com	2012-03-25 18:00:00	Brian	Candler	2012-05-02 12:59:50.784837	2012-05-06 22:47:46.933865
224	ruby-talk	Module	When to use include over extend?	module, include, extend, scope, recommend	> I have a set of modules that contain methods intended for the class\r\n> level. As such, does in make more sense to use straight interface:\r\n>\r\n>     class Foo\r\n>       extend ModuleInQuestion\r\n>       ...\r\n>     end\r\n>\r\n> Or, would you say it is better to refactor to use more idiomatic\r\n> inclusion, using some form ClassMethods/included callback allowing:\r\n>\r\n>     class Foo\r\n>       include ModuleInQuestion\r\n>       ...\r\n>     end\r\n>\r\n> What say you?\r\n\r\nUse #extend because include will also place methods in the scope of \r\ninstances which is not what you want.  Note: you can make it work with \r\ninclude but IMHO that makes things overly complicated.	1.9.3	shortcutter@googlemail.com	2012-03-27 09:35:00	Robert	Klemme	2012-05-02 12:20:59.159292	2012-05-06 17:42:25.48092
53	ruby-talk	Gem	Find from array and move	gem, pathname, set, require, array, pathnames	> I'm needing to cull 900 files from about 3500 files in 100 different\r\n> directories.\r\n>\r\n> I have an array with the 900 files ie. ["2100_01", "2102_05", "2105_04",\r\n> "etc....."]\r\n\r\nThat would be an array of fileNAMES.\r\n\r\n> The files in question are named like so...."2100_01.aif"\r\n>\r\n> Based on the array, I need to match/find these  files from within the\r\n> 100 directories and copy/move each one into a new single directory.\r\n\r\nPathname has quite a few nice tools for this.  Something along these\r\nlines could work:\r\n\r\nrequire 'set'\r\nrequire 'pathname'\r\n\r\narray = ... # as described\r\nsource = ... # source directory path\r\ntarget = ... # target directory path\r\n\r\nindex = array.to_set # more efficient lookup\r\ntgt = Pathname(target)\r\n\r\nabort "Not a directory: #{tgt}" unless tgt.directory?\r\n\r\nPathname(source).find do |f|\r\n  f.file? and index.include? f.basename('.aif') and\r\n    f.rename(tgt + f.basename)\r\nend	1.9.3	shortcutter@googlemail.com	2012-03-18 13:47:00	Robert	Klemme	2012-05-02 11:52:04.472299	2012-05-11 15:59:12.589662
255	ruby-talk	String	Print and puts. What inputs do they require?	string, print, puts, use, difference, ri, stdout, explanation	> print while gets != "42"\r\n>\r\n> I saw this code snippet as the answer to the first question on codechef.\r\n>\r\n> How does print know to output what "gets" receives? I thought you\r\n> required a string in the form of a variable or string literal in front\r\n> of print. Also, when replacing print with puts how come it doesn't\r\n> output the numbers any more? I know that puts adds a newline to the end\r\n> of a string if it doesn't exist, but from the example above this doesn't\r\n> seem to be the only difference.\r\n\r\nIn this case, `ri` is your friend. Check it:\r\n\r\n% ri gets\r\n= .gets\r\n\r\n(from ruby core)\r\n=== Implementation from IO\r\n  ios.gets(sep_string=$/)   => string or nil\r\n\r\nReads the next ``line'' from the I/O stream; lines are separated by\r\nsep_string. A separator of nil reads the entire contents,\r\nand a zero-length separator reads the input a paragraph at a time (two\r\nsuccessive newlines in the input separate paragraphs). The stream must be\r\nopened for reading or an IOError will be raised. The line read in will be\r\nreturned and also assigned to $_. Returns nil if called at end of file.\r\n    \r\n    File.new("testfile").gets   #=> "This is line one"\r\n    $_                          #=> "This is line one"\r\n\r\n% ri print\r\n\r\n(from ruby core)\r\n=== Implementation from IO\r\n  ios.print()             => nil\r\n  ios.print(obj, ...)     => nil\r\n\r\nWrites the given object(s) to ios. The stream must be opened for\r\nwriting. If the output record separator ($</code>) is not <code>nil, it will\r\nbe appended to the output. If no arguments are given, prints $_. Objects that\r\naren't strings will be converted by calling their to_s method. With no\r\nargument, prints the contents of the variable $_. Returns nil.\r\n    \r\n   $stdout.print("This is ", 100, " percent.")\r\n\r\nproduces:\r\n \r\n   This is 100 percent.	1.9.3	ryand-ruby@zenspider.com	2012-01-25 00:59:00	Ryan	Davis	2012-05-02 12:29:21.586889	2012-05-06 18:59:52.266454
201	ruby-talk	Language	How are closures implemented?	language, closure, implementation, define_method, scope, lambda, variable, store 	> Ok ... modifying your example\r\n>\r\n> class Y\r\n>  z = 10\r\n>\r\n>  define_method :f do |x|\r\n>    [\r\n>      lambda { z += z     ; puts("z += z:   z=#{z}, x==#{x}"); x },\r\n>      lambda { x += 0.5;  ; puts("x += 0.5: z=#{z}, x=#{x}="); x },\r\n>    ]\r\n>  end\r\n> end\r\n>\r\n> a, b = Y.new.f(0)\r\n>\r\n> 3.times do\r\n>  puts("a: #{a.call}")\r\n>  puts("b: #{b.call}")\r\n> end\r\n>\r\n> Is z "on the stack" or "merely" in scope?\r\n\r\nI think both.\r\n\r\n> As I understand it, z is bound to the closure.\r\n\r\nCorrect.\r\n\r\n> But how does Ruby know?\r\n\r\nz is a local variable in the scope which invokes define_method and\r\nthus visible to the method body because you did not use def which\r\nintroduces a completely separate scope and not a nested scope as a\r\nblock does.  From the scoping perspective your example is no different\r\nthan\r\n\r\nz = 0\r\n\r\n10.times.to_a.each do |y|\r\n  z += y\r\nend\r\n\r\nThe only difference really is that by using define_method you retain\r\n_another_ closure as method body from which the (additionally to\r\nstoring the lambdas in a variable after the method call).  So you have\r\n\r\n1. closure is the method body and it has access to z because that is\r\nin the scope visible to the block passed to #define_method.\r\n2. and 3. closure are the two lambdas returned which access the same z\r\nalso visible to the first closure.\r\n\r\nTypically programming language implementations store local variables\r\non the stack so it does not make a difference whether we are talking\r\nabout a method argument or local variable - both would sit on the\r\nstack.  For the details you would have to look at the source.	1.9.3	shortcutter@googlemail.com	2012-02-23 17:35:00	Robert	Klemme	2012-05-02 12:16:53.523894	2012-05-06 19:02:02.676941
216	ruby-talk	Hash	Attr_accessor for hash keys	hash, attr_accessor, flatten	> Is there a way to use attr_accessor, or something like it (without\r\n> writing it from scratch), for hash keys?  For instance:\r\n>\r\n>     class Foo\r\n>       attr_accessor :bar[:one], :bar[:two]\r\n>       def initialize(bar)\r\n>         @bar = bar\r\n>       end\r\n>     end\r\n>\r\n> Obviously, :bar[:one] and :bar[:two] won't work, because symbols don't\r\n> have [] methods, but that should illustrate the general gist of what I'm\r\n> asking (I hope).  I'd just like to avoid the clutter of writing a bunch\r\n> of basic accessors myself, the long way, in a class definition where I'd\r\n> like to keep all the data in a hash but have direct accessor method ways\r\n> to work with specific key=>value pairs.\r\n\r\nirb(main):001:0> Foo = Struct.new :one, :two\r\n=> Foo\r\nirb(main):002:0> f = Foo.new\r\n=> #<struct Foo one=nil, two=nil>\r\nirb(main):003:0> f[:one]\r\n=> nil\r\nirb(main):004:0> f[:one] = 1\r\n=> 1\r\nirb(main):005:0> f.one\r\n=> 1\r\nirb(main):006:0> f.one = 111\r\n=> 111\r\nirb(main):007:0> f[:one]\r\n=> 111\r\nirb(main):008:0> Hash[*f.members.zip(f.to_a).flatten]\r\n=> {:one=>111, :two=>nil}\r\nirb(main):009:0> class Struct\r\nirb(main):010:1> def to_hash;Hash[*members.zip(to_a).flatten];end\r\nirb(main):011:1> end\r\n=> nil\r\nirb(main):012:0> f.to_hash\r\n=> {:one=>111, :two=>nil}	1.9.3	shortcutter@googlemail.com	2011-07-22 11:35:00	Robert	Klemme	2012-05-02 12:19:46.247594	2012-05-03 19:31:25.656765
152	ruby-talk	NArray	NArray - from coordinates to index	narray, coordinates, index, array, math, base convert	> How can we convert a coordinates to an index?\r\n> \r\n> I'm using the awesome NArray library with some arrays of 1, 2, 3, or\r\n> more dimensions.  For instance, if we consider this 3x3 array of 2\r\n> dimensions ...\r\n> \r\n>    NArray.int(3,3):\r\n>    [ [ 0, 0, 0 ],\r\n>      [ 0, 0, 0 ],\r\n>      [ 0, 0, 0 ] ]\r\n> \r\n> ... the square of the coordinate [0,1] have also the index of 3 (and\r\n> according to the NArray specs, a[3] is same as a[0,1] if a is 3x3\r\n> array).\r\n> \r\n> Is there a simple way to find the index, from the coordinates?\r\n\r\nUse the coordinates as a base N number to convert to a base 10 index:\r\n\r\na[0,1] == 10b3 == 1*3^1+0*3^0 == 1*3+0*1 == 3	1.9.3	ryand-ruby@zenspider.com	2012-01-08 19:38:00	Ryan	Davis	2012-05-02 12:09:52.322351	2012-05-06 17:48:20.802899
409	ruby-talk	Struct	Parsing log with date time entry	struct, parse, log, date, time, entry, time, compare	You can easily cook yourself a range which uses comparisons for matching:\r\n\r\nirb(main):005:0> CompareRange = Struct.new :first, :last do\r\nirb(main):006:1* def ===(x)\r\nirb(main):007:2> x >= first && x < last\r\nirb(main):008:2> end\r\nirb(main):009:1> end\r\n=> CompareRange\r\nirb(main):010:0> r=CompareRange.new Time.now-10,Time.now+2\r\n=> #<struct CompareRange first=2012-01-17 20:42:28 +0100,\r\nlast=2012-01-17 20:42:40 +0100>\r\nirb(main):011:0> a=10.times.map {|i| r.first - 100 + i * 15}\r\n=> [2012-01-17 20:40:48 +0100, 2012-01-17 20:41:03 +0100, 2012-01-17\r\n20:41:18 +0100, 2012-01-17 20:41:33 +0100, 2012-01-17 20:41:48 +0100,\r\n2012-01-17 20:42:03 +0100, 2012-01-17 20:42:18 +0100, 2012-01-17\r\n20:42:33 +0100, 2012-01-17 20:42:48 +0100, 2012-01-17 20:43:03 +0100]\r\nirb(main):012:0> a.grep r\r\n=> [2012-01-17 20:42:33 +0100]\r\n\r\nNote, this is simplistic but illustrates the idea.  You probably also want to implement =~ operator.	1.9.3	shortcutter@googlemail.com	2012-01-17 20:44:00	Robert	Klemme	2012-05-02 12:56:17.494881	2012-05-14 19:42:33.096636
173	ruby-talk	Class	String evaluation	class, dynamic	>> It's incredibly rare to need to resort to string evaluation. This example\r\n>> can be rewritten as:\r\n>>\r\n>> bar = "Hello" + "World"\r\n>>\r\n>> klass = Class.new do\r\n>>   def initialize(name='World')\r\n>>     @name = name\r\n>>   end\r\n>>\r\n>>   def greet\r\n>>     return "Hello, #{@name}"\r\n>>   end\r\n>> end\r\n>>\r\n>> Object.const_set bar, klass\r\n>\r\n\r\nIf the class name is dynamic (meaning, it comes from some input\r\noutside the program code) then the only reasonable thing is to derive\r\nthe definition of the class also from input.  Having a class with a\r\ndynamic name whose behavior is always defined in the same way would be\r\nuseless.  Also, you would want to have several of them because\r\notherwise a single class with a fixed name and input driven definition\r\nwould be sufficient.  If you have multiple classes with dynamic\r\ndefinitions (and probably names as well, but they could also be\r\nunnamed) then you need a way to select them.  This could be something\r\nwhich is used as key in a Hash (quite efficient) - but you could also\r\nhave a dynamic mechanism, where each class is asked whether it feels\r\nresponsible.\r\n\r\ncl = []\r\n\r\ncl << Class.new do\r\n    def self.my_job?(x)\r\n      x % 2 == 0\r\n    end\r\n\r\n    def show(x)\r\n      printf "I EVEN show you %d.", x\r\n    end\r\n  end\r\n\r\ncl << Class.new do\r\n    def self.my_job?(x)\r\n      x % 2 != 0\r\n    end\r\n\r\n    def show(x)\r\n      printf "%d is ODD.", x\r\n    end\r\n  end\r\n\r\n\r\nirb(main):022:0> 5.times do |i|\r\nirb(main):023:1*   cls =3D cl.find {|c| c.my_job? i}\r\nirb(main):024:1>\r\nirb(main):025:1*   if cls\r\nirb(main):026:2>     obj =3D cls.new\r\nirb(main):027:2>     obj.show i\r\nirb(main):028:2>   else\r\nirb(main):029:2*     $stderr.printf "Nobody wants %d\r\n", i\r\nirb(main):030:2>   end\r\nirb(main):031:1> end\r\nI EVEN show you 0.\r\n1 is ODD.\r\nI EVEN show you 2.\r\n3 is ODD.\r\nI EVEN show you 4.\r\n=> 5	1.9.3	shortcutter@googlemail.com	2012-01-29 23:28:00	Robert	Klemme	2012-05-02 12:13:45.030902	2012-05-03 18:29:32.359104
77	ruby-talk	OptionParser	Stupid optparse question	optparse, argv, empty, parse, arguments, emptiness 	>>> How can I make my code print the usage even if zero options are given? \r\n>>> I had *thought* opts.on_tail would do this, but it doesn't seem to be\r\n>>> working.  The usage prints properly if I use -h though:\r\n>>> ---\r\n>>> require 'optparse'\r\n>>>\r\n>>> options = {}\r\n>>\r\n>> o = OptionParser.new do |opts|\r\n>>\r\n>>>   opts.banner = "Usage: #$0 [options] [terms]"\r\n>>>\r\n>>>   opts.on("-a", "--automatic", "Use current Git repo to determine\r\n>>> current and next release branch and tag names") do |a|\r\n>>>     options[:automatic] = a\r\n>>>   end\r\n>>>\r\n>>>   opts.on("-n", "--next-branch [nextbranch]", "The branch you want\r\n>>> this script to create.") do |n|\r\n>>>     options[:nextbranch] = n\r\n>>>   end\r\n>>>\r\n>>>   opts.on("-t", "--tag [tag]", "The tag you want the new branch\r\n>>> created from.") do |t|\r\n>>>     options[:tag] = t\r\n>>>   end\r\n>>>\r\n>>>   opts.on_tail("-h", "--help", "Show this help message.") do\r\n>>>      puts opts\r\n>>>      exit\r\n>>>   end\r\n>>>\r\n>>> end\r\n>>\r\n>> o.parse!\r\n>>\r\n>> if ARGV.empty?\r\n>>  puts o\r\n>> else\r\n>>  # do whatever\r\n>> end\r\n\r\nWhen I think of it you probably also want to consider this variant:\r\n\r\no = OptionParser.new do |opts|\r\n  ...\r\nend\r\n\r\nif ARGV.empty?\r\n  puts o\r\nelse\r\n  o.parse! ARGV\r\n  # main\r\nend\r\n\r\nDepends on when you want to detect the "emptiness".\r\n\r\nBtw, on_tail only determines where the option is printed when printing usage IIRC.	1.9.3	shortcutter@googlemail.com	2010-11-16 09:04:00	Robert	Klemme	2012-05-02 11:55:46.447716	2012-05-06 19:25:49.821649
464	ruby-talk	System	Colores en la terminal	color, terminal, ansi, escape sequence	> I'm doing a terminal program and need to know if you can put text color.\r\n\r\nYou can, but I haven't found any way to do it reliably across both Windows\r\nand Unix.\r\n\r\nIf you are in Unix, go to the terminal and run:\r\n$ ruby -e 'puts "e[01mBLACK e[32mRED e[33mYELLOW e[34mBLUE e[35mMAGENTA\r\ne[36mCYAN e[37mWHITE e[0mNONE"'\r\n\r\nThe dollar sign indicates my prompt. The e is the escape key (top left on your keyboard, \r\nansi character 27), then a left bracket. This e[ is called an escape sequence, and you can \r\nput codes after it that have special meanings. 3#m means change the foreground, 4#m means \r\nchange the background (ie run the same code above but change the 3s to 4s.\r\n\r\nFor more about escape sequences, check out:\r\n\r\n<a href="http://en.wikipedia.org/wiki/ANSI_escape_code">http://en.wikipedia.org/wiki/ANSI_escape_code</a>\r\n\r\nThere are also a ton of gems that do this (you might make one yourself, it's a fun short exercise, \r\nand will help you become familiar with how escape sequences work).	1.9.3	josh.cheek@gmail.com	2011-08-04 14:12:00	Josh	Cheek	2012-05-02 14:04:45.148543	2012-05-11 20:57:20.319598
384	ruby-talk	String	XOR two binary strings	string, binary, xor, unpack, map, to_i, to_s	>> I am having difficulty finding how to XOR 2 binary strings.\r\n>> Is there a builtin function for this ?\r\n>> Something like\r\n>> return string_one ^ string_two\r\n \r\n> All I can think of at the moment:\r\n> \r\n> a = [0b00000001, 0b00001000].pack("C*")\r\n> b = [0b10000001, 0b01000000].pack("C*")\r\n> \r\n> c = a.unpack("C*").zip(b.unpack("C*"))\r\n> c = c.map {|x,y| x^y}\r\n> c = c.pack("C*")\r\n> p c\r\n\r\nThere's also\r\n\r\nirb(main):002:0> ("00000001".to_i(2) ^ "0110".to_i(2)).to_s(2)\r\n=> "111"	1.9.3	shortcutter@googlemail.com	2009-01-13 08:20:00	Robert	Klemme	2012-05-02 12:52:22.583191	2012-05-06 17:49:56.475321
350	ruby-talk	Array	Remove ends of array and interleave	array, interleave, join, zip, remove, first, last, ends	> 1. Trying to remove the first and last element in an array in Ruby:\r\n> def remove_ends(a)\r\n>   a.pop\r\n>   a.shift\r\n> end\r\n\r\nIs your problem, that a gets altered? If so, try:\r\n\r\ndef remove_ends(a)\r\n  a[1..-2]\r\nend\r\n\r\n> 2. I'm trying to interleave 2 arrays. I've seen some examples online but\r\n\r\na = [1,2,3]\r\nb = ['a','b','c']\r\n\r\na.zip(b).join  # => "1a2b3c"	1.9.3	g.diemant@gmx.net	2011-12-14 10:18:00	Gunther	Diemant	2012-05-02 12:44:07.838383	2012-05-06 23:46:34.81947
254	ruby-talk	File	Copy file into new without dups, eol problem	unique, uniq, file, readlines	>> But what about the dups?  What constitutes a duplicate?  If it is just\r\n>> raw content, you could use "sort -u" (standalone command).\r\n>\r\n> Again from the original example, the records to compare for uniqueness\r\n> are simple lines.  Of course that simplicity belies the issue of line\r\n> endings. ;-)\r\n\r\nAh, I overlooked the call to #uniq.  I think we should be able to fix \r\nthe original with a small insertion:\r\n\r\nFile.open("newf.txt", "w+") { |file| file.puts\r\nFile.readlines("oldf.txt").each(&:chomp!).uniq }\r\n\r\nAlthough from an efficiency point of view another approach would be \r\npreferable:\r\n\r\nFile.open "oldf.txt" do |in|\r\n  File.open "newf.txt", "w" do |out|\r\n    last = nil\r\n\r\n    in.each_line do |line|\r\n      line.chomp!\r\n      out.puts line unless line == last\r\n      last = line\r\n    end\r\n  end\r\nend\r\n\r\nNote that opening "newf.txt" before opening "oldf.txt" will lead to an \r\nempty file being written in case "oldf.txt" does not exist even though \r\nan exception is thrown.\r\n\r\n> Also, the OP appears to be running on Windows, so "sort -u" is not\r\n> available out of the box.\r\n\r\nRight, I'm so used to cygwin that I keep forgetting not everybody has it \r\ninstalled. :-)	1.9.3	shortcutter@googlemail.com	2012-03-29 18:11:00	Robert	Klemme	2012-05-02 12:29:21.544108	2012-05-03 23:12:15.380273
346	ruby-talk	Process	How to know if a process is zombie?	process, zombie, kill, waitpid, signal, handler, setup	> After some forks I need to know if a process still is alive or not, but in case it's alive \r\n> I also need to know if it's a zombie process (it died without Process.wait or Process.detach).\r\n>\r\n> Unfortunately I couldn't find how to know it using Process module:\r\n>\r\n>   <a href="http://ruby-doc.org/core/classes/Process.html">http://ruby-doc.org/core/classes/Process.html</a>\r\n>   <a href="http://ruby-doc.org/core/classes/Process/Status.html">http://ruby-doc.org/core/classes/Process/Status.html</a>\r\n>\r\n> Is there any other way to determine if a given PID is zombie?\r\n\r\nI believe you can use Process.kill(0, suspicious_pid) and if you get "Errno::ESRCH: No such process" it does not exist any more or is a zombie.  Then you can use Process.waitpid(suspicious_pid, Process::WNOHANG) to end his martyrdom and get the exit code.\r\n\r\nIt's probably better to set up a signal handler though.  But that totally depends on your use case.	1.9.3	shortcutter@googlemail.com	2009-12-26 18:51:00	Robert	Klemme	2012-05-02 12:44:07.770496	2012-05-11 20:28:21.620187
381	ruby-talk	Thread	Run an script without waiting to be done	thread, spawn, script, sleep, join, process, finish	> I would like to know if it is possible to run an script without\r\n> waiting to be run. I mean, can I call another ruby script and not be\r\n> waiting for it to finish.\r\n> myScript1.rb\r\n> sleep 300\r\n>\r\n> myScript2.rb\r\n> system("ruby myScript.rb")\r\n>\r\n>\r\n> so what I want is not be waiting until the end of myScript1.rb\r\n>\r\n\r\nThis works on windows with just about any ruby:\r\n\r\nt = Thread.new {\r\n   system("ruby myScript.rb")\r\n}\r\n\r\ndo_something_else\r\n\r\nt.join # optionally, wait for process to finish	1.9.3	joelvanderwerf@gmail.com	2011-11-22 11:02:00	Joel	VanderWerf	2012-05-02 12:51:40.180495	2012-05-11 15:24:56.229709
162	ruby-talk	Hash	How to view the structure of a hash?	hash, pretty, print, view, structure, wirble, irb, color	> This doesn't really change much in my opinion because\r\n> the values are so big.\r\n\r\nIf your hash is really huge, I would randomly select only a subset of \r\nthese and pretty print them.\r\n\r\nAnd also use Wirble if you do this in IRB, it really is colouring \r\nnicely.\r\n\r\nVia pp. pretty print.\r\n\r\n  require 'pp'\r\n  pp hash	1.9.3	shevegen@linuxmail.org	2011-12-09 16:10:00	Marc	Heiler	2012-05-02 12:11:52.018994	2012-05-11 16:24:16.8583
460	ruby-talk	System	CLI: "System" command	system, io, trueclass, io, popen, open3, capture, string, output	> I was messing around with the "system" command in Ruby!\r\n> That's really cool, but a question immediately sprang out while using it\r\n> : I noticed that its output is a TrueClass, but how could I use the\r\n> output made of directories and files as string?\r\n> For example : if I cast a\r\n>\r\n> system('ls')\r\n>\r\n> it will return me a variety of directories and files. So, let's put that\r\n> I want to scan this result to find out which directories are named how\r\n> (with a Regexp), is there a way to read this output or the is solely a\r\n> TrueClass?\r\n\r\nIf you're playing around with "system", checking out "IO.popen" and \r\n"open3" could also be of interest.	1.9.3		2011-12-21 10:20:00			2012-05-02 14:02:36.749943	2012-05-11 13:31:41.819691
455	ruby-talk	Block	How to make a command-line string code block argument?	block, argv, &block, string, convertm method, pass, yield, eval	> If a exec\r\n> Ruby myprog.rb  '{ print " hi body "}'\r\n>\r\n> How to convert that string to a real block to pass it to a method\r\n>\r\n> def what_u_ask&b\r\n>    yield\r\n> End\r\n>\r\n> what_u_ask ARGV[0]\r\n>\r\n>\r\n> This does not work for me. Thank you.\r\n>\r\n\r\nThis should work.\r\n\r\ndef what_u_ask &b\r\n   yield\r\nend\r\n\r\neval "what_u_ask #{ARGV[0]}"	1.9.3	sduncan@wetafx.co.nz	2012-02-07 08:39:00	Sam	Duncan	2012-05-02 13:59:50.519224	2012-05-11 16:20:36.566776
456	ruby-talk	Variable	Accessing class instance variables from an instance?	instance, variable, class	> An instance variable is prefaced by @, where a class variable is \r\n> prefaced by @@.  Here's a small example:\r\n> \r\n> class Thingy\r\n>  @@thingies = 0\r\n>  def initialize(name)\r\n>    @my_name = name\r\n>    @@thingies += 1\r\n>    puts "A new thingy is here!"\r\n>  end\r\n> \r\n>  def whatsMyName\r\n>    puts "This thingy is named '#{@my_name}'."\r\n>  end\r\n> \r\n>  def howMany?\r\n>    puts "So far you have created #{@@thingies} thingies."\r\n>  end\r\n> end\r\n> \r\n> The @@thingies class variable is shared by all instances of the class. \r\n> Changing that variable in any one of the classes will change it for all \r\n> of them.\r\n> \r\n> Is this what you were looking for?\r\n\r\nI think he is  looking for class instance variables.\r\n\r\nclass Foo\r\n  @class_ivar = 3\r\n\r\n  def self.class_ivar() @class_ivar; end\r\n\r\n  def bar(a)\r\n    puts "#{a} + #{self.class.class_ivar} = #{a + self.class.class_ivar}"\r\n  end\r\nend\r\n\r\nfoo = Foo.new\r\nfoo.bar(6) # 6 + 3 = 9	1.9.3	cremes.devlist@mac.com	2011-12-20 12:34:00	Chuck	Remes	2012-05-02 13:59:50.531123	2012-05-03 17:49:42.807714
430	ruby-talk	String	Anything better than klass = eval("#{task_class}")	constants, scope, camelCase	>>> Seems a bit to verbose for me but I don't know any other solution to convert\r\n>>> a string containing a class name to a constant of that class name...\r\n>>> Excepted rails way : task_class.camelize.constantize which is verbose too...\r\n>>>\r\n>>\r\n>>  Object.const_get("String")\r\n>>>>\r\n>>> => String\r\n>>\r\n>\r\n> Or dealing with things like Admin::User or Net::HTTP\r\n>\r\n>  # from Jim Weirich (based on email correspondence)\r\n>  def constantize(camel_cased_word)\r\n>    camel_cased_word.\r\n>      sub(/^::/,'').\r\n>      split("::").\r\n>      inject(Object) { |scope, name| scope.const_get(name) }\r\n>  end\r\n>\r\n> It may be more verbose, but it is much safer that plain 'ole eval()\r\n>\r\n\r\nActually, I don't think this is entirely right, since const_get will find\r\nconstants found in outer scopes.\r\n\r\nFor example constantize("MyModule::Object") would return ::Object\r\n\r\nSo a little better would be:\r\n\r\n def constantize(camel_cased_word)\r\n   camel_cased_word.\r\n     sub(/^::/,'').\r\n     split("::").\r\n     inject(Object) { |scope, name| scope.const_defined?(name) ?\r\n       scope.const_get(name) : scope.const_missing(name) }\r\n end	1.9.3	rick.denatale@gmail.com	2009-04-01 12:09:00	Rick	DeNatale	2012-05-02 13:00:34.168014	2012-05-11 15:25:43.207911
419	ruby-talk	Debug	different results with File.exists?	debug, ruby, p, puts, output	Additional hint: use p to debug output what you have. e.g.\r\n\r\npath=gets\r\np path\r\nif File.exists?(path) then	1.9.3	shortcutter@googlemail.com	2009-09-08 14:59:00	Robert	Klemme	2012-05-02 12:57:36.113959	2012-05-03 23:55:32.208865
257	ruby-talk	Hash	How to pass a list of conditions as parameters?	hash, interpolate, string, values, 1.9, method, core	> Could you tell me where I could I learn more about this\r\n> part within the array? ----->  %{number}\r\n>\r\n> What keyword do I need to type on google to find more information about\r\n> this process?\r\n\r\nThat is interpolating hash values in a string based on their key - it \r\nwas just an easy way to get that number in the string twice and only \r\nspecify it once =]\r\nIt is new in 1.9.x I believe and is similar to functionality found in \r\npython string interpolation with dicts.\r\n\r\n<a href="http://www.ruby-doc.org/core-1.9.3/String.html#method-i-25">http://www.ruby-doc.org/core-1.9.3/String.html#method-i-25</a>	1.9.3	sduncan@wetafx.co.nz	2011-12-14 16:46:00	Sam	Duncan	2012-05-02 12:30:03.851554	2012-05-11 20:02:01.646116
225	ruby-talk	Operator	Newbie: if is not null else...	operator, ||, syntax, ||=, replace, php	>> |how can I replace this PHP syntax with Ruby?\r\n>> |\r\n>> |$x = (isset($x) and !empty($x)) ? $x : '-';\r\n>> |\r\n>> |I would like assign a default value if $x is Null.\r\n\r\n> I don't know PHP, so I'm not sure whether this does exactly what you want:\r\n>\r\n> $x ||= '-'\r\n>\r\n> This is a short form for:\r\n>\r\n> $x = $x || '-'\r\n\r\nCorrection, it is short form for:\r\n\r\n$x || $x = '-'\r\n\r\n...trust me, we've been over this at least 3 times, at great length, on the mailing list. ;-)	1.9.3	jballanc@gmail.com	2009-12-22 21:36:00	Joshua	Ballanco	2012-05-02 12:20:59.185969	2012-05-11 16:55:35.383788
146	ruby-talk	Language	Display instance variable values	language, display, instance, variable, each, instance_variable_get	Try using instance_variable_get:\r\n\r\np peep.instance_variables # => ["@age", "@name", "@gender"]\r\n\r\npeep.instance_variables.each do |var|\r\n   p var.instance_variable_get var\r\nend	1.9.3	mbostler@gmail.com	2010-11-13 22:48:00	Michael	Bostler	2012-05-02 12:07:07.731656	2012-05-07 00:21:42.179675
436	ruby-talk	Language	FFI with a C++ Library	language, C++, ffi, library, name, mangling, linkage, functions, setup	> This may be more of a C++ question but here goes:\r\n>\r\n> I'm trying to use Ruby FFI with a CPP library but when I compile my CPP\r\n> library and look at the method names there's always a __Z5, __Z4, or __Z3 in\r\n> front of the method name. I see this when I run nm against the dynlib file.\r\n>\r\n> Oddly when I compile a C file it works fine but I can use a C file because\r\n> I'm using some CPP libraries in my library.\r\n\r\nThis is due to what's called "name mangling" - it's how C++ differentiates different functions with the same name based on namespace, overloads, etc. You can learn more on Wikipedia [0].\r\n\r\nTo resolve this, you need to specify the functions being called with C linkage. Wrap the necessary function as follows in your .cpp/.cc file:\r\n\r\nextern "C" {\r\n  void foo(...) {\r\n  }\r\n}\r\n\r\nThis will give foo the external name "foo" instead of how it would be defined with C++ linkage.\r\n\r\nIf you have C headers and see them being used from C++ and wish to keep the unmangled names, you can\r\nadd this to the top of your C header: \r\n\r\n #ifdef __cplusplus\r\n extern "C" {\r\n #endif\r\n\r\nand this at the bottom:\r\n\r\n #ifdef __cplusplus\r\n }\r\n #endif\r\n\r\n\r\n[0] <a href="http://en.wikipedia.org/wiki/Name_mangling">http://en.wikipedia.org/wiki/Name_mangling</a>	1.9.3	adgar@carboni.ca	2011-07-09 01:16:00	Michael	Edgar	2012-05-02 13:47:01.601466	2012-05-11 20:48:43.717305
393	ruby-talk	Fixnum	How to create decremental for loop in ruby?	fixnum, downto, upto, decrement, increment, loop	> I want to know the simplest way to create a decremental for loop in\r\n> ruby. Can anybody help me? please.\r\n\r\n$ ri19 Fixnum#downto	1.9.3	shortcutter@googlemail.com	2011-11-24 14:46:00	Robert	Klemme	2012-05-02 12:53:10.116418	2012-05-06 20:59:43.887524
503	ruby-talk	Operator	Difference between {} and do/end?	operator, precedence, {}, do, end	> I'm coming back to Ruby after a couple years away, and finding I've\r\n> forgotten some of the basics. What's the difference between { ... }\r\n> blocks and do ... end blocks? In particular, why does one of the\r\n> following work, while the other fails?\r\n>\r\n> '%61lice'.gsub! /%(\\d+)/ do $1.to_i(16).chr end # => "alice"\r\n> '%61lice'.gsub! /%(\\d+)/ { $1.to_i(16).chr } # => SyntaxError\r\n\r\nIt has to do with operator precedence. {...} has high precedence,\r\nwhile do ... end has low precedence. So in your examples above, the\r\ndo...end block is pased to the gsub! method, while the {...} block is\r\npassed to the regex. You can fix the second example using parens:\r\n\r\n'%61lice'.gsub!(/%(\\d+)/) {  $1.to_i(16).chr   } => "alice"\r\n\r\n</code>	1.9	doodpants@mailinator.com	2012-05-04 00:18:00	Karl	Vonl	2012-05-04 00:22:40.612827	2012-05-04 00:22:40.612827
505	ruby-talk	Time	Display computation time in IRB?	time, irb, elapsed, display	> Is there an easy way to display the time it takes to compute any\r\n> function from within IRB?\r\n\r\nIt's not unheard of for people to add something like this to their\r\nirbrc:\r\n\r\n  def time\r\n    start =3D Time.now\r\n    result =3D yield\r\n    puts "Completed in #{Time.now - start} seconds."\r\n    result\r\n  end\r\n\r\nIn use:\r\n\r\n  016:0> time { ('a'*10_000_000).sub(/a+/,'hi') }\r\n  Completed in 0.446504 seconds.\r\n  "hi"	1.9.3	cmshea@gmail.com	2012-05-04 00:25:00	Chris	Shea	2012-05-04 00:28:14.636318	2012-05-04 00:28:14.636318
502	ruby-talk	String	Gsub, regexp, string, split, join	string, regex, speed, efficiency	> I don't usually worry too much about efficiency unless runtime\r\n> performance becomes an issue so I use a_string.split.join(' ') to\r\n> remove extra spaces because the code is short and readable.\r\n>\r\n> This is certainly inefficient. What is the fastest idiom for this\r\n> operation?\r\n\r\nHaven't benchmarked it, but this sounds like a case for regular\r\nexpressions.\r\n\r\n  a_string.gsub!(/ +/, ' ')	1.9.3	cmshea@gmail.com	2009-01-09 10:29:00	Chris	Shea	2012-05-04 00:17:52.640859	2012-05-04 00:17:52.640859
507	ruby-talk	Array	Creating an array?	array, consise, create, map	> Is there a short way of creating array of numbers\r\n> with, for example, step of 10, like this:\r\n>\r\n> 10,20,30,40,50\r\n>\r\n> By short I mean without going through iteration loop:\r\n>\r\n> array=[]\r\n> (1..5).each do |i|\r\n>    array.push i*10\r\n> end\r\n\r\nIn 1.8.6 you can do:\r\n\r\n   array = (1..5).map {|i| i * 10 }\r\n\r\nand in 1.9 you can do:\r\n\r\n   10.step(50,10).to_a\r\n\r\nI can never keep track of which side of the fence 1.8.7 falls on, but\r\nyou can try both.	1.9.3, 1.8.6	dblack@rubypal.com	2012-05-04 00:34:00	David A. 	Black	2012-05-04 00:35:57.788061	2012-05-04 00:36:14.312294
321	ruby-talk	Operator	Exclusive operator in ruby	operator, regex, ===, !==, explanation, override, class, semantics	> I am C++ programmer and I start ruby programming about 1 month.I have 2 questions:\r\n> 1 - I don't understand what is these operators : === and !== . please give an example.\r\n\r\n'Object#===' method is the same as 'Object#==', but is often overridden by the descendants for convenience (mainly to provide meaningful semantics in 'case' statements). For example, Regexp class makes it an alias to its '=~' method, so you can do things like this:\r\n\r\na = "HELLO"\r\ncase a\r\nwhen /^[a-z]*$/; :lower_case\r\nwhen /^[A-Z]*$/; :upper_case\r\nelse;            :mixed_case\r\nend          #=> :upper_case\r\n\r\n(a !== b), as you might expect, is equivalent to !(a === b).\r\n\r\n> 2 - As respect , Ruby is very comfort language , can we define function\r\n> like this :\r\n> def myFunc( a=0 , b=1 , c=2 )\r\n> d = a+b+c\r\n> end\r\n>\r\n> and call this function with only third argument like :\r\n> myFunc( , , 10).\r\n\r\nYou can not do this (ruby does not support keyword arguments), but it is\r\npossible to achieve similar result by passing your arguments as hash:\r\n\r\ndef my_func(hsh)\r\n  hsh = {:a => 0, :b => 1, :c => 2}.merge hsh\r\n  hsh[:a] + hsh[:b] + hsh[:c]\r\nend\r\n\r\nmy_func({:c => 10})   #=> 11	1.9.3	vderyagin@gmail.com	2011-07-24 14:30:00	Victor	Deryagin	2012-05-02 12:40:17.093016	2012-05-07 00:42:29.211364
514	ruby-talk	Hash	Unique values in hash?	hash, uniq, invert, keys, output	>> I have a hash that contains duplicate data, for example, :username =>\r\n>> "alex" comes many times.\r\n>> I want to loop around and print their names just once (only unique). In\r\n>> simple loop it would print "alex" repeatedly.\r\n>\r\n> irb(main):001:0> {:foo=>1,:bar=>1}.values.uniq\r\n> => [1]\r\n>\r\n> You can of course have more involved solutions, e.g. (shameless self promotion):\r\n>\r\n> <a href="http://redhanded.hobix.com/bits/klemmeSSilentHash.html">http://redhanded.hobix.com/bits/klemmeSSilentHash.html</a>\r\n\r\nhash.invert.keys   	1.9	dblack@rubypal.com	2008-12-16 06:02:00	David A.	Black	2012-05-04 18:22:22.916799	2012-05-11 21:01:21.819371
157	ruby-talk	Net	Promiscuous mode	net, promiscuous, mode, set, scruby, module, sniff, function	> I have a question. i am new in a ruby world.\r\n> How can i set my wlan device in a promiscuous mode?\r\n> thank at all :)\r\n\r\nMaybe you could use Scruby module:\r\n\r\n<a href="http://sylv1.tuxfamily.org/projects/scruby.html">http://sylv1.tuxfamily.org/projects/scruby.html</a>\r\n\r\n... check for 'sniff function'.	1.9.3	alfonso.caponi@gmail.com	2009-12-22 14:56:00	Alfonso	Caponi	2012-05-02 12:10:33.094827	2012-05-11 19:42:22.696129
271	ruby-talk	String	Is there a more efficient way to remove data from a string?	regex, trim, array, String#	Another possible option is to use String#[]=\r\n\r\nirb(main):001:0> s="foobarbaz"\r\n=> "foobarbaz"\r\nirb(main):002:0> line = "foobarbaz"\r\n=> "foobarbaz"\r\nirb(main):003:0> line[/bar.*$/] = ''\r\n=> ""\r\nirb(main):004:0> line\r\n=> "foo"	1.9.3	shortcutter@googlemail.com	2011-07-15 09:11:00	Robert	Klemme	2012-05-02 12:31:07.80008	2012-05-05 01:21:01.46748
322	ruby-talk	Regexp	Cannot remove multiple space> nuts!	book, recommendation, regex, Jeff Friedl	> I have to say that regex's \r\n> becoming rather fun, now that I'm getting a little control of it.\r\n\r\nIf you like to dig deeper into the matter, I can recommend:\r\n\r\n<a href="http://oreilly.com/catalog/9780596528126/index.html">http://oreilly.com/catalog/9780596528126/index.html</a>\r\n\r\nI covers functionality, different regexp dialects and performance \r\nconsiderations thoroughly.  Might be a bit difficult to read if you do \r\nnot have a full CS background but IMHO Jeff Friedl manages to keep \r\nlanguage theory at a minimum without scarifying precision.\r\n\r\nAnd one more particular Ruby hint: method String#[] is capable of \r\nworking with regular expression arguments, so you can do\r\n\r\n# fetch the whole match\r\nip = input[/d{1,3}(.d{1,3}){3}/]\r\n\r\n# fetch group 1\r\nname = input[/name=(S+)/, 1]	1.9.3	shortcutter@googlemail.com	2009-02-08 13:43:00	Robert	Klemme	2012-05-02 12:40:17.134317	2012-05-11 20:20:43.235632
227	ruby-talk	Module	Using Fixnum, Strings etc. in Modules	module, fixnum, string, override, constructor, functional, oo, approach	>> I'm stuck on why this occurs. (using jRuby 1.1.5 & Ruby 1.8.6)\r\n>>\r\n>> I'm trying to use modules to scope certain class overrides, so say the\r\n>> String class is changed in ModuleA i don't want it to affect ModuleB.\r\n>> But when i try to accomplish this i run in to two things.\r\n>>\r\n>> First, when creating a Module and overwriting, just for example, the\r\n>> reverse method. results in an error:\r\n>> module ModuleA\r\n>> class String; def reverse;false;end; end\r\n>>  p String.new("abc").reverse\r\n>> end\r\n>>\r\n>> Okay, so it creates its own class String instead of taking the core\r\n>> class String. Basicly what i want is the module to have it's own set of\r\n>> core classes.\r\n>>\r\n>> Secondly, when using direct instantiation in a module it wont use the\r\n>> overwritten class, example:\r\n>> module ModuleA\r\n>> class String < String; def reverse;false;end; end\r\n>> p String.new("abc").reverse\r\n>> p "abc".reverse\r\n>> end\r\n>>\r\n>> Results in:\r\n>> false\r\n>> cba\r\n>> Instead of false; false\r\n>>\r\n>> Could anyone point me in the right direction, thanks in advanced !\r\n>\r\n> I don't think its possible to do exactly what you are trying to do\r\n> without fundamentally altering the core of Ruby: you can't, as far as\r\n> I know, alter a class only for purposes of calls from a particular\r\n> module, and literals will always use the  top level class (::String,\r\n> etc.) not <CurrentModule>::String. As your code above shows, you can\r\n> just avoid using literals and always use explicit constructor calls in\r\n> your module to use the local version.\r\n\r\nAbsolutely agree!  Fiddling with core classes is a bad idea(TM).\r\n\r\nAnd you cannot alter the return type of String constructors "" and '.\r\n\r\nAnother solution is to use a functional approach\r\n\r\nmodule A\r\n  def self.reverse(str)\r\n    false\r\n  end\r\nend\r\n\r\nYou could as well use delegation to wrap core classes with other\r\nclasses and add / change functionality.  That's probably the most OO\r\napproach.  Changing core classes brings all sorts of problems and I\r\nstrongly suggest to not do it.	1.9.3	shortcutter@googlemail.com	2009-03-18 16:31:00	Robert	Klemme	2012-05-02 12:22:11.801316	2012-05-06 21:06:41.199098
548	ruby-talk	Language	Why aren't string literals treated similarly to symbols?	matz, string, mutable, immutable, language feature, explanation	|Explaining the difference between symbols and strings got me wondering\r\n|why string literals aren't treated similarly to symbols by the\r\n|interpreter.  To be clear it seems that string literals could be\r\n|allocated 1 time each, where duplicates simply reference the first\r\n|created instance.\r\n|\r\n|The trick would be to make each reference to the literal a dup of the\r\n|singular, hidden instance.  With the COW semantics that dup'd strings\r\n|have (or should have), this should be a more memory efficient way to\r\n|deal with programs that have many instances of a string literal.\r\n|\r\n|One such possibly common place that could benefit from this optimization\r\n|would be within frequently called methods or iterated loops that\r\n|directly use string literals for read-only purposes.  If a developer\r\n|wants to avoid the allocation problem of string literals as things\r\n|currently stand, he/she would have to be aware of this problem first and\r\n|then find ways to push his/her literals into constants or other exterior\r\n|references.\r\n|\r\n|For example:\r\n|\r\n|1.upto(2) do\r\n|  string = "example"\r\n|  puts string\r\n|end\r\n|\r\n|Unless I misunderstand the current implementation in MRI, a loop such as\r\n|the one above would needlessly create a new instance of "good" for every\r\n|pass through the loop.  One possible fix would be something like:\r\n|\r\n|string = "example"\r\n|1.upto(2) do\r\n|  puts string\r\n|end\r\n|\r\n|In this trivial case, the solution is good enough, but the general case\r\n|requires more knowledge about how to optimize for the interpreter than\r\n|should be necessary.  I'm probably missing something obvious, so if\r\n|anyone knows what it is, please point it out.  Maybe MRI already does\r\n|this obvious thing.\r\n\r\nIt's because Ruby strings are mutable, just like array expression\r\nmakes a new instance of Array everytime.  On the other hand, symbols\r\nare immutable.\r\n\r\n\t\t\t\t\t\t\tmatz.	1.9.3	matz@ruby-lang.org	2011-07-26 14:24:00	Yukihiro	Matsumoto	2012-05-04 21:57:59.7053	2012-05-04 21:57:59.7053
142	ruby-talk	Class	Documentation in Ruby	class, method, display, private, protected, public, singleton, instance, methods	> I have a problem with Ruby Reference. How can I see all the methods of a\r\n> class? for example from where I know that array has a method that its\r\n> name is "detect" ?\r\n\r\nThere are several useful methods:\r\nobj.methods # public methods\r\nobj.public_methods\r\nobj.private_methods\r\nobj.protected_methods\r\nobj.singleton_methods\r\nClass.instance_methods\r\nClass.instance_methods(false) # no inherited methods\r\n\r\n\r\nNote that array arithmetic can sometimes be useful, ie:\r\nmodule M\r\n  def m\r\n  end\r\nend\r\nclass C\r\n  include M\r\n  def c\r\n  end\r\nend\r\nC.instance_methods - Object.new.methods # => [:c, :m]\r\n\r\nAlso note that grepping can sometimes be useful, ie:\r\nArray.new.methods.grep(/index/) # => [:each_index, :find_index, :index,\r\n:rindex, :each_with_index]\r\n\r\nAlso, if you're doing this in IRB, consider trying Pry, which offers the\r\n`ls` command that makes this sort of thing less tedious. I give a few\r\nexamples of it in my screencast @ <a href="http://vimeo.com/26391171">http://vimeo.com/26391171</a> here's all the options it supports:\r\n\r\npry(main)> ls -h\r\nUsage: ls [OPTIONS] [VAR]\r\nList information about VAR (the current context by default).\r\nShows local and instance variables by default.\r\n--\r\n    -g, --globals                    Display global variables.\r\n    -c, --constants                  Display constants.\r\n    -l, --locals                     Display locals.\r\n    -i, --ivars                      Display instance variables.\r\n    -k, --class-vars                 Display class variables.\r\n    -m, --methods                    Display methods (public methods by default).\r\n    -M, --instance-methods           Display instance methods (only relevant to classes and modules).\r\n    -P, --public                     Display public methods (with -m).\r\n    -r, --protected                  Display protected methods (with -m).\r\n    -p, --private                    Display private methods (with -m).\r\n    -j, --just-singletons            Display just the singleton methods (with -m).\r\n    -s, --super                      Include superclass entries excluding Object (relevant to \r\n                                     constant and methods options).\r\n    -e, --everything                 Include superclass entries including Object (must be combined \r\n                                     with -s switch).\r\n    -a, --all                        Display all types of entries.\r\n    -v, --verbose                    Verbose ouput.\r\n    -f, --flood                      Do not use a pager to view text longer than one screen.\r\n        --grep REG                   Regular expression to be used.\r\n    -h, --help                       Show this message.\r\n\r\n> All the methods that an object can call come from several sources:\r\n> all it's parent classes\r\n\r\nPresumably you mean classes inherited from its class and singleton class?\r\n\r\n> modules its parent class's include\r\n\r\nPresumably you mean classes its singleton class includes?\r\n\r\nIf one knows enough internals, the list can be made elegant: its class and classes its class inherits from. But for that, you have to understand how Ruby lies to you in order to have singleton classes and look like multiple inheritance. If anyone is interested in that, there is a fantastic blog\r\nentry that covers most of it @\r\n\r\n<a href="http://carboni.ca/blog/p/Modules-How-Do-They-Work">http://carboni.ca/blog/p/Modules-How-Do-They-Work</a>	1.9.3	josh.cheek@gmail.com	2011-07-31 14:50:00	Josh	Cheek	2012-05-02 12:07:07.64313	2012-05-11 19:39:52.717864
168	ruby-talk	Queue	Suggestions for a distributed job queue	queue, job, distributed, ram, drb, DRb, shift, push 	A couple of other options:\r\n\r\n(1) AMQP, e.g. rabbitmq. I believe it comes with ruby bindings. Can be \r\nmade as fault-tolerant as you like :-)\r\n\r\n(2) Depending on your needs, you could consider rolling your own with \r\nDRb. This means at least you know the system inside-out and can easily \r\ncustomise it - although avoiding the queue server itself being a SPOF is \r\nawkward.\r\n\r\nHere are a couple of working proofs-of-concept.\r\n\r\nIn-RAM queue\r\n============\r\n---- server ----\r\nrequire 'drb'\r\nrequire 'thread'\r\nq = Queue.new   # or SizedQueue.new(1000)\r\nDRb.start_service("druby://127.0.0.1:9911", q)\r\nDRb.thread.join\r\n\r\n---- client ----\r\nrequire 'drb'\r\nDRb.start_service\r\nq = DRbObject.new(nil, "druby://localhost:9911")\r\nq.push "abc"\r\nputs q.pop\r\n\r\nOn-disk queue using Madeleine\r\n=============================\r\n---- server ----\r\nrequire 'rubygems'\r\nrequire 'madeleine'\r\n\r\nclass MadQueue\r\n  def initialize(madeleine)\r\n    @madeleine = madeleine\r\n  end\r\n\r\n  # Read operations don't need to go via command objects (if you don't\r\n  # care about synchronization)\r\n  def length\r\n    @madeleine.system.length\r\n  end\r\n\r\n  class Pusher\r\n    def initialize(data)\r\n      @data = data\r\n    end\r\n    def execute(system)\r\n      system.push(@data)\r\n    end\r\n  end\r\n\r\n  class Popper\r\n    def execute(system)\r\n      system.shift\r\n    end\r\n  end\r\n\r\n  def push(data)\r\n    @madeleine.execute_command(Pusher.new(data))\r\n  end\r\n\r\n  def pop\r\n    @madeleine.execute_command(Popper.new)\r\n  end\r\nend\r\n\r\nrequire 'drb'\r\nmadeleine = SnapshotMadeleine.new("madqueue.dir") { [] }\r\n\r\nThread.new(madeleine) {\r\n  puts "Taking snapshot every 30 seconds."\r\n  while true\r\n    sleep(30)\r\n    madeleine.take_snapshot\r\n  end\r\n}\r\n\r\nDRb.start_service("druby://127.0.0.1:9911", MadQueue.new(madeleine))\r\nDRb.thread.join\r\n\r\n---- client ----\r\nSame as above	1.9.3	b.candler@pobox.com	2009-12-23 21:42:00	Brian	Candler	2012-05-02 12:13:44.847308	2012-05-05 01:24:15.84421
136	ruby-talk	Array	Get first and last line from txt file - how?	array, first, last, display, text, file	> I have txt file with date/time stamps only. I want to grab the first\r\n> date/time and the last date/time. For instance, I will be needing\r\n> 08/09/08 3:00 and 08/24/08 3:00 from the below queued.txt. Do you know\r\n> how I can pull these out? Thanks in advance.\r\n> \r\n> queued.txt\r\n> 8/09/08 3:00\r\n> 8/10/08 5:00\r\n> 8/23/08 22:00\r\n> 8/24/08 3:00\r\n> \r\n> firstDate = ""\r\n> lastDate = ""\r\n> \r\n> File.open('queued.txt', 'r') do |f1|\r\n>  while line = f1.gets\r\n>    if f1.lineno ==  1 then #<-this would only give me 8/09/08 3:00\r\n>     @@fistDate = f1\r\n>    end\r\n> end\r\n\r\nlines = IO.readlines("queued.txt")\r\nfirst = lines.first\r\nlast = lines.last\r\n\r\nputs first\r\nputs last	1.9.3	TimHunter@nc.rr.com	2008-12-20 09:38:00	Tim	Hunter	2012-05-02 12:04:59.532068	2012-05-05 20:03:34.316883
96	ruby-talk	Module	Dynamic creation of variables	module, dynamic, variables, create, accessor	> puts elements[0].name #=> "hydrogen"\r\n> puts @H.name #=> "hydrogen"\r\n>\r\n> But i would prefer it if the elements were loaded up as normal variables\r\n> without the '@' in front.\r\n\r\nI would recommend making a module then setting module constants for your element \r\nsymbols to be mapped to objects. Here is a sample I threw together:\r\n\r\nmodule Chemistry\r\n    class Element\r\n        attr_reader :name\r\n        attr_reader :mass\r\n        attr_reader :symbol\r\n\r\n        def initialize(name,mass,symbol)\r\n            @name = name\r\n            @mass = mass\r\n            @symbol = symbol\r\n        end\r\n    end\r\nend\r\n\r\nelements = [\r\n    Chemistry::Element.new("hydrogen", 1.0079, "H"),\r\n    Chemistry::Element.new("lithium", 6.941, "Li")\r\n]\r\n\r\nelements.each do |element|\r\n    Chemistry.const_set(element.symbol, element)\r\nend\r\n\r\ninclude Chemistry\r\nputs Li.name\r\n\r\nPlease note the include Chemistry which makes the "Li.name" access possible. \r\nThis has the advantage of being able to use these constants in other scripts \r\nwhere someone might want to use the H constant for a different purpose then \r\nthey can access it like this:\r\n\r\nChemistry::Li.name	1.9.3	cwprogram@live.com	2011-07-29 19:07:00	Chris	White	2012-05-02 11:59:32.544122	2012-05-05 01:29:16.869577
551	ruby-talk	Book	A current version of Why's (Poignant) Guide to Ruby as PDF?	ruby, book, poignant guide, why, download	>> I have found:\r\n>>\r\n>> 1) <a href="http://www.thinkingaloud.net/wp-content/uploads/2012/03/wpgtr.pdf">http://www.thinkingaloud.net/wp-content/uploads/2012/03/wpgtr.pdf</a>\r\n>> 2) <a href="http://www.kebabshopblues.co.uk/wp-content/uploads/2006/09/RubyGuideBook.pdf">http://www.kebabshopblues.co.uk/wp-content/uploads/2006/09/RubyGuideBook.pdf</a>\r\n>>\r\n>> The first one has a lot more pages then the second, so I assume it is a\r\n>> more current version. Still, the second one has a much nicer layout...\r\n\r\n>\r\n> Note that the first one seems to be from "2012/03" (march of this year)\r\n> and the second one seems to be from "2006/09" (september of 2006).\r\n\r\n\r\nThere's also a mirror up on rubyinside[1], and plenty more listed on wikipedia[2].\r\n\r\n1: <a href-"http://www.rubyinside.com/media/poignant-guide.pdf">http://www.rubyinside.com/media/poignant-guide.pdf</>\r\n2: <A href="http://en.wikipedia.org/wiki/Why's_(poignant)_Guide_to_Ruby#External_links">http://en.wikipedia.org/wiki/Why's_(poignant)_Guide_to_Ruby#External_links</a>\r\n\r\n</code>	1.8.6	zachary@zacharyscott.net	2012-04-17 14:22:00	Zachary	Scott	2012-05-04 22:10:06.239025	2012-05-11 21:11:44.240851
531	ruby-talk	lambda	Is it possible to break a loop from within an internal lambda function?	lambda, iteration, break, loop, counter	> > # I want to use: solve_by_iter { |test| lambda{puts test; break}.call\r\n> > if (1..6).all?{|num| test%num == (num-1)} }\r\n>\r\n> What's wrong with returning a boolean value from the inner lambda and\r\n> breaking in the block?\r\n>\r\n> solve_by_iter { |test| break if lambda{puts test; false}.call }\r\n\r\nThough if you really, really -really, want to kill the call stack from\r\nan arbitrary depth you could try (gulp):\r\n\r\ndef solve_by_iter\r\n  counter = 1\r\n  catch :break do\r\n    loop do\r\n      yield counter\r\n      counter += 1\r\n    end\r\n  end\r\nend\r\n\r\nsolve_by_iter { |test| lambda{p test;throw :break}.call }	1.9.3	skye.shaw@gmail.com	2010-11-14 01:26:00	Skye	Shaw	2012-05-04 20:45:37.762328	2012-05-04 20:45:37.762328
532	ruby-talk	C API	Using Ruby's C API safely and sanely	embedded, ruby, C, extension, create	> > Well, the other approach you have is build ruby statically and use it\r\n> > embedded and not depend of installed package version.\r\n>\r\n> Even though the shipped/statically linked solution works well for embedded\r\n> Ruby, it doesn't solve the issues for the bindings code, where we *have* to\r\n> query a Ruby installation for some paths, e.g. vendorarchdir/sitearchdir.\r\n\r\nOn my previous experience dealing with embedding Ruby, I would\r\nrecommend you do not depend on system or user installed Ruby.\r\n\r\nIf you want your program be built and depend on that condition, expect\r\nlot of problems due weirdness of each environment, compilers,\r\npackaging rules, etc.\r\n\r\nOther approach you could take is create a Ruby C Extension that acts\r\nas bridge between your application and that installed Ruby. Distribute\r\nit as gem and ask the user install it.\r\n\r\nProvide a configuration to locate that compiled extension and connect\r\nto the Ruby interpreter from it.\r\n\r\nThen you don't care about the installed Ruby details as long you can\r\ncommunicate with this bridge.\r\n\r\nSomething similar is done by Phusion Passenger (in general lines) but\r\nexpect lot of work due the above mentioned weirdness.\r\n\r\nOther than that, would suggest you provide more details about your\r\n'embedding' conditions directly to Ruby-Core for better answers.	1.9.3, 1.8.6, 1.8.7	luislavena@gmail.com	2010-11-10 15:37:00	Luis	Lavena	2012-05-04 20:49:44.901221	2012-05-04 20:49:44.901221
533	ruby-talk	Database	ORM's - Don't Do It!	orm, databases, mapping, relations, attributes	>>> Databases have a wealth of logic, elegance and functionality. Slapping\r\n>>> them in the crude harness of ORMs is a most unfortunate and regressive trend.\r\n> "The Vietnam of Computer Science"\r\n> <a href="http://blogs.tedneward.com/2006/06/26/The+Vietnam+Of+Computer+Science.aspx">http://blogs.tedneward.com/2006/06/26/The+Vietnam+Of+Computer+Science.aspx\r\n</a>\r\n\r\nA well-written and often-quoted argument, but which is still lacking. Ted\r\nlists 6 possible balancing-points between objects and relations, but fails\r\nin thinking that these six exhaust the possibilities.\r\n\r\nThe O-R impedance problem is caused by them both being attribute-oriented,\r\nbut using different principles for determining which things are attributes\r\nand which things are entities/objects.\r\n\r\nFact-oriented modeling (or semantic modeling, as I like to call it) is\r\nattribute-free. The decisions about attributes vs entities/objects is made\r\nmechanistically, which produces a good relational model *and* a good object\r\nmodel which always remain in perfect lock-step, allows the possibility of\r\nautomatic data migration, and has many other advantages, including natural-\r\nlanguage modeling.\r\n\r\nMy "activefacts" gem provides an implementation of the Constellation Query\r\nLanguage, a semantic modeling language. Generators for existing Ruby O/RMs\r\nare still under development, though an early stage DataMapper generator is\r\nthere. I plan to expand ActiveFacts to provide a new O/RM solution which is\r\nmore in keeping with the fact-oriented approach, but that's also still in\r\ndevelopment.\r\n\r\nI'm not of the view that it's a good thing to try to shoe-horn the relational\r\ncalculus into the Ruby syntax, as AREL, Sequel and DataMapper attempt. While\r\nit's cute that the Ruby syntax makes it possible, I don't think this solves\r\nthe big problem(s). Good language integration is always a good thing, but I\r\nhave a different approach to it.\r\n\r\nAnyhow, if you're interested, you can "gem install activefacts" and find more\r\ndetails at <http://dataconstellation.com/ActiveFacts>.	1.9.3, 1.8.6, 1.8.7	no@spam.please.net	2010-11-13 11:59:00	Clifford	Heath	2012-05-04 20:53:36.648778	2012-05-11 21:05:57.794646
12	ruby-talk	Thread	Why GIL is not released on ruby/dl external function call	thread, gil, lock, dlload, extend, sleep, loop, external, function	> If I run following test code:\r\n>\r\n> require 'dl/import'\r\n> module User32\r\n>  extend DL::Importer\r\n>  dlload 'user32'\r\n>  extern 'int MessageBoxA(int, char*, char*, int)'\r\n> end\r\n> Thread.new { User32.MessageBoxA( 0, "Text", "Caption", 0 ) }\r\n> loop { sleep 1; puts( "loop running" ) }\r\n>\r\n> I will see no "loop running" messages while message box is visible. So\r\n> i can suggest that Ruby is not releasing GIL while calling external\r\n> function via Rubydl. Why such weird architectural decision? This\r\n> prevents me from calling blocking functions in background thread :(.\r\n\r\nSince Ruby does not know what your external C function does (it could manipulate Ruby objects!) it takes a conservative approach and locks.	1.9.3	shortcutter@googlemail.com	2012-02-14 17:08:00	Robert	Klemme	2012-05-02 11:37:03.312556	2012-05-11 17:40:41.117165
316	ruby-talk	Array	Bizarre array literal?	array, multiple assignment	> ruby-1.8.7-p174 :001 > SOMETHING = 2355, SOMETHING2 = 3453\r\n> => [2355, 3453]\r\n>\r\n> Why?\r\n\r\nBecause of how multiple assignment and destructuring work, the RHS will be\r\ntreated like an array\r\n\r\na = 1, 2   # => [1, 2]\r\n\r\nNow this particular assignment has an assignment in the RHS, which is\r\ntreated like this.\r\nSOMETHING = 2355, SOMETHING2 = 3453\r\nSOMETHING = 2355, (SOMETHING2 = 3453)\r\nSOMETHING = 2355, 3453\r\n\r\nFor correct multiple assignment, it would be\r\nSOMETHING, SOMETHING2 = 2355, 3453	1.9.3	josh.cheek@gmail.com	2012-02-09 19:17:00	Josh	Cheek	2012-05-02 12:39:13.527046	2012-05-11 15:41:29.249566
385	ruby-talk	Math	Math cube root	math, cube, root, exp, ^, log	def cube_root(x)\r\n  Math.exp(Math.log(x.to_f)/3.to_f)\r\nend\r\n\r\nP.D. Proof:\r\nCube root of x is equal to x^(1/3)\r\n\r\nx^(1/3) = y\r\nln(x^(1/3)) = ln y\r\n(1/3)ln x = ln y\r\n\r\nErgo\r\n\r\ny = e^((ln x)/3)	1.9.3	serabe@gmail.com	2009-07-11 12:59:00	Sergio	Arbeo	2012-05-02 12:52:22.630466	2012-05-06 21:45:33.906095
555	ruby-talk	BigNum	Converting Bignum into bytes	bignum, hex, bytes, convert	Thank you for your answer. I also thought of this solution, but a little\r\nbit the other way around, like this:\r\n\r\nbig = 11111111111111111111111111111111111111\r\nbytes = [big.to_s(16)].pack("H*")\r\n => "\\x85\\xBE\\xC1+K\\x9A@\\xD8\\xF4\\x83\\xCB\\x1Cq\\xC7\\x1Cp"\r\nbig2 = bytes.unpack("H*")[0].to_i(16)\r\n\r\nHowever...\r\nputs big2==big #=>false\r\n\r\nTaking a closer look...\r\nbytes.unpack("H*")[0]\r\n => "85bec12b4b9a40d8f483cb1c71c71c70"\r\ncompared to\r\nbig.to_s(16)\r\n => "85bec12b4b9a40d8f483cb1c71c71c7"\r\n\r\nThe base 16 length representation of big is 31 whereas the unpacked string\r\nis 32 bytes.\r\nI wonder is this a bug?\r\n\r\nIn any case I guess the solution is to pad the big.to_s(16) String with 0\r\non the left side until reaching a round (as in base 2 round) number :)	1.9.3	vic.blaga@gmail.com	2012-03-16 18:50:00	Victor	Blaga	2012-05-04 22:30:46.328897	2012-05-04 22:30:46.328897
556	ruby-talk	File	Any function similar to PHP's file_get_contents()?	io, read, url, file	>> > Ok, then a simpler solution:\r\n>> >\r\n>> document = open('http://www.google.com/').read\r\n>>\r\n>> document = File.read 'http://www.google.com/'\r\n>\r\n> Robert:\r\n>\r\n> You constantly amaze me with your cleverness. Thanks!\r\n\r\nThanks, but I am afraid I wasn't that clever this time:\r\n\r\n$ irb19 -r open-uri\r\nRuby version 1.9.3\r\nirb(main):001:0> url = 'http://www.google.com/'\r\n=> "http://www.google.com/"\r\nirb(main):002:0> io = open url\r\n=> #<File:/tmp/open-uri20120314-2280-ju7rp9>\r\nirb(main):003:0> io.read.length\r\n=> 12080\r\nirb(main):004:0> io.close\r\n=> nil\r\nirb(main):005:0> io = File.open url\r\nErrno::ENOENT: No such file or directory - http://www.google.com/\r\n        from (irb):5:in `initialize'\r\n        from (irb):5:in `open'\r\n        from (irb):5\r\n        from /opt/bin/irb19:12:in `<main>'\r\nirb(main):006:0> File.read(url).length\r\nErrno::ENOENT: No such file or directory - http://www.google.com/\r\n        from (irb):6:in `read'\r\n        from (irb):6\r\n        from /opt/bin/irb19:12:in `<main>'\r\n\r\nShould've tested this properly. :-))\r\n\r\nSorry for the confusion.\r\n\r\nBut we can do\r\n\r\nirb(main):012:0> def read(x)\r\nirb(main):013:1> io = open(x)\r\nirb(main):014:1> begin\r\nirb(main):015:2*   io.read\r\nirb(main):016:2> ensure\r\nirb(main):017:2*   io.close\r\nirb(main):018:2> end\r\nirb(main):019:1> end\r\n=> nil\r\nirb(main):020:0> read(url).length\r\n=> 11117\r\n\r\nWhile we're at it we could also do\r\n\r\nirb(main):022:0> class Object\r\nirb(main):023:1> def tap_close\r\nirb(main):024:2> yield self\r\nirb(main):025:2> ensure\r\nirb(main):026:2* close\r\nirb(main):027:2> end\r\nirb(main):028:1> end\r\n=> nil\r\nirb(main):029:0> open(url).tap_close {|io| io.read}.length\r\n=> 11117\r\n\r\nor\r\n\r\nirb(main):030:0> def auto_close(x)\r\nirb(main):031:1> yield x\r\nirb(main):032:1> ensure\r\nirb(main):033:1* x.close\r\nirb(main):034:1> end\r\n=> nil\r\nirb(main):035:0> auto_close(open(url)) {|io| io.read}.length\r\n=> 11105\r\n\r\nHmm, I think I like the variant with #read best.	1.9.3	shortcutter@googlemail.com	2012-03-14 17:06:00	Robert 	Klemme	2012-05-04 22:35:24.877445	2012-05-04 22:35:24.877445
194	ruby-talk	MP3	Extracting mp3 image and its data when upload is done	mp3, extract, picture, cover, art, file, open, id3v2_tag, frame_list, first, picture	Of course it's possible. Even if there were no libraries, you could \r\nstill extract the bits "by hand".\r\n\r\nBut you don't have to. Simply install one of the ID3 libraries like \r\ntaglib-ruby:\r\n\r\n<a href="http://robinst.github.com/taglib-ruby/">http://robinst.github.com/taglib-ruby/</a>\r\n\r\nYou can then extract the cover picture:\r\n\r\nrequire 'taglib'\r\n\r\nTagLib::MPEG::File.open("C:/music/test.mp3") do |mp3|\r\n  cover = mp3.id3v2_tag.frame_list('APIC').first.picture\r\n  File.open('C:/music/cover.jpg', 'wb') {|f| f << cover}\r\nend	1.9.3	jan.e@online.de	2012-04-03 19:25:00	Jan	E	2012-05-02 12:16:53.318241	2012-05-11 19:53:36.716542
500	ruby-talk	Regexp	How to truncate the spaces in the front of a line?	regex, string, gsub, arguments, replace, match	> Do you have any idea to truncate or remove the space in the front of a line?\r\nirb(main):001:0> "         spaces in front".gsub /^ +/,""\r\n=> "spaces in front"\r\nirb(main):002:0> RUBY_VERSION\r\n=> "1.8.6"\r\n\r\nTranslation:\r\nString#gsub applies the regexp given as first argument to a given \r\nString, and replaces the matches with the second argument.\r\n\r\nThe regexp "^ +" (the // notation is one of the many ways to tell Ruby \r\nwe are using a regexp) means "At the beginning of the line ("^"), find \r\nany spaces(" "), and then stop ("+")". More or less, anyway (I'm not a \r\nRegexp guru). ;)	1.9.3	pg@thimian.com	2009-12-27 04:36:00	Phillip	Gawlowski	2012-05-02 14:14:54.23665	2012-05-11 16:22:16.718277
16	ruby-talk	String	How to truncate the spaces in the front of a line?	truncate, line, beginning, gsub, regex	> so strange...\r\n> /s should match all the spaces, including tabs,but it doesn't work.\r\n> I will try to use XML Parser.\r\n\r\nWell, it would be more useful if you used s instead (with a backslash\r\nand not a slash). Try with\r\n\r\nname = line.gsub(/^s+/,"")\r\n\r\nBy the way, all useful shortcuts in regexp start with a backslash and\r\nnot a slash (usually reserved to delimit the regexp)	1.9.3	jeanjulien.fleck@gmail.com	2009-12-27 10:07:00	Jean-Julien	Fleck	2012-05-02 11:42:45.319787	2012-05-05 00:44:32.001556
540	rubyonrails-talk	yaml	Remote MySQL database.yml problem	MySQL, database, yaml, problem, connection	> >> The log says:\r\n> >> Mysql::Error - Can't connect to MySQL server on 'remote.host.local' (13):\r\n> >>\r\n> >> But why... When I run mysql -h remote.host.local -u user -p form the\r\n> >> server it works.\r\n> >>\r\n> >\r\n> > Could you run this on your database.yml file (from your Rails root)\r\n> > and check if it looks like you expect? Subtle space/tab errors may\r\n> > yield an invalid database.yml file.\r\n> >\r\n> >  $ irb\r\n> > 1.9.3p0 :001 > require 'yaml';\r\n> > YAML::load(File.open('config/database.yml'))\r\n> > => {"development"=>{"adapter"=>"postgresql", "encoding"=>"unicode",\r\n> > "pool"=>5, "username"=>"peterv", "password"=>nil, "min_messages"=>"log",\r\n>\r\n> Do you want me to just copy and paste the code inside my database.yml\r\n> file?\r\n>\r\n> What does it do?\r\n>\r\n\r\n$ irb\r\n1.9.3p0 :001 > require 'yaml'; YAML::load(File.open('config/database.yml'))\r\n\r\nAnd check the output yourself (no need to copy, may contain passwords etc.).\r\n\r\nIt parses the database.yml file (which is obviously a YAML file). If you have\r\nformatting problems in that file, it may be visible in the result.	1.9.3	peter@vandenabeele.com	2012-01-24 18:19:00	Peter	Vandenabeele	2012-05-04 21:32:32.907947	2012-05-04 21:32:32.907947
170	ruby-talk	Block	Reading CSV File	block, csv, array, gets, chomp, data, recursion	The way you use the do block is not appropriate.\r\n\r\nAnyway, if I understood your problem properly, here you go:\r\n\r\nRead the CSV as like below which stores the whole content in an array of\r\narrays: (Refer: <a href="http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html">http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html</a>)\r\n\r\narr_of_arrs = CSV.read("Sample.csv")\r\n\r\nprint "Enter Product ID: "\r\nproduct_id = gets.chomp\r\n\r\nprint "Enter Quantity: "\r\nquantity = gets.chomp\r\n\r\nputs\r\narr_of_arrs[1..-1].each do |data|\r\n  if data[0] == product_id\r\n    puts "Product ID \t : \t#{data[0]}"\r\n    puts "Product Name \t : \t#{data[1]}"\r\n    puts "Product Price \t : \t#{data[2]}"\r\n    puts "Product Type \t : \t#{data[3]}"\r\n    puts\r\n\r\n    puts "Total Price ordered \t : \t#{data[2].to_i * quantity.to_i}"\r\n    exit\r\n  end\r\nend\r\n\r\nI hope this is your requirement. Still you can enhance this by handling\r\nworst scenarios (using recursion).	1.9.3	email2vimalraj@gmail.com	2012-01-02 10:12:00	Vimal	Selvam	2012-05-02 12:13:44.921565	2012-05-11 19:47:00.203225
125	ruby-talk	Regexp	String manuplation logic	regex, extract, string	> I am trying to print /media/4B22-5451  ( i mean from /media to end of that word). \r\n> But i am able to print only up to /media/4B22.\r\n>\r\n> Can any one can help me to print upto  /media/4B22-5451\r\n>\r\n> #######################################################################\r\n> string1 = "/dev/sdb  1949612  102404   1847208   6% /media/4B22=\r\n-5451"\r\n> if m2=string1.match( %r{/media/w+} ).to_s then\r\n>   if m2 =~ %r{/media/} then\r\n>     puts "pass"\r\n>     puts "mediastring = #{m2}"\r\n>   end\r\n> end\r\n> #######################################################################\r\n\r\nBased on this question and some previous ones, I think you need to read a little bit \r\nabout regular expressions. For example: <a href="http://www.regular-expressions.info">http://www.regular-expressions.info</a> is a good \r\nstarting point. For you to understand why the above code is failing, you need to know\r\nthat \\w+ matches any "word character" (the \\w), one or more times (the +). And why is it \r\nstopping at the "-"? Because "-" is not a word character, so the regular expression stops \r\nmatching there. To come up with a correct regular expression, you need to understand\r\nall the possible scenarios for that string. For example, maybe you can match all word \r\ncharacters, the dash, the underscore and the ".". Or maybe just the word characters plus \r\nthe dash is enough. So please, let us know in plain English what your requirements are. \r\n\r\nFor example:\r\n\r\nIn a string such as "/dev/sdb  1949612  102404   1847208   6% /media/4B22-5451", \r\nI need to match everything after "/media/", which could be letters, numbers and dashes. \r\n\r\nOr:\r\n\r\nIn a string such as "/dev/sdb  1949612  102404   1847208   6% /media/4B22-5451", \r\nI need to match everything after "/media/" up to the end of the line. \r\n\r\nOr:\r\n\r\nIn a string such as "/dev/sdb  1949612  102404   1847208   6% /media/4B22-5451", \r\nI need to match everything after "/media/", up to the next whitespace or end of the line.\r\n\r\nI hope you get what I mean. You need to precisely define what are the conditions on which \r\nthe matching has to stop or continue. Several examples based on the above:\r\n\r\nFor the first one:\r\n\r\n%r{/media/[-\\w]+}    # match the literal /media/ followed by one or\r\nmore of word characters or dashes\r\n%r{/media/[-a-zA-Z0-9]+}  # match the literal /media/ followed by one\r\nor more of dash, lower or uppercase letters or numbers\r\n\r\nFor the second:\r\n\r\n%r{/media/.*} # match the literal /media/ followed by anything else up\r\nto the end of the line\r\n\r\nFor the third:\r\n\r\n%r{/media/[\\S]*} # match the literal /media/ followed by anything else\r\nthat is not a whitespace\r\n\r\nAlso, even if you use the correct regexp for your case, you need to\r\nbrush up the logic a little bit:\r\n\r\nstring1 = "/dev/sdb  1949612  102404   1847208   6% /media/4B22-5451"\r\nif m2=string1.match( %r{/media/w+} ).to_s then\r\n  if m2 =~ %r{/media/} then\r\n    puts "pass"\r\n    puts "mediastring = #{m2}"\r\n  end\r\nend\r\n\r\nTo understand if the string matched or not while keeping the match\r\ndata object, the idiom I use is:\r\n\r\nif m = string1.match(regexp)\r\n  # the matched string is now in m[0]\r\nend\r\n\r\nAlso, you don't need the second if, because the regexp is a subset of the first one, so any \r\nstring matched by the first regexp will match the second one. Again, I'd do:\r\n\r\nif m = string1.match(regexp)\r\n  # the matched string is now in m[0]\r\n  puts "pass"\r\n  puts "media string = #{m[0]}"\r\nend\r\n\r\nNow, you just need to come up with the correct regexp for all your possible cases and you are set.	1.9.3	jgabrielygalan@gmail.com	2011-07-28 08:59:00	JesÃºs	Gabriel y Galan	2012-05-02 12:04:59.196564	2012-05-11 18:27:58.1105
55	ruby-talk	Class	Documentation in Ruby	class, instance, ancestor, method, instance_methods, array	> I have a problem with Ruby Reference. How can I see all the methods of a\r\n> class? \r\n\r\nUse 'Class#instance_methods' method. 'Array.instance_methods', for.example. By\r\ndefault it returns all class' instance methods, if you pass 'false' as\r\nan argument to it - only those defined in class itself, without ancestors'	1.9.3	vderyagin@gmail.com	2011-07-31 11:48:00	Victor	Deryagin	2012-05-02 11:52:04.526731	2012-05-06 19:19:13.846074
81	ruby-talk	Struct	What's the standard way of implementing a hash?	struct, hash, array, implementation, easiest	>> I think you can't access instance variables from a class method, so\r\n>> both methods are kinda useless.\r\n>\r\n> Ugh, that should of course be\r\n>\r\n> class A\r\n>  def hash\r\n>     ...\r\n>  end\r\n> end\r\n\r\nEasy way:\r\n\r\nclass A\r\n  def hash\r\n    [@a, @b, @c].hash\r\n  end\r\nend\r\n\r\nEasiest:\r\n\r\n# also gives you == and eql?\r\nA = Struct.new :a, :b, :c	1.9.3	shortcutter@googlemail.com	2011-12-30 00:26:00	Robert	Klemme	2012-05-02 11:55:46.56316	2012-05-06 19:20:56.847331
244	ruby-talk	File	Reading specific columns on a text file	file, read, column, specific, line, split, index	> I'm working on script here and I need do read the 1st and the 10th\r\n> columns on a file like this\r\n>\r\n> R357    10011G1   0 0.0   0 0 0.0 381654.8 7993255.6 827.9  1235959\r\n>\r\n> As reference I used the code found in this post:\r\n> \r\n> <a href="http://www.ruby-forum.com/topic/161462#new">http://www.ruby-forum.com/topic/161462#new</a>\r\n>\r\n> The difference is on that snippet the user only wanted to read the first\r\n> column, so I tried something like this\r\n>\r\n> file = File.open(" ")\r\n> columns = []\r\n> file.each_line do |line|\r\n> columns << line.split(" ")[0 , 11]\r\n\r\n  "R357    10011G1   0 0.0   0 0 0.0 381654.8 7993255.6 827.9  = 1235959".split(" ").values_at(0,10)\r\n=> ["R357", "1235959"]\r\n\r\n(the 11th element is at index 10 when you start from 0)\r\n\r\nArray#[] with [0,11] means start from the element at index 0 and take 11 elements.\r\n\r\n> end\r\n>\r\n> p columns\r\n>\r\n> Aparently It reads every column from 0 to 11	1.9.3	Rob@AgileConsultingLLC.com	2012-02-02 12:20:00	Rob	Biedenharn	2012-05-02 12:26:51.167727	2012-05-11 20:00:31.774127
513	ruby-talk	Array	A better way to do this job?	array, first, argument, puts	> First doesn't take an argument in ruby. It does\r\n> If you're using rails enumerable mixin\r\n\r\n$ ruby19 -ve 'puts [1,2,3,4].first(2)'\r\nruby 1.9.1p0 (2009-01-30 revision 21907) [i686-linux]\r\n1\r\n2	1.9	dblack@rubypal.com	2009-02-10 21:45:00	David A.	Black	2012-05-04 15:17:30.142832	2012-05-04 15:18:32.333857
417	ruby-talk	System	How to not display output of a system call?	system, command, output, stderr, stdout, backtick	> Lets say I have a Windows command line program that runs the following:\r\n> \r\n> system("del *.txt")\r\n> \r\n> How do I NOT display the output from the del command?\r\n\r\n`del *.txt`\r\n\r\nThat's backticks, not apostrophes. Also, this won't prevent the display \r\nof output to stderr, only stdout.	1.9.3	TimHunter@nc.rr.com	2009-10-06 17:50:00	Tim	Hunter	2012-05-02 12:57:36.072252	2012-05-06 18:37:06.263066
474	ruby-talk	Book	Principle of Best Principles	book, recommend, design, patterns, idioms, eloquent, russ olsen	> I seem to run into a couple of design issue a lot and I never know what is\r\n> really proper. On one hand I often hear that I should limit coupling and\r\n> stick to single responsibility, but when I do I often find it difficult to\r\n> get the information to part of the program when it is needed. For example,\r\n>\r\n>   class Singer\r\n>     def initialize(name)\r\n>       @name = name\r\n>     end\r\n>     attr :name\r\n>   end\r\n>\r\n> Then should Song be:\r\n>\r\n>   class Song\r\n>     def new(singer)\r\n>       @singer = singer\r\n>     end\r\n>   end\r\n>\r\n> or\r\n>\r\n>   class Song\r\n>     def new(singer_name)\r\n>       @singer_name = singer_name\r\n>     end\r\n>   end\r\n>\r\n> The later has less coupling, so according to principles I should use it.\r\n> But if I later discover something in Song needs to know more about the\r\n> singer, I'm in a bad way. e.g.\r\n>\r\n>   class Song\r\n>     ...\r\n>     def play\r\n>       puts "Belting it out by #{@singer.name}, winner of\r\n> #{@singer.grammy_count} grammies!"\r\n>     end\r\n>   end\r\n>\r\n> I'd be in a fix if I had used the later Song class instead of the former.\r\n> But then I suspect someone would remind me of SRP, single responsibility\r\n> principle, and suggest instead:\r\n>\r\n>   class SongPlayer\r\n>     def initialize(singer, song)\r\n>       @singer, @song = singer, song\r\n>     end\r\n>     def play\r\n>       puts "Belting it out by #{@singer.name}, winner of\r\n> #{@singer.grammy_count} grammies!"\r\n>     end\r\n>   end\r\n>\r\n> And yea, I guess that makes sense, since another singer might do a cover\r\n> of some one else's song, right? But then, would it really be the exact same\r\n> song? In most of my cases it's never the same "song" so I never have that\r\n> kind of scenario. So is the SRP worth the extra classes it brings to the\r\n> code then?\r\n>\r\n> I sometimes think many OOP principles, SOLID or otherwise, arose out\r\n> limitations of Java, and don't apply so well to Ruby.\r\n\r\nIf you are interested Ruby Design Patterns and Idioms, check out Russ\r\nOlsen's books Design Patterns in Ruby and Eloquent Ruby. They really helped\r\nto take my skills to the next level.	1.9.3	isaacbfsanders@gmail.com	2011-11-20 15:41:00	Isaac	Sanders	2012-05-02 14:06:00.811858	2012-05-06 18:02:36.608213
390	ruby-talk	Operator	Newbie: if is not null else...	||=, nil, test, assign	> How can I replace this PHP syntax with Ruby?\r\n>\r\n> $x = (isset($x) and !empty($x)) ? $x : '-';\r\n>\r\n> I would like assign a default value if $x is Null.\r\n\r\nThe approximate Ruby idiom would be:\r\n\r\n$x ||= '-'\r\n\r\nThe only caveat is that this would (re)assign the value if $x were\r\neither nil or false. This is usually not an issue, but if so then you\r\ncould use\r\n\r\n$x = '-' if $x.nil?	1.9.3	rick.denatale@gmail.com	2009-12-22 08:39:00	Rick	DeNatale	2012-05-02 12:53:10.016773	2012-05-11 16:54:58.619298
3	ruby-talk	Class	Do you nest classes inside classes?	class, namespace, nest, nested, contain, names, namespaces, private	>> Generally I think using nested classes for real helper classes that can conceptually only \r\n>> be for use with the parent class is a useful way of avoiding namespace clutter.\r\n\r\n> This is the only really good reason I've found for doing so.\r\n\r\nI can't agree with that, the value of namespaces is orthogonal to\r\nideas like 'private' classes, in fact, I think it's more valuable when\r\nthe names are intended to be used outside of the implementation of a\r\nclass, it helps whenever two things end up competing for a name.\r\n\r\nFor example in my new icalendar gem, I use nested name spacing so that\r\nI can have an Event class, and a using application can have it's own\r\nEvent class(es), maybe one might be a database model.\r\n\r\nI've seen, and been involved with too many languages which suffered\r\nfrom the lack of Namespaces, sometimes adding them in later versions\r\nof the language, not to appreciate the value.\r\n\r\nIt really isn't an issue of containing a class within a class, it's an\r\nissue of containing names within name spaces.\r\n\r\nAnd I do other things like putting a module which I've used to\r\nrefactor a large class into separate files inside the namespace of the\r\n(main or only) class which includes it.\r\n\r\n<a href="http://github.com/rubyredrick/ri_cal/tree/master">http://github.com/rubyredrick/ri_cal/tree/master</a>	1.9.3	rick.denatale@gmail.com	2009-05-25 09:47:00	Rick	DeNatale	2012-05-02 11:37:02.95603	2012-05-11 18:02:02.323436
546	ruby-talk	Test::Unit	Test Unit setup teardown problem	test, unit, problem, tear down	> I am using Test::Unit framework for website testing. It has setup and\r\n> teardown methods. The thing is it is called before and after each and\r\n> every test methods.\r\n> \r\n> is there any way we can call setup method before first test gets execute\r\n> and teardown method after last test executes rather than before and\r\n> after each and every test???\r\n\r\nYou can use startup and shutdown class methods for it:\r\n\r\n<a href="http://test-unit.rubyforge.org/test-unit/Test/Unit/TestCase.html">http://test-unit.rubyforge.org/test-unit/Test/Unit/TestCase.html</a>	1.9.3	kou@cozmixng.org	2011-07-28 23:26:00	Kouhei	Sutou	2012-05-04 21:51:55.757094	2012-05-11 21:09:38.480312
47	ruby-talk	Language	Multiline code on IRB?	language, evaluation, do, end, script, semicolon, finish	> When you write a line that isn't finished (e.g. end a line with a semicolon) ;\r\n> or write a "do" with no "end" do it won't evaluate it until you finish it end\r\n\r\nIn all other cases you can escape the line ending the same way as in a script:\r\n\r\nirb(main):001:0> 5 \r\nirb(main):002:0* + 3\r\n=> 8\r\nirb(main):003:0>	1.9.3	shortcutter@googlemail.com	2010-11-17 11:05:00	Robert	Klemme	2012-05-02 11:51:20.282379	2012-05-07 00:19:33.658344
163	ruby-talk	Database	How to connect to and use Postgresql from Ruby?	postgresql, install, driver, ruby-pg, pg,  libpg-dev	> I have just started to learn Ruby, quite nice language, but I'm stuck on\r\n> connecting to the database (Postgresql)\r\n>\r\n> I have installed some ruby-pg and Ruby/DBI package for my Ubuntu system,\r\n> but then what?\r\n>\r\n> I'm having trouble with finding the correct/best documentation on how to\r\n> connect and how to perform queries to the database.\r\n> Can someone point me in the right direction here?\r\n> Simple example code could perhaps also be of value to get me started.\r\n\r\n1) Install Postgres\r\n2) Did a search for ruby postgres and found this:\r\n\r\nruby-pg is now the official rubyforge project for the "postgres" ruby\r\ngem. See the project here:\r\n\r\n<a href="http://www.rubyforge.org/projects/ruby-pg">http://www.rubyforge.org/projects/ruby-pg</a>\r\n\r\n3) Go to the page in question, note that the project has been moved\r\n4) Go to http://bitbucket.org/ged/ruby-pg/\r\n5) Read the install instructions, note the Ubuntu specific mention about the required libpq-dev package\r\n6) sudo gem install pg (or no sudo if you want to do a home install)\r\n7) Notice here's an examples directory:\r\n\r\n<a href="https://bitbucket.org/ged/ruby-pg/src/3d744d9776c3/sample/test1.rb">https://bitbucket.org/ged/ruby-pg/src/3d744d9776c3/sample/test1.rb</a>\r\n\r\n8) Start the postgres server\r\n9) Switched to the postgres user (since postgres uses unix permissions by default)\r\n10) Ran the code and got errors, realized it's because the sample code has not been updated to the latest version of the API\r\n11) Screw this we're doing it live\r\n12) Fix the code and put it on a gist (that's obviously not my password, and you might not need a password):\r\n\r\nhttps://gist.github.com/1117045\r\n\r\n13) Run the code again and get the following output:\r\n\r\ndatname        datdba         encoding       datcollate     datctype     ...\r\n                                                                         ...\r\ntemplate1      10             6              C              C            ...\r\ntemplate0      10             6              C              C            ...\r\npostgres       10             6              C              C            ...\r\n\r\n14) Make note to self to fork that repository and push a fix\r\n15) ???\r\n16) Profit!	1.9.3	cwprogram@live.com	2011-07-31 11:30:00	Chris	White	2012-05-02 12:12:09.265285	2012-05-11 19:46:02.120153
124	ruby-talk	Language	Solution Quiz 123 # Huffman Encoder	vsli, huffman, encoding, diagram, system	The Vlsi design implementation of huffman encoding from scratch to \r\ncomplete with verilog codes and vhdl codes, systematic diagram can be \r\nfound in the link below, here\r\n\r\n<a href="http://blog.ektel.com.np/2012/03/vlsi-architecture-and-design-for-mpeg-encoder-decoder">http://blog.ektel.com.np/2012/03/vlsi-architecture-and-design-for-mpeg-encoder-decoder</a>\r\n\r\nI thought this view is also helpful for possible cross reference between \r\nruby language and hdl language	1.9.3		2012-04-20 15:26:00	Ramesh	Rai	2012-05-02 12:04:59.149899	2012-05-11 18:26:49.045411
325	ruby-talk	Hash	How can I do h["foo"] += "bar" if h["foo"] does not exist?	hash, key, value, default, empty, new	> I have a hash with various keys and values that are strings.\r\n>\r\n> If the key exists, the following works: h["foo"] += "bar"\r\n\r\nThat only works if the value at key "foo" responds to +. In this case, I presume, a String.\r\n\r\n> But if the key does not exist, I get an error.\r\n\r\nYou only get an error because nil (the default default value) doesn't respond to +.\r\n\r\n> Is it possible _in one statement_ to cover both the cases where the key\r\n> does exist (as above) AND the case where the key does not exist - and in\r\n> this situation I'd like the new key and value pair to be created in the hash.\r\n\r\nAssuming you want an empty string as your default value:\r\n\r\n    h = Hash.new { |h,k| h[k] = "" }\r\n\r\nThat will initialize your hash 'h' with a default value proc that gets run every time you access a key that isn't yet a member of h. That proc is passed the hash (self) and they key. We assign a new empty string at h[k].	1.9.3	ryand-ruby@zenspider.com	2011-12-08 22:07:00	Ryan	Davis	2012-05-02 12:40:17.252021	2012-05-05 19:02:31.761924
380	ruby-talk	API	API for getting Google search results?	api, google, search	<a href="http://code.google.com/apis/websearch/docs/#fonje">http://code.google.com/apis/websearch/docs/#fonje</a>\r\n\r\nscroll to 'Code Snippets'	1.9.3	david_v_wright@yahoo.com	2010-11-13 01:46:00	David	Wright	2012-05-02 12:51:40.146076	2012-05-11 20:38:36.628057
303	ruby-talk	OpenSSL	Using OpenSSL for making a network TLS server	openssl, server, class, crypto, public key, certificate	> Ruby EventMachine has some issues in its TLS implementation \r\n> (coded in C++ using OpenSSL) as noted in:\r\n>\r\n> <a href="https://github.com/eventmachine/eventmachine/issues/266">https://github.com/eventmachine/eventmachine/issues/266</a>\r\n>\r\n> I've been suggested by the author of the project to make a TLS stack\r\n> on pure Ruby (by using OpenSSL) and I want to start with it. I'd like\r\n> to ask some very basic questions so I can investigate how to achieve\r\n> it:\r\n>\r\n> - Imagine that a Ruby server receives a TLS connection from a client.\r\n> I assume that my server must implement the TLS handshake protocol at\r\n> pure Ruby level, this is, OpenSSL will not help me with this, am I\r\n> right?\r\n>\r\n> - Once such TLS handshake is started, I could receive a certificate\r\n> from the client, such certificate must be parsed "manually" at Ruby\r\n> level in the server (OpenSSL will not help me with this),am I right?\r\n>\r\n> - I must also send my certificate(s) to the peer (again at Ruby level).\r\n>\r\n> - After previous steps, I expect that TLS connection is done so I will\r\n> receive data from the client. And I should process/decrypt such data\r\n> by using some OpenSSL::XXXXXXX instance and method, am I right?\r\n>\r\n> - And in case I reply data to the client, I must first encrypt the\r\n> data using some OpenSSL::XXXXXXXX instance and method, and then send\r\n> the generated data to the client, am I right?\r\n>\r\n> Thanks a lot for any input that helps me starting with this stuff.\r\n\r\nRuby's OpenSSL library has an SSLServer class that will do exactly what\r\nyou're asking. Here is just some quick example code (most of the code is\r\njust building a self-signed cert, you could just as easily load this from a\r\nfile):\r\n\r\nrequire 'openssl'\r\nrequire 'socket'\r\n\r\ntcp_server = TCPServer.new 8080\r\n\r\nctx = OpenSSL::SSL::SSLContext.new\r\nctx.key = OpenSSL::PKey::RSA.new 2048\r\nctx.cert = OpenSSL::X509::Certificate.new\r\nctx.cert.subject = OpenSSL::X509::Name.new [['CN', 'localhost']]\r\nctx.cert.issuer = ctx.cert.subject\r\nctx.cert.public_key = ctx.key\r\nctx.cert.not_before = Time.now\r\nctx.cert.not_after = Time.now + 60 * 60 * 24\r\nctx.cert.sign ctx.key, OpenSSL::Digest::SHA1.new\r\n\r\nserver = OpenSSL::SSL::SSLServer.new tcp_server, ctx\r\nsocket = server.accept\r\nputs socket.gets\r\n\r\nWith anything having to do with crypto I would highly recommend not trying\r\nto create the solution yourself (it is far to easy to screw up). Instead\r\nyou should take time to review existing solutions that have been "battle\r\nhardened."\r\n\r\n-	1.9.3	jdowney@gmail.com	2011-12-02 09:01:00	John	Downey	2012-05-02 12:36:24.289175	2012-05-11 20:17:20.901923
151	ruby-talk	String	Very Very simple problem	string, replace, drop, first, character, sub, index	> I have a string like "12345678". I want to remove first character.\r\n> How can I do this?\r\n\r\nirb(main):001:0> s="12345678"\r\n=> "12345678"\r\nirb(main):002:0> s[0,1] = ""\r\n=> ""\r\nirb(main):003:0> s\r\n=> "2345678"\r\n\r\nirb(main):004:0> s="12345678"\r\n=> "12345678"\r\nirb(main):005:0> s.sub!(/./,'')\r\n=> "2345678"\r\nirb(main):006:0> s\r\n=> "2345678"	1.9.3	b.candler@pobox.com	2011-07-25 22:13:00	Brian	Candler	2012-05-02 12:09:52.281866	2012-05-05 18:44:30.853304
48	ruby-talk	Array	Why is dup is not working correctly?	array, dup, clone, object_id	> You are right about the strings having the same object_ids in each\r\n> object, which explains why the modification on the dupped object\r\n> affects the original strings. That helps. But the suggested strategy\r\n> doesn't solve the problem:\r\n\r\nirb(main):001:0> array = ["string"]\r\n=> ["string"]\r\nirb(main):002:0> array_dup = []\r\n=> []\r\nirb(main):003:0> array_dup[0] = array[0].clone\r\n=> "string"\r\nirb(main):004:0> array_dup[0].object_id\r\n=> 30816948\r\nirb(main):005:0> array[0].object_id\r\n=> 30838824	1.9.3	pg@thimian.com	2009-12-29 07:23:00	Phillip	Gawlowski	2012-05-02 11:51:20.325186	2012-05-05 18:40:50.194299
344	ruby-talk	Language	Writing ruby to [LANGUAGE] "compiler"	RubyToC, C, scan, compile, translate, tokenize	> Say I write something in Ruby. Then I want to translate this code\r\n> into C.\r\n>\r\n> I do not aim for 100% translation. 60% is sufficiently well.\r\n>\r\n> For instance, think you are using only classes, and "def method"\r\n> in those classes. No metaprogramming, no blocks etc...\r\n>\r\n> You use only a small subset of Ruby.\r\n>\r\n> And now you want to translate this into C. (Pure C, not Ruby-C).\r\n>\r\n> I can do this by hand (if given enough time), but I want to reduce\r\n> this amount spent.\r\n>\r\n> The language C is just an example. You can insert any-other language\r\n> into this.\r\n>\r\n> My question is - how to approach this goal?\r\n>\r\n> My most simple way would be via using readlines of the .rb file\r\n> and then analyzing it. And then inserting what seems appropriate.\r\n>\r\n> But I could do this without the use of a scanner.\r\n>\r\n> Do I have to use a scanner though and tokenize the stream?\r\n>\r\n\r\nalso see\r\n3) RubyToC	1.9.3		2011-12-17 19:35:00	Reid	Thompson	2012-05-02 12:44:07.746257	2012-05-05 19:37:03.780126
188	ruby-talk	Array	Is there a better way to check this array?	array, regex, variable, use	> Thanks. Both of these have given me more food for thought. I knew grep should have worked. \r\n> The issue issue Ammar that I see with it though is I have to pass item via a variable and \r\n> that doesn't seem be working very well. The any? option Peter suggested does however seem \r\n> to work. I'll need to see if I notice any performance issues using it though.\r\n\r\nFYI, you can use variables inside the regular expression.\r\n\r\n>> name = "fred"\r\n=> "fred"\r\n>> names.grep /#{name}/i\r\n=> ["fred,9"]	1.9.3	ammarabuali@gmail.com	2011-12-03 14:22:00	Ammar	Ali	2012-05-02 12:13:45.477898	2012-05-05 19:32:28.948615
375	ruby-talk	ObjectSpace	Free an Object	ObjectSpace, finalizer, destroy, ensure, gc, garbage collector	There is a module called ObjectSpace in ruby \r\n(<a href="http://corelib.rubyonrails.org/classes/ObjectSpace.html#M001607">http://corelib.rubyonrails.org/classes/ObjectSpace.html#M001607</a>). This will help \r\nprogram to interact with the garbage collector. So using an ObjectSpace, you can \r\ncreate a finalizer proc to free the resources of an object.\r\n\r\nBy default, objects are destroyed by the Garbage collector. But still\r\nyou can ensure using ObjectSpace module.\r\n\r\nHere is an example:\r\n\r\nclass DestroyObject\r\n  def initialize\r\n    # Adds a proc as finalizer, this will be called after the object was destroyed\r\n    # Source: http://www.ruby-doc.org/core-1.9.3/ObjectSpace.html#method-c-define_finalizer\r\n    ObjectSpace.define_finalizer(self,self.class.method(:finalize).to_proc)\r\n  end\r\n\r\n  # This should be a class method, not an instance method\r\n  # For reason, <a href="http://www.mikeperham.com/2010/02/24/the-trouble-with-ruby-finalizers/">http://www.mikeperham.com/2010/02/24/the-trouble-with-ruby-finalizers/</a>\r\n  def self.finalize(id)\r\n    puts "Object #{id} dying at #{Time.now}"\r\n  end\r\nend\r\n\r\nDestroyObject.new\r\n\r\n# Initiates garbage collection\r\n# Source: <a href="http://www.ruby-doc.org/core-1.9.3/ObjectSpace.html#method-c-garbage_collect">http://www.ruby-doc.org/core-1.9.3/ObjectSpace.html#method-c-garbage_collect</a>\r\n\r\nObjectSpace.garbage_collect\r\n\r\nI hope it clears your query on finalizer.\r\n\r\nEven I'm not expert on this, but this thread helped me to learn about\r\nthis. If anyone finds any mistakes, welcome to correct.	1.9.3	email2vimalraj@gmail.com	2011-12-23 05:21:00	Vimal	Raj	2012-05-02 12:50:49.671066	2012-05-11 20:38:04.459055
180	ruby-talk	Time	Time Compare	time, compare, unconditional, assignment, unsafe, idiom	> now = Time.now\r\n> yesterday=now-1.day\r\n> tomorrow=now+1.day\r\n>\r\n> is_between = true if now > yesterday and now < tomorrow\r\n\r\nSorry for interrupting you, but this is not a safe idiom.  Why? Because of this: assuming someone \r\nhad used "is_between" before then chances are that the value is logical true (there are far more \r\ntrue values than false values). If the date is not in between you still retain the old value of x.  Instead, rather do the assignment unconditionally:\r\n\r\nis_between = now > yesterday && now < tomorrow\r\nis_between = now > yesterday and now < tomorrow\r\n\r\nYou can as well do\r\n\r\nis_between = (yesterday..tomorrow).include? now\r\n\r\nbut this has a slightly different semantics because it will also be true if your test time \r\nmatches one of the boundaries.	1.9.3	shortcutter@googlemail.com	2009-01-27 09:22:00	Robert	Klemme	2012-05-02 12:13:45.230645	2012-05-11 17:31:48.846206
156	ruby-talk	IPAddr	Searching an array for a pattern derived from another array	ip, address, search, array, match, 	>> Given two arrays containing IP addresses like the ones below, how would I\r\n>> search for the first element in 'servers' that pattern matches and element\r\n>> in 'nics' where only the first 2 parts of the IP addresses need to match,\r\n>> like 192.168.*.* or 10.14.*.* or 98.139.*.*\r\n>>\r\n>> servers = Array["192.168.0.251","10.14.0.142","98.139.180.149"]\r\n>> nics = Array["10.10.0.255","173.194.37.16","10.14.0.170"]\r\n>>\r\n>> I've got some kind of beginning with the code below but I'm stuck. Any hints?\r\n>>\r\n>> ----------------\r\n>> log_server = "nothing"\r\n>>\r\n>> until log_server != "nothing" servers.each |thisip| do\r\n>>\r\n>> # Consider only the first two parts of the 'thisip' IP address = (192.168.*.* or 10.14.*.* or 8.139.*.*)\r\n>> # Compare it with each element in 'nics'\r\n>> # Set 'log_server' equal to the first value of 'thisip' that pattern\r\n>> matches an element in 'nics'\r\n>> log_server = thisip\r\n>>\r\n>> end\r\n>> ----------------\r\n>\r\n> I would approach this like this:\r\n>\r\n> 1. Write a method which receives two arguments (servers and nics of course).\r\n> 2. Let the method start by preparing the data, i.e. #map both arrays\r\n> into something which is quicker to match.\r\n> 3. iterate by doing servers_converted.each or maybe\r\n> servers_converted.each_with_index and returning from the method on first match.\r\n> 4. return nil at the end of the method (nothing found) or raise an exception depending on the wanted semantics\r\n>\r\n> Now, how to do the matching?  I would not use regular expressions for\r\n> the matching as you really want to match numeric values.  Conversion\r\n> could use ip.scan(/d+/).map(&:to_i).  You could use Array#[] to\r\n> obtain a two element Array from a four element Array.\r\n>\r\n> You could as well search for a gem which deals with IP addresses.\r\n> Since the problem is so common chances are that such a beast exists.\r\n>\r\nRather than search for a gem, look no further than the standard library and you'll come across \r\nthe IPAddr library. (It's been in there long before 1.9.3 so you're almost certain to have it.)\r\n\r\n$ irb\r\nirb(main):001:0> RUBY_VERSION\r\n=> "1.9.3"\r\nirb(main):002:0> require 'ipaddr'\r\nirb(main):003:0> servers = ["192.168.0.251", "10.14.0.142",  = "98.139.180.149"].map {|ip| IPAddr.new(ip)}\r\nirb(main):004:0> nics    = [ "10.10.0.255", "173.194.37.16", = "10.14.0.170"   ].map {|ip| IPAddr.new("#{ip}/16")}\r\nirb(main):005:0> log_server = servers.detect {|ip| nics.any? {|nic| = nic.include? ip } }\r\n=> #<IPAddr: IPv4:10.14.0.142/255.255.255.255>\r\nirb(main):006:0> log_server.to_s\r\n=> "10.14.0.142"\r\n\r\nThe /16 added to the mapping of nics is the number of bits in the network mask.\r\n\r\nSo translating Robert's approach:\r\n\r\n1. Write a methods that receives two arguments, servers and nics (as arrays of IP strings). \r\n   (Optionally, a third argument that gives the bits in the netmask, perhaps defaulting to 16.)\r\n2. map the Strings to IPAddrs\r\n3. detect (find) the first server having an IPAddr that is included in the nic's network.\r\n4. (there is no step 4 ;-)	1.9.3	Rob@AgileConsultingLLC.com	2011-12-13 08:13:00	Rob	Biedenharn	2012-05-02 12:10:33.070391	2012-05-11 14:00:15.215736
279	ruby-talk	JSON	Desktop <-> Web	rack, json, servlet, sinatra	> ultimately I want to use Rack instead. An example of a simple Rack-based \r\n> JSON servlet would be awesome. Anyone have one?\r\n\r\nHow about this with Sinatra, which sits on top of Rack:\r\n\r\n--- myapp.rb ---\r\nrequire 'rubygems'\r\nrequire 'sinatra'\r\nrequire 'json'\r\nrequire 'widget'\r\n\r\nget '/widgets.json' do\r\n  Widget.all.to_json\r\nend\r\n\r\nget '/widgets/:id.json' do\r\n  Widget.find(Integer(params[:id])).to_json\r\nend\r\n\r\npost '/widgets.json' do\r\n  item = JSON.parse(request.body.read)\r\n  raise "Bad object" unless item.is_a? Widget\r\n  Widget.add(item).to_s\r\nend\r\n\r\n--- widget.rb ---\r\n# Rubbish model, not thread-safe!\r\nclass Widget\r\n  attr_accessor :id, :name, :price\r\n  def initialize(id, name, price)\r\n    @id, @name, @price = id, name, price\r\n  end\r\n  def to_json(*a)\r\n    {\r\n      'json_class' => self.class.name,\r\n      'data' => [ @id, @name, @price ],\r\n    }.to_json(*a)\r\n  end\r\n  def self.json_create(o)\r\n    new *o['data']\r\n  end\r\n  def self.all\r\n    @all ||= []\r\n  end\r\n  def self.add(item)\r\n    @seq ||= 0\r\n    @seq += 1\r\n    item.id = @seq\r\n    all << item\r\n    return @seq\r\n  end\r\n  def self.create(*args)\r\n    add(new(*args))\r\n  end\r\n  def self.find(id)\r\n    all.find { |item| item.id == id }\r\n  end\r\nend\r\nWidget.create(nil, "flurble", 12.3)\r\nWidget.create(nil, "boing", 4.56)	1.9.3	b.candler@pobox.com	2009-01-20 11:19:00	Brian	Candler	2012-05-02 12:33:03.54443	2012-05-03 23:52:58.167834
437	ruby-talk	Hash	Attr_accessor for hash keys	hash, method_missing, attr_accessor	>> Is there a way to use attr_accessor, or something like it (without\r\n>> writing it from scratch), for hash keys?  For instance:\r\n>> \r\n>>    class Foo\r\n>>      attr_accessor :bar[:one], :bar[:two]\r\n>>      def initialize(bar)\r\n>>        @bar = bar\r\n>>      end\r\n>>    end\r\n>> \r\n>> Obviously, :bar[:one] and :bar[:two] won't work, because symbols don't\r\n>> have [] methods, but that should illustrate the general gist of what I'm\r\n>> asking (I hope).  I'd just like to avoid the clutter of writing a bunch\r\n>> of basic accessors myself, the long way, in a class definition where I'd\r\n>> like to keep all the data in a hash but have direct accessor method ways\r\n>> to work with specific key=>value pairs.\r\n>> \r\n>>  \r\n>> \r\n> \r\n> This is reasonably close to what you described:\r\n> \r\n> module HashAccessor\r\n>  def hash_accessor(hash_name, *key_names)\r\n>    key_names.each do |key_name|\r\n>      define_method key_name do\r\n>        instance_variable_get("@#{hash_name}")[key_name]\r\n>      end\r\n>      define_method "#{key_name}=" do |value|\r\n>        instance_variable_get("@#{hash_name}")[key_name] = value\r\n>      end\r\n>    end\r\n>  end\r\n> end\r\n> \r\n> class Foo\r\n>  extend HashAccessor\r\n>  hash_accessor :bar, :one, :two\r\n>  def initialize(bar)\r\n>    @bar = bar\r\n>  end\r\n> end\r\n> \r\n> foo = Foo.new(:one => 1, :two => 2) # => #<Foo:0x9c28310\r\n> @bar={:one=>1, :two=>2}>\r\n> foo.one                             # => 1\r\n> foo.one = 42\r\n> foo                                 # => #<Foo:0x9c28310\r\n> @bar={:one=>42, :two=>2}>\r\n> \r\n\r\nThis sounds like a job for method_missing ...\r\n\r\n  class Foo\r\n    def initialize( bar )\r\n      @bar = bar\r\n    end\r\n\r\n    def method_missing( key, *args, &block )\r\n      super unless @bar.has_key? key\r\n      @bar[key]\r\n    end\r\n  end\r\n\r\n\r\nAlso, take a look at Ara Howard's "Map" gem and see if that will get you \r\nwhat you need.\r\n\r\n<a href="https://github.com/ahoward/map">https://github.com/ahoward/map</a>\r\n\r\n  m = Map(:one => 1, :two => 2)\r\n  s = m.struct\r\n  s.one  #=> 1\r\n  s.two  #=> 2	1.9.3	tim.pease@gmail.com	2011-07-21 16:56:00	Tim	Pease	2012-05-02 13:47:48.236689	2012-05-11 20:49:26.705635
25	ruby-talk	Javascript	Erb and js question	javascript, link, recommend, focus, function, onload, event	This looks like a JavaScript question. I recommend this forum :\r\n\r\n<a href="http://w3schools.invisionzone.com/">http://w3schools.invisionzone.com/</a>\r\n\r\nI suggest you need the focus () function called by the onload event.	1.9.3	rubfor@recitel.net	2009-11-13 08:40:00	Mike	Stephens	2012-05-02 11:44:39.041222	2012-05-11 18:07:47.939209
93	ruby-talk	Language	Interpreter to work well with other programming language	language, interpreter, ruby, jruby, java, nonexistent, distributed, inter process communication	> I need a Ruby Interpreter which works well with all other kinds of \r\n> programming languages. These would potentially include C#, C, C++, Java, PHP, \r\n> Perl, Python,  and other ones if possible.\r\n>\r\n> The Ruby Interpreter has to be expandable and easy to use or implement.\r\n>\r\n> I want it to interpret the other languages so that it works along well \r\n> with Ruby. I'm trying to build the main format of the program in Ruby, \r\n> while other fellow developers and programmers are to program in \r\n> different languages like C#, PHP, Perl, etc.\r\n>\r\n> It needs to be capable of interpreting various other programming \r\n> languages, but be a Ruby Programmed Interpreter, not a Java Net Beans \r\n> Interpreter.Whereas, the interpreter would interpret other languages \r\n> while working inside of Rubyprogramming, but not to be compiled or\r\n> anything.\r\n\r\nI doubt this beast exists.  You can use JRuby and then essentially call \r\narbitrary Java code.  I am not sure whether there is a similar thing for  \r\n\r\nNet - but I am almost certain that there is no such thing as an engine \r\nwhich will interpret .Net *and* Java code equally well at the same time \r\n- let alone all the other languages you mention.\r\n\r\nI doubt the usefulness as well.  All in one solution tend to get bloated \r\nand have all sorts of issues caused by the different worlds they try to \r\nmelt into one.\r\n\r\nYour time and money is probably better invested by either using a \r\ndistributed approach (i.e. inter process communication like with CORBA \r\nor WebServices) or teach the other guys Ruby or Python to use that \r\ninstead of their favorite language.  My 0.02EUR...	1.9.3	shortcutter@googlemail.com	2008-12-27 16:45:00	Robert	Klemme	2012-05-02 11:59:02.526141	2012-05-06 19:14:47.925112
8	ruby-talk	Book	OO style tutorials?	book, recommend, object, oriented, construction, bertrand meyer, oo, design	> I should also declare that I'm a pretty lousy programmer, and \r\n> throughout Uni I had difficulty understanding the need for UML[1], \r\n> CRC[2], Design Patterns and various other OO design jargon.  But \r\n> after 8 odd years working in the commercial world they began to find \r\n> their place in my world.  The understanding I came to is that there \r\n> isn't a perfect tutorial for everyone because it depends a lot on \r\n> your experience.  Stuff that made no sense to me 8 years ago (and \r\n> indeed seemed overwhelmingly complicated) makes perfect sense today.\r\n\r\nTook me some time, too.  My first OO program was horrible and I believe \r\nit took at least a year until I managed to grasp it - at least half way.\r\n\r\n> That said I quite like CRC as a simple tool to help you think along \r\n> the right lines.\r\n\r\nI also believe that CRC is a good tool because it is quite simple and \r\nkeeps you focused on important points.  I'd say though that it still \r\ntakes a bit more to craft a good OO application.  But CRC is very useful \r\nas it will also help to not lump too much functionality into a single class.\r\n\r\n> I suspect beyond that you probably want a good UML or Design Patterns \r\n> book.  I don't have any recommendations but hopefully someone else on \r\n> this thread will. :)\r\n\r\nI always recommend "Object Oriented Software Construction" by Bertrand \r\nMeyer.  It is not exactly a tutorial but rather an encyclopedia where \r\nyou can look up whatever OO term you encounter somewhere else.  Meyer \r\nreally has a profound understanding of all the different aspects of OO \r\nand ways in which it can be used.\r\n\r\n<a href="http://archive.eiffel.com/doc/oosc/page.html">http://archive.eiffel.com/doc/oosc/page.html</a>	1.9.3	shortcutter@googlemail.com	2009-03-08 14:33:00	Robert	Klemme	2012-05-02 11:37:03.195562	2012-05-11 18:02:45.387378
425	ruby-talk	Array	Sorting Algorithm	array, sort, algorithm, push, concat, append	> array.push unsortedarray[0..unsortedarray.length]\r\n>\r\n> does not what you expect. It does not append the elements of\r\n> "unsortedarray" to "array" but rather "unsortedarray" itself. So after\r\n> the first run of the inner while loop you end up with array == [['a',\r\n> 'b', 'c', 'd']]. And this will break your algorithm.\r\n>\r\n> Since you want the *elements* appended, you have to unpack\r\n> "unsortedarray" first:\r\n>\r\n> array.push *unsortedarray\r\n\r\nAnother variant to achieve this without unpacking uses Array#concat:\r\n\r\narray.concat unsortedarray	1.9.3	shortcutter@googlemail.com	2012-03-18 13:51:00	Robert	Klemme	2012-05-02 12:59:50.728173	2012-05-06 19:55:35.547166
348	ruby-talk	Apache	Ruby + apache. need to export path	apache, ruby, setup, link, recommend	> Is there a way to set up this variable through apache?\r\n\r\n<a href="http://httpd.apache.org/docs/2.2/mod/mod_env.html#setenv">http://httpd.apache.org/docs/2.2/mod/mod_env.html#setenv</a>	1.9.3	ryand-ruby@zenspider.com	2009-12-28 14:18:00	Ryan	Davis	2012-05-02 12:44:07.81196	2012-05-11 20:30:23.759674
94	ruby-talk	Array	Mysql::Result .each_hash - unexpected result	iterator, rewind, each, sql	> Can you say something about how an iterator can not "rewind"? Do you\r\n> mean I can't do nested iterators in ruby?\r\n\r\nNothing to do w ruby. Just understanding file/db handling...\r\n\r\neg, try,\r\n\r\n  >items.each{|item| p item}\r\n    ["1", "item01"]\r\n    ["2", "item02"]\r\n    ["3", "item03"]\r\n  #=> #<Mysql::Result:0x8d11930>\r\n\r\nok, let's try it again\r\n\r\n  >items.each{|item|p item}\r\n  #=> #<Mysql::Result:0x8d11930>\r\n\r\nSee, it outputs nothing. the record pointer does not rewind.\r\nSo let us rewind the pointer:\r\n\r\n  >items.data_seek 0\r\n  #=> #<Mysql::Result:0x8d11930>\r\n\r\nand run it again:\r\n\r\n  >items.each{|item|p item}\r\n    ["1", "item01"]\r\n    ["2", "item02"]\r\n    ["3", "item03"]\r\n  #=> #<Mysql::Result:0x8d11930>\r\nBTW, you can also try Sequel rubygem for very easy installing &\r\nhandling of sql (and you wont encounter problem above).	1.9.3	botpena@gmail.com	2010-11-15 16:45:00	Bot	Pena	2012-05-02 11:59:02.560881	2012-05-11 16:50:33.740731
414	ruby-talk	Array	How to create Arrays (and Hashes) correctly?	array, new, [], new, hash, {}, containing	> As far as I know, I can create Arrays and Hashes in Ruby at least in two\r\n> ways, either by:\r\n>\r\n>        a = []\r\n> or by:\r\n>        a = Array.new\r\n>\r\n> I'm coming from JavaScript world and in JS the first form is prefered ove=\r\nr\r\n> the second one. Is there any difference in Arrays (and Hashes) created in\r\n> Ruby by [] (and {} respectively) and Array.new (Hash.new) ?\r\n\r\nNo, if you only consider constructor without arguments.  But\r\nconstructors with arguments provide additional features (see\r\ndocumentation).\r\n\r\n> I tried to answer myself searching in google and the only conclusion I\r\n> found is that, when creating arrays with elements, one should use:\r\n>\r\n>        a = ["Ala", "ma", "kota"]\r\n\r\nFor strings you can even do this if they do not contain whitespace:\r\n\r\na = %w{Ala ma kota}\r\na = %w[Ala ma kota]\r\na = %w(Ala ma kota)\r\na = %w<Ala ma kota>\r\n\r\netc.\r\n\r\n> but on the other hand, for empty array with element added dynamically\r\n> later, following form is more accurate:\r\n>\r\n>        a = Array.new   # not a = []\r\n>        a.push(...)\r\n>\r\n> Is that right, or have I misunderstood something here?\r\n\r\nI prefer to use [] over Array.new and {} over Hash.new as it is less\r\ntyping and visually more obvious.  I only resort to Array.new and\r\nHash.new if I need functionality with the constructor, e.g.\r\n\r\nirb(main):003:0> a = Array.new 5, 0\r\n=> [0, 0, 0, 0, 0]\r\nirb(main):004:0> a = Array.new(5) {|i| "dat #{i}"}\r\n=> ["dat 0", "dat 1", "dat 2", "dat 3", "dat 4"]\r\n\r\nand for Hash\r\n\r\nirb(main):005:0> h = Hash.new 0\r\n=> {}\r\nirb(main):006:0> h[:x] += 1\r\n=> 1\r\nirb(main):007:0> h\r\n=> {:x=>1}\r\n\r\nas well as\r\n\r\nirb(main):008:0> h = Hash.new {|ha,k| ha[k] = []}\r\n=> {}\r\nirb(main):009:0> h[:y] << "foo"\r\n=> ["foo"]\r\nirb(main):010:0> h[:y] << "bar"\r\n=> ["foo", "bar"]\r\nirb(main):011:0> h[:x] << 123\r\n=> [123]\r\nirb(main):012:0> h\r\n=> {:y=>["foo", "bar"], :x=>[123]}	1.9.3	shortcutter@googlemail.com	2011-12-12 13:05:00	Robert	Klemme	2012-05-02 12:56:17.619185	2012-05-05 19:04:27.566946
297	ruby-talk	Encoding	Ruby 1.9.2 commandline options	encoding, utf-8, multibyte, external	>>> ruby --help lists -E, which doesn't seem to work as advertised,\r\n>>> but not -K, which does what I wanted. Can someone please check\r\n>>> that the source code and the help message coincide?\r\n>>\r\n>> I'm not sure what you mean by work as advertised, but I would like to\r\n>> note that the syntax for -E is different that of -K; it takes the full\r\n>> encoding name, case-insensitive:\r\n>>\r\n>> ruby -Eutf-8:utf-8\r\n>> ruby -Eascii:utf-8\r\n>>\r\n>> Does that do what you except?\r\n>\r\n> No, it still complains "invalid multibyte char (US-ASCII)" on\r\n> a valid UTF-8 character, in a UTF-8 file having no Unicode BOM.\r\n>\r\n> Also, the help implies that you can set just the external encoding\r\n> without the internal encoding, which I did, since I could care less\r\n> which internal encoding Ruby uses.\r\n\r\nI believe you're misunderstanding what internal and external encodings\r\nrepresent. For a thorough explanation, see <a href="http://goo.gl/iUBCX">http://goo.gl/iUBCX</a> \r\nBriefly, if your source file contains non-ASCII characters the\r\nrecommended approach is to declare a source encoding via a magic\r\ncomment. In this case, your file should begin with "# coding: utf-8".\r\nIf you insist on using `-K`, try `ruby -KU` instead.	1.9.3	runrun@runpaint.org	2010-11-18 00:09:00	Run Paint	Paint Run	2012-05-02 12:35:36.346418	2012-05-11 20:15:34.346716
377	ruby-talk	Encoding	Encoding: ruby_hates_you_and_me_and_the_encodings_we_rode_in_on?	encoding, rant, ascii-8bit, 1.9, Dir, force_encoding	> |def prep_file(path)\r\n> |\r\n> |  ret = ''\r\n> |\r\n> |  x = File.open(path)\r\n> |\r\n> |  x.lines.each do |l|\r\n> |    l.gsub!('', ' ')\r\n> |    ret << l\r\n> |  end\r\n> |\r\n> |  puts ret\r\n> |\r\n> |end\r\n> |...\r\n> |compare.rb:64:in `gsub': broken UTF-8 string (ArgumentError)\r\n> |  from compare.rb:64:in `block in prep_file'\r\n> |  from compare.rb:63:in `each_line'\r\n> |  from compare.rb:63:in `call'\r\n> |  from compare.rb:63:in `each'\r\n> |  from compare.rb:63:in `prep_file'\r\n> |  from compare.rb:144:in `<main>'\r\n> \r\n> Regular expression operation does not work fine on broken strings.  It\r\n> seems that you specify utf-8 for your locale, yet the content of\r\n> reading file is not.  If you know the encoding of the content, say\r\n> iso-8859-1, you can open it with the explicit encoding:\r\n> \r\n>   x = File.open(path, "r:iso-8859-1")\r\n> \r\n> if not, you can say it\r\n> \r\n>   x = File.open(path, "r:ascii-8bit")\r\n> \r\n> unless the file content is non ASCII like UTF-16.\r\n> \r\n>               matz.\r\n\r\nThanks for the suggestion of using ascii-8bit.  This solved my problem.\r\n\r\nThe line of code that was giving me fits was the following line.  Worked \r\nin 1.8 but didn't work in 1.9.0\r\n\r\nputs Dir["**/*"].select {|x| x.match(/(jpg)$/)}\r\n\r\nwhen I changed it to this\r\n\r\nputs Dir["**/*"].select {|x| \r\nx.force_encoding("ascii-8bit").match(/(jpg)$/)}\r\n\r\nall was well.	1.9.3	pfharlock@gmail.com	2009-12-27 11:04:00	Gary	Watson	2012-05-02 12:50:49.721239	2012-05-11 15:54:26.898916
207	ruby-talk	File	Close? ... or have I been messing up from the get go?	file, block, close	> when I've read files, I've never closed them! I've always been under the\r\n> assumption that reading a file closed the I/O stream automatically when\r\n> completed. Have I been under the wrong assumption from the get go?\r\n>\r\n>\r\nWhen you read in the info in a block, the file closes automatically.\r\nOtherwise you have to manually close it.	1.9.3	richard.conroy@gmail.com	2011-12-09 15:02:00	Richard	Conroy	2012-05-02 12:18:48.943316	2012-05-03 19:56:39.374708
138	ruby-talk	Dir	Search latest version of file in directory	dir, file, join, hash, string, version, extract, sort_by, sort	> I have a directory full of files and want to get the newest version\r\n> of each out of the directory. The files look like below. Please tell me\r\n> if you know a way to pull out the latest version of each. Thanks\r\n> \r\n> 34_web1_no2_09202008.txt\r\n> 34_web1_no2_09212008.txt <--want to pull out this latest version\r\n> 34_web2_no3_10122008.txt\r\n> 34_web2_no3_10132008.txt <--want to pull out this latest version\r\n> \r\n> ******snippet*******************************************\r\n> \r\n> newsortfile = Dir["C:/Status2/*.html"].map{|@f|\r\n> [@f,File.mtime(@f)]}.sort_by{|@i|@i[1]}\r\n> @NewestFile = @i[1]\r\n> \r\n> Dir.entries("C:/Status2/").each do |filename|\r\n>   if File.mtime("C:/Status2/"+filename) == @NewestFile then\r\n>     puts filename\r\n>    end\r\n>  end\r\n\r\nThis is how I'd approach this:\r\n\r\ndir = "C:/Status2"\r\nfiles = Hash.new {|h,k| h[k] = []}\r\n\r\nDir[File.join(dir, "*.txt")].each do |f|\r\n   files[f[/^d+_webd+_nod+/]] << File.join(dir, f)\r\nend\r\n\r\nfiles.each do |k,v|\r\n   puts v.sort_by! {|f| File.mtime(f)}.last\r\nend	1.9.3	shortcutter@googlemail.com	2009-02-09 21:53:00	Robert	Klemme	2012-05-02 12:07:07.522416	2012-05-06 18:31:48.866607
469	ruby-talk	Regexp	Help with Regexp?	regex, split, test, first, element	-\r\n\r\n> > I need help with a Regular Expression, I need to split the text on "- "\r\n> > on get the first element.\r\n>\r\n> Try String#split:\r\n>\r\n> >> ary = "I want this - not that.".split(" - ")\r\n> => ["I want this", "not that."]\r\n> >> ary[0]\r\n> => "I want this"\r\n\r\n... and if you want to split it into only two elements even if there\r\nare multiple instance of the split substring, use the optional limit\r\nargument:\r\n\r\n    >> ary = "I want this - not that - nor the other.".split(' - ', 2)\r\n    => ["I want this", "not that - nor the other."]\r\n    >> ary[0]\r\n    => "I want this"\r\n    >> ary[1]\r\n    => "not that - nor the other."	1.9.3	code@apotheon.net	2011-07-24 10:13:00	Chad	Perrin	2012-05-02 14:06:00.762356	2012-05-05 20:30:15.77809
397	ruby-talk	Time	How to get week of the month?	time, integer, math, ceil, float, convert, week, month	It seems you really just need the integer that represents the day from \r\nthe date...  convert that to a float (with #to_f) and then divide it by \r\n7.0, then call #ceil on the result (which will round it up...)	1.9.3	jakekaiden@yahoo.com	2011-08-04 00:44:00	jake	kaiden	2012-05-02 12:53:10.227205	2012-05-06 22:29:55.629599
89	ruby-talk	Block	Understanding Ruby blocks	block, use, before, after, generic, functionality	> I have been practicing Ruby and believe it or not the hardest part for\r\n> me to understand (so far) is the concept of using blocks, why used them\r\n> and how to use them.\r\n\r\nThere are several benefits and use cases for using blocks.\r\n\r\n> For instance, I know I don't fully understand blocks but why would you\r\n> use a block in the following situation.\r\n>\r\n> text = "Some Text"\r\n> File.open('test_file.txt', 'a+') do |file|\r\n>   file.write(text)\r\n> end\r\n>\r\n> Why not just ...?\r\n>\r\n> text = "Some Text"\r\n>  file = File.open('test_file1.txt', 'a+')\r\n> file.write(text)\r\n> ..why use a block instead?\r\n\r\nThis is quite straightforward: in this situation the use case is that\r\nyou want to ensure that something happens before and after the block\r\ncode. In this case, the File#open method opens the file, then calls\r\nthe block and then ensures that the file is closed, even in the face\r\nof an exception within the block.\r\n\r\nSo, first use case: when you want code executed around code that is\r\nnot under your control.\r\n\r\nAnother use case is when you provide a generic functionality that can\r\napplied to many situations, but you want to leave the exact detailed\r\nbehavior to the client code. For example, the Enumerable#each method\r\nprovides its clients with the capability of traversing an enumerable\r\ninstance, doing something with each element one at a time. What you do\r\nwith the element is responsibility of the client code, so the each\r\nmethod just accepts a block to achieve that.\r\n\r\nHope this helps and I hope the concept clicks soon, because it's one\r\nof the things that make Ruby so wonderful.	1.9.3	jgabrielygalan@gmail.com	2011-11-24 17:01:00	JesÃºs	Gabriel y Galan	2012-05-02 11:57:41.84874	2012-05-05 19:39:08.15355
493	ruby-talk	System	How to use Ruby like shell script?	system, shell, substitution, expansion, interpolation, capture output	> In fact what I want to do is not "use ruby like shell script" but "use shell in ruby".\r\n> For instant, I wonder if I can use "ls | grep" or "tar -xvf | grep" to get a\r\n> file list and store it in a ruby array, and handle them with io#gets.\r\n>\r\n> I don't know what "back ticks" are.\r\n>\r\n> Thank for all the replies.\r\n\r\n`backticks` are the keyboard symbol below the tilde.\r\n\r\nbackticks in a shell are the closest thing to object like programming\r\nin the shell. The concept is part of what is known as shell\r\nsubstitution and shell expansion.\r\n\r\nThe idea is that anything within the backticks are ran in a new shell\r\nwhich inherits the environment and user created variables to the new\r\n'sub' shell. of course the sub shell can spawn it's own shells and so\r\non.\r\n\r\nIn shell scripting the interpolation is done via ${ } which works the\r\nsame way as ruby's #{ }. This as well as the backticks follow the ruby\r\nprinciple of least surprise( at least for shell coders).\r\n\r\nIf your looking for portability from unix to windows the Dir command\r\nlooks to be the best bet. Dir.glob("*") will return an array ready to\r\nbe parsed.\r\n\r\n`ls` will return a string. you will need to parse it yourself or\r\ncreate your own to_array via storing strings delimited on '/n'\r\n\r\nIf your just interested in programming for system automation on\r\nunix/linux systems note that the commands from the gnu set may be a\r\nbit different from *bsd and some commercial unixes. To keep everything\r\nportable consider programming based on posix standards as to run on\r\nevery system with only ruby being the dependency.\r\n\r\nif you need to capture stderr you can add 2>&1 inside the backticks.\r\n\r\nHere is an example irb session:\r\n\r\nruby-1.9.2-head > sysout = `echo foo | sed s/foo/bar/g`\r\n => "bar"\r\n\r\nruby-1.9.2-head > $?\r\n => #<Process::Status: pid 5029 exit 0>\r\n\r\nruby-1.9.2-head > sysout = `echo foo | sed s/foo/bar/g 2>&1`\r\n => "bar"\r\n\r\nruby-1.9.2-head > $?\r\n => #<Process::Status: pid 5032 exit 0>\r\n\r\nruby-1.9.2-head > sysout = `echo foo | gsed s/foo/bar/g 2>&1`\r\n => "sh: gsed: command not found\r\n"\r\n\r\nruby-1.9.2-head > $?\r\n => #<Process::Status: pid 5035 exit 127>\r\n\r\nruby-1.9.2-head > sysout = `echo foo | gsed s/foo/bar/g`\r\nsh: gsed: command not found\r\n => ""\r\n\r\nruby-1.9.2-head > $?\r\n => #<Process::Status: pid 5038 exit 127>	1.9.3	stu@rubyprogrammer.net	2010-11-28 17:16:00	Stu		2012-05-02 14:12:26.441663	2012-05-11 16:24:00.529835
260	ruby-talk	Object	Function discovery	object, class, instance methods, show, public	>> I am curious if there is a programatic way to list all methods of a class.\r\n>> (Yes, I know about "ri", I am just curious here)\r\n> \r\n> ri only returns what the documentor felt like telling you.\r\n> \r\n> Here's my favorite wrapper on the 'public_methods' system:\r\n> \r\n>   def what?(anObject)\r\n>     p anObject.class.name\r\n>     puts (anObject.public_methods - Object.new.public_methods).sort\r\n>   end\r\n\r\nYou do not need to construct an instance of Object - you can as well use \r\nObject.public_instance_methods.\r\n\r\n> Now you just say 'what? f', and it tells you what f's all about. It also \r\n> throws away all the stuff f inherited from Object, because you should \r\n> already know it!\r\n\r\nHere's an alternative version, which prints methods with the defining \r\nclass.  Note that this omits methods defined at the instance level.\r\n\r\ndef what? o\r\n   o.class.ancestors.each do |cl|\r\n     p cl, cl.public_instance_methods(false).sort\r\n   end\r\nend	1.9.3	shortcutter@googlemail.com	2008-12-17 18:48:00	Robert	Klemme	2012-05-02 12:30:23.516373	2012-05-05 18:54:36.399737
208	ruby-talk	Closure	How are closures implemented?	closure, implementation, explanation, object, gc, deallocate  	>> How are closures implemented?  How does the closure know about its\r\n>> environment?\r\n>\r\n> The closure *is* the environment.\r\n>\r\n> Are you familiar with local variables allocated on a stack? Then instead\r\n> imagine stack frames allocated out of the heap, in a linked list.\r\n> Instead of being deallocated at the end of a function, they are\r\n> garbage-collected when there are no more references to them, just like\r\n> any other object.\r\n\r\nThis is the best explanation about closures I have read in a long time, Brian!\r\n\r\nRalph, try this and see whether it helps the explanation sink in:\r\n\r\ndef f(x)\r\n  [\r\n    lambda { x += 1 },\r\n    lambda { x += 0.5 },\r\n  ]\r\nend\r\n\r\na, b = f(0)\r\n\r\n3.times do\r\n  p a.call, b.call\r\nend\r\n\r\nNote how there is just a single environment which is shared by the two closures.	1.9.3	shortcutter@googlemail.com	2012-02-23 14:10:00	Robert	Klemme	2012-05-02 12:18:48.977507	2012-05-05 19:41:53.577329
155	ruby-talk	IO	Gserver io.peeraddr and io.addr not working	io, tcpsocket, peeraddr, addr, string, fixnum, report, exceptions, gserver	> I have been trying to get the ip address of clients connected to a\r\n> simple chat server for logging purposes, but every time I use io.addr or\r\n> io.peeraddr, the client disconnects "connection to host lost" and the\r\n> server reports no errors. Is this because the client is connecting to\r\n> localhost?\r\n\r\nNope. Try this:\r\n\r\n    begin\r\n      puts "[New Client]IP:" + io.peeraddr + " Client #:" + my_client_id\r\n    rescue Exception => e\r\n      STDERR.puts "Ooops: #{e}"\r\n    end\r\n\r\nand you will see:\r\n\r\nTCPSocket\r\n[verbose]serve() has been called\r\nOoops: can't convert Array into String\r\n\r\nThat is, you need io.peeraddr[3]. And when you do that, you'll find my_client_id needs turning into a string too, because you can't concatenate a String with a Fixnum.\r\n\r\nSafer to use interpolation, which calls to_s automatically if required:\r\n\r\n      puts "[New Client]IP:#{io.peeraddr[3]} Client #:#{my_client_id}"\r\n\r\nYou would have found this problem more easily if you'd told gserver to report exceptions rather than hide them. You can do this by setting self.debug=true inside your initialize method in your ChatServer class.	1.9.3	b.candler@pobox.com	2012-01-01 18:28:00	Brian	Candler	2012-05-02 12:10:33.039924	2012-05-07 00:35:36.86145
496	ruby-talk	Regexp	Does ruby support global expression?	string, regex, scan, inject, match, check	>> In my project, there are some rules using global expression( '*'\r\n>> as one or more characters ) to match some functions' output.\r\n>>     Such as:\r\n\r\n>>     rule1=EF=BC=9A  the * apple   (will match the output "the red apple")\r\n>>     rule2=EF=BC=9A  the * + * game    (will match the output "the wonderful + >> successful game")\r\n>>\r\n>> I want to use ruby to realize the match check, but I only know ruby supports regular expression.\r\n>> So I have to change rules to the form of regular expressions( "*" => ". +" and add '' to other \r\n>> regular expession keywords like '+', '.' etc.)\r\n>>\r\n>>     Is there any way to use global expression directly in ruby?\r\n\r\n> No, better make it ourselves\r\n>\r\n> class String\r\n>   def escape\r\n>     return "" if empty?\r\n>     Regexp::escape self\r\n>   end\r\n>   def glob? a_string\r\n>     Regexp::new(\r\n>       scan( /(.*?)*([^*]*)/ ).\r\n>         inject("") { | r , ( prefix, suffix ) | r << prefix.escape <<\r\n> 'w+' << suffix.escape }\r\n>     ).match( a_string )\r\n>   end\r\n> end\r\n>\r\n> p "ab *c*d*".glob?( "ab andcordequally" )\r\n> p "a*b".glob?( "ab" )\r\n> p "etc.etc."\r\n\r\nSmall remark: I'd split this up, i.e.\r\n\r\nclass String\r\n   def to_glob\r\n     Regexp::new(\r\n       scan( /(.*?)*([^*]*)/ ).\r\n         inject("") { | r , ( prefix, suffix ) |\r\n           r << prefix.escape << 'w+' << suffix.escape }\r\n     )\r\n   end\r\nend\r\n\r\nThis makes for more efficient matching if the pattern is to be applied \r\nto multiple strings.\r\n\r\nHere's how I'd do it:\r\n\r\nclass String\r\n   def to_glob\r\n     Regexp.new('\\A' << gsub(/\\([^*?])/, '\\1').split(/(\\?[*?])/).map =\r\n\r\ndo |s|\r\n       case s\r\n       when '*': '.*'\r\n       when '?': '.'\r\n       when '\\*', '\\?': s\r\n       else Regexp.escape(s)\r\n       end\r\n     end.join << '\\z')\r\n   end\r\nend\r\n\r\ngl = "foo*b\\ar\\*a".to_glob\r\np gl\r\n\r\n%w{foo foobar*a foo123bar foobar*a}.each do |s|\r\n   p [s, gl =~ s]\r\nend	1.9.3	shortcutter@googlemail.com	2009-01-12 20:39:00	Robert	Klemme	2012-05-02 14:14:31.401104	2012-05-11 15:52:43.538157
355	ruby-talk	Cron	Register an action to be done at a later time	crono, replacement, windows, pycron, python, freeware	>>> Why do you want to write a cron replacement?\r\n>> I can't use cron on Windows.\r\n> But Windows does have a scheduling service as well.\r\n\r\nI'm sorry to jump into the middle of this, but we have successfully used \r\nPyCron on Windows for many years!  It works very well, and has probably \r\nfailed us only a couple of times in 5+ years.  If you're missing cron, \r\nthis is not a bad solution at all.\r\n\r\n<a href="http://www.kalab.com/freeware/pycron/pycron.htm">http://www.kalab.com/freeware/pycron/pycron.htm</a>	1.9.3	mo_mail@onghu.com	2012-01-25 17:42:00	Mohit	Sindhwani	2012-05-02 12:45:55.780975	2012-05-11 20:33:49.942686
240	ruby-talk	String	Need help with gsub a string	string, gsub, regex, lookahead, find	If you are regexically-inclined:\r\n\r\n"(linux) alpha / beta"[/(?<=/).+$/] #=> " beta"\r\n\r\nIf only there were variable-length look-aheads, then it could be (?<=/ ?),\r\nfor what I assume is a possible case of "alpha/beta".\r\n\r\n(I don't recommend doing it this way, necessarily, just throwing it out\r\nthere.)	1.9.3	adam@aprescott.com	2011-11-23 17:55:00	Adam	Prescott	2012-05-02 12:26:51.013031	2012-05-06 20:55:04.510808
217	ruby-talk	Net	Need help assigning an IP address to a Varible	net, ssh, telnet, string, scan, ip, address, routing, error	> Hello to the ruby world :)  I was hoping to get a bit of guidance... I\r\n> have the following code below that logs int to a cisco router and\r\n> performs a command:\r\n\r\nYou may find Net::SSH::Telnet easier to use than Net::SSH with exec, \r\nespecially when it comes to exchanging multiple commands and responses. \r\nAlso you can use the same code with both Net::Telnet and \r\nNet::SSH::Telnet\r\n\r\n> I would like to scan this output and assign only the IP address between\r\n> the ##'s to a variable for further use.\r\n\r\nLook at the methods of class String, expecially String#scan\r\n\r\n>> str\r\n=> "AMP_STL_Intra_SW4#sho ip route 159.202.161.0\r\nRouting entry for \r\n159.202.161.0/25\r\n  Known via "connected", distance 0, metric 0 \r\n(connected, via interface)\r\n  Routing Descriptor Blocks:\r\n  * directly \r\nconnected, via Vlan307\r\n      Route metric is 0, traffic share count is 1\r\n\r\n>> str.scan(/Routing entry for ([0-9.]+)/)\r\n=> [["159.202.161.0"]]	1.9.3	b.candler@pobox.com	2012-02-21 19:21:00	Brian	Candler	2012-05-02 12:19:46.28021	2012-05-11 16:52:58.414136
541	ruby-talk	Decimal	Microrant on Ruy's Math Skills	math, decimal, floating point, accuracy, lossy, rant	>> Except for that whole "parse time is different from run time" part you\r\n>> seem to be blithely ignoring. If you've already parsed float literals,\r\n>> then they're floats and are already lossy.\r\n>\r\n> Are you telling me that 1.1 is automatically lossy, regardless of how you\r\n> got there?\r\n\r\n1.1 is a decimal floating point literal.  This is translated into a\r\nfloating point number at some point in time (likely parse time).  From\r\nthere on there is only a floating point number which has a binary\r\nrepresentation.  Since certain decimal values cannot be exactly\r\nrepresented as binary numbers there is loss the very moment the\r\ntranslation occurs.\r\n\r\n> I guess I need to go back and refresh my understanding of the\r\n> math, because I thought a literal decimal number was fine but one\r\n> achieved by arithmetic was likely to contain subtle errors due to the way\r\n> the binary math is handled.\r\n\r\nThere is imprecision in the translation and further numeric effects\r\nwhich affect precision later.  The resulting imprecision (compared to\r\nwhat pure math or symbolic calculations would yield) depends on\r\n\r\n- translation of decimal literals to binary representation\r\n- limits of the binary representation\r\n- nature of the operations\r\n- order of the operations\r\n- translation back to decimal representation\r\n\r\nGiven all this it's rather surprising that output results are so close\r\nto what one would expect. :-)  You can study the details at\r\n\r\n<a href="http://en.wikipedia.org/wiki/IEEE_754-2008">http://en.wikipedia.org/wiki/IEEE_754-2008</a>\r\n\r\nand for example for one format:\r\n\r\n<a href="http://en.wikipedia.org/wiki/Double_precision_floating-point_format">http://en.wikipedia.org/wiki/Double_precision_floating-point_format</a>	1.9.3	shortcutter@googlemail.com	2012-01-24 18:32:00	Robert	Klemme	2012-05-04 21:35:48.746842	2012-05-11 21:08:46.617009
457	ruby-talk	Operator	Building a method - Learn to Program Section 9.5	string, ||, operator, and, or	> wrote (rearranged a bit for illustrative purposes):\r\n> I got this program to work by rewriting it\r\n\r\n[from]\r\n\r\n>  while true\r\n>    puts question\r\n>    reply = gets.chomp.downcase\r\n>\r\n>    if (reply != 'yes' || reply != 'no')\r\n>      puts 'Please answer "yes" or "no".'\r\n>    elsif reply == ''\r\n>      break\r\n>    end\r\n>  end\r\n\r\n[to]\r\n\r\n>  while true\r\n>    puts question\r\n>    reply = gets.chomp.downcase\r\n>\r\n>  if (reply == 'yes' || reply == 'no')\r\n>    break\r\n>  else\r\n>    puts 'Please answer "yes" or "no".'\r\n>    if reply == ''\r\n>      break\r\n>    end\r\n>  end\r\n\r\nThe trick is that || means "or".  The first time, you're saying "if\r\nthe reply isn't yes, or it isn't no, ask again, else if it's blank,\r\nbreak".  No matter what the reply is, it's either going to be not yes,\r\nor not no.  The second time, you're saying 'if it IS yes, or it IS no,\r\nbreak, else ask again (and if it's blank, break)".  If you want to use\r\n!=, what you need there is && (and) rather than || (or).\r\n\r\nIf it helps, you can actually use the words "and" and "or" instead of\r\nthe || and &&.  There are some situations in which there are\r\ndifferences, but in this case it should be OK.\r\n\r\nA general technique that might help is "pseudocoding".  Write out\r\nfirst, what it would look like in plain English (or whatever your\r\nnative language is) if you were giving instructions to a person -- a\r\nfairly simple-minded person who is excellent at following instructions\r\nexactly as given (no matter how wrong they may be), very quickly.\r\nRead that over, trying to "think" like such a person.  Maybe even\r\nsimulate it step by step by writing down the values of variables.\r\nWhen that gives you the results you want, then start translating it\r\nfrom English to Ruby.  That's how most people start out learning to\r\nprogram.  When you get good at it, then you can skip the English step.	1.9.3	rubytalk2dave@davearonson.com	2011-12-09 20:56:00	Dave	Aronson	2012-05-02 14:00:13.428114	2012-05-03 19:44:39.202066
462	ruby-talk	Language	Ruby 1.9 and the retry keyword	language, keywork, retry, 1.9, iteration, exception	> It seems that the 'retry' keyword is not supported anymore in ruby1.9 to\r\n> restart a running iteration from the beginning.\r\n\r\nThis cannot be, "retry" works in 1.9.1:\r\n\r\n[robert@ora01 ~]$ irb19\r\nirb(main):001:0> i = 5\r\n=> 5\r\nirb(main):002:0> begin\r\nirb(main):003:1* puts i\r\nirb(main):004:1> raise "foo"\r\nirb(main):005:1> rescue Exception\r\nirb(main):006:1> i -= 1\r\nirb(main):007:1> retry if i > 0\r\nirb(main):008:1> end\r\n5\r\n4\r\n3\r\n2\r\n1\r\n=> nil\r\nirb(main):009:0> RUBY_VERSION\r\n=> "1.9.1"\r\nirb(main):010:0>\r\n\r\n> Is there a way to achieve the old behavior, preferably in a 1.8 compatible\r\n> way ?\r\n> \r\n> $ ruby1.8 -ve '[1, 2].each { puts "bla" ; retry }'\r\n> ruby 1.8.7 (2008-08-11 patchlevel 72) [i486-linux]\r\n> bla\r\n> bla\r\n> bla\r\n> ^C\r\n\r\n"retry" without "rescue" seems pointless to me.  As far as I can see \r\n"retry"'s main purpose is repetition in case of exceptions.  The use \r\nthat you demonstrate looks like a untypical and probably unwanted idiom \r\nwhich accidentally happened to work in 1.8.* to me.\r\n\r\n> $ ruby1.9 -ve '[1, 2].each { puts "bla" ; retry }'\r\n> ruby 1.9.2dev (2009-04-19) [i686-linux]\r\n> -e:1: Invalid retry\r\n> -e: compile error (SyntaxError)\r\n\r\nApparently the _syntax_ was changed to allow "retry" only in "rescue" \r\nclauses - which makes perfectly sense for me.  I am not the definitive \r\nsource but to me it looks like 1.9 fixes a misbehavior of 1.8 - if \r\nthat's the case I would not want to reintroduce this just to make 1.9 \r\nmore compatible to 1.8.  In fact, 1.9 purposefully *does* have some \r\nincompatibilities.	1.9.3	shortcutter@googlemail.com	2009-04-19 18:09:00	Robert	Klemme	2012-05-02 14:03:47.255176	2012-05-06 18:52:28.631798
226	ruby-talk	Array	Array#each vs. Array#each_index iteration	array, each_with_index	>> Have you been referred to #each_with_index already?\r\n>\r\n> Do you mean Array#each_index ?\r\n>>\r\n>> array.each{|entry, index|\r\n>>  p index if entry == "out"\r\n>> }\r\n>\r\n> Because in the example you still used "each" :)\r\n\r\nMy bad.  No, I meant #each_with_index.\r\n\r\narray.each_with_index do |entry, index|\r\n  p index if entry == "out"\r\nend	1.9.3	shortcutter@googlemail.com	2011-07-18 13:31:00	Robert	Klemme	2012-05-02 12:21:55.72323	2012-05-03 19:11:37.087141
351	ruby-talk	Benchmark	Uniq with count; better way?	ruby, speed, comparison, algorithms, jruby, large, data, sets	> >                     user     system      total        real\r\n> > Ralph Shneiver:   0.290000   0.000000   0.290000 (  0.259640)\r\n> > Sigurd:          0.320000   0.000000   0.320000 (  0.289873)\r\n> > Keinich #1       0.560000   0.000000   0.560000 (  0.497736)\r\n> > Keinich #2       0.280000   0.000000   0.280000 (  0.250843)\r\n> > Magnus Holm:     0.310000   0.000000   0.310000 (  0.283344)\r\n> > Abinoam #1:      1.140000   0.000000   1.140000 (  1.042744)\r\n> >\r\n> > Abinoam Jr.\r\n> >\r\n>\r\n> Sorry for the mess... (some error in the bench code + horrible text wrapping)\r\n>\r\n> Apologizing with the gist...\r\n>\r\n> <a href="https://gist.github.com/1624016">https://gist.github.com/1624016</a>\r\n\r\n\r\nThanks. Very interesting.\r\n\r\nI assumed (incorrectly turns out for Ruby 1.9.3) that for large data sets there would be a significant performance difference. Because, upon determining the "bins" of uniq values, that is  essentially a form of "sorting", which can be O(n^2) if not careful.\r\n\r\nTurns out I was wrong for ruby 1.9.3 (but right for some other rubies).\r\n\r\nI rewrote the code to create large datasets (array up to 10_000_000), but with the data inside a set of 0...100.\r\n\r\nrequire 'benchmark'\r\n\r\nn = 1\r\n# ar = [4,5,6,4,5,6,6,7]\r\nar = [].tap{|a| 10_000_000.times {a << rand(100)}} #1_000_000, 2_000_000,\r\n...\r\nputs "SAMPLE of ar"\r\nputs ar[0...20]\r\nputs "SIZE"\r\nputs ar.size\r\nBenchmark.bm(15) do |b|\r\n b.report("Ralph Shneiver:"){ n.times { result = Hash.new(0); ar.each { |x| result[x] += 1 }; result} }\r\n b.report("Sigurd:") { n.times { ar.inject(Hash.new(0)) {|res, x| res[x] += 1; res } } }\r\n b.report("Keinich #1") { n.times { Hash[ar.group_by{|n|n}.map{|k,v|[k,v.size]}] } }\r\n b.report("Keinich #2") { n.times { Hash.new(0).tap{|h|ar.each{|n|h[n] += 1}} } }\r\n b.report("Magnus Holm:") { n.times { ar.each_with_object(Hash.new(0)) {|x, res| res[x] += 1 } } }\r\n b.report("Abinoam #1:") { n.times { Hash[ar.sort.chunk {|n| n}.map {|ix,els| [ix, els.size] } ] } }\r\nend\r\n\r\nRUBY 1.9.3:\r\n==========\r\n\r\nFor ruby 1.9.3-p0 all solutions perform approx. the same (at least same order)and seem \r\nto stay quasi linear.\r\n\r\nSIZE\r\n1000000  #[1_000_000 that is ; n = 1]\r\n                      user     system      total        real\r\nRalph Shneiver:   0.180000   0.000000   0.180000 (  0.174283)\r\nSigurd:           0.200000   0.000000   0.200000 (  0.203652)\r\nKeinich #1        0.140000   0.000000   0.140000 (  0.142833)\r\nKeinich #2        0.180000   0.000000   0.180000 (  0.177456)\r\nMagnus Holm:      0.200000   0.000000   0.200000 (  0.205895)\r\nAbinoam #1:       0.260000   0.000000   0.260000 (  0.254554)\r\n\r\nSIZE\r\n2000000  #[2_000_000 that is ; n = 1]\r\n                      user     system      total        real\r\nRalph Shneiver:   0.340000   0.010000   0.350000 (  0.350032)\r\nSigurd:           0.410000   0.000000   0.410000 (  0.406483)\r\nKeinich #1        0.280000   0.000000   0.280000 (  0.285213)\r\nKeinich #2        0.350000   0.010000   0.360000 (  0.354640)\r\nMagnus Holm:      0.410000   0.000000   0.410000 (  0.411010)\r\nAbinoam #1:       0.470000   0.030000   0.500000 (  0.498782)\r\n\r\n\r\nSIZE\r\n10000000  #[10_000_000 that is; n = 1 here]\r\n\r\n                      user     system      total        real\r\nRalph Shneiver:   1.710000   0.040000   1.750000 (  1.748137)\r\nSigurd:           2.000000   0.010000   2.010000 (  2.012496)\r\nKeinich #1        1.380000   0.030000   1.410000 (  1.409462)\r\nKeinich #2        1.750000   0.010000   1.760000 (  1.760997)\r\nMagnus Holm:      1.990000   0.020000   2.010000 (  2.014282)\r\nAbinoam #1:       2.500000   0.060000   2.560000 (  2.562646)\r\n\r\nAll solutions in Ruby 1.9.3 are relatively "linear".\r\n\r\nKeinich #1 is the fastest.\r\n\r\nI believe it is because I limited the dataset to 100 different values, the number of\r\nbins is fixed and order O(n) can be achieved (not the O(n.log(n)) that I had expected, incorrectly).\r\n\r\nRUBY 1.8.7:\r\n==========\r\n\r\nFor ruby 1.8.7-p I could not test the last 2  solutions (methods not\r\nimplemented).\r\nFor the first 3, _significant_ differences arise.\r\n\r\nSIZE\r\n1000000 #[1_000_000 that is ; n = 1]\r\n\r\n                     user     system      total        real\r\nRalph Shneiver:  0.370000   0.010000   0.380000 (  0.369785)\r\nSigurd:          2.320000   0.030000   2.350000 (  2.360403)\r\nKeinich #1       1.520000   0.040000   1.560000 (  1.562627)\r\nKeinich #2      16.520000   0.100000  16.620000 ( 16.623032)\r\n\r\nSIZE\r\n2000000 #[2_000_000 that is ; n = 1]\r\n                     user     system      total        real\r\nRalph Shneiver:  0.720000   0.010000   0.730000 (  0.737673)\r\nSigurd:          8.040000   0.110000   8.150000 (  8.142827)\r\nKeinich #1       5.670000   0.040000   5.710000 (  5.716364)\r\nKeinich #2      52.600000   0.480000  53.080000 ( 53.100823)\r\n\r\nSIZE\r\n10000000  #[10_000_000 that is ; n = 1]\r\n\r\n                     user     system      total        real\r\nRalph Shneiver:  3.680000   0.000000   3.680000 (  3.680230)\r\n\r\nStriking: Only the solution of Ralph Shneiver remains linear in MRI 1.8.7\r\n\r\n\r\nJRUBY (1.6.5.1)\r\n=============\r\n\r\n$ ruby -v\r\njruby 1.6.5.1 (ruby-1.8.7-p330) (2011-12-27 1bf37c2) (OpenJDK Server VM\r\n1.6.0_23) [linux-i386-java]\r\n\r\nI also tested JRuby out of curiosity.\r\n\r\nSIZE\r\n1000000  #[1_000_000 that is ; n = 1]\r\n                     user     system      total        real\r\nRalph Shneiver:  0.244000   0.000000   0.244000 (  0.220000)\r\nSigurd:          0.264000   0.000000   0.264000 (  0.264000)\r\nKeinich #1       0.112000   0.000000   0.112000 (  0.112000)\r\nKeinich #2      11.256000   0.000000  11.256000 ( 11.256000)\r\n\r\nSIZE\r\n2000000  #[2_000_000 that is ; n = 1]\r\n                     user     system      total        real\r\nRalph Shneiver:  0.392000   0.000000   0.392000 (  0.368000)\r\nSigurd:          0.439000   0.000000   0.439000 (  0.438000)\r\nKeinich #1       0.196000   0.000000   0.196000 (  0.196000)\r\nKeinich #2      14.462000   0.000000  14.462000 ( 14.462000)\r\n\r\nSIZE\r\n10000000 #[10_000_000 that is ; n = 1]]\r\n\r\n                     user     system      total        real\r\nRalph Shneiver:  1.604000   0.000000   1.604000 (  1.581000)\r\nSigurd:          1.769000   0.000000   1.769000 (  1.769000)\r\nKeinich #1       0.967000   0.000000   0.967000 (  0.967000)\r\nKeinich #2       8.978000   0.000000   8.978000 (  8.978000)\r\n\r\n\r\nInteresting again.\r\n\r\nThose 2 solutions where not yet available on JRuby 1.6.5.1:\r\n\r\nMagnus Holm:   NoMethodError: undefined method `each_with_object' for\r\n#<Array:0x18eb7b8>\r\nAbinoam #1:    NoMethodError: undefined method `chunk' for\r\n#<Array:0x1719f30>\r\n\r\nRalph Shneiver remains linear again.\r\n\r\nBut then again ... Keinich #1 is significantly faster on 10_000_000 than the others.\r\nKeinich #2 seems to be not very predictable?\r\n\r\nJRUBY HEAD (in rvm):\r\n==================\r\n\r\n$ ruby -v\r\njruby 1.7.0.dev (ruby-1.8.7-p357) (2012-01-17 7de254f) (Java HotSpot(TM)\r\nServer VM 1.6.0_26) [linux-i386-java]\r\n\r\n1000000  #[1_000_000 that is ; n = 1]\r\n\r\n                     user     system      total        real\r\nRalph Shneiver:  0.238000   0.000000   0.238000 (  0.223000)\r\nSigurd:          0.286000   0.000000   0.286000 (  0.286000)\r\nKeinich #1       0.120000   0.000000   0.120000 (  0.120000)\r\nKeinich #2       7.841000   0.000000   7.841000 (  7.841000)\r\n\r\nSIZE\r\n2000000  #[2_000_000 that is ; n = 1]\r\n\r\n                     user     system      total        real\r\nRalph Shneiver:  0.426000   0.000000   0.426000 (  0.410000)\r\nSigurd:          0.478000   0.000000   0.478000 (  0.478000)\r\nKeinich #1       0.213000   0.000000   0.213000 (  0.213000)\r\nKeinich #2      21.928000   0.000000  21.928000 ( 21.928000)\r\n\r\nSIZE\r\n10000000 #[10_000_000 that is ; n = 1]\r\n\r\n                     user     system      total        real\r\nRalph Shneiver:  1.550000   0.000000   1.550000 (  1.535000)\r\nSigurd:          1.795000   0.000000   1.795000 (  1.795000)\r\nKeinich #1       1.060000   0.000000   1.060000 (  1.060000)\r\nKeinich #2     116.826000   0.000000 116.826000 (116.826000)\r\n\r\nSimilar results to JRuby 1.6.5.1\r\n\r\nCaveat:\r\n=======\r\n\r\nI did not check the correctness of the result, only the timing.\r\n\r\nQuestions:\r\n========\r\n\r\nWhy would ruby 1.9.3. be so much better at this than ruby 1.8.7 ?\r\nCould it be because the Hash is now "ordered" so it can do an efficient\r\nalgorithm when adding an entry to a bin? Or is it object creation?\r\n\r\nWhy are certain methods leading to non-linear behavior?\r\n\r\nMy conclusions (?):\r\n===============\r\n\r\n* be careful about performance with large data sets\r\n\r\n* Fastest overall: Keinich #1 on JRuby 1.6.5.1\r\n\r\n* CRuby 1.9.3 seems to be the only on the remains linear for all\r\n  solutions on large data sets.\r\n\r\n* "Ralph Shneiver" is the only solution that remains linear for\r\n  all tested rubies (MRI 1.9.3, MRI 1.8.7, JRuby 1.6.5.1 JRuby head)	1.9.3	peter@vandenabeele.com	2012-01-17 12:08:00	Peter	Vandenabeele	2012-05-02 12:44:07.865554	2012-05-11 20:33:22.260009
426	ruby-talk	Block	Are blocks objects? What messages can they handle?	block, proc, object, message	A block is a syntactical construct, not an object. A Proc is the\r\nobject-ized form of a block. If you want to do something on the block,\r\nyou need to turn it into an object first.\r\n\r\nAn analogy might be that the string "def" is a syntactical construct\r\nthat creates a method, but it is not itself an object. You can't write\r\n"def.(...)" and have it be meaningful in this context.\r\n\r\n> So . . . how does one send a message to the block before it is passed as\r\n> an argument? =C2 Is that even possible?\r\n\r\nYou could make it a Proc first and pass that instead. For example, say\r\nyou have a method which passes some arguments to a block:\r\n\r\n======\r\n> def execute(*args, &block); yield *args if block; end\r\n => nil\r\n\r\n> execute(1, 2, 3) { |*args| puts "args are: #{args.inspect}" }\r\nargs are: [1, 2, 3]\r\n => nil\r\n======\r\n\r\nInstead of supplying the block, you could pass a block argument:\r\n\r\n======\r\n> printer = lambda { |*args| puts "args are: #{args.inspect}" }\r\n => #<Proc:0x0000000125eeb8@(irb):12 (lambda)>\r\n\r\n> execute(1, 2, 3, &printer)\r\nargs are: [1, 2, 3]\r\n======\r\n\r\nSince `printer` is an object, you can call whatever methods you'd like\r\non it before passing it as a block. Of course, you still need to wind\r\nup with something that looks like a block, or else the `yield` won't\r\nwork. For example, you might have a Proc that creates `printers` for\r\nyou:\r\n\r\n======\r\n> printer_factory = lambda { |message_prefix| lambda { |*args| puts "#{message_prefix}: #{args.inspect}" } }\r\n => #<Proc:0x000000011f9f90@(irb):17 (lambda)>\r\n======\r\n\r\nNow we can ask this Proc to create a printer for us, which we'll then\r\npass into `execute` as a block argument:\r\n\r\n======\r\n> execute(1, 2, 3, &printer_factory.("the arguments to this printer are"))\r\nthe arguments to this printer are: [1, 2, 3]\r\n======\r\n\r\nMake sense?	1.9.3		2011-07-03 10:56:00	John	Feminella	2012-05-02 12:59:50.761003	2012-05-03 19:01:18.718688
248	ruby-talk	File	Name directory with a variable	file, join, convert, backslash, double, single, fileutils	>> > This one should be a quick one for you. I am creating a directory\r\n>> > structure and i want to name some of the folders with a variable but\r\n>> > cannot figure out how. Any help would be great.\r\n>> >\r\n>> > Example: FileUtils.makedirs ('BackupTestTest2@var@var2@var3')\r\n\r\n>> You can interpolate variables into strings using #{}, for example,\r\n>>\r\n>> var1 = 'foo'\r\n>> var2 = 'bar'\r\n>> "BackupTest#{var1}#{var2}" #=> "BackupTest\foo\bar"\r\n>\r\n> Except that backslashes inside double quotes need to be either doubled, or\r\n> converted into single slashes; e.g.\r\n>\r\n> "Backup\\Test\\#{var1}\\#{var2}"\r\n> "Backup/Test/#{var1}/#{var2}"\r\n\r\nTo avoid these issues File.join has been invented:\r\n\r\nFile.join "Backup", "Test", var1, var2\r\nFile.join "Backup", "Test", var1, var2 + var3\r\n\r\nAssuming var2 and var3 are Strings.  Otherwise\r\n\r\nFile.join "Backup", "Test", var1, "#{var2}#{var3}"	1.9.3	shortcutter@googlemail.com	2012-01-20 14:55:00	Robert	Klemme	2012-05-02 12:28:19.901928	2012-05-11 16:49:08.407281
27	ruby-talk	Gem	How can I find the source of ruby package installed by gem?	gem, unpack, display, source, current directory	> I installed a ruby application by gem. Where can I find its source code?\r\n\r\ngem unpack\r\n\r\nunpacks a gem to the current directory.\r\n\r\ngem env\r\n\r\nshows where gems are installed.	1.9.3	TimHunter@nc.rr.com	2009-01-05 21:13:00	Tim	Hunter	2012-05-02 11:44:39.074429	2012-05-06 19:36:02.79758
479	ruby-talk	Regexp	Regexp detect repeating number	regex, number, repeat, detect, index	> I want to detect a repeating number in a string; something like:\r\n> 252525252525 or 123123123\r\n\r\nThis seems to work:\r\n\r\n    regexp = /(d+?)(?=)/\r\n\r\n    '252525252525'[regexp]            # => "25"\r\n    '123123123'[regexp]               # => "123"\r\n    '1223122312231223'[regexp]        # => "1223"	1.9.3	vderyagin@gmail.com	2011-12-16 09:07:00	Victor	Deryagin	2012-05-02 14:10:27.225559	2012-05-06 19:33:46.368661
320	ruby-talk	Thread	Ruby multithread	thread, join, multi, map, &:value, gil, interpreter, global, lock, jruby, rubinius	> I have a queue of url:\r\n> ---------------------------------------\r\n> Links =Queue.new\r\n> Links.push(url1)\r\n> Links.push(url2)\r\n> Links.push(url3)\r\n>\r\n> # a method to download page\r\n> def openurl(uri)\r\n> object_uri = open(url)\r\n> end\r\n> def ParseHtml(url)\r\n> Extract Meta\r\n> end\r\n>\r\n> def CommitPage(page)\r\n> insert meta to database (Mysql)\r\n> end\r\n>\r\n> def Work(url)\r\n> openurl(url)\r\n> ParseHtml(url)\r\n> CommitPage(page)\r\n> end\r\n>\r\n>\r\n> t1=Thread.new{work(url1)}\r\n> t2=Thread.new{work(url2)}\r\n> t3=Thread.new{work(url3)}\r\n> t1.join\r\n> t2.join\r\n> t3.join\r\n> ------------------------------------------\r\n> The cpu is idle when executing methods openurl, commitpage because they\r\n> take time accessing data but I notice that when executing this script\r\n> t2 will wait for t1 until it finishes and t3 for t2\r\n>\r\n> Have you a solution for this problem, because I am wasting a big time like this.\r\n\r\nThis pattern should work, although it's a bit ugly:\r\n\r\nt1=Thread.new{work(url1)}\r\nt2=Thread.new{work(url2)}\r\nt3=Thread.new{work(url3)}\r\nt1.join\r\nt2.join\r\nt3.join\r\n\r\nA better approach would be:\r\n\r\nthreads = [url1, url2, url3].map { |url| Thread.new { work(url) } }\r\n\r\n# joins each thread and obtains the value returned from the block you\r\npassed to Thread.new\r\nresults = threads.map(&:value)\r\n\r\nHowever keep in mind that the standard Ruby interpreter has a Global\r\nInterpreter Lock (GIL), which means only one thread can run Ruby code at a\r\ngiven time (however certain things like IO can be performed outside the GIL)\r\n\r\nIf you'd like to use Ruby without a GIL, take a look at JRuby or Rubinius\r\n2.0	1.9.3	tony.arcieri@gmail.com	2011-12-20 15:00:00	Tony	Arcieri	2012-05-02 12:40:02.903387	2012-05-11 17:13:56.465326
203	ruby-talk	Time	Making the string returned by Time.now look nicer	time, data, to_s, object, strftime, method	You shouldn't. The to_s method is meant to show all data of the time \r\nobject (including the time zone, milliseconds etc.). If you want to get \r\na certain time format, use the strftime method:\r\n\r\n<a href="http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime">http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime</a>\r\n\r\n\r\nnow = Time.now\r\nputs now.strftime('%Y-%m-%d %H:%M')	1.9.3	jan.e@online.de	2012-03-19 00:02:00	Jan	E	2012-05-02 12:16:53.559343	2012-05-11 19:54:11.863426
304	ruby-talk	Web	Good web design	web, ot, desibn, phusion, passenger, html, haml, sass, deploy, link	> Sorry for the OT, but I figure there must be other people on this list\r\n> who have been in the same boat as me.\r\n> \r\n> I'm looking for resources on good web *design* - by which I mean\r\n> designing a website which is visually appealing.\r\n> \r\n> I can make functional websites, and I have a pretty good understanding\r\n> of HTML/HAML and CSS/SASS, but it's pretty gutting when the *error page*\r\n> from Phusion Passenger looks 10 times better than the website I'm\r\n> deploying :-)\r\n> \r\n> A paper book with lots of examples would be good, and I'm quite happy to\r\n> pay for one, but would appreciate some ideas for which ones are worth\r\n> seeking out. Good online resources are fine too, of course.\r\n\r\nHere is one that I like.  They change the articles but you can search for old ones \r\nfrom what I remember.\r\n\r\n<a href="http://www.smashingmagazine.com/">http://www.smashingmagazine.com/</a>	1.9.3	seanh1313@tx.rr.com	2009-08-03 17:13:00	Sean	H	2012-05-02 12:37:00.286312	2012-05-11 20:18:10.518977
476	ruby-talk	C++	FFI with a C++ Library	c++, FFI, binding, name mangling, namespace, overload, c linkage	>> This may be more of a C++ question but here goes:\r\n>>\r\n>> I'm trying to use Ruby FFI with a CPP library but when I compile my CPP\r\n>> library and look at the method names there's always a __Z5, __Z4, or __Z3 in\r\n>> front of the method name. I see this when I run nm against the dynlib file.\r\n>>\r\n>> Oddly when I compile a C file it works fine but I can use a C file because\r\n>> I'm using some CPP libraries in my library.\r\n>\r\n> This is due to what's called "name mangling" - it's how C++\r\n> differentiates different functions with the same name based on\r\n> namespace, overloads, etc. You can learn more on Wikipedia [0].\r\n>\r\n> To resolve this, you need to specify the functions being\r\n> called with C linkage. Wrap the necessary function as\r\n> follows in your .cpp/.cc file:\r\n>\r\n> extern "C" {\r\n>  void foo(...) {\r\n>  }\r\n> }\r\n>\r\n> This will give foo the external name "foo" instead of how\r\n> it would be defined with C++ linkage.\r\n>\r\n> If you have C headers and see them being used from\r\n> C++ and wish to keep the unmangled names, you can\r\n> add this to the top of your C header:\r\n>\r\n> #ifdef __cplusplus\r\n> extern "C" {\r\n> #endif\r\n>\r\n> and this at the bottom:\r\n>\r\n> #ifdef __cplusplus\r\n> }\r\n> #endif\r\n>\r\n> [0] <a href="http://en.wikipedia.org/wiki/Name_mangling">http://en.wikipedia.org/wiki/Name_mangling</a>\r\n\r\nAnother solution is to use the Rice library (http://rice.rubyforge.org/) =\r\nto build C++ bindings. That said, depending on the size of the C++ code =\r\nyou're working with, it's probably simpler to go with your own code =\r\ninside an extern C { } as Michael explained above and from that you can =\r\nuse FFI.	1.9.3	jameskilton@gmail.com	2011-07-11 08:32:00	Jason	Roelofs	2012-05-02 14:07:00.827452	2012-05-11 20:59:18.819053
306	ruby-talk	IO	Using net-ssh with interactive program	io, expect, #expect, method	> Can anybody point me to examples of using net-ssh with an interactive program on \r\n> remote host similar to what expect does?\r\n> \r\n> I want to be able to response to the interactive program based on what it prompts me.\r\n\r\nlook at IO#expect	1.9.3	ryand-ruby@zenspider.com	2011-07-22 16:58:00	Ryan	Davis	2012-05-02 12:37:00.362739	2012-05-11 17:36:53.603658
256	ruby-talk	String	Searching an array for a pattern derived from another array	string, split, parse, ip, address	> Here is what I'm trying to find:\r\n> Given two arrays containing IP addresses like the ones below, how would I\r\n> search for the first element in 'servers' that pattern matches and element\r\n> in 'nics' where only the first 2 parts of the IP addresses need to match,\r\n> like 192.168.*.* or 10.14.*.* or 98.139.*.*\r\n>\r\n> servers = Array["192.168.0.251","10.14.0.142","98.139.180.149"]\r\n> nics = Array["10.10.0.255","173.194.37.16","10.14.0.170"]\r\n>\r\n> I've got some kind of beginning with the code below but I'm stuck. Any hints?\r\n\r\nSome helpful methods:\r\n\r\n$ irb\r\nirb(main):001:0> ip1 = "192.168.42.1"\r\n=> "192.168.42.1"\r\nirb(main):002:0> ip2 = "192.168.125.64"\r\n=> "192.168.125.64"\r\nirb(main):003:0> ip1.split(".")\r\n=> ["192", "168", "42", "1"]\r\nirb(main):004:0> ip2.split(".")\r\n=> ["192", "168", "125", "64"]\r\nirb(main):005:0> ip1.split(".")[0..1]\r\n=> ["192", "168"]\r\nirb(main):006:0> ip1.split(".")[0..1] == ip2.split(".")[0..1]\r\n=> true	1.9.3	martindemello@gmail.com	2011-12-13 01:57:00	Martin	DeMello	2012-05-02 12:30:03.810787	2012-05-11 17:19:35.980352
478	ruby-talk	Language	Ruby 1.9 and the retry keyword	language, keyword, retry, redo	>>> It seems that the 'retry' keyword is not supported anymore in ruby1.9 to\r\n>>> restart a running iteration from the beginning.\r\n>>\r\n>> Are you sure you don't want to use 'redo'?\r\n>>\r\n>> $ ruby -ve '[1, 2].each { puts "bla" ; redo }'\r\n>> ruby 1.9.1p0 (2009-01-30 revision 21907) [i386-cygwin]\r\n>> bla\r\n>> bla\r\n>> ...\r\n\r\n> redo reruns the current iteration, retry restarted the whole iteration\r\n>\r\n> [1, 2].each { |i| puts i ; redo if i == 2 }\r\n>> 1 2 2 2 2 2 2\r\n> [1, 2].each { |i| puts i ; retry if i == 2 }\r\n>> 1 2 1 2 1 2 1\r\n\r\n$ ruby_dev -ve '[1, 2].cycle { |i| puts i }'\r\nruby 1.9.2dev (2009-04-13) [i386-darwin9.6.0]\r\n1\r\n2\r\n1\r\n2\r\n1\r\n2\r\n1\r\n2\r\n-e:1:in `write': Interrupt\r\n\tfrom -e:1:in `puts'\r\n\tfrom -e:1:in `puts'\r\n\tfrom -e:1:in `block in <main>'\r\n\tfrom -e:1:in `cycle'\r\n\tfrom -e:1:in `<main>'\r\n\r\nJames Edward Gray II	1.9.3	james@graysoftinc.com	2009-04-19 13:14:00	James Edward	Gray II	2012-05-02 14:10:27.181647	2012-05-05 01:22:29.14697
433	ruby-talk	Operator	Literal syntax for array of arrays of strings	operator, %, %Q, %q, difference, return, value, syntax 	>> This is what I had originally (but I inserted the 'q' to make it a\r\n>> single-quoted string, like the first example):\r\n>>\r\n>> tb = table %{\r\n>>   a b c\r\n>>   d e f\r\n>> }\r\n>>\r\n>\r\n> What's the difference between %Q and %?\r\n\r\nirb(main):002:0> %{foo bar #{1+2}}\r\n=> "foo bar 3"\r\nirb(main):003:0> %Q{foo bar #{1+2}}\r\n=> "foo bar 3"\r\nirb(main):004:0> %q{foo bar #{1+2}}\r\n=> "foo bar #{1+2}"	1.9.3	shortcutter@googlemail.com	2009-02-19 14:03:00	Robert	Klemme	2012-05-02 13:00:34.241932	2012-05-06 22:19:56.447524
191	ruby-talk	Matlab	Ruby interaction with matlab	matlab, ruby, call, link	There is a way to call Matlab code from Ruby in matlab-ruby:\r\n\r\n    <a href="ttp://matlab-ruby.rubyforge.org/matlab-ruby/">http://matlab-ruby.rubyforge.org/matlab-ruby/</a>\r\n\r\nBut to run Ruby code in Matlab, probably you should ask this question in\r\nthe Matlab discussion group.	1.9.3	admin@tensor.heliohost.org	2011-12-19 20:01:00	Admin	Tensor	2012-05-02 12:16:25.959804	2012-05-11 19:52:58.322907
412	ruby-talk	Array	Deleting numbers in array?	selective, delete, regex	>>> I'm new to Ruby and unsure how to delete numbers in an array. I have an\r\n>>> array filled with numbers from 1 to 100. If I use nums.delete_if {|x| x\r\n>>> == 9 }, it will delete 9, but I want to remove any number containing 9.\r\n>>> For example, 19, 39, 92, 99 etc. I tried using a wildcard, but it didn't\r\n>>> work. I'm sure theres an easy command to do it, but I wasn't able to\r\n>>> find it on in Ruby documentation. I also want to remove numbers\r\n>>> containing 0,6,7, and 8 as well. Any help would be greatly appreciated.\r\n>> \r\n>> You're pretty much going to have to convert the numbers to strings. For\r\n>> example:\r\n>> \r\n>>    array.delete_if {|x| x.to_s[/[06789]/] }\r\n\r\n> Wow! Ruby is so good! I'm unsure of how to do this final step too. If \r\n> any numbers don't contain 1, remove them. Any ideas?\r\n\r\narr = [51, 52, 20, 36, 79]\r\nresult = arr.delete_if {|x| x.to_s[/[06789]/]}\r\np result\r\n\r\n--output:--\r\n[51, 52]\r\n\r\nresult = arr.delete_if do |x|\r\n  str = x.to_s\r\n  str[/[02345]/] and not str[/1/]\r\nend\r\np result\r\n\r\n--output:--\r\n[51]	1.9.3	bbxx789_05ss@yahoo.com	2009-04-27 03:52:00	7stud		2012-05-02 12:56:17.56757	2012-05-11 15:46:37.20507
33	ruby-talk	IO, File	File copy from Client to Server via web-services	binary, file, transfer, 	> I am trying to use Apache Thrift for creating an API offering many\r\n> functionalities which include file uploads as well. Nothing to bother\r\n> about, it is another full-stack language independent client/server\r\n> webserice like SOAP.\r\n>\r\n> It supports, int, string, bool and some other basic stuff. There is no\r\n> File datatype in the Thrift service, which I can use to send the files\r\n> attaching them directly. The max I should be using for file uploads is\r\n> the string datatype.\r\n>\r\n> I have received some advice from some Thrift guys saying that we can\r\n> definitely upload some files through the thrift web services. I have to\r\n> convert the file into binary strings, assign that converted string to a\r\n> string variable and then send it via thrift to the server.\r\n>\r\n> In this process, I am able to convert the file into a string by the\r\n> File.read('<file_path>','rb'){|f| f.read}  OR\r\n> IO.read('<file_path>')\r\n> command.\r\n>\r\n> I am able to send them across the Thrift service, but I have to convert\r\n> it on the server side to the actual file.\r\n>\r\n> When I am doing the writing with the help of File.new\r\n>\r\n> File.new('<new_file_path>','w'){|f| f << transferred_file_content}\r\n>\r\n> I am actually not getting the complete file. The size of the file is\r\n> almost equal to the actual file(infact a little more), but the file is\r\n> not complete. This is working for simple txt files, but if I want to use\r\n> this for .doc and PDF files, this is not working. I think there is\r\n> something I am missing.\r\n\r\nTry writing it as binary:\r\n\r\nFile.new('<new_file_path>','wb'){|f| f << transferred_file_content}\r\n\r\n(note the 'wb' flag passed to File.new)	1.9.3	jgabrielygalan@gmail.com	2011-07-20 13:41:00	JesÃºs	Gabriel y Galan	2012-05-02 11:44:39.290477	2012-05-11 15:58:04.117728
232	ruby-talk	Block	How do we read this line of code?	block, argument, explanation, each, element, do	> If we have the following line of Ruby code:\r\n>\r\n> @x.each do |x|\r\n>\r\n> - What does |x| represent here?\r\n\r\nIt's an argument supplied to the block that follows.  In this case, the\r\nargument is an element of @x passed to the block.\r\n\r\n> - How do we read the line (i.e; in English)?\r\n\r\nI'd probably read it as something like:\r\n\r\n    For EACH element X of INSTANCE VARIABLE X, DO . . .\r\n\r\n... if I was trying to make it read as smoothly as possible in English without giving much in the way of specific clues about Ruby syntax, sticking to the semantics of it.  Note that I emphasized syntactic elements that actually appear in the code in my example by capitalizing all the letters in each of these elements.	1.9.3	code@apotheon.net	2011-07-27 12:36:00	Chad	Perrin	2012-05-02 12:25:18.632665	2012-05-11 16:04:22.409976
366	ruby-talk	Dir	Ruby scrip to find Dir based on last modified date	dir, select, test, last, modification	> Can someone here please help/guide me how I can implement the following scenario.\r\n>\r\n> Scenario:\r\n>\r\n> A directory on my Mac has list of Sub-directories, What I need is Ruby\r\n> script that finds the Sub Directory that was Last Modified based on the\r\n> modified date and then copy that Sub Directory and it is content to my\r\n> Different Dir on my Mac.\r\n\r\nThis should get you started:\r\n\r\nirb(main):001:0> Dir["*"].select {|f| test ?d, f}\r\n=> ["a1", "bin", "desktop", "doc", "lib", "ruby", "vimfiles"]\r\nirb(main):002:0> Dir["*"].select {|f| test ?d, f}.sort_by {|f| File.mtime f}\r\n=> ["lib", "vimfiles", "ruby", "a1", "doc", "bin", "desktop"]	1.9.3	shortcutter@googlemail.com	2010-11-12 10:20:00	Robert	Klemme	2012-05-02 12:48:01.997306	2012-05-11 17:15:22.339109
111	ruby-talk	Regexp	Regexp in Ruby	regex, extract, string	> names = ["My name is Jack"]\r\n> if names =~ /My name is (w+)/i\r\n> puts $1\r\n> end\r\n>\r\n>\r\n> What im trying to do with this code is to print rest of the line of the\r\n> same line where "My name is" is. But it doesnt work. Can anyone help?\r\n\r\nIn your snippet, names is an array, so the method =~ doesn't do\r\nanything meaningful.\r\nYou need to call that on the string like this:\r\n\r\nirb(main):019:0> names = "My name is Jack"\r\n=> "My name is Jack"\r\nirb(main):020:0> if names =~ /My name is (w+)/i\r\nirb(main):021:1> puts $1\r\nirb(main):022:1> end\r\nJack	1.9.3	jgabrielygalan@gmail.com	2009-01-14 18:49:00	JesÃºs	Gabriel y Galan	2012-05-02 12:01:39.426878	2012-05-11 17:05:16.859475
72	ruby-talk	Module	Class variables in modules, annoying	module, inheritance, blog, ancestors	> But I didn't expect it to occur using a module as\r\n> I'm not inheriting from a class.\r\n\r\nIncluding a module inserts that module into the inheritance hierarchy.\r\n\r\nclass A\r\nend\r\nclass B < A\r\nend\r\nmodule M\r\nend\r\n\r\np B.ancestors\r\n#=> [B, A, Object, Kernel, BasicObject]\r\nclass B\r\n  include M\r\nend\r\n\r\np B.ancestors\r\n#=> [B, M, A, Object, Kernel, BasicObject]\r\n\r\nMore details than you'd probably like about this mechanism can be\r\nfound in a blog post of mine:\r\n\r\n<a href="http://carboni.ca/blog/p/Modules-How-Do-They-Work">http://carboni.ca/blog/p/Modules-How-Do-They-Work</a>	1.9.3	adgar@carboni.ca	2011-07-29 05:34:00	Michael	Edgar	2012-05-02 11:54:42.836409	2012-05-11 18:16:53.576455
539	rubyonrails-talk	Gem	Gem Load Error	install, rails, bundler, railties, rake, load, error	> > I'm having this problem\r\n> >\r\n> > `to_specs': Could not find railties (>= 0) amongst [bundler-1.0.21,\r\n> > bundler-1.0.21, rake-0.9.2.2, rake-0.9.2] (Gem::LoadError)\r\n> >\r\n> > Every time on i make "rails s" or "rails new",\r\n> >\r\n> > This occurred after I updated to Ruby 1.9.2,\r\n> >\r\n> > Anyone know how i fix it?\r\n\r\n> good day try gem update\r\n> then\r\n> bundle install\r\n> bundle update\r\n\r\nActually, I see a similar problem on a directory where I have installed\r\n\r\n$ rails new --edge\r\n\r\ninside a gemset. What I have to do there is always use `bundle exec`\r\nlike this:\r\n\r\n$ bundle exec rails console\r\n$ bundle exec rails generate ...\r\n\r\nFor reference, this is the set-up described here\r\n\r\n<a href="https://github.com/rails/rails/issues/4749">https://github.com/rails/rails/issues/4749</a>	1.9.3	peter@vandenabeele.com	2012-01-31 04:37:00	Peter	Vandenabeele	2012-05-04 21:28:09.436731	2012-05-11 21:07:58.115245
175	ruby-talk	String	Unexpected behavior of indexing / .length	substring, index, extract, string	> [...]\r\n> then later in a different method I have\r\n>\r\n> signature = decrypted[0,77]\r\n> puts "second signature length is #{signature.length}"\r\n>\r\n> => signature length is 77\r\n> [...]\r\n> but it seems like it is not starting counting 0 towards the length,\r\n> which is not the expected behavior. Even though it works when I make the\r\n> range 0,78 it is not how it is supposed to be as far as I can tell,\r\n> because it should be starting at 0 which counts for length 1 and then\r\n> going up to position 77 which counts for 77 other additions to length in\r\n> addition to the first 0.\r\n\r\nNo, that's a misunderstanding. When you write str[m, n], you get the substring with \r\nthe length n starting at character m. It does *not* return the substring between the \r\ncharacters m and n.\r\n\r\nFor example:\r\nstr = "abcdefghijklmnopqrstuvwxyz"\r\n# get the substring with length 3 starting at character 6 ("g")\r\nputs str[6, 3]  # outputs "ghi"\r\n\r\nThis behaviour is shared by other languages like PHP or JavaScript.\r\n\r\nIf you want the substring between characters, you have to supply a range rather than two integers:\r\n\r\n# get the substring between character 2 ("c") and 6 ("g")\r\nstr[3..6] # outputs "cdefg"\r\n\r\nBy the way: If you are not sure about how a method works, you should first check the documentation. \r\nThis will save you a lot of time and effort. ;-)	1.9.3	jan.e@online.de	2012-04-06 07:06:00	Jan	E	2012-05-02 12:13:45.081583	2012-05-11 17:35:01.25713
176	ruby-talk	Hash	Storing methods in arrays or hashes	hash, array, method, store, lambda, argument	> newtable = { 1 = function() print("hi from 1") end,\r\n>              2 = function() print("hi from 2") end\r\n> }\r\n\r\n# here's an example, similar to the above, but\r\n# also passing an argument:\r\n\r\nnewhash = { 1 => lambda {|x| puts("#{x} from 1")},\r\n            2 => lambda {|x| puts("#{x} from 2")}\r\n}\r\n\r\nnewhash[1].call("hi")\r\nnewhash[2]["bye"]        # alternate call syntax\r\n\r\n\r\n# produces:\r\nhi from 1\r\nbye from 2	1.9.3	billk@cts.com	2009-12-23 23:35:00	Bill	Kelly	2012-05-02 12:13:45.105539	2012-05-06 17:44:37.036578
67	ruby-talk	Array	Best style for setting items in a collection	array, each_with_index, days of the month	> Ok, sorry that my example muddled things so much. I did mean the latter. \r\n> The point of departure is that arr initially holds the (non-leap-year) \r\n> number of days in each month with 0 up front for month 0: [0, 31, 28, \r\n> 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]. Then I want to modify it so \r\n> that it holds the aggregate days in normal years up to the end of the \r\n> month in question. I then use this array for various date calculations.\r\n\r\nUsing each_with_index:\r\n\r\nmonth_lengths = [0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]\r\n\r\ntotal_lengths = [0]\r\n\r\nmonth_lengths.each_with_index do |length, i|\r\n  total_lengths[i] = length + total_lengths[i - 1]\r\nend\r\n\r\np total_lengths\r\n\r\nHere's a version using inject:\r\n\r\nmonth_lengths = [0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]\r\n\r\ntotal_lengths = [0]\r\n\r\nmonth_lengths.inject do |length, total|\r\n  total += length\r\n  total_lengths << total\r\n  total\r\nend\r\n\r\np total_lengths	1.9.3	drbrain@segment7.net	2011-07-24 17:40:00	Eric	Hodel	2012-05-02 11:54:42.67004	2012-05-03 19:36:57.916841
28	ruby-talk	CSV	Dynamically creating variables	csv, parse, cron, collection, proxy, hash, interface	> I'm fairly new to Ruby, and programming in general (though I'm reasonably\r\n> proficient at shell scripting) so sorry if this is a dumb question.\r\n>\r\n> I'm trying to write a script for an SNMP poller but I'm getting stuck\r\n> trying to work out how to create my variables. The script will be\r\n> processing a CSV of unknown length. It might be just 2 servers or it could\r\n> be up to 20. I cant work out how I can find the list of servers from the\r\n> CSV and then create variables for each one that I can keep track off\r\n> through out the programs life to out put what I want.\r\n> this is what I've created so far\r\n> http://pastebin.com/bLPbnRv4\r\n> I envision it parsing a CSV like this\r\n>\r\n> --\r\n> host,port,community,cluster,**shortName,type,rpsTotal,**\r\n> clientTotal,serverTotal\r\n> 172.16.0.1,161,Public,Library,**mwg1,mwg7,0,0,0\r\n> 172.16.0.1,161,Public,Library,**mwg2,mwg7,0,0,0\r\n> --\r\n> after each run, it will need to update the CSV with the results of the\r\n> last poll as those are used to calculate the average throughput between\r\n> each time the script is called.\r\n>\r\n> The whole process will be called as a cron job, and will be outputting an\r\n> HTML file.\r\n>\r\n> Reading around has not really helped me as I've not found any examples of\r\n> others doing this, though I cant imagine others are not.\r\n>\r\n> If any one can give me some pointers, that would be really helpful.\r\n\r\nSo you can use CSV.parse and give it a string or a stream, or you can use CSV.foreach and \r\ngive it a path to a file. Docs are here:\r\n\r\n<a href="http://rubydoc.info/stdlib/csv/frames">http://rubydoc.info/stdlib/csv/frames</a>\r\n\r\nIn Ruby, you can iterate over collections (e.g. 2..20 servers). A CSV file is a collection \r\nof rows. If we tell it the CSV has headers, it will present each row with a hash interface \r\nso that we can access the elements by name.\r\n\r\ncsv = <<CSV\r\nhost,port,community,cluster,shortName,type,rpsTotal,clientTotal,serverTotal\r\n172.16.0.1,161,Public,Library,mwg1,mwg7,0,0,0\r\n172.16.0.1,161,Public,Library,mwg2,mwg7,0,0,0\r\nCSV\r\n\r\nrequire 'csv'\r\n\r\n# this block of code will be invoked once for each row in the CSV\r\nCSV.parse csv, :headers => true do |row|\r\n  host = row['host']\r\n  port = row['port']\r\n  # etc\r\n  proxy = Proxy.new host, port # etc\r\n  proxy.write_stats # or something\r\nend	1.9.3	josh.cheek@gmail.com	2012-01-24 05:45:00	Josh	Cheek	2012-05-02 11:44:39.104316	2012-05-11 18:09:20.840358
213	ruby-talk	Gem	Using rubyscript2exe	ocra, gem, rubyscript2exe, script, executable	> I am trying rubyscript2exe for the first time and I am getting an error\r\n> when using the command to generate an exe (rubyscript2exe my_script.rb):\r\n\r\nUse Ocra instead:\r\n\r\n<a href="http://ocra.rubyforge.org/">http://ocra.rubyforge.org/</a>	1.9.3	luislavena@gmail.com	2011-12-09 00:31:00	Luis	Lavena	2012-05-02 12:19:46.161257	2012-05-11 19:54:37.865314
458	ruby-talk	Regexp	Regexp detect repeating number	regex, number, detect, repeat, count	> it works but I want to understand what does mean the two parts:\r\n> (d+?)and (?=)\r\n> and what to add if I want to detect an exact time of repeatingnmumber,\r\n\r\ngroup (d+?) 'reluctantly' (as opposed to 'greedy') matches some\r\nsequence of digits.\r\n\r\n(?=) performs look-ahead operation, which specifies, that to the right\r\nof the first group should be it's copy.\r\n\r\nTo detect repetition count you can simply divide length of whole string\r\nby length of repeating fragment.\r\n\r\nThis solution is simpler, a little more robust and refactored to\r\nseparate functions:\r\n\r\ndef repeated_digits(string)\r\n  string[/^(d+?)*$/, 1]\r\nend\r\n\r\ndef repetition_count(string)\r\n  string.length / repeated_digits(string).length\r\nend\r\n\r\nrepeated_digits '252525252525'            # => "25"\r\nrepetition_count '252525252525'           # => 6\r\n\r\nrepeated_digits '123123123'               # => "123"\r\nrepetition_count '123123123'              # => 3\r\n\r\nrepeated_digits '1223122312231223'        # => "1223"\r\nrepetition_count '1223122312231223'       # => 4\r\n\r\n# no repetition:\r\nrepeated_digits '123344453453454354'      # => "123344453453454354"\r\nrepetition_count '123344453453454354'     # => 1	1.9.3	vderyagin@gmail.com	2011-12-17 14:28:00	Victor	Deryagin	2012-05-02 14:00:13.438643	2012-05-11 17:03:28.334972
210	ruby-talk	File	Reading particular text from a txt file	file, read, detect, nil, read, entire file, foreach, line	E\r\n\r\n> This is the code you want:\r\n>\r\n> str = File.open("status.txt") { |f| f.read }\r\n> m = /^CRP+TYH+(d+)/.match(str)\r\n> puts m[1]\r\n\r\nThat code has several issues:\r\n\r\n1. It will break (throw an exception) if the string is not found in the file because it does not check whether m is non nil.\r\n2. File.read() is a much simpler way to read the whole file at once than File.open(...){|f| f.read}.\r\n3. It is inefficient because it reads in the whole file just to extract a portion of the file.\r\n4. Even worse, it will break for large files.\r\n5. It does more IO than necessary because it always reads the whole file.\r\n6. Logic is not encapsulated in a method which hinders reuse.\r\n\r\nCompare that to my solution:\r\n\r\ndef r(f)\r\n  File.foreach f do |line|\r\n    match = line[/^CRP+TYH+(d+)/, 1] and return match\r\n  end\r\n\r\n  nil\r\nend\r\n\r\nThe file is processed line by line (but still IO uses buffering\r\nunderneath for efficiency).  Reading is stopped as soon as the data is\r\nfound.  It won't break for large files.\r\n\r\nWe can even generalize the approach\r\n\r\ndef find_first_in_file(file, regexp, group = 1)\r\n  File.foreach file do |line|\r\n    match = regexp.match(line) and return match[group] || match[0]\r\n  end\r\n\r\n  nil\r\nend\r\n\r\nThis will return the first match and if the regexp has a capturing group\r\nit will return the capture of the first group.  We would use it like\r\nthis\r\n\r\ndata = find_first_file("myfile.txt", /^CRP+TYH+(d+)/)	1.9.3	shortcutter@googlemail.com	2012-03-06 10:27:00	Robert	Klemme	2012-05-02 12:19:20.238329	2012-05-06 19:43:32.997744
68	ruby-talk	Rails	Your best Project	rails, ruby, rubyonrails, link, recommend, scalability	> Thats what I don't get how and what do I do with rails I would like to\r\n> know if I can make a program like a music player like Pandora? Still\r\n> unclear about it all\r\n\r\nOh!  There is a better place to ask about Rails things, the rubyonrails-talk Google group, at\r\n\r\n <a href="http://groups.google.com/group/rubyonrails-talk/">http://groups.google.com/group/rubyonrails-talk/</a>\r\n\r\nMeanwhile, to give you a taste of what Rails can do, check out these lists of well known\r\nsites built with RoR:\r\n\r\n <a href="http://www.setfiremedia.com/blog/50-of-the-best-websites-developed-using-ruby-on-rails">http://www.setfiremedia.com/blog/50-of-the-best-websites-developed-using-ruby-on-rails</a>\r\n <a href="http://rubyonrails.org/applications">http://rubyonrails.org/applications</a>\r\n <a href="http://www.softwaredeveloper.com/features/best-ruby-on-rails-061307/">http://www.softwaredeveloper.com/features/best-ruby-on-rails-061307/</a>\r\n\r\nIf Rails can power Hulu, it can certainly power Pandora.  Any web site\r\nyou can imagine, you can *probably* do with Rails -- though if you get\r\nhuge amounts of traffic, there may be better solutions for scalability.	1.9.3	rubytalk2dave@davearonson.com	2011-11-26 14:17:00	Dave	Aronson	2012-05-02 11:54:42.702282	2012-05-11 18:16:14.613867
154	ruby-talk	String	Explanation of "awk print $4" in ruby?	string, awk, print, split	> yes and no.  I prefer it in script form no CLI form.\r\n\r\ntry this eg,\r\n\r\n>> puts %x(df -m).split("\r\n")\r\nFilesystem           1M-blocks      Used Available Use% Mounted on\r\n/dev/sda1               145236     99061     38856  72% /\r\nvarrun                    1898         1      1898   1% /var/run\r\nvarlock                   1898         0      1898   0% /var/lock\r\nprocbususb                1898         1      1898   1% /proc/bus/usb\r\nudev                      1898         1      1898   1% /dev\r\ndevshm                    1898         1      1898   1% /dev/shm\r\ngvfs-fuse-daemon        145236     99061     38856  72% /home/botp/.gvfs\r\n=> nil\r\n\r\n>> puts %x(df -m).split("\r\n").map{|x| x.split[3]}\r\nAvailable\r\n38856\r\n1898\r\n1898\r\n1898\r\n1898\r\n1898\r\n38856\r\n=> nil	1.9.3	botpena@gmail.com	2009-12-23 22:55:00	Bot	Pena	2012-05-02 12:10:33.005421	2012-05-03 19:32:39.924106
401	ruby-talk	YAML	Error in reading YAML	yaml, error, read, key, value, spaces, config	> I am trying to read the YAML documents however it is giving me error.\r\n> \r\n> My YAML file is as below\r\n> scenario:noPassword\r\n>  username:gaurang\r\n>  password:\r\n> scenario:noUsername\r\n>  username:\r\n>  password:gaurang\r\n> \r\n> And ruby file in which I am reading is like this\r\n> require 'yaml'\r\n> \r\n> class ReadData\r\n>  config = YAML.load_file("data.yaml")\r\n>   p config["noPassword"]["username"]\r\n>   p config["noPassword"]["password"]\r\n> \r\n> end\r\n> \r\n> When i run the above class it gives me following error.\r\n> undefined method `[]' for nil:NilClass (NoMethodError)\r\n> \r\n> Any idea why I am getting this error ???\r\n\r\nYou need to put a space after the : in your YAML file, otherwyse they won't be \r\nrecognized correctly. Try doing a\r\n\r\np config\r\np config.keys\r\np config.values\r\n\r\nand you'll see what I'm talking about.	1.9.3	stefano.crocco@alice.it	2011-08-01 08:38:00	Stefano	Crocco	2012-05-02 12:55:39.218796	2012-05-11 15:55:17.73812
318	ruby-talk	XML	Parsing xml	xml, parse, mechanize, REXML, to_enum, map, &:text, openuri, rexml/document	> require 'mechanize'\r\n> mech = WWW::Mechanize.new\r\n> mech.get 'http://www.shoe-g.com/index.rdf'\r\n> doc = Nokogiri(mech.page.body)\r\n> titles = (doc / 'title').map(&:text)\r\n\r\nHere's a similar solution using REXML:\r\n\r\nrequire 'open-uri'\r\nrequire 'rexml/document'\r\n\r\nbody = open('http://www.shoe-g.com/index.rdf').read\r\ndoc = REXML::Document.new body\r\ntitles = doc.elements.to_enum(:each, '//title').map(&:text)\r\n\r\nFive lines as well...	1.9.3	shortcutter@googlemail.com	2009-03-25 21:44:00	Robert	Klemme	2012-05-02 12:39:44.729913	2012-05-06 23:20:20.69635
202	ruby-talk	Dir	Append static text for all files in a directory	file, append, text, glob	> How to append static text for all files in application .\r\n> I want to append comment lines on top of each file in app/controllers/\r\n>\r\n> how can iterate and append in the app ?\r\n>\r\n> I used this for single file :\r\n>\r\n> filename = File.open("application.rb","a") do |f|\r\n> f.puts "append to file";\r\n> f.close();\r\n> end\r\n\r\nIf your code is normally executed, the following code will give you some hint.\r\n\r\nDir.glob("*.rb") do |file|\r\n  puts file\r\nend	1.9.3	jykim@altibase.com	2009-02-24 15:44:00	Jun Young	Kim	2012-05-02 12:16:53.542461	2012-05-03 18:52:10.307852
126	ruby-talk	Thread	Long loops inside threads	thread, value, implicit, join	> That was the problem! I have to reread the thread chapter of the ruby book ;)\r\n\r\nYou can also use Thread#value which does an implicit join like this:\r\n\r\nirb(main):003:0> t = Thread.new do\r\nirb(main):004:1* count = 0\r\nirb(main):005:1> while count < 1000\r\nirb(main):006:2>   count += 1\r\nirb(main):007:2> end\r\nirb(main):008:1> count\r\nirb(main):009:1> end; t.value\r\n=> 1000	1.9.3	shortcutter@googlemail.com	2011-07-29 13:11:00	Robert	Klemme	2012-05-02 12:04:59.235161	2012-05-06 18:26:52.488944
131	ruby-talk	Windows	Send rtf files to printer	windows, print, rtf, files, Rautomation, library, win32ole	> I have a hundred or so rtf files and I need to print them.  I'd like to\r\n> use Ruby to do this.  My guess is that I'll have to open MS Word -- the\r\n> only word processor that I have available where I work -- and send the rtf\r\n> file to the printer through Word.  But maybe there's a better way to do\r\n> this?\r\n\r\nRautomation <a href="https://github.com/jarmo/RAutomation">https://github.com/jarmo/RAutomation</a> is a nice little windows\r\nautomation library in Ruby. I have used in the past to get some fairly\r\nfunky results (internal browser windows in chrome). Might be just the\r\nticket for automating word.\r\n\r\nAlso there is the Win32OLE api as well, that was mentioned.	1.9.3	richard.conroy@gmail.com	2011-12-12 09:35:00	Richard	Conroy	2012-05-02 12:04:59.397561	2012-05-11 18:28:50.563767
230	ruby-talk	Gem	Logging, rolling file, permission denied	gem, logging, log, $stdout, file, locks, rails, logger, flush, sync	> I'm trying out the excellent logging 1.3.0 gem inside my rails\r\n> application. It works nicely with stdout and file appenders but I'm\r\n> unable to using the rolling file appender config. After running some\r\n> debug sessions I found out that the write fails due to i'm not sure\r\n> what, I am certain that the file path is valid, so I conclude it must\r\n> have to do with file locks...\r\n\r\nAre you trying to log .. Concurrently with the Rails log, or are you trying to replace the default Rails logger with your own?\r\n\r\nLook at this :\r\n\r\n<a href="http://mikenaberezny.com/2007/02/24/rails-logging-tips/">http://mikenaberezny.com/2007/02/24/rails-logging-tips/</a>\r\n\r\nKeeping this in mind:\r\n\r\nOne important point to remember is that the logfile object does not implicitly flush to the file by default. This means that your code must call logfile.flush for the data to be written out. Alternatively, you can set logfile.sync = true to turn on implicit flushing.	1.9.3	aldric@trevoke.net	2009-12-23 21:29:00	Aldric	Giacomoni	2012-05-02 12:22:39.015727	2012-05-11 19:55:10.741113
10	ruby-talk	File	Make a file read-only?	file, permissions, mode, mask, &, change	> More specifically, then, you want to remove the write permission from\r\n> the file, leaving it whatever other permissions were already set\r\n> (possibly none!).  In other words, you want to /mask out/ the write bits\r\n> from whatever the current file mode is.  Try the following:\r\n>\r\n> mode = 0100664\r\n> mask = mode ^ 0222\r\n> new_mode = mode & mask\r\n\r\nInteresting approach.  I usually do it like this:\r\n\r\nirb(main):038:0> mode = 0100664\r\n=> 33204\r\nirb(main):039:0> mask = 0222\r\n=> 146\r\nirb(main):040:0> new_mode = (mode | mask) ^ mask\r\n=> 33060\r\nirb(main):041:0> "%07o" % new_mode\r\n=> "0100444"	1.9.3	shortcutter@googlemail.com	2012-02-07 23:20:00	Robert	Klemme	2012-05-02 11:37:03.255127	2012-05-06 22:22:09.668816
328	ruby-talk	File	Get remote and local file version and time stamp	file, timestamp, test, age, mtime, compare	Not sure if this is what you're looking for, but here's the timestamp at least.\r\n\r\nFile#mtime\r\nFile.new("testfile").mtime   #=> Wed Apr 09 08:53:14 CDT 2003\r\n\r\n#this is assuming that you want to do something in Ruby if the file is \r\nof a certain age\r\nClass FTP\r\n  def timestamp(abs_path, cond, &block)\r\n    file = File.new(abs_path)\r\n    file.mtime == cond ? yield(file) : file.mtime\r\n  end\r\nend\r\n\r\ncheck out <a href="http://www.ruby-doc.org/core/classes/File.html">http://www.ruby-doc.org/core/classes/File.html</a>	1.9.3	luke.gru@gmail.com	2011-08-05 01:06:00	luke	gruber	2012-05-02 12:41:15.365643	2012-05-11 20:22:24.866492
140	ruby-talk	Marshal	Beginner Questions	time, marshal, psych, yaml	>> Another remark: $dives.to_yaml(f) is potentially more efficient since\r\n>> output is directly written to the stream whereas the form with #write\r\n>> first creates the complete string in memory before writing it.\r\n>\r\n> Huh. I didn't know you could do that. Normally I use YAML.dump and pass the IO in.\r\n\r\nEven better!  That way you can easily exchange persistence with Marshal.\r\n\r\nirb(main):004:0> data = {:now => Time.now}\r\n=> {:now=>2012-01-20 11:53:17 +0100}\r\nirb(main):005:0> f="x"\r\n=> "x"\r\nirb(main):006:0> [Marshal, YAML].each do |perst|\r\nirb(main):007:1* File.open(f,'wb'){|io| perst.dump(data, io)}\r\nirb(main):008:1> p File.open(f,'rb'){|io| perst.load(io)}\r\nirb(main):009:1> end\r\n{:now=>2012-01-20 11:53:17 +0100}\r\n{:now=>2012-01-20 11:53:17 +0100}\r\n=> [Marshal, Psych]\r\n\r\n:-)	1.9.3	shortcutter@googlemail.com	2012-01-20 11:55:00	Robert	Klemme	2012-05-02 12:07:07.599457	2012-05-03 19:35:31.365451
196	ruby-talk	Windows GUI	Send rtf files to printer	windows, gui, rtp, batch, print, autoit, win32ole	> Some options:\r\n>\r\n> - Google "batch print rtf".\r\n> - More directly relating to Ruby: Google "ruby automate word" (this is\r\n> probably your best bet).\r\n>\r\n> If these don't suffice, AutoIT is good for driving generic Windows GUIs.\r\n> I've also used Ruby to drive AutoIT before. It took a bit of messing\r\n> about to get working how I wanted it, but it was extremely useful once\r\n> working. I used this setup for mass installs on different machines in a\r\n> short time window when a GUI install was the only viable option.\r\n>\r\n> It's been a while since I've played with this sort of stuff, but most of\r\n> the resources from the searches above look good. :)\r\n\r\n>> I have a hundred or so rtf files and I need to print them. I'd like to\r\n>> use Ruby to do this. My guess is that I'll have to open MS Word -- the\r\n>> only word processor that I have available where I work -- and send the\r\n>> rtf file to the printer through Word. But maybe there's a better way\r\n>> to do this?\r\n\r\nOh, I almost forgot: A good starting point is to look into the Ruby \r\nlibrary Win32OLE. You can do all sorts of fun things with it. :)	1.9.3		2011-12-12 11:29:00			2012-05-02 12:16:53.365583	2012-05-11 13:32:21.796519
97	ruby-talk	Method	Include own methods in IRB	batch, irb, script, startup	You could simply write a script and require it on startup with the -r\r\nparameter:\r\n\r\nirb -r C:/myscript.rb\r\n\r\nYou can write this line into a batch file (or the like).	1.9.3	jan.e@online.de	2012-03-14 15:23:00	Jan	E	2012-05-02 11:59:32.576786	2012-05-11 16:24:58.338157
405	ruby-talk	DRb	DRb documentation?	drb, ruby, documentation, link, druby, rinda	>> I've found very few documentation pages about DRb... The rdoc pages\r\n>> (http://www.ruby-doc.org/stdlib/libdoc/drb/rdoc/index.html) are poorly\r\n>> documented and most of the web links provided are 404 or Japanese\r\n>>\r\n>> Does somebody have links to tutorials about details and in depth DRb programming ?\r\n>\r\n> http://segment7.net/projects/ruby/drb/\r\n> http://chadfowler.com/ruby/drb.html\r\n>\r\n> Is what I used to write my DRb based solution.\r\n\r\n<a href="http://dx.doi.org/10.1007/s10766-008-0086-1">http://dx.doi.org/10.1007/s10766-008-0086-1</a>\r\n<a href="http://www.druby.org/druby_and_rinda.pdf">http://www.druby.org/druby_and_rinda.pdf</a>	1.9.3	seki.at.druby.org@gmail.com	2009-03-18 04:27:00	SEKI	Masatoshi	2012-05-02 12:56:17.37303	2012-05-11 20:45:22.073878
60	ruby-talk	Web	File size of web-based flv?	web, http, https, file, object, curl, grep, length	> I have a file, http:// ... /One-minute-commercial-027.flv  (I can't enter the name \r\n> because the email gets rejected with a 5.7.1 as spam, apparently.\r\n>\r\n> I want to do two simple things:\r\n>\r\n> 1) I want to get the file size.  Please note that File.size() does not seem to work \r\n> for me for a web-based file but does work for a local file.\r\n>\r\n> C:UsersRalph>irb\r\n> irb(main):001:0>  File.size('c:/RailsInstaller/Sites/ultradedup002/app/views/usage/VideoTutorials.html.haml')\r\n> =>  32406\r\n> irb(main):002:0>  File.size('http:// ... /One-minute-commercial-027.flv')\r\n> Errno::EINVAL: Invalid argument - http:// something /One-minute-commercial-027.flv\r\n>          from (irb):2:in `size'\r\n>          from (irb):2\r\n>          from C:/RailsInstaller/Ruby1.9.2/bin/irb:12:in `<main>'\r\n> irb(main):003:0>\r\n>\r\n> 2) I want to read a few hundred bytes from the beginning of the file so as to \r\n> pick up the flv's time duration.\r\n>\r\n> Are there Ruby facilities to do this?\r\n\r\nYou should probably make a HEAD request and parse Content-Length header\r\n\r\ncurl --head '<Your URL>' | grep 'Content-Length'\r\n\r\nhttp:// ... /One-minute-commercial-027.flv'	1.9.3	nested.bit@gmail.com	2012-01-03 19:09:00	Venkatakrishnan	Ganesh	2012-05-02 11:53:50.643937	2012-05-11 15:58:49.792433
113	ruby-talk	Language	New videos series teaches Ruby language	video, series, ruby, language, learn, teach, youtube	Matt Stopa has begun a new YouTube video channel where he is teaching\r\nsome great Ruby fundamentals and advanced techniques in a simple, casual\r\nstyle. Follow him on twitter @MattStopa and subscribe to the free videos\r\nat <a href="http://bit.ly/GAZxNV">http://bit.ly/GAZxNV</a>	1.9.3		2012-03-21 16:48:00	Matt	Slay	2012-05-02 12:01:39.496559	2012-05-11 18:22:28.274924
295	ruby-talk	Windows	Simple CSV and Excel problem	windows, excel, csv, parse, win32ole, exception, workbook, open	Importing into excel, then looping into every cell or range is a time consuming process. Instead, you rename the file from csv to xls and use the WIN32OLE built-in method called: 'TextToColumns'.\r\n\r\nThe WIN32OLE excel documentation defines TextToColumns like this:\r\nFunction TextToColumns([Destination], [DataType As XlTextParsingType xlDelimited], [TextQualifier As XlTextQualifier xlTextQualifierDoubleQuote], [ConsecutiveDelimiter], [Tab], [Semicolon],\r\n[Comma], [Space], [Other], [OtherChar], [FieldInfo], [DecimalSeparator],\r\n[ThousandsSeparator], [TrailingMinusNumbers])\r\n    Member of Excel.Range\r\n\r\nSo by considering the above points, I written a small utility to rename\r\nthe file from 'csv' to 'xls' and call TextToColumns method to convert\r\ncomma delimited text to normal readable excel columns:\r\n\r\nrequire 'win32ole'\r\n\r\n# To load the WIN32OLE's built in constants in to the module\r\nmodule EXCEL_CONST\r\nend\r\n\r\n# Definition to rename the file into xls\r\n# For ex: It renames file 'sample.csv' into 'sample.csv.xls'\r\ndef file_rename(filename)\r\n  File.rename(filename, filename + ".xls")\r\nend\r\n\r\nbegin\r\n  file_rename("C:/Sample.csv")\r\n\r\n  # Create a WIN32OLE excel object\r\n  excel = WIN32OLE::new('excel.Application')\r\n\r\n  # Load all the constants\r\n  WIN32OLE.const_load(excel, EXCEL_CONST)\r\n\r\n  # Open the excel workbook\r\n  excel.workbooks.open("C:/Sample.csv.xls")\r\n\r\n  # Read the used range\r\n  range = excel.activeworkbook.activesheet.usedrange\r\n\r\n  # Convert the comma seperated data to the column\r\n  range.TextToColumns(excel.activeworkbook.activesheet.Range("A1"),\r\nEXCEL_CONST::XlDelimited, EXCEL_CONST::XlDoubleQuote, false, false,\r\nfalse, true)\r\nrescue\r\n  # Raises any exception caught in begin section\r\n  puts $!\r\nensure\r\n  # Save the workbook and close\r\n  excel.activeworkbook.save\r\n  excel.activeworkbook.close(false)\r\n\r\n  # Quit Excel\r\n  excel.quit\r\nend\r\n\r\nI hope this method is good enough to automate your task. Please let me\r\nknow if in case the method is not feasible.	1.9.3	email2vimalraj@gmail.com	2011-12-28 10:40:00	Vimal	Selvam	2012-05-02 12:34:47.69449	2012-05-06 22:59:43.892905
407	ruby-talk	Regexp	A regexp that does not contain comma	regex, string	> Trying the regexp /^[^,]*$/ fails with the code below:\r\n> [...]\r\n> Am I missing something?\r\n\r\nYour code expects the regex to match if the string contains a comma and not \r\nmatch if the string does not contains a comma. That's the opposite of what \r\nJustin's regex does and also the opposite of what the Sijo asked for. \r\nAlso if the goal had been to have the regex match if there is a comma /,/ \r\nwould have sufficed as a regex.\r\nAlso note that with your regexp your code outputs "string does not contain a \r\ncomma" for the string ",".	1.9.3	sepp2k@googlemail.com	2009-07-14 12:19:00	Sebastian	Hungerecker	2012-05-02 12:56:17.436609	2012-05-03 19:06:07.338461
285	ruby-talk	Array	Creating an array containing sums of combinations of ranges	array, product, method, ranges	Have you checked out Array#product? It seems like that might do the \r\ntrick for you...\r\n\r\na1 = ['n', 'm']\r\na2 = ['x', 'y']\r\n\r\np a1.product(a2)\r\n\r\n=> [["n", "x"], ["n", "y"], ["m", "x"], ["m", "y"]]\r\n\r\n  if your first array is composed of ranges, those can easily be \r\nconverted into arrays...	1.9.3	jakekaiden@yahoo.com	2012-04-15 04:49:00	Jake	Kaiden	2012-05-02 12:33:03.748905	2012-05-04 23:22:18.793108
519	ruby-talk	Gem	Organizing a complex gem	RbConfig, share, data project, directory, default, setup	> > Use dot directory:\r\n> > \r\n> >   $HOME/.yourappname/\r\n> > \r\n> > In there the end-user can edit a `config` file (maybe config.yml, or \r\n> > config.rb or whatever the appropriate extension). And also the data \r\n> files \r\n> > you mention can go there too, e.g. `$HOME/.yourappname/foo.dat`.\r\n>\r\n> Where would I store this within the gem/project directory hierarchy,\r\n> though?  That's the real question I have with regard to where to put my\r\n> config and data files right now, and not so much where to install them\r\n> later (which I was thinking of doing in a manner quite like what you\r\n> describe here).\r\n>\r\n\r\nAh, you mean for a default setup? You should keep it in your project, \r\neither in `lib` somewhere or if you what to be FHS strict use `data/foo/` \r\nwhich should be installed to `/usr/share/foo/`. However for the latter, \r\nRubyGems  doesn't install data to share, so you will have to access that \r\nfrom the gem itself (maybe using `RbConfig.datadir`?) -- which is why I say \r\njust using `lib` is much easier.\r\n\r\nThen have your program setup the user defaults on an initial run.	1.9.3, 1.8.6, 1.8.7	transfire@gmail.com	2012-01-05 08:26:00	Intransition		2012-05-04 19:56:29.833118	2012-05-04 19:56:29.833118
11	ruby-talk	Regexp	Regexp woes with breaklines	regex, line, breaks, link, abstraction, test	>> s = "test\r\ntest<br>\r\ntest\r\ntest\r\ntest<br/>\r\ntest"\r\n>> s.gsub(/(?:<br */*>)*(?:\r\n|\r\n|\r\n)/, "<br />\r\n")\r\n>> #=> "test<br />\r\ntest<br />\r\ntest<br />\r\ntest<br />\r\ntest<br />\r\ntest"\r\n\r\n> Thanks a million.  It feels like a waste replacing something that's \r\n> already there, but I suppose that's just my conceptions of real life \r\n> getting in the way of my abstractions.\r\n\r\nNot necessarily: with 1.9's regular expression engine there is negative \r\nlookbehind as well.  You could use that to prevent substitution of \r\nnewlines which are preceeded by a <br/> already.\r\n\r\n<a href="http://www.geocities.jp/kosako3/oniguruma/doc/RE.txt">http://www.geocities.jp/kosako3/oniguruma/doc/RE.txt</a>\r\n\r\n> I was actually hoping that '$' (or possibly '$$?') would cover all the \r\n> CR/LF/CRLF cases for me, was I mistaken about that?\r\n\r\nI believe it does not cover alone.  In every case it is safer to be explicit IMHO.  \r\n\r\nBtw, I believe you can simplify to (?:?|).	1.9.3	shortcutter@googlemail.com	2009-04-10 23:42:00	Robert	Klemme	2012-05-02 11:37:03.280459	2012-05-11 18:04:47.289922
283	ruby-talk	Block	Are blocks objects? What messages can they handle?	object, message, *args	>> A block is a syntactical construct, not an object. A Proc is the\r\n>> object-ized form of a block. If you want to do something on the block,\r\n>> you need to turn it into an object first.\r\n>>\r\n>> An analogy might be that the string "def" is a syntactical construct\r\n>> that creates a method, but it is not itself an object. You can't write\r\n>> "def.(...)" and have it be meaningful in this context.\r\n>>\r\n>> > So ... how does one send a message to the block before it is passed as\r\n>> > an argument?  Is that even possible?\r\n>>\r\n>> You could make it a Proc first and pass that instead. For example, say\r\n>> you have a method which passes some arguments to a block:\r\n>>\r\n>> ======\r\n>> > def execute(*args, &block); yield *args if block; end\r\n>>  => nil\r\n\r\nI'd rather use these in pairs because the conversion of a block to an\r\naccessible object has some overhead:\r\n\r\n- block_given? and yield\r\n- &b and b[] / b.call\r\n\r\nSo either\r\n\r\ndef execute(*args)\r\n  yield *args if block_given?\r\nend\r\n\r\nor\r\n\r\ndef execute(*args, &block)\r\n  block[*args] if block\r\nend\r\n\r\nrespectively\r\n\r\ndef execute(*args, &block)\r\n  block.call(*args) if block\r\nend\r\n\r\nUsually you only need the form with &block if you need to store the\r\nblock or pass it on to another method, e.g.\r\n\r\ndef foo\r\n  yield 123\r\nend\r\n\r\ndef bar(&b)\r\n  foo(&b) # pass on\r\nend\r\n\r\nbar {|x| p x} # will print 123	1.9.3	shortcutter@googlemail.com	2011-07-04 17:54:00	Robert	Klemme	2012-05-02 12:33:03.678469	2012-05-03 18:59:03.165813
312	ruby-talk	Module	Display computation time in IRB?	Benchmark, module, display, timings	> Is there an easy way to display the time it takes to compute any\r\n> function from within IRB?\r\n\r\nIf I understand correctly, there is the Benchmark module\r\n\r\n<a href="http://www.ruby-doc.org/stdlib/libdoc/benchmark/rdoc/classes/Benchmark.html">http://www.ruby-doc.org/stdlib/libdoc/benchmark/rdoc/classes/Benchmark.html</a>\r\n\r\n>> require 'benchmark'\r\n=> true\r\n>> Benchmark.bmbm do |x|\r\n?> x.report('concat') {s='t ';(1..10000).step do |x| s.concat(x.to_s) \r\nend}\r\n?> x.report('<<') {s='t ';(1..10000).step do |x| s << x.to_s end}\r\n>> end\r\nRehearsal ------------------------------------------\r\nconcat   0.010000   0.000000   0.010000 (  0.008603)\r\n<<       0.010000   0.000000   0.010000 (  0.007354)\r\n--------------------------------- total: 0.020000sec\r\n\r\n             user     system      total        real\r\nconcat   0.000000   0.000000   0.000000 (  0.006930)\r\n<<       0.010000   0.000000   0.010000 (  0.007101)	1.9.3	david_v_wright@yahoo.com	2009-03-20 23:18:00	David	Wright	2012-05-02 12:38:01.295713	2012-05-11 20:18:42.230137
296	ruby-talk	Object	Integers and floats	object, object_id, compare, equality, symbols, strings	> Can someone explain to me why Ruby treats integers and floating point numbers differently?\r\n>\r\n> irb(main):069:0> 12.equal? 12\r\n> => true\r\n>\r\n> irb(main):071:0> 12.0.equal? 12.0\r\n> => false\r\n\r\nBecause they're different :)\r\n\r\nWith .equal you're checking to see whether 2 objects are in fact the same object.  12, a Fixnum, is an immediate object, meaning all the 12s in your code are in fact the exact same object.\r\n\r\n12.0, a floating point number, is constructed from scratch each time you refer to it.  So the 12.0 on the left is a separate construction from the the 12.0 on the right.\r\n\r\nirb(main):008:0> 12.object_id\r\n=> 25\r\nirb(main):009:0> a = 12\r\n=> 12\r\nirb(main):010:0> b = 12\r\n=> 12\r\nirb(main):011:0> a.object_id\r\n=> 25\r\nirb(main):012:0> b.object_id\r\n=> 25\r\n\r\nAll of these 12's are the same object.\r\n\r\nirb(main):013:0> 12.0.object_id\r\n=> 11121408\r\nirb(main):014:0> a = 12.0\r\n=> 12.0\r\nirb(main):015:0> b = 12.0\r\n=> 12.0\r\nirb(main):016:0> a.object_id\r\n=> 11187424\r\nirb(main):017:0> b.object_id\r\n=> 10954912\r\n\r\nAll of these 12.0s are different objects\r\n\r\nirb(main):018:0> 12 == 12\r\n=> true\r\nirb(main):019:0> 12.0 == 12.0\r\n=> true\r\n\r\nBut all of the 12.0s have the same value.\r\n\r\nThe same distinction happens for symbols and strings:\r\n\r\nirb(main):020:0> "abc".equal? "abc"\r\n=> false\r\nirb(main):021:0> :abc.equal? :abc\r\n=> true	1.9.3	paul@pollyandpaul.co.uk	2009-12-22 13:11:00	Paul	Smith	2012-05-02 12:35:36.300226	2012-05-07 00:31:58.788426
444	ruby-talk	Hash	Ruby syntax	hash, argument	When a hash is the last argument to a method, you can skip its open-\r\nand close-braces.\r\n\r\nSo this:\r\nIO.new("data.txt", mode: 'w:UTF-16LE', cr_newline: true)\r\nIs the same as this:\r\nIO.new("data.txt", {mode: 'w:UTF-16LE', cr_newline: true})\r\n\r\nThe first argument is the "data.txt" string, the second argument is\r\nthe entire hash. The method then checks the type of second argument,\r\nand in this case - since it's a hash - it considers it to be the opt\r\nvariable, with mode taking default value.	1.9.3	matma.rex@gmail.com	2012-02-12 14:13:00	Bartosz	DziewoÅski	2012-05-02 13:55:56.37968	2012-05-11 17:16:09.944081
101	ruby-talk	String	Newbie: if is not null else...	string, empty?, to_s, nil, empty string	> But that doesn't help you in the case where you want to replace empty strings\r\n> with '-'.  For that, maybe something like:\r\n>\r\n> \tx = (x && !x.empty?) ? x : '-'\r\n>\r\n> (That assumes x has an empty? predicate, not everything does.)\r\n\r\nI've always found the easiest way to replace empty strings is:\r\n\r\nx = '-' if x.to_s.empty?\r\n\r\nJust about everything has a #to_s method, and nil evaluates to an empty \r\nstring, so this will replace x if it is either an empty string *or* if \r\nit is nil *or* if x is currently not yet defined.	1.9.3	jballanc@gmail.com	2009-12-22 21:42:00	Joshua	Ballanco	2012-05-02 12:00:12.350428	2012-05-05 01:14:19.456388
445	ruby-talk	HTML	Displaying the html from a ruby .cgi script?	html, generated, ruby, output, -source, -dump	> I have a script, foobar.cgi\r\n> \r\n> I can load it into my browser, as in\r\n> http://localhost/foobar.cgi\r\n> \r\n> [...]\r\n> Is there an easy way to grab that generated html code and\r\n> display it (as a long string) on a console?\r\n> [...]\r\n> a "ruby only" solution, which I would prefer\r\n\r\nrequire 'open-uri'\r\nprint open('http://localhost/foobar.cgi').read\r\n\r\n> I thought lynx -dump might help but it doesn't,\r\n\r\nWhat does "it doesn't" mean? If it means "but I don't see the HTML", \r\nthen that because you should've used -source, not -dump.	1.9.3	albertschlef@gmail.com	2009-12-23 03:04:00	Albert	Schlef	2012-05-02 13:55:56.388135	2012-05-04 00:05:18.036835
278	ruby-talk	Gem	How to build platform specific gems?	gem, build, platform, specific, native, gemspec, compile	> I tried to build a gem for my 64 bit linux machine and tried the specification like this,\r\n>\r\n> spec.platform = Gem::Platform::X86_64-linux\r\n\r\nspec.platform = Gem::Platform::CURRENT\r\n\r\n> but it generates below error,\r\n>\r\n>  ERROR:  While executing gem ... (NameError)\r\n>    uninitialized constant Gem::Platform::X86_64-linux\r\n>\r\n> I also tried with default like\r\n>\r\n>   spec.platform = Gem::Platform::Ruby\r\n\r\nspec.platform = Gem::Platform::RUBY\r\n\r\n> Did any one have an idea on this issue, my wish is i need to build a gem\r\n> for 64 bit linux and i need to know how to specify it in gemspec file.\r\n\r\nIs your gem including a native extension?\r\n\r\nPlease take a look to rake-compiler:\r\n\r\n<a href="http://github.com/luislavena/rake-compiler">http://github.com/luislavena/rake-compiler</a>\r\n\r\nAnd you can do:\r\n\r\n$ rake native gem\r\n\r\nTo generate the native gem for you (you only need the original gemspec)	1.9.3	luislavena@gmail.com	2011-12-14 12:54:00	Luis	Lavena	2012-05-02 12:33:03.509256	2012-05-11 20:09:24.07599
120	ruby-talk	Hash	Ruby syntax	hash, symbol	> But in the ruby document: <a href="http://www.ruby-doc.org/docs/ProgrammingRuby/">http://www.ruby-doc.org/docs/ProgrammingRuby/</a>\r\n>\r\n> Definition of a hash should =C2 like this:\r\n>\r\n> {'key'=>'value'.....}\r\n>\r\n> Now in the IO.new exmaple,it is written as {key:value}. =C2 Is the ':' = symbol\r\n> same as '=>'?? I do not find it is mentioned in any document.\r\n\r\nThere are two ways to define a hash.\r\n\r\nFirst is, as you are saying, {key => value}, where both key and value can be anything. \r\n{'key' => 'value'} is okay (key and value are strings), but for example this is also \r\nvalid: { [1,2] => {3 => 4} } (here key is an array, value is another hash).\r\n\r\nThe second way, introduced in Ruby 1.9, is {key: value}. Value is still an arbitrary Ruby \r\nvalue, but the key is converted to a Symbol - so this: {key: value} is equivalent to this: \r\n{:key => value}. The second method is less typing, so it's more often used now, when you\r\ndon't care about compatibility with Ruby 1.8, and you are fine with your keys all being symbols.\r\n\r\nYou can also mix both styles in a single hash definition.	1.9	matma.rex@gmail.com	2012-02-12 15:49:00	Bartosz	DziewoÅski	2012-05-02 12:03:37.018095	2012-05-11 18:26:12.876896
276	ruby-talk	Kernel	Eval: get the console result into a variable	kernel, methods, $stdout, write, puts, change, output, object	The kernel methods "print", "puts" etc. actually call $stdout.write and \r\n$stdout.puts. So you could simply create your own object with a write \r\nand puts method and (temporarily) change $stdout to this object:\r\n\r\nclass OutputCollector\r\n\r\n  attr_reader :content\r\n\r\n  def write x\r\n    @content += x.to_s\r\n  end\r\n\r\n  def puts x\r\n    write x.to_s + "\r\n"\r\n  end\r\n\r\n  def initialize\r\n    @content = ''\r\n  end\r\n\r\nend\r\n\r\n# this changes $output to an instance of OutputCollector, executes the block\r\n# (all output will be written to the OutputCollector), changes $stdout\r\n# back to the default value (given by STDOUT) and returns the collected \r\noutput\r\ndef catch_output\r\n  coll = OutputCollector.new\r\n  $stdout = coll\r\n  yield\r\n  $stdout = STDOUT\r\n  coll.content\r\nend\r\n\r\ncaught = catch_output do\r\n  print 'abc'\r\n  print 123\r\nend\r\n\r\n# show collected output\r\np caught	1.9.3	jan.e@online.de	2012-03-15 13:32:00	Jan	E	2012-05-02 12:33:03.435181	2012-05-06 23:10:20.756125
310	ruby-talk	DLL	Newbie: Calling methods from a dll	dll, call, win32, api, ruby, easy	Jesus, it was easier than I though.\r\n\r\ntest = Win32API.new("mydll","mymethod", 0)\r\ntest.call(10, 120, 1, 233)	1.9.3	imran.nazir@yahoo.co.uk	2011-12-15 19:15:00	Jerome David	Salinger	2012-05-02 12:38:01.209985	2012-05-11 16:54:40.10732
360	ruby-talk	Array	Understanding array.clear	array, clear, object_id, new, example	> I was working a project Euler problem and noticed that when I used this\r\n> code:\r\n>\r\n> array1 = ["a", "b", "c", "d", "e"]\r\n> array2 = Array.new\r\n> array2<<  array1\r\n> array1.clear\r\n> p array2\r\n>\r\n> [[]] is my output. But, when I tried:\r\n>\r\n> array1 = ["a", "b", "c", "d", "e"]\r\n> array2 = Array.new\r\n> array2<<  array1\r\n> array1 = []\r\n> p array2\r\n>\r\n> [["a", "b", "c", "d", "e"]] is my output.  I am not understanding why\r\n> clearing array1 is changing array2, but replacing the value of array1 is\r\n> having no effect.\r\n>\r\n> (btw, using ruby 1.9.2p180)\r\n\r\nSo what is happening can be seen by inspecting object ids. In the first instance we create two new arrays which are referenced by variables array1 and array2 respectively.\r\n\r\n1.9.2p290 :001 > array1 = ["a", "b", "c", "d", "e"]\r\n  => ["a", "b", "c", "d", "e"]\r\n1.9.2p290 :002 > array1.object_id\r\n  => 4320500\r\n1.9.2p290 :003 > array2 = Array.new\r\n  => []\r\n1.9.2p290 :004 > array2.object_id\r\n  => 4205400\r\n\r\nWe then add the array which is referenced by array1 as the first element \r\nof array2\r\n\r\n1.9.2p290 :005 > array2 << array1\r\n  => [["a", "b", "c", "d", "e"]]\r\n1.9.2p290 :006 > array2.first.object_id == array1.object_id\r\n  => true\r\n\r\nSo in fact array2 now contains a reference to array1. This then does \r\nwhat we expect when the array referenced by array1 is cleared. You will \r\nnotice the object reference remains the same.\r\n\r\n1.9.2p290 :007 > array1.clear\r\n  => []\r\n1.9.2p290 :008 > array2\r\n  => [[]]\r\n1.9.2p290 :009 > array2.first.object_id == array1.object_id\r\n  => true\r\n\r\nNow what happens if we do the same thing, except instead of clearing the \r\narray referenced by array1, we assign a new array to array1.\r\n\r\n  1.9.2p290 :010 > array1 = ["a", "b", "c", "d", "e"]\r\n  => ["a", "b", "c", "d", "e"]\r\n1.9.2p290 :011 > array1.object_id\r\n  => 5232600\r\n1.9.2p290 :012 > array2 = Array.new\r\n  => []\r\n1.9.2p290 :013 > array2.object_id\r\n  => 5189800\r\n1.9.2p290 :014 > array2 << array1\r\n  => [["a", "b", "c", "d", "e"]]\r\n1.9.2p290 :015 > array2.first.object_id == array1.object_id\r\n  => true\r\n1.9.2p290 :016 > array1 = Array.new\r\n  => []\r\n1.9.2p290 :017 > array2.first.object_id == array1.object_id\r\n  => false\r\n1.9.2p290 :018 > array2\r\n  => [["a", "b", "c", "d", "e"]]\r\n\r\nAs you can see here, when array1 is told to reference a new array, the array it used to reference is still intact and remains in existence due to array2 still holding a reference to it. The variable array1 now points to a shiny new array and thus methods called via array1 are no longer received by the one we shoved into array2.\r\n\r\n1.9.2p290 :019 > array1.object_id\r\n  => 5144400\r\n1.9.2p290 :020 > array2.object_id\r\n  => 5189800\r\n1.9.2p290 :021 > array2.first.object_id\r\n  => 5232600	1.9.3	sduncan@wetafx.co.nz	2011-12-20 09:11:00	Sam	Duncan	2012-05-02 12:46:57.2725	2012-05-06 23:14:26.758594
141	ruby-talk	Dir	Show newest file in directory?	dir, sort_by, file, filename, entries, oldest, newest, extract	>> If you have a directory full of files, how can you get the newest file\r\n>> and oldest file from that directory?\r\n> \r\n> One way...\r\n> \r\n>   ages = Dir["C:/New"].map{|f| [f,File.mtime(f)] }.sort_by{|i|i[1]}\r\n\r\nIMHO that should read\r\n\r\nages = Dir.entries("C:/New").map{|f| \r\n[f,File.mtime(File.join("C:/New",f))] }.sort_by{|i|i[1]}\r\n\r\nBut:\r\n\r\n> Or, if you want it in one fell swoop:\r\n> \r\n>   newest, oldest = Dir["C:/New"].map{|f| [f,File.mtime(f)] }.sort_by{|\r\n> i|i[1]}.map{|i| i[0]}.values_at(0,-1)\r\n\r\nWe can do better, i.e. #map is superfluous\r\n\r\nsorted = Dir.entries(dir).sort_by {|f| File.mtime(File.join(dir,f))}\r\nputs sorted.first, sorted.last	1.9.3	shortcutter@googlemail.com	2008-12-18 23:46:00	Robert	Klemme	2012-05-02 12:07:07.617555	2012-05-06 19:37:21.257322
435	ruby-talk	Array	A question on style	array, freeze, style	> def get_responses\r\n>  [\r\n>   "Got it.",\r\n>   "Interesting. I've made a note of that.",\r\n>   "Noted.",\r\n>   "Right.",\r\n>   "I see.",\r\n>   "As you say."\r\n>  ]\r\n> end\r\n\r\nI would typically define a constant for this:\r\n\r\nclass Foo\r\n  GET_RESPONSES = [\r\n    "Got it.",\r\n    "Etc.",\r\n  ]\r\n  ...\r\nend\r\n\r\nThen only one object is created, and you use it over and over again. To \r\ndo this safely it's better to freeze both the array and its members:\r\n\r\n  GET_RESPONSES = [\r\n    "Got it.".freeze,\r\n    "Etc.".freeze,\r\n  ].freeze\r\n\r\nNote: it's possible to override GET_RESPONSES in subclasses, but if you \r\nwant a method defined in the superclass to dynamically pick the constant \r\nfrom the subclass then you need to use dynamic resolution like this:\r\n\r\nclass Foo\r\n  GET_RESPONSES = [...]\r\n  def response(n)\r\n    self.class::GET_RESPONSES[n]\r\n  end\r\nend\r\n\r\nclass Bar < Foo\r\n  GET_RESPONSES = [...]\r\nend	1.9.3	b.candler@pobox.com	2011-08-01 09:39:00	Brian	Candler	2012-05-02 13:46:37.67122	2012-05-11 15:37:17.333515
263	ruby-talk	String	About binman 2.0.0	binman, colors, HTML, markdown	> That screenshot looks GREAT.\r\n\r\nThanks, those colors are from my adaptation of the xoria256 scheme:\r\n\r\n<a href="http://snk.tuxfamily.org/log/xoria256-terminal-color-scheme.html">http://snk.tuxfamily.org/log/xoria256-terminal-color-scheme.html</a>\r\n\r\n> I myself do not use man-pages (I am proudly of the WWW generation,\r\n> not the "man foo" generation) but I really think this seems\r\n> AWESOME.\r\n\r\nSince these man pages are just Markdown, you can make WWW pages too:\r\n\r\n    binman load YOUR_BIN_SCRIPT | markdown > YOUR_WWW_PAGE.html\r\n\r\nI've used and developed several documentation systems over the years\r\nand have been gradually converging to something similar to literate\r\nprogramming.  This Markdown to UNIX man page conversion flow, with\r\ndocumentation right beside its associated code (bin script, in this\r\ncase) feels so easy that I am encouraged to write more tools & docs.\r\n\r\nGoing further, there is something to be said of the refreshingly\r\nsimple, accessible, and convenient aesthetic of UNIX man pages.  I\r\nthink Ryan Tomayko explains this very well in his Ronn tool's docs:\r\n\r\n(from the "Background" section at https://github.com/rtomayko/ronn/)\r\n\r\n> Some think UNIX manual pages are a poor and outdated form of\r\n> documentation. I disagree:\r\n>\r\n> - Manpages follow a well defined structure that's immediately\r\n>   familiar. This gives developers a starting point when\r\n>   documenting new tools, libraries, and formats.\r\n>\r\n> - Manpages get to the point. Because they're written in an\r\n>   inverted style, with a SYNOPSIS section followed by additional\r\n>   detail, prose and references to other sources of information,\r\n>   manpages provide the best of both cheat sheet and reference\r\n>   style documentation.\r\n>\r\n> - Historically, manpages use an extremely -- unbelievably --\r\n>   limited set of text formatting capabilities. You get a couple of\r\n>   headings, lists, bold, underline and no more. This is a feature.\r\n>\r\n> - Although two levels of section hierarchy are technically\r\n>   supported, most manpages use only a single level. Unwieldy\r\n>   document hierarchies complicate otherwise good documentation.\r\n>   Remember that Feynman covered all of physics -- heavenly bodies\r\n>   through QED -- with only two levels of document hierarchy (_The\r\n>   Feynman Lectures on Physics_, 1970).\r\n>\r\n> - The classical terminal manpage display is typographically well\r\n>   thought out. Big bold section headings, justified monospace\r\n>   text, nicely indented paragraphs, intelligently aligned\r\n>   definition lists, and an informational header and footer.\r\n>\r\n> - Manpages have a simple referencing syntax; e.g., sh(1), fork(2),\r\n>   markdown(7). HTML versions can use this to generate links\r\n>   between pages.\r\n>\r\n> Unfortunately, figuring out how to create a manpage is a fairly\r\n> tedious process. The roff/mandoc/mdoc macro languages are highly\r\n> extensible, fractured between multiple dialects, and include a\r\n> bunch of device specific stuff irrelevant to modern publishing\r\n> tools.	1.9.3	sunaku@gmail.com	2011-12-08 01:50:00	Suraj	Kurapati	2012-05-02 12:31:07.518551	2012-05-11 20:05:02.642806
452	ruby-talk	System	How to pass parameters from ruby file to shell script file?	system, parameter, pass, ruby, script, terminal, exec, read, input	> In shell script file im having list of linux commands..when running script.sh file, second command (in script.sh file)it will ask user to specify some details.\r\n\r\nThis will actually read from stdin.\r\n\r\n> I can specify these values when i run script.sh file,while im running script.sh file in Terminal using sh script.sh.\r\n\r\nBy typing, yes.\r\n\r\n> But if i run script.sh file from ruby using exec"sh script.sh",i can type in terminal..\r\n\r\nYou *can* type in terminal when invoking the script with exec.\r\n\r\n13:47:30 ~$ dash -c "read -p input: l;echo got $l"\r\ninput:abc\r\ngot abc\r\n13:47:35 ~$ ruby19 -e 'exec "dash", "-c", "read -p input: l;echo got $l"'\r\ninput:def\r\ngot def\r\n\r\n> so i have to specify these values in ruby file itself...\r\n\r\nI do not think so (see above).\r\n\r\n> how to pass parameters from ruby file to that script.sh file?\r\n\r\nPassing parameters is a different story: parameters (aka "command line arguments") are passed with the execution, e.g.\r\n\r\n13:42:30 ~$ time ruby19 -e 'exec "/bin/sleep", "5"'\r\n\r\nreal    0m6.150s\r\nuser    0m0.139s\r\nsys     0m0.124s\r\n13:42:40 ~$\r\n\r\nSo, what is your problem?	1.9.3	shortcutter@googlemail.com	2012-01-25 13:48:00	Robert	Klemme	2012-05-02 13:59:21.820589	2012-05-06 23:17:46.673638
490	ruby-talk	Gem	Solved rest-client headers or cookies	rest_client, get, post, url, server, cookies, payload, argument, second 	>> I am trying to make a request to a PHP application coded with limonade\r\n>> (a REST sever like Sinatra). I'm using rest_client which rides on top\r\n>> of Net::HTTP. I'd like to get the headers back from that call, so that\r\n>> I can store the session cookie and pass it back on subsequent\r\n>> requests.\r\n>>\r\n>> I know how to set the headers for RestClient.get, but how do I get the \r\n> headerts from a RestClient.post?\r\n>\r\n> I don't think you want the headers of the GET or POST, but of the response, right ?\r\n> Did you try to assign the RestClient.get to a variable (that should be a Response) \r\n> and call headers on it ?\r\n\r\nThe secret sauce for cookies:\r\n\r\nresp = RestClient.post(server_url' + '/resource', :args => "")\r\n@session_cookies = resp.cookies\r\n\r\nThen when calling again:\r\nRestClient.put('#{server_url + '/resource/id',\r\n              {:args => args}, {:cookies => @session_cookies})\r\n\r\nYou have to use a payload (:args => args) for PUT and it must be the first argument. The :cookies hash must be the second argument to put().	1.9.3	ed.howland@gmail.com	2009-12-22 20:21:00	Ed	Howland	2012-05-02 14:12:26.416298	2012-05-12 01:58:26.476995
391	ruby-talk	Net	Send Fax from a Linux Box	net, smtp, library, integrate, fax, emails, gateway	> I am looking for a solution to send multiple emails to a fax address from linux box.\r\n\r\nTry: hylafax. You can easily integrate sending emails to fax via gateway and\r\nnet/smtp library.	1.9.3	trednu@gmail.com	2011-07-20 09:12:00	Miroslaw	Niegowski	2012-05-02 12:53:10.05799	2012-05-11 17:20:00.828567
234	ruby-talk	Template	Adding data to text file variables	template, engine, text, file	> I have a GUI class which takes 3 pieces of information from the user in\r\n> text fields which are loaded into 3 variables.\r\n>\r\n> I then want to click a 'Run' button and place the information from the\r\n> variables at three defined points in a text file.\r\n>\r\n> Basically a user enters some information to the GUI, clicks RUN and a\r\n> predefined text file containing some data and three variables has each\r\n> of the variables updated to reflect user input?\r\n>\r\n> First, is this possible? If so, where do I start?\r\n>\r\n> I was thinking put three variables in the text file:\r\n>\r\n> @variableA\r\n> @variableB\r\n> @variableC\r\n>\r\n> I these will updated (like find and replace) using the Ruby GUI.\r\n\r\nThis sounds like templating. Take a look at some templating engines\r\nlike ERB. You can have a file like this:\r\n\r\nblah, blah\r\n<%= variableA %>\r\nxxxx\r\n<%= variableB %>\r\nyyy\r\n\r\nand your program can do:\r\n\r\nrequire 'erb'\r\n\r\nvariableA = "something"\r\nvariableB = "other thing"\r\n\r\ntemplate = ERB.new(File.read("template.erb"), nil, "%<>")\r\nFile.open("result.txt", "w") do |f|\r\n   f.puts template.result(binding)\r\nend\r\n\r\nIf you just need simple search and replace, maybe a simpler approach\r\nis enough, but I like the power of using templating like this.	1.9.3	jgabrielygalan@gmail.com	2009-05-07 17:40:00	JesÃºs	Gabriel y Galan	2012-05-02 12:25:53.799481	2012-05-03 18:07:17.977837
73	ruby-talk	Module	Using #include at the instance level?	module, helper, map, const, include, constant, link	> I almost feel like I'm having a mental block and there is actually an\r\n> easy way to do this.\r\n\r\nMaybe this gets you on track:\r\n\r\n"One of those pleasing little Ruby snippets: module Helpers; include \r\n*constants.map(&:const_get); end"\r\n\r\n<a href="http://twitter.com/pragdave/status/7147303788">http://twitter.com/pragdave/status/7147303788</a>	1.9.3	pg@thimian.com	2009-12-29 17:48:00	Phillip	Gawlowski	2012-05-02 11:55:46.333056	2012-05-11 18:17:23.739234
415	ruby-talk	Array	Deleting numbers in array?	selective, delete, regex	> I'm new to Ruby and unsure how to delete numbers in an array. I have an\r\n> array filled with numbers from 1 to 100. If I use nums.delete_if {|x| x\r\n> == 9 }, it will delete 9, but I want to remove any number containing 9.\r\n> For example, 19, 39, 92, 99 etc. I tried using a wildcard, but it didn't\r\n> work. I'm sure theres an easy command to do it, but I wasn't able to\r\n> find it on in Ruby documentation. I also want to remove numbers\r\n> containing 0,6,7, and 8 as well. Any help would be greatly appreciated.\r\n\r\nYou're pretty much going to have to convert the numbers to strings. For \r\nexample:\r\n\r\n   array.delete_if {|x| x.to_s[/[06789]/] }	1.9.3	dblack@rubypal.com	2009-04-26 21:00:00	David A.	Black	2012-05-02 12:57:36.019326	2012-05-03 23:47:38.759044
100	ruby-talk	System	Crontab and ruby script	linux, cli, shell, command, crontab	> I used crontab command such as\r\n> "*/5 * * * * /usr/local/bin/ruby /local/myuser/rubyscript/script1.rb"\r\n>\r\n> But it can't execute script1.rb, I let it print some message every 5\r\n> min.\r\n>\r\n> I also changed script1.rb to chmod 755.\r\n>\r\n> Does the crontab command is right?\r\n\r\nRun 'env -i $SHELL --norc'. It will bring up a new naked shell that is equivalent to what cron runs. Run your command as-is in this shell to ensure it works correctly.	1.9.3	ryand-ruby@zenspider.com	2012-01-05 16:08:00	Ryan	Davis	2012-05-02 11:59:32.669684	2012-05-14 19:39:51.126681
294	ruby-talk	Language	How to get the newest ruby src?	language, source, development, download, git, 1.9.3	> if is it ? :\r\n> \r\n> git clone git://github.com/ruby/ruby.git\r\n\r\nIf you mean the development src is:\r\n\r\ngit clone [-b trunk] https://github.com/ruby/ruby\r\n\r\nBut the stable edition is in the branch for 1.9.3:\r\n\r\ngit clone -b ruby_1_9_3 https://github.com/ruby/ruby	1.9.3	josen.figueroa@unixmexico.org	2012-04-08 12:57:00	Jose	Figueroa	2012-05-02 12:34:47.66282	2012-05-06 20:08:42.295445
220	ruby-talk	Hash	How can I do h["foo"] += "bar" if h["foo"] does not exist?	hash, key, value, pair, exist, create, new	> I have a hash with various keys and values that are strings.\r\n> \r\n> If the key exists, the following works: h["foo"] += "bar"\r\n> \r\n> But if the key does not exist, I get an error.\r\n> \r\n> Is it possible _in one statement_ to cover both the cases where the key\r\n> does exist (as above) AND the case where the key does not exist - and in\r\n> this situation I'd like the new key and value pair to be created in the\r\n> hash.\r\n\r\nI guess you could get really ugly with it.\r\n\r\n    h['foo'] = h['foo'].to_s + 'bar'	1.9.3	code@apotheon.net	2011-12-08 23:56:00	Chad	Perrin	2012-05-02 12:20:59.032856	2012-05-06 23:33:37.047025
313	ruby-talk	Emoticon	Emoticon Code	emoticon, ruby, code, working, examples, 	> Hmm. These emoticons are valid ruby code (symbols):\r\n>\r\n> :D\r\n> :p\r\n> :P\r\n> :[]\r\n>\r\n> Can anyone think of more emoticons that I could use in my code?\r\n\r\nI like and have used :* a few times.\r\n\r\nThese also work:\r\n\r\n:< (lt)\r\n:> (gt)\r\n:! (bang)\r\n:` (backtick)\r\n:_ (underscore)\r\n:? (question mark)\r\n:=C2=B1 (plus-minus)\r\n\r\nIf one uses utf-8 and code points above the basic latin set, things\r\nlike these would work too:\r\n\r\n:=EF=B9=9A (small right parenthesis, U+FE5A)\r\n:=EF=B9=9C (small right curly bracket, U+FE5C)	1.9.3	ammarabuali@gmail.com	2012-03-25 13:36:00	Ammar	Ali	2012-05-02 12:38:01.329294	2012-05-06 23:35:02.190719
488	ruby-talk	Regexp	How to truncate the spaces in the front of a line?	regex, string, strip, gsub, lstrip, rstrip, method	>> Do you have any idea to truncate or remove the space in the front of a line?\r\n> irb(main):001:0> "         spaces in front".gsub /^ +/,""\r\n> => "spaces in front"\r\n> irb(main):002:0> RUBY_VERSION\r\n> => "1.8.6"\r\n> irb(main):003:0>\r\n> \r\n> Translation:\r\n> String#gsub applies the regexp given as first argument to a given \r\n> String, and replaces the matches with the second argument.\r\n> \r\n> The regexp "^ +" (the // notation is one of the many ways to tell Ruby we are using a \r\n> regexp) means "At the beginning of the line ("^"), find any spaces(" "), and then stop \r\n> ("+")". More or less, anyway (I'm not a Regexp guru). ;)\r\n\r\nA more convenient way is to use one of the strip methods:\r\n\r\nirb(main):004:0> "         spaces in front".lstrip\r\n=> "spaces in front"\r\n\r\nirb(main):005:0> "spaces in back      ".rstrip\r\n=> "spaces in back"\r\n\r\nirb(main):006:0> "       spaces on both side      ".strip\r\n=> "spaces on both side"	1.9.3	devguy.ca@gmail.com	2009-12-26 23:01:00	Rajinder	Yadav	2012-05-02 14:12:26.399487	2012-05-11 16:22:37.010372
486	ruby-talk	Language	Ruby 1.9 and the retry keyword	keyword, retry, 1.8, 1.9, iteration, difference, rescue, clause	> It seems that the 'retry' keyword is not supported anymore in  ruby1.9 to\r\n> restart a running iteration from the beginning.\r\n\r\nAs Robert said, it's no longer supported in iteration.  It still works in a rescue clause.\r\n\r\n> Is there a way to achieve the old behavior, preferably in a 1.8 compatible way ?\r\n\r\nYou bet.\r\n\r\n> $ ruby1.8 -ve '[1, 2].each { puts "bla" ; retry }'\r\n\r\nloop do\r\n   puts "bla"\r\nend	1.9.3	james@graysoftinc.com	2009-04-19 11:50:00	James Edward	Gray II	2012-05-02 14:12:02.825167	2012-05-09 19:56:52.477557
219	ruby-talk	Enumerable	How does && work in ruby?	enumerable, any?, or, and, &&, ||,  boolean	> Brilliant! That really helps, the bit I was missing is that it returns\r\n> the last operand if both are truthy, not immediately obvious.\r\n\r\nThere is also Enumerable#all? which works similarly (i.e. short\r\ncircuit) but will evaluate the block as criterion:\r\n\r\nirb(main):010:0> e = [1,2,3]\r\n=> [1, 2, 3]\r\nirb(main):011:0> e.all? {|x| x > 0}\r\n=> true\r\nirb(main):012:0> e.all? {|x| p x; x > 0}\r\n1\r\n2\r\n3\r\n=> true\r\nirb(main):013:0> e.all? {|x| x > 1}\r\n=> false\r\nirb(main):014:0> e.all? {|x| p x; x > 1}\r\n1\r\n=> false\r\n\r\nThere's also Enumerable#any? which has OR logic.\r\n\r\nirb(main):018:0> e.any? {|x| p x;x > 1}\r\n1\r\n2\r\n=> true	1.9.3	shortcutter@googlemail.com	2012-02-10 13:59:00	Robert	Klemme	2012-05-02 12:20:58.98045	2012-05-06 20:57:57.537804
542	ruby-talk	Decimal	Microrant on Ruy's Math Skills	math, decimal, floating point, accuracy, lossy, rant	> As for the discussion: this comes up every 6 months and the horse is already\r\n> dead in the first mail. While I can certainly understand the frustration with\r\n> float, the decision is made. Reverting it would mean touching every piece of\r\n> software that does statistics. And in contrast to popular belief, there is\r\n> quite a lot of it out there. I know that at least 10 of my reporting scripts\r\n> running at several clients offices would break, which would be unacceptable for\r\n> me (expecially, because float is the correct datatype there).\r\n> Changing such a primitive in a language is reckless.\r\n\r\nHa, just discovering the 'to_d' function in 'bigdecimal/util'\r\n\r\nIt's actually very close to what I wanted (15.78D):\r\n\r\n$ irb\r\n1.9.3p0 :001 > require 'bigdecimal'\r\n => true\r\n1.9.3p0 :002 > require 'bigdecimal/util'\r\n => true\r\n1.9.3p0 :003 > a = "15.78".to_d\r\n => #<BigDecimal:8b2d9e8,'0.1578E2',18(18)>\r\n1.9.3p0 :004 > b = 2.to_d\r\n => #<BigDecimal:8b2a810,'0.2E1',9(36)>\r\n1.9.3p0 :005 > a/b == 7.89.to_d\r\n => true\r\n1.9.3p0 :006 > 1.234567890123.to_d\r\n => #<BigDecimal:8ba49bc,'0.1234567890 123E1',27(45)>	1.9.3	peter@vandenabeele.com	2012-01-24 15:01:00	Peter	Vandenabeele	2012-05-04 21:38:51.136228	2012-05-04 21:38:51.136228
123	ruby-talk	Module	Inverse Operation of Module#include	Module#include, inverse, un, gem, 	> Is there a built-in inverse operation of Module#include? Currently I have:\r\n\r\nMy "un" gem will do the trick, but there is nothing built in	1.9.3	ryand-ruby@zenspider.com	2011-12-02 00:24:00	Ryan	Davis	2012-05-02 12:04:29.189725	2012-05-05 01:12:47.524374
545	ruby-talk	require	Ruby 'require'	ruby, require, source, group by function	> working on a ruby project with several files all lumped into a single\r\n> subdirectory.  I would like to organize it more logically by grouping\r\n> files that share the same functionality.\r\n\r\n<a href="https://github.com/jarmo/require_all">https://github.com/jarmo/require_all</a>	1.9.3	wishdev@gmail.com	2011-07-29 13:07:00	John W.	Higgins	2012-05-04 21:49:23.026327	2012-05-11 21:09:14.155184
76	ruby-talk	String	Negative grep	string, grep,not contain, examples	 \r\n\r\nbiglist !~ /bar/\r\n\r\n!biglist.grep(/bar/)\r\n\r\n> A bit of syntax that I have never picked up.  How do I use grep to\r\n> exclude entries in a list?\r\n>\r\n> biglist.grep(/foo/)\t# get all entries containing foo\r\n> biglist.grep(????)\t# get all entries that do not contain bar	1.9.3	kclair@pickledradish.com	2012-01-12 07:27:00	K	Clair	2012-05-02 11:55:46.426099	2012-05-05 01:51:12.392325
509	ruby-talk	Gem	Gem documentation doesn't seem to help	gem, documentation, version, search	> 1. Is it possible to look up older versions of the gem, that might work,\r\n> from the repository, so that I could install one of them using --version ?\r\n\r\ngem help search yields:\r\n-a or --all to search for all versions of a given gem.\r\n\r\nPS C:\\Users\\CynicalRyan>  gem search nokogiri -ar\r\n\r\n*** REMOTE GEMS ***\r\n\r\nnokogiri (1.4.1, 1.4.0, 1.3.3, 1.3.2, 1.3.1, 1.3.0, 1.2.3, 1.2.2, 1.2.1, \r\n1.2.0, 1.1.1, 1.1.0, 1.0.7, 1.0.6, 1.0.5, 1.0.4\r\n, 1.0.3, 1.0.2, 1.0.1, 1.0.0)\r\nsuperfeedr-nokogiri (1.4.0.20091116183308)\r\n\r\n\r\n> 2. Is there a gem option to install from a local gem directory so that\r\n> this could be done without the SA shell commands, but rather with a\r\n> canonical "gem" sequence to do the ruby extconf.rb;make;make install\r\n\r\nIf by "local gem directory" you mean a directory containing gems you \r\ndownloaded, then yes. Just type "gem install <gemname>-<version>.gem", \r\nand RubyGems does its thing.\r\n\r\nYou cannot skip compiling, however, if that is a necessary step, as far \r\nas I am aware of.	1.9.3, 1.8.6	pg@thimian.com	2009-12-29 20:55:00	Phillip	Gawlowski	2012-05-04 00:42:29.527165	2012-05-04 00:42:29.527165
150	ruby-talk	Language	Unique identify computer (both Windows and MacOSX)	language, identify, platform, ruby, os, independent	> How can I unique identify the OS where my Ruby code is running?\r\n> \r\n> I can do this using specific Win32 features but I looking for an OS\r\n> independent approach...maybe using the HD serial?\r\n\r\nputs RUBY_PLATFORM	1.9.3	jarmo.p@gmail.com	2009-01-11 00:05:00	Jarmo	Pertman	2012-05-02 12:09:07.907272	2012-05-06 18:24:10.386691
261	ruby-talk	Array	How to retrieve first 10 items from hash in ruby?	array, hash, table, hashtable, sort, shift, first, last	>>>>> I want to retrieve first 10 items(key value pairs) from given hash{}\r\n>>>>>\r\n>>>> ary = hashTable.sort {|a,b| -1*(a[1]<=>b[1])}\r\n>>>>\r\n>>> As ary is only of temporary use, you don't need to create another\r\n>>> array ary[0,10]. I suggest:\r\n>>>\r\n>>>  10.times { puts "Key: %s ==> %s" % e.shift }\r\n>>\r\n>> Do you mean ary.shift?\r\n>\r\n> Arrgh. Of course.\r\n>\r\n> The code may still be improved: Omit the multiplication by -1 in\r\n> the sort block.\r\n>\r\n>  ary = hashTable.sort { |a,b| a[1]<=>b[1] }\r\n>  10.times { puts "Key: %s ==> %s" % ary.pop }\r\n\r\nDid we have these already?\r\n\r\np hash_table.sort_by {|k,v| -v}.first(10)\r\np hash_table.sort_by {|k,v| v}.last(10).reverse	1.9.3	shortcutter@googlemail.com	2009-02-13 16:19:00	Robert	Klemme	2012-05-02 12:30:48.152401	2012-05-12 01:54:23.399654
265	ruby-talk	String	Need help with gsub a string	string, gsub, split, slice, gsub, replace	> something like this?\r\n>\r\n> ruby-1.9.2-p290 :016 > s = "(linux) alpha / beta"\r\n>  => "(linux) alpha / beta"\r\n> ruby-1.9.2-p290 :017 > s.slice(s.index("/")+1,s.length).strip\r\n>  => "beta"\r\n\r\n> > Lacking in regular expressions knowledge, I am having difficulty\r\n> > replacing the string as shown:\r\n> >\r\n> > "(linux) alpha/beta"\r\n> >\r\n> > Essentially, there may be spaces such as:\r\n> >\r\n> > " ( linux)alpha / beta" or maybe "(linux) alpha / beta"\r\n> >\r\n> > What I am trying to replace that whole string with is just the last word\r\n> > after the / so my string will just be "beta".\r\n\r\nthis is simpler...\r\n\r\nruby-1.9.2-p290 :023 > s = "(linux) alpha / beta"\r\n => "(linux) alpha / beta"\r\nruby-1.9.2-p290 :024 > s.split("/")[1].strip\r\n => "beta"	1.9.3	ian.asaff@gmail.com	2011-11-23 12:27:00			2012-05-02 12:31:07.614957	2012-05-06 21:17:25.458885
411	ruby-talk	Database	Ruby-Sequel - Sqlite3 table schema	database, schema, create, generator, primary, key	> Looking for a little assistance. I am trying to create a basic\r\n> database schema using Ruby, Sequel and Sqlite3.\r\n>\r\n> I am reading here\r\n> http://sequel.rubyforge.org/rdoc/classes/Sequel/Database.html#M000510\r\n> and http://www.firstsql.com/tutor6.htm .\r\n>\r\n> The only thing that would be unusual about my db is that I want to use\r\n> two primary keys time & date as no more than one event can occur at\r\n> any time though multiple events could occur on a day. I am not\r\n> understanding in sequel how to correctly create a db with multiple\r\n> keys? Or should I just be generating a random number to create a key\r\n> which references date and time?\r\n\r\nFirst you would be better off in the Sequel mailing list here:\r\n\r\n<a href="http://groups.google.com/group/sequel-talk">http://groups.google.com/group/sequel-talk</a>\r\n\r\nAs to your question - you create the two fields as normal and then add\r\n\r\nprimary_key([:date_col, :time_col])\r\n\r\nThe best resource for the docs on schema generation is here\r\n\r\n<a href="http://sequel.rubyforge.org/rdoc/classes/Sequel/Schema/Generator.html">http://sequel.rubyforge.org/rdoc/classes/Sequel/Schema/Generator.html</a>	1.9.3	wishdev@gmail.com	2010-11-12 20:33:00	John W.	Higgins	2012-05-02 12:56:17.545567	2012-05-11 20:46:47.210844
424	ruby-talk	C	Ruby speed compared to C in a simple calculations	C, embed, code, snippet, ruby, rubyinline, gem, speed	> #works for 3.55 mins\r\n> P = 295075153\r\n> o1 = 210205973\r\n> o2 = 22795300\r\n> (0 .. P).each do | i |\r\n>     if i ^ (i ^ o1) == o1 and ((i * 2 + 5) % P) ^ (((i ^ o1) * 3 + =\r\n7) %\r\n> P)\r\n> == o2\r\n>         puts i\r\n>         break\r\n>     end\r\n> end\r\n> Code written in C gives me the solution in only 2 seconds.\r\n\r\nDoes the C code just use int64's? In ruby, integer values transparently extend from Fixnum to Bignum, so there's never any overflow. But this means that every integer value is an object and there has to be dynamic method dispatch for each arithmetic operation.\r\n\r\nYou can always embed snippets of C into Ruby - look at RubyInline.	1.9.3	b.candler@pobox.com	2012-03-24 18:22:00	Brian	Candler	2012-05-02 12:59:50.695043	2012-05-06 21:14:17.287873
5	ruby-talk	Array	Is there a better way to check this array?	array, string, include?, any? boolean, return	> As I see it now I can't do a simple include?\r\n> ruby-1.9.2-p290 :021 > names.include?('fred')\r\n>  => false\r\n\r\nHow about 'any?', where you can use your own comparison block:\r\n\r\n> names.any? {|i| i.include?("fred")}\r\n=> true\r\n> names.any? {|i| i.include?("frd")}\r\n=> false	1.9.3	peter.c.r.lane@googlemail.com	2011-12-03 12:39:00	Peter	Lane	2012-05-02 11:37:03.037929	2012-05-06 21:47:19.568149
383	ruby-talk	Test	Unite test is not woking as per design	test, unit, mini, minitest, test-unit, framework, startup, shutdown, link	What do you get when you run this program:\r\n\r\nputs RUBY_VERSION\r\n\r\n??\r\n\r\nThen read these:\r\n\r\n<a href="http://www.bootspring.com/2010/09/22/minitest-rubys-test-framework/">http://www.bootspring.com/2010/09/22/minitest-rubys-test-framework/</a>\r\n\r\n<a href="http://www.devheads.net/development/ruby/talk/startup-shutdown.htm">http://www.devheads.net/development/ruby/talk/startup-shutdown.htm</a>	1.9.3	bbxx789_05ss@yahoo.com	2011-07-29 15:18:00	7stud		2012-05-02 12:51:40.23734	2012-05-11 20:39:23.814406
487	ruby-talk	Class	Accessing class instance variables from an instance?	class, instance, variable	> I've run into this kind of thing before, and it does impact me regularly.\r\n> Having said that, I know my C++ background (which allows this) biases me\r\n> somewhat on the issue. ;)\r\n>\r\n> I tend to steer away from "Foo.bar" style calls inside class Foo for the\r\n> following reason- it complicates refactoring. If you determine that a class\r\n> would benefit from being split (perhaps because another class has common\r\n> functionality and you want it to share a common base), then you have to\r\n> selectively rename all of the calls you have made to point to the correct\r\n> class. Sure, it's not hard, and doesn't take too long, but when you're\r\n> refactoring something for the sake of something else you have developed, not\r\n> having to deal with additional chores to make it work makes it less likely\r\n> that you'll stuff something up in the process. A similar problem arises with\r\n> renaming the class, but admittedly the solution tends to be far easier.\r\n>\r\n> For that reason, I'd instead use "class.bar" calls, if it were possible,\r\n> which it is not, which brings us to "self.class.bar". I do this as you can't\r\n> always tell ahead of time when you'll need to refactor something to pull out\r\n> a base class, and so I'll assume that (almost) all of the classes I work on\r\n> could be subject to such changes later in its lifetime. If you could tell\r\n> beforehand, you would have designed it that way in the first place. :) Now,\r\n> if you have a class method that is used both inside and out, but mostly\r\n> inside (and regularly), it's a pain to have to write "self.class.bar" each\r\n> time you want to call "bar". Incidentally, for "bar", I have a specific\r\n> method in mind for something I have been working on (ie. a real-world\r\n> problem), that makes the most sense as a class method, since it works\r\n> entirely off the arguments and carries no state. The call in question has\r\n> very specific structured input requirements, and is called extremely\r\n> frequently inside the class, and occasionally outside.\r\n>\r\n> In my case, I ended up solving it by adding an "abar" method that just\r\n> called "self.class.bar", although using it that way does feel a bit silly,\r\n> and makes the code less readable (an observer might ask what the difference\r\n> between "bar" and "abar" is, for example).\r\n\r\nA better alternative would be to do this:\r\n\r\nclass Object\r\n  def my_class; self.class end\r\nend\r\n\r\nThen you do not need to do\r\n\r\nFoo.bar\r\nself.class.bar\r\n\r\nbut instead you can do\r\n\r\nmy_class.bar\r\n\r\nwhich seems a lot clearer to me while avoiding the nasty "self.class". \r\nMaybe someone else can think of a better (presumably: shorter) name\r\nthan #my_class.\r\n\r\n> Anyway, I just thought I'd share my particular experience. It's not hard to\r\n> work around, but there are definitely good reasons to want to make it work\r\n> that way. It falls under the area of a "quirk" for me, but that is of course\r\n> just my personal experience based on my personal experience.\r\n\r\nI guess my main point is that making a method call appear to be on the\r\nlocal instance which in fact is done on another instance is\r\nmisleading.  For the reader it is better to at least signal that #foo\r\nis not invoked on self but rather on another instance.  For that you\r\nneed a method or a variable reference.\r\n\r\n>> That has the added advantage that\r\n>> you make the call explicit in instance methods which use it and it is\r\n>> immediately clear that this method does not manipulate instance state.\r\n>\r\n> There are definitely cases where this could be advantageous, but there are\r\n> also cases where this is not necessary or desirable. In general, I would\r\n> personally say that if a particular mechanism is sometimes beneficial, but\r\n> sometimes not, it is better to leave it up to the person writing the code to\r\n> emphasise the mechanism where it is appropriate, and de-emphasise where it\r\n> is not. For example, sometimes it is beneficial to be specific about the\r\n> particular class of an object (or its capabilities), but would that justify\r\n> requiring every method call to be prefixed by the class name, every time? I\r\n> would say not. There are times where being specific about it would be\r\n> beneficial, but in the remaining cases it would clutter up the code\r\n> unnecessarily.\r\n\r\nWe differ in the estimation about the distribution of useful and\r\nharmful.  I'd say obfuscating a method is invoked on another instance\r\ndoes more harm than good so the default should be to not make it too\r\neasy.  This forces people to know what they are doing when they do it.\r\n As an example: you can modify instance variables of another instance\r\nbut it is deliberately made clumsy (#set_instance_variable etc.)\r\nalthough possible.\r\n\r\n> I think in the situation I outlined above, and possibly also in Josh's case,\r\n> it falls in the realm of clutter. This does not, of course, take away from\r\n> the fact that in some situations it would be important, or absolutely\r\n> essential, to explicitly convey that the instance state will not be\r\n> manipulated. I know that I have certainly run into this case as well- I\r\n> won't bother with a personal anecdote as I suspect you also already know of\r\n> many cases where it is extremely beneficial already. :)\r\n\r\nThat's the point: OO is mostly about the state of instances and its\r\nchanges.  Everything that helps keep clear what's happening is good\r\nIMHO.\r\n\r\n> I guess what I am saying is that if something is sometimes beneficial, and\r\n> sometimes detrimental, that enforcing it is not always the best idea, but\r\n> providing an optional means to make it explicit is beneficial. I do not\r\n> believe that is a good idea in general to either force a mechanism that is\r\n> only sometimes useful, or argue that as the mechanism is sometimes\r\n> important, that having a means to conveniently avoid the mechanism when it\r\n> is detrimental is not justified. There are of course always all sorts of\r\n> tradeoffs when designing a language- perhaps the particular feature Josh and\r\n> I would find beneficial is not readily possible for some technical reason.\r\n\r\nThere are no technical obstacles here defining instance methods which\r\naccess class state.  I just happen to believe that the tradeoff fall\r\non the side that we do not want to have such a feature because the\r\nconvenience of the writer is the pain of the reader of the code.\r\n\r\n> All IMHO.\r\n\r\n+1\r\n\r\n> PS. Wow, that message was a bit longer than I had planned. ;)\r\n\r\n:-)	1.9.3	shortcutter@googlemail.com	2011-12-22 11:41:00	Robert	Klemme	2012-05-02 14:12:26.384708	2012-05-03 18:44:44.266825
228	ruby-talk	Hash	Newbie question > Hash workings	hash, idiom, new, key, value, insert, p, method	> I am puzzled by the workings a the following program. I placed the output after the \r\n> corresponding lines. To me it looks like a sort of bug in the workings of the p method. \r\n> Can anybody set me straight?\r\n\r\np works correctly but...\r\n\r\n> h = Hash.new([])\r\n> h[0] = [1,2,3]\r\n> p h                      #> {0=>[1, 2, 3]}\r\n> h[0] += [4]\r\n> p h                      #> {0=>[1, 2, 3, 4]}\r\n> h[1] += [10,11]\r\n> p h                      #> {0=>[1, 2, 3, 4], 1=>[10, 11]}\r\n> h[1] << 12\r\n> p h                     #> {0=>[1, 2, 3, 4], 1=>[10, 11, 12]}\r\n> h[2] << 20\r\n> p h                     #> {0=>[1, 2, 3, 4], 1=>[10, 11,\r\n> 12]                          ?\r\n> p h[2]                 #>\r\n> [20]                                                                   ???\r\n> h[2] << 21\r\n> p h                     #> {0=>[1, 2, 3, 4], 1=>[10, 11,\r\n> 12]}                          ?\r\n> h[2] += [22]\r\n> p h                     #> {0=>[1, 2, 3, 4], 1=>[10, 11, 12], 2=>[20,\r\n> 21, 22]}  ????????\r\n\r\n... you are modifying the default value of the Hash in those cases where \r\nyou place the question marks.  The default value is the one returned in \r\ncase a key does not exist.  But there is no automatic insertion, that's \r\nwhy you do not see key 2 after doing h[2] << 20.\r\n\r\nYou probably rather want this famous idiom:\r\n\r\nh = Hash.new {|ha,ke| ha[ke] = []}\r\n\r\nNow run your tests again. :-)	1.9.3	shortcutter@googlemail.com	2009-02-28 23:32:00	Robert	Klemme	2012-05-02 12:22:11.82474	2012-05-06 23:42:07.0058
441	ruby-talk	DLL	Newbie: Calling dll functions from Ruby for a customer dll	dll, call, win32, api, ruby, win32-utils, register, system-param	> An example of calling a method would then be:\r\n> \r\n> ret = h_rrcLib.afRRCLibraryDll_RunTestScript ( "REGISTER", \r\n> len("REGISTER"), "7100_system_param.xml", len("7100_system_param.xml"))\r\n\r\nI recommend taking a look at the win32-utils project. Don't worry too much that there haven't been a lot of updates since 2009; that's probably because the sub-project "just work."\r\n\r\n<a href="http://rubyforge.org/projects/win32utils/">http://rubyforge.org/projects/win32utils/\r\n</a>\r\n\r\nThere is probably some code here that can help you achieve your goal.	1.9.3	cremes.devlist@mac.com	2011-11-23 10:46:00	Chuck	Remes	2012-05-02 13:55:56.348378	2012-05-11 20:52:26.264164
362	ruby-talk	Time	Renages	time, translate, hour, half hour, table, index 	> I have a requirement to translate a time between 0000 and 2359 in to a\r\n> single character 'interval ID' based on the time.  For example, if the\r\n> time is between 0000 and 0059, '0' should be returned, if it's between\r\n> 0100 and 0159, '1' should be return.  The problem is that 0700-0729\r\n> should return 'A', 0730-0759 should return 'B', i.e. it's not a simple\r\n> mapping.\r\n>\r\n> I have the following, but I can't help thinking there's a much more\r\n> efficient way of doing it - can anyone advise, as I'm a little stuck!\r\n>\r\n>  xlate = [ [ '0000', '0059', '0' ], [ '0100', '0159', '1' ],\r\n>            [ '0200', '0259', '2' ], [ '0300', '0359', '3' ],\r\n>            [ '0400', '0459', '4' ], [ '0500', '0559', '5' ],\r\n>            [ '0600', '0659', '6' ], [ '0700', '0729', 'A' ],\r\n>            [ '0730', '0759', 'B' ], [ '0800', '0829', 'C' ],\r\n>            [ '0830', '0859', 'D' ], [ '0900', '0929', 'E' ],\r\n>            [ '0930', '0959', 'F' ], [ '1000', '1029', 'G' ],\r\n>            [ '1030', '1059', 'H' ], [ '1100', '1129', 'I' ],\r\n>            [ '1130', '1159', 'J' ], [ '1200', '1229', 'K' ],\r\n>            [ '1230', '1259', 'L' ], [ '1300', '1329', 'M' ],\r\n>            [ '1330', '1359', 'N' ], [ '1400', '1429', 'O' ],\r\n>            [ '1430', '1459', 'P' ], [ '1500', '1529', 'Q' ],\r\n>            [ '1530', '1559', 'R' ], [ '1600', '1629', 'S' ],\r\n>            [ '1630', '1659', 'T' ], [ '1700', '1729', 'U' ],\r\n>            [ '1730', '1759', 'V' ], [ '1800', '1829', 'W' ],\r\n>            [ '1830', '1859', 'X' ], [ '1900', '1959', 'Y' ],\r\n>            [ '2000', '2059', 'Z' ], [ '2100', '2159', '7' ],\r\n>            [ '2200', '2259', '8' ], [ '2300', '2359', '9' ] ]\r\n>\r\n>  xlate.each do |range|\r\n>    return range[2] if time >= range[0] && time <= range[1]\r\n>  end\r\n>\r\n\r\nHow about this\r\n\r\n# Setup a string with all 48 options (splitting into half hours)\r\nresults = "00112233445566ABCDEFGHIJKLMNOPQRSTUVWXYYZZ778899"\r\n\r\n# Convert our time into which of the 48 half hour slots it fits\r\ntime = '1734'\r\nslot = (time[0..1].to_i * 60 + time[2..3].to_i) / 30 #> 35\r\n\r\n# Return the result for the slot\r\nresults[slot] #> V	1.9.3	wishdev@gmail.com	2011-07-02 14:12:00	John W.	Higgins	2012-05-02 12:46:57.329389	2012-05-05 01:08:06.167348
342	ruby-talk	OpenSSL	ECDSA encryption with OpenSSL	openssl, ecdsa, encryption, link, key, generate	I finally found out how to generate an OpenSSL::PKey:EC:Point public key \r\nusing (x,y) public key point coordinates.\r\nDemonstrated in the attached file\r\nHope that helps\r\n\r\nAttachments:\r\n\r\n<a href="http://www.ruby-forum.com/attachment/7226/my_ecc.rb">http://www.ruby-forum.com/attachment/7226/my_ecc.rb\r\n</a>	1.9.3	lists@ruby-forum.com	2012-04-04 16:19:00	Henri	S	2012-05-02 12:44:07.678668	2012-05-11 20:27:15.464942
378	ruby-talk	Regexp	How to keep list of reglar expressions into array?	regex, array, iterate, string, any?, find, select	> I have more than one regular expressions and I want to keep all in array \r\n> and iterate them to check my input matched or not\r\n>\r\n> reg1 =  /ruby:s*$/i\r\n> reg2 =  /rails:s*$/i\r\n\r\nIn this case it's easier to use one regexp:\r\n\r\n/r(?:uby|ails):s*$/i\r\n\r\n> input1 = "ruby is my favorite language"\r\n>\r\n> i want to iterate regexp's array and check where input1 matching.But the\r\n> porblem is not the porper way getting regexp in loop .It's returning\r\n> string type\r\n\r\nPlease show the code and the error.\r\n\r\nYou can do\r\n\r\nif regexps.any? {|rx| rx =~ s}\r\n  puts "any matched"\r\nend\r\n\r\nr = regexps.find {|rx| rx =~ s} and\r\n  puts "#{r} matched"\r\n\r\nputs "#{regexps.select {|rx| rx =~ s}} all matched"	1.9.3	shortcutter@googlemail.com	2012-02-06 09:20:00	Robert	Klemme	2012-05-02 12:51:40.06993	2012-05-11 16:19:15.930667
215	ruby-talk	Array	How to copy array in ruby?	array, copy	> I am struggling to copy an array.\r\n>\r\n> I am using\r\n>\r\n> a = []\r\n> b = a\r\n>\r\n> Here when i am trying to see contents of "a" and "b" both have same\r\n> contents\r\n>\r\n> But my expectation was they should be different\r\n>\r\n> Instead of b = a, I also tried b.replace(a) \r\n> but no luck here also.\r\n>\r\n> Please help me on how to make a duplicate("b") of "a" so that changes\r\n> done on b will not affect a\r\n\r\nirb(main):001:0> a = [1,2,3,4]\r\n=> [1, 2, 3, 4]\r\nirb(main):002:0> b = a.dup\r\n=> [1, 2, 3, 4]\r\nirb(main):003:0> b[0] = 55\r\n=> 55\r\nirb(main):004:0> a\r\n=> [1, 2, 3, 4]\r\nirb(main):005:0> b\r\n=> [55, 2, 3, 4]	1.9.3	jgabrielygalan@gmail.com	2009-11-13 14:34:00	JesÃºs	Gabriel y Galan	2012-05-02 12:19:46.220688	2012-05-11 16:06:01.559142
70	ruby-talk	Gem	Create Excel Sheet(.xls/.xlsx)	spreadsheet, gem, excel, binary	Are you sure you want to write your own code for handling Excel binary format?\r\nI suggest you try  'spreadsheet' gem.\r\n\r\nrequire 'spreadsheet'\r\nbook = Spreadsheet::Workbook.new\r\nsheet = book.create_worksheet\r\nbook.write 'test.xls'	1.9.3	junegunn.c@gmail.com	2011-11-24 13:58:00	Junegunn	Choi	2012-05-02 11:54:42.766369	2012-05-03 23:14:56.667174
32	ruby-talk	Methods	Case menu - obtain the first conditions?	self, methods, instance_methods	> In other words I would need a way to programmatically access the\r\n> first option of every when clause.\r\n\r\nOr a way to programmatically access your methods:\r\n\r\nself.methods # => ["list_cars", "list_whatever", "list_plants", ...]\r\n\r\nA better way would probably be: self.class.public_instance_methods(false)	1.9.3	ryand-ruby@zenspider.com	2012-01-15 00:57:00	Ryan	Davis	2012-05-02 11:44:39.247595	2012-05-03 19:48:29.985622
71	ruby-talk	Script	Run an script without waiting to be done	spawn, sleep, script, system	> I would like to know if it is possible to run an script\r\n> without waiting to be run. I mean, can I call another ruby script\r\n> and not be waiting for it to finish. myScript1.rb sleep 300\r\n> \r\n> myScript2.rb system("ruby myScript.rb")\r\n> \r\n> \r\n> so what I want is not be waiting until the end of myScript1.rb\r\n> \r\n\r\nUse #spawn instead of #system. This works (with newer Ruby versions)\r\non Windows as well.	1.9.3	sutniuq@gmx.net	2011-11-22 17:17:00	Marvin (Quintus)	Vale	2012-05-02 11:54:42.803732	2012-05-11 17:17:19.167009
459	ruby-talk	Regexp	Regexp with gsub	regex, gsub, search, capitalize, first, letter	> I'm trying to get code to replace first alpha char for Cap, and can't\r\n> get how it works, in case#1 dot represent any char including space and\r\n> it works fine, but when I tried to do first "a" it doesn't catch\r\n> anything, I played with [a-z] and other syntax but still have this\r\n> problem.\r\n>\r\n> Can anybody point my brain into right place, why it doesn't work?\r\n>\r\n> ruby 1.9.3p0 (2011-10-30) [i386-mingw32]\r\n> irb(main):002:0> puts ss\r\n>  sabaka ryba\r\n> => nil\r\n> irb(main):003:0> puts ss.gsub(/^./,"A")      # case #1\r\n> Asabaka ryba\r\n> irb(main):005:0> puts ss.gsub(/^a/,"A")      # case #2\r\n>  sabaka ryba\r\n> irb(main):005:0> puts ss.gsub(/^[a-z]/,/[A-Z]/)      # case #3\r\n>  sabaka ryba\r\n\r\nirb(main):002:0> "aaa aaa".gsub /\ba/, 'A'\r\n=> "Aaa Aaa"\r\n\r\nThis won't work for the general case though.  You might rather want to\r\ndo something like\r\n\r\nirb(main):003:0> "aaa aaa".gsub(/w+/) {|m| m.capitalize}\r\n=> "Aaa Aaa"	1.9.3	shortcutter@googlemail.com	2012-02-08 13:12:00	Robert	Klemme	2012-05-02 14:02:06.532849	2012-05-06 21:12:54.071105
212	ruby-talk	Array	Deleting numbers in array?	selective, delete, include?	> I'm new to Ruby and unsure how to delete numbers in an array. I have an\r\n> array filled with numbers from 1 to 100. If I use nums.delete_if {|x| x > == 9 }, \r\n> it will delete 9, but I want to remove any number containing 9.\r\n> For example, 19, 39, 92, 99 etc. I tried using a wildcard, but it didn't\r\n> work. I'm sure there's an easy command to do it, but I wasn't able to\r\n> find it on in Ruby documentation. I also want to remove numbers\r\n> containing 0,6,7, and 8 as well. Any help would be greatly  \r\n> appreciated.\r\n\r\nTry this.\r\n\r\nnums.delete_if {|x| x.to_s.include? '9'}	1.9.3	ruby-bucket@comcast.net	2009-04-26 21:22:00	Robert	Schaaf	2012-05-02 12:19:46.124035	2012-05-03 23:45:48.281261
102	ruby-talk	rvm	Scripting an rvm command	rvm, run, script, all, installed, versions, multispec, gem	> I cannot seem to run properly an rvm command inside a script file. My objective \r\n> is to run a ruby script on all rvm versions installed.\r\n>\r\n> eg, the ff runs fine when run thru the cli,\r\n>\r\n>   for i in `rvm list strings`; do rvm use "$i"; ruby -v; done\r\n>\r\n> but when the above code is placed inside a script file, and then the\r\n> script is run, you won't get the expected output. You just the same\r\n> ruby -v result on all rvm ruby versions, as if rvm use command was ignored..\r\n\r\nI just noticed your update, so I deleted more than half my response. But I wanted to mention that in addition to the ways outlined on that page, I find that wrapping version changes inside a bash function works well and is quite handy. Here's one example from a recent project:\r\n\r\n  <a href="https://gist.github.com/672097">https://gist.github.com/672097</a>\r\n\r\nThen in the console, running ./multispec.sh does the job nicely.	1.9.3	ammarabuali@gmail.com	2010-11-11 08:12:00	Ammar	Ali	2012-05-02 12:00:12.379946	2012-05-11 18:21:37.816583
367	ruby-talk	Decimal	Arithmetic operation bug	decimal, rounding, accuracy	> |v1="128.015"\r\n> |puts((v1.to_f*1000).to_i).to_s // giving 128014 instead of 128015\r\n> |\r\n> |Why the the result is rounding up to 128014 but the correct result\r\n> |should be 128015.\r\n\r\nI'm not an expert, but I think because when you write 128.015, the number you actually get is 128.0149999999999863575... (because 128.015 can't be represented as a number with a finite number of decimal digits in binary, just like, for example, 1/17 can't be represented with a finite decimal number in decimal). You usually don't see this because by default only a small number of decimal digits are shown, taking rounding into account. You can obtain a greater number of digits using, for example, format:\r\n\r\nputs format("%.20f", 128.015)\r\n=> 128.01499999999998635758\r\n\r\nNow, when you multiply the number by 1000, what you actually get is: 128014.99999999998544808477. And, since Float#to_i truncates the number (it doesn't round it), you get the number 128014.	1.9.3	stefano.crocco@alice.it	2009-07-24 16:09:00	Stefano	Crocco	2012-05-02 12:49:26.316238	2012-05-14 19:40:46.226191
137	ruby-talk	GC	Free an Object	gc, object, free, begin, ensure, block, method, writing	>> Can anyone tell me how to check an object is and when it is freed by Garbage Collector?\r\n\r\n> What's your use case?\r\n\r\nOften begin ensure is sufficient also. See\r\n\r\n<a href="http://blog.rubybestpractices.com/posts/rklemme/002_Writing_Block_Methods.html">http://blog.rubybestpractices.com/posts/rklemme/002_Writing_Block_Methods.html</a>	1.9.3	shortcutter@googlemail.com	2011-12-22 11:53:00	Robert	Klemme	2012-05-02 12:04:59.556929	2012-05-11 19:36:42.787171
376	ruby-talk	Gem	Retrieve and unpack a gem	gem, retrieve, unpack, fetch, version, example	> I need to retrieve and unpack a large number of gems, without\r\n> either (a) affecting my local gem installation or (b) getting\r\n> involved with dependencies.  "gem fetch" will retrieve random\r\n> gems, but "gem unpack" is a bit more picky.\r\n> \r\n> According to http://docs.rubygems.org/read/chapter/10#page34:\r\n> \r\n>   You can only unpack gems that you have installed, ...\r\n\r\nOh no--you can unpack arbitrary gems [I think that's the only ones you can].\r\n\r\ngem fetch gem_name\r\ngem  unpack gem_name.version.gem	1.9.3	rogerpack2005@gmail.com	2009-07-14 03:53:00	Roger	Pack	2012-05-02 12:50:49.692935	2012-05-06 23:12:52.006631
195	ruby-talk	File	Read and re-write file with one open?	file, open, write, read, line, data, loss, prevent	> I would like to write a Ruby script that opens a text file, performs a gsub\r\n> on each line, and then overwrites the file with the updated contents. Right\r\n> now I open the file twice: once to read and once to write.  The reason for\r\n> this is that if I try to perform both operations on the same IO object by\r\n> calling io.rewind and writing from the beginning, and the substituted word\r\n> is shorter than what it is replacing, some portion of the end of the\r\n> original file remains.  Is there an idiom for "clearing" the contents of the\r\n> file before writing?\r\n\r\nYes, opening the file in write mode!  However, you are going to expose \r\nyourself to this catastrophe.   Suppose you read the contents of the \r\nfile into a variable, then open the file for writing, which then erases \r\nthe file, but immediately thereafter your program crashes or the power \r\ngoes out in your city.  What are you left with?  You will be left with \r\nan empty file, and the variable that contained the contents of the file \r\nwill have evaporated into the ether.  In other words, you will lose all \r\nyour data!\r\n\r\nSo the idiom for rewriting a file is:\r\n\r\n1) Open the file for *reading*.\r\n2) Open another file for writing with a name like origName-edited.txt\r\n3) Read the original file line by line(saves memory, but is slower)\r\n4) Write each altered line to the file origName-edited.txt\r\n5) Delete the original file.\r\n6) Change the name of the new file (origName-edited.txt) to origName.txt	1.9.3	bbxx789_05ss@yahoo.com	2009-04-30 07:26:00	7stud		2012-05-02 12:16:53.342382	2012-05-06 18:16:08.888583
527	ruby-talk	rvm	How to make 1.9.2 my default version using rvm?	rvm, set, default, version, ruby	> I know this may not be the right place to ask questions about RVM but I\r\n> couldn't find a better forum.\r\n>\r\n> I have installed RVM as well as ruby 1.9.2 and everything works just\r\n> fine except I cannot make ruby 1.9.2 my default.\r\n>\r\n> This is what I did...\r\n> 1-installed RVM\r\n> 2-installed new versions of ruby (1.9.2)\r\n> 3-typed rvm use ruby 1.9.2\r\n>\r\n> and everything works fine, if I type "ruby -v" I get something like\r\n> "ruby 1.9.2p290..." which is fine, the problem is that I cannot set this\r\n> version to be my default, I tried "rvm --default use ruby 1.9.2" but if\r\n> I close and restart Terminal and type "ruby -v" it goes back to the\r\n> system default ruby version 1.8.7.\r\n>\r\n> Any idea am I missing why its not working?\r\n>\r\n> Is there any other way to make 1.9.2 my default, so I don't have to\r\n> specify what version of ruby I want to use every time I open a new\r\n> Terminal window?\r\n\r\nThe ordering of arguments is screwed up a bit in rvm.\r\n\r\n$ rvm use 1.9.2 --default	1.9.2, 1.9.3	whitequark@whitequark.org	2011-11-24 20:17:00	Peter	Zotov	2012-05-04 20:31:48.943906	2012-05-04 20:31:48.943906
508	ruby-talk	Array	Creating an array?	array, consise, create, step	> Is there a short way of creating array of numbers\r\n> with, for example, step of 10, like this:\r\n> \r\n> 10,20,30,40,50\r\n\r\n(10..50).step(10).to_a	1.9.3	albertschlef@gmail.com	2012-05-04 00:37:00	Albert	Schlef 	2012-05-04 00:38:56.074922	2012-05-11 15:26:53.765389
272	ruby-talk	Struct	How to order Structs based on two fields?	struct, order, fields, sort_by, Comparable	>> array.sort_by {|e| [e.a, e.b]}\r\n>\r\n> Note that entries must be ordered by smaller :a and, in case of same\r\n> :a, by higher :b. So the last "e.b" should be changed to something\r\n> else. Trying it right now.\r\n\r\nOh, my mistake.  I am sorry.  So that would be (for numeric b):\r\n\r\narray.sort_by {|e| [e.a, -e.b]}\r\n\r\nAnd then\r\n\r\nKK = Struct.new :a,:b do\r\n include Comparable\r\n\r\n def <=>(o)\r\n   cmp = a <=> o.a\r\n   cmp == 0 ? o.b <=> b : cmp\r\n end\r\nend	1.9.3	shortcutter@googlemail.com	2011-07-01 14:12:00	Robert	Klemme	2012-05-02 12:31:07.824199	2012-05-05 01:30:18.877169
543	ruby-talk	BigDecimal	Microrant on Ruy's Math Skills	math, decimal, floating point, accuracy, lossy, rant	> So simple...\r\n> \r\n>   1.1 - 1.to_f == 0.1\r\n>   >> false\r\n> \r\n> (*rumble*) (*rumble*) Pathetic!\r\n\r\n\r\nDecimal literals (e.g. 1.1) can't always be represented exactly as binary floats:\r\n\r\n>> "%.40f" % 1.1\r\n=> "1.1000000000000000888178419700125232338905"\r\n>> "%.40f" % 1.0\r\n=> "1.0000000000000000000000000000000000000000"\r\n>> \r\n\r\nUse BigDecimal if you need exact precision:\r\n\r\n>> require 'bigdecimal'\r\n=> true\r\n>> BigDecimal.new("1.1") - BigDecimal.new("1.0")\r\n=> #<BigDecimal:7fc50ea75ff0,'0.1E0',9(36)>\r\n>> puts BigDecimal.new("1.1") - BigDecimal.new("1.0")\r\n0.1	1.9.3	gwtmp01@mac.com	2012-01-21 09:33:00	Gary	Wright	2012-05-04 21:43:01.66509	2012-05-04 21:43:01.66509
6	ruby-talk	Hash	Convert an array to a hash	array, hash, convert, assign	irb(main):001:0> a=["a", "hello", "b", "world", "c", "welcome", "d", \r\n"baby"]\r\n=> ["a", "hello", "b", "world", "c", "welcome", "d", "baby"]\r\nirb(main):002:0> Hash[*a]\r\n=> {"a"=>"hello", "b"=>"world", "c"=>"welcome", "d"=>"baby"}\r\nirb(main):003:0>	1.9.3	zed.0xff@gmail.com	2009-12-05 06:21:00	Andrey	Zaikin	2012-05-02 11:37:03.087463	2012-05-03 23:08:05.381456
340	ruby-talk	Operator	Error with splat params in method definition	operator, splat, param, parameters, eval, positional, 1.9, difference	>> I'd like to ask why having:\r\n>>\r\n>> ```\r\n>> def my_method(*param1, param2 = "default"); end\r\n>> ```\r\n>>\r\n>> returns\r\n>>\r\n>> ```\r\n>> SyntaxError: (irb):15: syntax error, unexpected '=', expecting ')'\r\n>> ```\r\n\r\nThis cannot reliably be evaluated because there is an ambiguity.  Will my_method(1) invoke with param1 = [] and param2 = 1 or with param1 = [1] and param2 = "default"?  \r\nNo machine can decide this.\r\n\r\n>> My workaround is explicitly wrap param in brackets like this:\r\n>>\r\n>> ```\r\n>> def my_method((*param1), param2 = "default"); end\r\n>> ```\r\n>\r\n> Have you tried calling your method with the workaround with exactly 0 or\r\n> more than 2 arguments?  I think you'll find that your workaround doesn't\r\n> really work around anything aside from the syntax error.\r\n>\r\n> Now, I could be wrong about the details, and I believe there are some\r\n> subtle changes coming soon with respect to parameter handling for\r\n> methods, but I'll see if I can clarify what is going on.  Ruby attempts\r\n> to associate method parameters as follows:\r\n>\r\n> 1) Assign the first parameters given in the method call to all the\r\n> positional parameters that do not have defaults defined and report an\r\n> error if there are not enough given parameters to do this.\r\n> 2) If there are still more given parameters, assign those to the\r\n> positional parameters that would otherwise have defaults set.\r\n> 3) Assign any remaining parameters that are NOT key-value definitions\r\n> for a hash to the splat parameter.\r\n> 4) Assign the key-value hash definitions to the final parameter as a\r\n> single hash.\r\n\r\nNot sure whether the order between 3 and 4 is correct or even matters. But that looks like a pretty good description of what's going on - apart from the fact that splash can occur anywhere and hence step one does not only eat leading parameters.\r\n\r\n> These rules require that method definitions first specify positional\r\n> parameters without defaults, followed by positional parameters with\r\n> defaults, followed by the splat parameter, followed by a single\r\n> parameter that will receive the hash parameters.\r\n\r\nIt's not exactly correct any more with 1.9.*: you can have the splat in other places than the last position:\r\n\r\nirb(main):007:0> def f(a,*b,c) p a,b,c end\r\n=> nil\r\nirb(main):008:0> f 1\r\nArgumentError: wrong number of arguments (1 for 2)\r\n        from (irb):7:in `f'\r\n        from (irb):8\r\n        from /opt/bin/irb19:12:in `<main>'\r\nirb(main):009:0> f 1, 2\r\n1\r\n[]\r\n2\r\n=> [1, [], 2]\r\nirb(main):010:0> f 1, 2, 3\r\n1\r\n[2]\r\n3\r\n=> [1, [2], 3]\r\nirb(main):011:0> f 1, 2, 3, 4\r\n1\r\n[2, 3]\r\n4\r\n=> [1, [2, 3], 4]\r\n\r\n> I'm sure that I'm going to get all sorts of corrections about the above,\r\n> but that's the gist as I understand things at least.\r\n\r\nYou are correct in that there _are_ limitations.\r\n\r\n> It appears that you would like to instead specify your positional\r\n> parameters (param2) after your splat parameter (param1).  I don't\r\n> believe Ruby yet has any facility to handle that in the language,\r\n\r\nIt can do it but not with defaults:\r\n\r\nirb(main):012:0> def f(*a, b, c) p a, b, c end\r\n=> nil\r\nirb(main):013:0> f 1\r\nArgumentError: wrong number of arguments (1 for 2)\r\n        from (irb):12:in `f'\r\n        from (irb):13\r\n        from /opt/bin/irb19:12:in `<main>'\r\nirb(main):014:0> f 1,2\r\n[]\r\n1\r\n2\r\n=> [[], 1, 2]\r\nirb(main):015:0> f 1,2,3\r\n[1]\r\n2\r\n3\r\n=> [[1], 2, 3]\r\nirb(main):016:0> f 1,2,3,4\r\n[1, 2]\r\n3\r\n4\r\n=> [[1, 2], 3, 4]\r\n\r\n> but you can emulate it:\r\n>\r\n> def my_method(*params)\r\n>  param1 = params\r\n>  param2 = params.size > 1 ? params.pop : "default"\r\n>  ...\r\n> end\r\n\r\nYeah, but who wants to read such code?  That will be a heck of a difficult thing to debug.  I'd rather stick with standard features because they also allow for automated error checking and reporting.	1.9.3	shortcutter@googlemail.com	2012-02-06 11:01:00	Robert	Klemme	2012-05-02 12:43:51.568821	2012-05-06 23:37:18.328017
449	ruby-talk	String	Q: most efficient way to remove duplicate spaces in a string?	string, benchmark, gsub, split, join, compare, speed, link	> This sounds like a case for regular expressions.\r\n>\r\n>  a_string.gsub!(/ +/, ' ')\r\n\r\n>> I don't usually worry too much about efficiency unless runtime\r\n>> performance becomes an issue so I use a_string.split.join(' ') to\r\n>> remove extra spaces because the code is short and readable.\r\n>>\r\n>> This is certainly inefficient. What is the fastest idiom for this\r\n>> operation?\r\n\r\n> Haven't benchmarked it,\r\n\r\nrequire 'benchmark'\r\n\r\nn = 1_000_000\r\n\r\nBenchmark.bm(10) do |x|\r\n  x.report("gsub") { n.times do\r\n      "This     is  a test   string.".gsub(/ +/, ' ')\r\n    end\r\n  }\r\n  x.report("gsub!") { n.times do\r\n      "This     is  a test   string.".gsub!(/ +/, ' ')\r\n    end\r\n  }\r\n  x.report("split.join") { n.times do\r\n      "This     is  a test   string.".split.join(' ')\r\n    end\r\n  }\r\nend\r\n                user     system      total        real\r\ngsub        6.310000   0.080000   6.390000 (  7.135028)\r\ngsub!       6.300000   0.070000   6.370000 (  7.064374)\r\nsplit.join  3.940000   0.070000   4.010000 (  4.160529)\r\n\r\nor, with bmbm\r\n\r\npate@pate:~/scratch$ ./stringcleanup.rb\r\nRehearsal ----------------------------------------------\r\ngsub         6.290000   0.170000   6.460000 (  7.956565)\r\ngsub!        6.370000   0.170000   6.540000 (  8.128309)\r\nsplit.join   3.990000   0.080000   4.070000 (  4.832332)\r\n------------------------------------ total: 17.070000sec\r\n\r\n                 user     system      total        real\r\ngsub         6.220000   0.130000   6.350000 (  7.613061)\r\ngsub!        6.390000   0.080000   6.470000 (  8.284855)\r\nsplit.join   3.970000   0.120000   4.090000 (  5.684406)\r\n\r\nPlease, benchmark first.  It's not that hard:\r\n\r\n<a href="http://on-ruby.blogspot.com/2008/12/benchmarking-makes-it-better.html">http://on-ruby.blogspot.com/2008/12/benchmarking-makes-it-better.html</a>	1.9.3	pat.eyler@gmail.com	2009-01-09 11:48:00	Pat	Eyler	2012-05-02 13:57:20.961362	2012-05-11 20:54:19.065934
58	ruby-talk	Namespace	Ruby namespace question	namespace, log4r, files, parser, ::	>>> I require two ruby files which include two classes with the same name.\r\n>>> how can I specify which class I use?\r\n>> \r\n>> class X; end # x.rb\r\n>> class X; end # y.rb\r\n>> \r\n>> same class, only one to specify. Files mean nothing in ruby, they're\r\n>> just vehicles for the parser.\r\n> \r\n> For this code:\r\n> \r\n> require 'x.rb'\r\n> require 'y.rb'\r\n> X.new     #which class it uses, can I specify the class like x.X or y.X?\r\n\r\nNope - there is only one class X. Which file it was (first) defined in \r\nmakes no difference. If you require 'x.rb' first then class X is \r\ncreated, and when you require 'y.rb' new methods are added into the \r\n*same* class.\r\n\r\nIf you want them to be different, define them in different namespaces. \r\nThis is what Log4r:: does (it refers to the namespace, not the file)\r\n\r\nmodule One; class X; end; end    # x.rb\r\nmodule Two; class X; end; end    # y.rb\r\n\r\nrequire 'x'\r\nrequire 'y'\r\nOne::X.new   # this is the one defined in x.rb\r\nTwo::X.new   # this is the one defined in y.rb	1.9.3	b.candler@pobox.com	2009-01-21 11:48:00	Brian	Candler	2012-05-02 11:53:03.609599	2012-05-05 20:06:15.142137
511	ruby-talk	String	How to indent strings(make them line up)?	string, indent, ip, dns, format, puts	> # original code was\r\n>\r\n> puts (dns + " =3D> " + ip)\r\n>\r\n> # I tried next code\r\n>\r\n> puts (dns + " =A0"*(20 - dns.length) + " =3D > " + ip)\r\n>\r\n> # but it did not work well. please teach me how to do it.\r\n\r\n"%-30s %s" % [dns, ip]	1.9.3, 1.8.6	transfire@gmail.com	2009-12-07 08:43:00	Intransition		2012-05-04 15:08:49.175182	2012-05-04 15:08:49.175182
183	ruby-talk	System	Promiscuous mode	net, promiscuous, mode, setup, ifconfig, iwconfig, mode, monitor	I have found the way to set my wlan device in promiscuous mode:\r\n\r\nsudo ifconfig wlan0 down\r\nsudo iwconfig wlan0 mode monitor	1.9.3	bisciasia@gmail.com	2009-12-22 11:28:00	Marco	Biscetti	2012-05-02 12:13:45.330933	2012-05-11 17:00:26.696801
300	ruby-talk	Time	Ranges	time, translate, character, math, min, hour, map	> I have a requirement to translate a time between 0000 and 2359 in to a\r\n> single character 'interval ID' based on the time.  For example, if the\r\n> time is between 0000 and 0059, '0' should be returned, if it's between\r\n> 0100 and 0159, '1' should be return.  The problem is that 0700-0729\r\n> should return 'A', 0730-0759 should return 'B', i.e. it's not a simple\r\n> mapping.\r\n\r\nIt is very much a simple mapping, it just isn't a 1:1 mapping anymore. =\r\nAll you need to do is figure out which hour and half hour of the day it =\r\nis, and return the code for that.\r\n\r\nGiven a time t, `t.min / 30` gives you 0 or 1 based on which half hour =\r\nyou're in. t.hour gives you 0 to 23 based on which hour you're in. So:\r\n\r\n    t.hour * 2 + (t.hour / 30)\r\n\r\nGives you a number from 0 to 47. =46rom there you can either look it up =\r\nfrom a pre-populated array or hash or whatever...\r\n\r\nxlate = "00112233445566ABCDEFGHIJKLMNOPQRSTUVWXYZ778899".split(//)\r\n\r\nt = Time.now\r\np [t.hour, t.min]                   # => [14, 10]\r\np xlate[t.hour * 2 + (t.hour / 30)] # => "O"	1.9.3	ryand-ruby@zenspider.com	2011-07-02 14:12:00	Ryan	Davis	2012-05-02 12:35:56.341348	2012-05-08 01:13:28.720897
394	ruby-talk	HTTPS	Parsing XML with Ruby	http, https, extra, require, port	> I have used Net::HTTP a lot in the past but could never get it working with \r\n> HTTPS but I'll read the docs again and have at it....\r\n\r\nThe difference between http and https with Net:HTTP can be summed by:\r\n\r\nrequire 'net/https' # extra require\r\n\r\nhttp = Net::HTTP.new('server.net', 443) # note the port\r\nhttp.use_ssl = true # turn it on	1.9.3	ammarabuali@gmail.com	2010-11-12 03:54:00	Ammar	Ali	2012-05-02 12:53:10.142743	2012-05-11 16:58:43.28451
498	ruby-talk	Symbol	Please give simple example of when to use symbols	symbol, string, use, explanation, practice, immutable	> > When do you normally use a symbol instead of a string?\r\n\r\n> The easiest thing to do is never use symbols--symbols aren't worth the\r\n> waste of time trying to understand them.  Although, the idiotic\r\n> explanations I read are pretty hilarious.   If you understand pointers,\r\n> then symbols are easy to understand.  If you don't know what a pointer\r\n> is, then you won't ever understand symbol.  You can rub all the crystals\r\n> you want and mediate on "the essence" of the thing, but you won't have\r\n> any idea what you are dealing with.\r\n\r\nIt's just an immutable string that doesn't get garbage collected, and every\r\nsymbol of a given name (text value) is the same object.\r\n\r\n> I'm still a bit confused on whether to use strings or symbols in certain situations.  \r\n> They produce the same results, although strings take up more memory, which I'm not \r\n> sure how or why exactly.\r\n\r\nI think when people say they take up more memory, they mean that symbols don't get garbage collected. So if you make one, it is around until your program ends. This could be a problem if you were  generating them dynamically, you could eat up all your memory.\r\n\r\n> When do you normally use a symbol instead of a string?\r\n\r\nCheck out the first 5 minutes of Ruby Kickstart Session 3:\r\n\r\n<a href="http://ruby-kickstart.com/#session3">http://ruby-kickstart.com/#session3</a>\r\n\r\nFor some examples, you can watch past that.	1.9.3	josh.cheek@gmail.com	2011-07-25 03:52:00	Josh	Cheek	2012-05-02 14:14:54.219615	2012-05-11 21:00:48.992862
499	ruby-talk	Language	Why we need heredoc	language, heredoc, need, escape, quotes, single, double	> It's great if you want to copy and paste some text. The text might have\r\n> single and double quotes in it, but with a heredoc that doesn't matter.\r\n> Otherwise, you'd have to go through your document, find all the quotes, and\r\n> escape them.\r\n\r\nWell...\r\n\r\n16:11:42 ~$ ruby x\r\n\r\nthere are "double" and 'single' quotes!\r\nAnd even #{does not} harm.\r\n"\r\nthere are "double" and 'single'\r\nquotes!\r\nAnd even #{does not} harm.\r\n"\r\n16:11:44 ~$ cat -n x\r\n     1  str=%q{\r\n     2  there are "double" and 'single'\r\n     3  quotes!\r\n     4  And even #{does not} harm.\r\n     5  }\r\n     6  puts str\r\n     7  p str\r\n16:11:46 ~$\r\n\r\n:-)	1.9.3	shortcutter@googlemail.com	2012-01-31 16:12:00	Robert	Klemme	2012-05-02 14:14:54.228295	2012-05-07 00:14:48.486808
85	ruby-talk	Time	How to change date format from Y/m/d to Y-m-d?	time, string, strftime, example, link	> Do you know how to change date format from Y/m/d to Y-m-d in ruby?\r\n\r\nCheck out strftime.\r\n\r\n`ri strftime`	1.9.3		2011-07-19 09:50:00	Lake		2012-05-02 11:55:46.687397	2012-05-07 00:40:45.236585
289	ruby-talk	File	XSLT and ecosystem help	file, nokogiri, parse, xml, find, open	> Find.find('C:Somedir') do |f|\r\n>   if f.match(/data.xmlZ/)\r\n>     doc = Nokogiri::XML(f)\r\n\r\nYou are parsing the file name as XML.  You rather want\r\n\r\n      doc = File.open(f, 'rb') {|io| Nokogiri::XML(io)}	1.9.3	shortcutter@googlemail.com	2012-03-20 15:35:00	Robert	Klemme	2012-05-02 12:34:19.844797	2012-05-06 19:44:43.456182
450	ruby-talk	OptionParser	OptionParser on option separator "--"	OptionParser, parse, opts, parameter, non-option, option	It's standard option parsing behaviour. -- indicates "end of options", \r\nand is important if any of the subsequent parameters otherwise looks \r\nlike an option.\r\n\r\nrequire "optparse"\r\nopts = OptionParser.new\r\np opts.parse(%w{hello -- world --flurble --boing})\r\n# => ["hello", "world", "--flurble", "--boing"]\r\n\r\np opts.parse(%w{hello world --flurble --boing})\r\n# invalid option: flurble\r\n\r\nAlso, quoting from the getopt(1) manpage:\r\n\r\n"Each  parameter not starting with a `-', and not a required argument of \r\na previous option, is a non-option parameter. Each  parameter  after  a \r\n`--' parameter is always interpreted as a non-option parameter.	1.9.3	b.candler@pobox.com	2011-07-28 22:38:00	Brian	Candler	2012-05-02 13:58:28.683096	2012-05-05 00:43:06.045962
454	ruby-talk	Hash	Need help with MD5 hashs	hash, md5, digest, array, pack, unpack, hexdigest	> I need to be able to convert existing MD5 hexdigests to raw digests. Is this possible?\r\n>\r\n> If I do : Digest::MD5.digest('password'), I get a raw MD5 digest. Right.\r\n>\r\n> Then if I do : Digest::MD5.digest('password').unpack("H*")[0], then I\r\n> get the same output that if I did Digest::MD5.hexdigest('password').\r\n>\r\n> But how can I do the opposite in ruby? How can I go from an existing\r\n> hexdigested MD5 string to the raw form?\r\n\r\nThe inverse operation of String#unpack is Array#pack. So all you need\r\nto do is wrap your hex String in an Array first:\r\n\r\nbytes = [hex].pack("H*")\r\n\r\nRegards,\r\nMartin\r\n\r\nPS: As far as I remember, Digest also implements #hexdigest, at least\r\nOpenSSL::Digest does. This would save you some typing for the first\r\ncase :)	1.9.3	martin.bosslet@googlemail.com	2012-03-26 17:51:00	Martin	Bosslet	2012-05-02 13:59:21.881846	2012-05-11 16:54:06.725315
119	ruby-talk	String	A better way?	char, rand, bytes	> If the letters don't go higher then F, you could add 10 and convert to\r\n> a hex (string)\r\n>\r\n> (random_insert + 10).to_s(16)\r\n\r\nThere's another approach: using the alphabet:\r\n\r\nirb(main):024:0> char_a = 'A'.bytes.first\r\n=> 65\r\nirb(main):025:0> (char_a + rand(26)).chr\r\n=> "G"\r\n\r\nor\r\n\r\nrandom_insert = ...\r\n(char_a + random_insert).chr	1.9.3	shortcutter@googlemail.com	2012-02-17 10:07:00	Robert	Klemme	2012-05-02 12:01:39.630124	2012-05-11 15:29:13.927335
324	ruby-talk	Array	How to call an array from one ruby script to another?	array, global, visible, variables, private functions	> Can we call an array from one ruby script to another and access array elements?\r\n>\r\n> for example : my first rb file\r\n>\r\n> 1.rb\r\n> $joe = "one"\r\n> $po = "two"\r\n> $so  = "three"\r\n> names = [ $joe, $po, $so ]\r\n> second rb file\r\n>\r\n> 2.rb\r\n> require "1"\r\n> $trial = names[1]\r\n> puts $trial\r\n> But this didnt worked. Any help plz.\r\n>\r\n\r\nVariables that begin with dollar signs are global. So if you name it\r\n$names, then it will be available everywhere.\r\n\r\nYou could also define a function that returns the array. Toplevel functions\r\nare defined privately on Object, which nearly all objects inherit from,\r\nmaking it essentially globally visible:\r\n\r\ndef names\r\n  ['one', 'two', 'three']\r\nend\r\n\r\nDepending on what you're trying to do, there are a number of possible ways\r\nto handle this.	1.9.3	josh.cheek@gmail.com	2011-11-27 13:23:00	Josh	Cheek	2012-05-02 12:40:17.209741	2012-05-05 18:58:25.966977
84	ruby-talk	Event	Creating Fields and Properties with Event Change Notifications?	observer, pattern, event, change notification	check out the observer pattern, might be useful...\r\n\r\n<a href="http://ruby-doc.org/stdlib/libdoc/observer/rdoc/index.html">http://ruby-doc.org/stdlib/libdoc/observer/rdoc/index.html</a>	1.9.3	jakekaiden@yahoo.com	2011-08-04 14:12:00	Jake	Kaiden	2012-05-02 11:55:46.656069	2012-05-11 18:18:47.16745
105	ruby-talk	Class	Abstract, modules and inheritance question	abstract, class, polymorphism	Abstract classes don't exactly exist in Ruby; there's no way to\r\ndo them exactly. A combination of mixins, duck typing, and delegation\r\nis usually used over more heavyweight means of achieving polymorphism.	1.9.3	steve@steveklabnik.com	2011-08-04 11:15:00	Steve	Klabnik	2012-05-02 12:00:12.457713	2012-05-11 15:30:59.030708
30	ruby-talk	Proc	Proc.new v. lambda	proc, lambda, test, true, false, check	Really, you could have checked it yourself.\r\n\r\nirb(main):001:0> a = Proc.new{}\r\n=> #<Proc:0xca1cb8@(irb):1>\r\nirb(main):002:0> b = lambda{}\r\n=> #<Proc:0x141af50@(irb):2 (lambda)>\r\nirb(main):003:0> a.lambda?\r\n=> false\r\nirb(main):004:0> b.lambda?\r\n=> true	1.9.3	matma.rex@gmail.com	2012-03-07 16:25:00	Bartosz	DziewoÅski	2012-05-02 11:44:39.166444	2012-05-05 19:40:04.434576
284	ruby-talk	Operator	Confusing results from string multiplication	splat, binary, operator	> I actually registered here to ask a different question, but after\r\n> checking the core docs for 1.8.7 I realized that the behavior has\r\n> apparently changed, but as part of the registration process I was asked\r\n> to enter the result of:\r\n>\r\n> puts ((11.to_s * 2).to_i/2)\r\n>\r\n> I don't know Ruby very well, but this one seemed pretty\r\n> straight-forward, in that it was supposed to convert the number (object)\r\n> 11 to a string, double it ('1111') then convert it back to an integer\r\n> and divide by two. Since these are integers the answer would be: 555.\r\n>\r\n> But here's where it gets strange. Since I'm new to Ruby I thought I'd\r\n> play with it a bit, and since I thought that whitespace wasn't supposed\r\n> to matter, I did:\r\n>\r\n>>> 11.to_s * 2\r\n> => "1111"\r\n>>> 11.to_s *2\r\n> => "1011"\r\n>>> 11.to_s*2\r\n> => "1111"\r\n>\r\n> I thought, maybe this is a problem with irb, so I wrote a little\r\n> program:\r\n>\r\n> #!/usr/bin/env ruby\r\n>\r\n> puts (11.to_s * 2)\r\n> puts (11.to_s *2)\r\n> puts (11.to_s*2)\r\n>\r\n> And when I run it, I see:\r\n>\r\n> 1111\r\n> 1011\r\n> 1111\r\n>\r\n> Can anyone explain why the '11.to_s *2' gave me 1011? Is this a 1.8.7\r\n> problem? The Ruby version on my Mac OS X Lion system is: ruby 1.8.7\r\n> (2010-01-10 patchlevel 249) [universal-darwin11.0].\r\n\r\nCongratulations, you really hit a strange corner case in the syntax!\r\n\r\nirb(main):003:0> 11.to_s *2\r\n=> "1011"\r\nirb(main):004:0> 11.to_s(*2)\r\n=> "1011"\r\nirb(main):005:0> 11.to_s(2)\r\n=> "1011"\r\n\r\nThe variant with a single space before the star and no space after is\r\nactually the splat operator as in:\r\n\r\nirb(main):011:0> def f(*a) p a end\r\n=> nil\r\nirb(main):012:0> args = [1,2,3]\r\n=> [1, 2, 3]\r\nirb(main):013:0> f(args)\r\n[[1, 2, 3]]\r\n=> [[1, 2, 3]]\r\nirb(main):014:0> f(*args)\r\n[1, 2, 3]\r\n=> [1, 2, 3]\r\nirb(main):015:0> f(args, 77, 88)\r\n[[1, 2, 3], 77, 88]\r\n=> [[1, 2, 3], 77, 88]\r\nirb(main):016:0> f(*args, 77, 88)\r\n[1, 2, 3, 77, 88]\r\n=> [1, 2, 3, 77, 88]\r\n\r\nIn your case:\r\n\r\nirb(main):017:0> def f(a) p a end\r\n=> nil\r\nirb(main):018:0> f(2)\r\n2\r\n=> 2\r\nirb(main):019:0> f(*2)\r\n2\r\n=> 2\r\n\r\nAnd 11.to_s(2) it's just the conversion to binary:\r\n\r\nirb(main):021:0> 11.to_s 2\r\n=> "1011"\r\nirb(main):022:0> 11.to_s 10\r\n=> "11"\r\nirb(main):023:0> 11.to_s 16\r\n=> "b"	1.9.3	shortcutter@googlemail.com	2011-12-08 17:32:00	Robert	Klemme	2012-05-02 12:33:03.712283	2012-05-03 23:03:00.139478
293	ruby-talk	Operator	Accept sh heredocs to Ruby script	operator, STDIN, piping	> What leads you to think that << creates a temp file? Maybe the shell is\r\n> just piping the heredoc contents to the ruby child process's stdin?\r\n\r\nyou're right:\r\n\r\nruby -e"puts STDIN.gets" <<XYZ\r\n> bar\r\n> goo\r\n> XYZ\r\nbar	1.9.3		2009-07-08 17:35:00	Fabian	Streitel	2012-05-02 12:34:47.632905	2012-05-11 15:31:16.266379
165	ruby-talk	XML	XmlMarkup gives 2 root elements	xml, markup, parse, irb, inspect, object, builder	> I try to check out what's the best way to create a small XML File (need\r\n> it for a bank transfer)\r\n>\r\n> Anyway: I try the following under the ruby console:\r\n>\r\n> require 'builder'\r\n> x = Builder::XmlMarkup.new\r\n> x.instruct!\r\n> test = x.Hello("World!", "type" => "global")\r\n>\r\n> What I receive in test is the following:\r\n>\r\n> <inspect/>\r\n> <?xml version="1.0" encoding="UTF-8"?>\r\n> <Hello type="global">World!</Hello>"\r\n>\r\n> So how can I get rid of the <inspect/> element. I think this file is A\r\n> BIT against the W3C XML standard.\r\n>\r\n\r\nTry it without irb. Standard IRB automatically calls "inspect" on the builder object after each line which adds the "inspect" element ;).	1.9.3	flo@andersground.net	2012-01-19 21:55:00	Florian	Gilcher	2012-05-02 12:12:26.785963	2012-05-06 22:32:49.921185
63	ruby-talk	Array	Appending an array to a frozen array	array, freeze, variable	> Ah, I understand - thanks. My next question is - is it possible to prevent this?\r\n\r\nSince you are using an instance variable you control how it is\r\naccessed. So, yes.  If you want to know whether there is a hard way to\r\nprevent reassignment to instance variables, the only safe way I know\r\noff the top of my head is to freeze the owner:\r\n\r\nirb(main):001:0> o=Object.new\r\n=> #<Object:0x10171ed8>\r\nirb(main):002:0> o.instance_variable_set "@foo", 1\r\n=> 1\r\nirb(main):003:0> o\r\n=> #<Object:0x10171ed8 @foo=1>\r\nirb(main):004:0> o.freeze\r\n=> #<Object:0x10171ed8 @foo=1>\r\nirb(main):005:0> o.instance_variable_set "@foo", 2\r\nRuntimeError: can't modify frozen object\r\n        from (irb):5:in `instance_variable_set'\r\n        from (irb):5\r\n        from /opt/bin/irb19:12:in `<main>'\r\nirb(main):006:0>	1.9.3	shortcutter@googlemail.com	2009-03-25 17:52:00	Robert	Klemme	2012-05-02 11:54:20.635109	2012-05-03 18:46:35.321031
41	ruby-talk	String	Use * before string	splat, split, strings, assignment	>  @name, @type = *s.split(':')\r\n> \r\n> Why and where use * before string?\r\n>\r\n\r\nYour statement is equivalent to:\r\n\r\n@name, @type = *(s.split(':') )\r\n\r\nHere is a simple example:\r\n\r\narr = ["apple", "banana"]\r\nx, y = *arr\r\nputs x, y\r\n\r\n--output:--\r\napple\r\nbanana\r\n\r\nOr:\r\n\r\ns = "hello world"\r\nx, y = *s.split()\r\nputs x, y\r\n\r\n--output:--\r\nhello\r\nworld	1.9.3	bbxx789_05ss@yahoo.com	2009-02-12 19:31:00	7stud		2012-05-02 11:50:07.147433	2012-05-11 17:35:58.168989
246	ruby-talk	Document	Which is the best online document conversion site?	document, conversion, site, url, file	Here is it  just click on onlinedocumentconversion.com and convert your \r\nfiles easily with great quality.	1.9.3	janifersmith1@gmail.com	2011-12-12 10:52:00	Janifer	Smith	2012-05-02 12:26:51.249553	2012-05-06 23:15:29.435425
406	ruby-talk	Struct	How to order Structs based on two fields?	struct, class, comparable, sort, define, method	>> I expected that the following could work:\r\n>>\r\n>>  array.sort_by{|entry| entry.a or entry.b}\r\n>>\r\n>> but it generates:\r\n>>\r\n>>   [kk1, kk2, kk3, kk4]\r\n>>\r\n>> so obviously it does not work. I'm not very used to Enumerable.sort_by\r\n>> method, any tip please?\r\n>\r\n> Maybe it would be better to use "class KK" rather than an struct, and\r\n> then define <=> method for KK class (and include Enumerable module)?\r\n\r\nYou can do\r\n\r\narray.sort_by {|e| [e.a, e.b]}\r\n\r\nBut you can of course define <=> for a Struct class as well\r\n\r\nKK = Struct.new :a,:b do\r\n  include Comparable\r\n\r\n  def <=>(o)\r\n    cmp = a <=> o.a\r\n    cmp == 0 ? b <=> o.b : cmp\r\n  end\r\nend	1.9.3	shortcutter@googlemail.com	2011-07-01 13:18:00	Robert	Klemme	2012-05-02 12:56:17.400063	2012-05-06 23:01:03.636673
339	ruby-talk	Array	About Array methods	array, index	> l = [1,2,3,4,5]\r\n> head = l[0..2]\r\n> p head # => [1,2,3]\r\n> p l    # => [1,2,3,4,5]\r\n>\r\n> # I want '[4,5]'\r\n>\r\n> # Is that method in Array?\r\n\r\nl = l[3..-1]	1.9.3		2009-01-08 21:00:00	Matthew	Moss	2012-05-02 12:43:34.533201	2012-05-07 21:23:24.711553
268	ruby-talk	Regexp	Regexp problem needing assistance	regex, first, match, string, scan, method, multiple, matches	Regexp#match returns the first match only.\r\nIf you want all matches, use the String#scan method.\r\n\r\nm1.scan /[0-9]+,[0-9]+,[0-9]+\b|[0-9]+/\r\n#=> ["2", "88", "333", "253", "6", "222,042,095", "63,795,755", "3,042,095", "32,042,095", "303,042,095" ]	1.9.3	g.diemant@gmx.net	2011-12-22 17:42:00	Gunther	Diemant	2012-05-02 12:31:07.725267	2012-05-06 23:38:16.726788
329	ruby-talk	File	Accessing a web page, finding and downloading a file	web, mechanize, search	> I was wondering what will be a good tool/gem to use in Ruby to:\r\n> \t* Access a public website.\r\n> \t* Look for the existence of a tiff file\r\n> \t* Download the tiff file if exists\r\n> I installed a tool I found, httparty, at <a href="http://rubygems.org/gems">http://rubygems.org/gems</a>.\r\n> But I was wondering if anyone has any other recommendation(s).\r\n\r\nI would use mechanize for this.	1.9.3	ryand-ruby@zenspider.com	2012-02-22 15:37:00	Ryan	Davis	2012-05-02 12:41:36.175546	2012-05-11 20:23:27.604456
147	ruby-talk	Hash	Maximum value of hash	hash, max, max_by, cleaner, compare	> But why use max when max_by is cleaner?\r\n>\r\n> @hash.max_by{|x| x[1]}\r\n\r\nOr even cleaner:\r\n\r\n@hash.max_by {|k,v| v}	1.9.3	b.candler@pobox.com	2011-07-15 20:38:00	Brian	Candler	2012-05-02 12:08:19.321731	2012-05-11 16:45:45.122879
528	ruby-talk	gzip	Gzip json jquery ajax github	javascript, gzip. implementation, json, jquery	> So I have a project webpage that uses jquery, right. It dynamically\r\n> generates some page content from a json file it gets via ajax. All good.\r\n> But the file is fairly big, an average example is 385K. To me that's kind\r\n> of large to be 1) transporting over the ajax wire and 2) storing in my\r\n> project's repo. So I compressed the file with gzip and saw a 4x size\r\n> reduction --the 385K went to 85K. That's more like it. I am hosting the\r\n> page on github --it's part of gh-pages for a project.\r\n>\r\n> So I am wondering, is possible to use the gzipped version of the file\r\n> instead of the regular version?\r\n\r\nYes.\r\n\r\n<a href="http://stackoverflow.com/questions/294297/javascript-implementation-of-gzip">http://stackoverflow.com/questions/294297/javascript-implementation-of-gzip</a>	1.9.3, 1.8.6, 1.8.7	whitequark@whitequark.org	2011-11-20 09:41:00	Peter	Zotov	2012-05-04 20:35:01.906644	2012-05-11 21:05:05.216906
235	ruby-talk	Array	Elegant selection of closest number?	array, hash, decimal, round, &&, compare, sort, sort!	> buckets = [\r\n>  0.1,\r\n>  0.2,\r\n>  0.3,\r\n>  0.4,\r\n>  0.5,\r\n> ]\r\n>\r\n> data = [\r\n>  0.00,\r\n>  0.14,\r\n>  0.19,\r\n>  0.24,\r\n>  0.25,\r\n>  0.41,\r\n>  1.00,\r\n> ]\r\n>\r\n> results = Hash.new {|hash, key| hash[key] = []}\r\n>\r\n> data.each do |num|\r\n>  rounded = num.round(1)\r\n>\r\n>  first = buckets.first\r\n>  last = buckets.last\r\n>\r\n>  if rounded < first\r\n>    results[first] << num\r\n>  elsif rounded > last\r\n>    results[last] << num\r\n>  else\r\n>    results[rounded] << num\r\n>  end\r\n> end\r\n>\r\n> p results\r\n>\r\n> --output:--\r\n> {0.1=>[0.0, 0.14], 0.2=>[0.19, 0.24], 0.3=>[0.25], 0.4=>[0.41], 0.5=>[1.0]}\r\n\r\nbuckets and data as above\r\n\r\nbuckets.sort!\r\n\r\nresult = data.group_by do |x|\r\n  delta = nil\r\n  buck = nil\r\n\r\n  buckets.each do |b|\r\n    d = (x - b).abs\r\n    break if delta && d > delta\r\n    delta = d\r\n    buck = b\r\n  end\r\n\r\n  buck\r\nend	1.9.3	shortcutter@googlemail.com	2011-07-15 13:04:00	Robert	Klemme	2012-05-02 12:26:14.852515	2012-05-07 00:12:20.465938
372	ruby-talk	Time	Add 10 minutes to parsed time stamp?	time, addition, parse	Or even better way using ActiveSupport:\r\n\r\nirb(main):001:0> require 'active_support'\r\n=> true\r\nirb(main):002:0> t = Time.parse('Wed Dec 09 16:05:00 -0600 2009')\r\n=> Thu Dec 10 00:05:00 +0200 2009\r\nirb(main):003:0> t + 10.minutes\r\n=> Thu Dec 10 00:15:00 +0200 2009\r\nirb(main):004:0>	1.9.3	jarmo.p@gmail.com	2009-01-08 17:54:00	Jarmo	Pertman	2012-05-02 12:50:49.602117	2012-05-11 15:32:42.303041
233	ruby-talk	File	Reading from file without end-of-lines	file, read, strip, foreach, map, first, strip!	>> I'm trying to read a few text values from single file:\r\n>>\r\n>>  if File.exists?(file)\r\n>>      File.open(file, 'r+') do |f|\r\n>>        value1 = f.gets.strip\r\n>>        value2 = f.gets.strip\r\n>>        value3 = f.gets.strip\r\n>>        value4 = f.gets.strip\r\n>>      end\r\n>>    end\r\n>>\r\n>> each value is stored in separate line and 'strip' above is used only to\r\n>> get rid of end-of-line characters. is there any easier way to do the same?\r\n\r\nYou could start by not defining individual variables with indexed\r\nnames but using an array.\r\n\r\n> I tend to strip out all such characters at once, before operating on any line.\r\n>\r\n>  File.readlines(file).map { |line| line.strip }.each do |line|\r\n>    ...\r\n>  end\r\n>\r\n> In your case, I guess that would be\r\n>\r\n>  lines = File.readlines(file).map { |line| line.strip }\r\n>  value1 = lines.shift\r\n>  value2 = lines.shift\r\n>  # etc.\r\n>  # or\r\n>  v1, v2, v3, v4 = lines.shift(4)\r\n\r\nExecuting File.readlines completely is inefficient if the file is large and only the first four lines are needed.\r\n\r\nOne could do\r\n\r\nvalues = File.open(file) do |f|\r\n  f.first(4).map! &:strip!\r\nend\r\n\r\nOr even shorter\r\n\r\nvalues = File.foreach("cl").first(4).map! &:strip!\r\n\r\nIf there are proper names for variables one can do\r\n\r\nname, street, zip, city = File.foreach("cl").first(4).map! &:strip!\r\n\r\n;-)	1.9.3	shortcutter@googlemail.com	2011-12-09 10:18:00	Robert	Klemme	2012-05-02 12:25:53.756872	2012-05-06 20:01:12.210393
286	ruby-talk	Array	Complex sort of matrix possible, e.g. like Excel?	array, sort, compare	> Enumerable#sort lets you do this fairly easily with just a pure array\r\n> of arrays, e.g., to sort the array-of-arrays "arr" by the first column\r\n> ascending and the second descending:\r\n>\r\n> arr.sort {|a,b| [a[0]<=>b[0], b[1]<=>a[1]].find {|x| x!=0} || 0}\r\n\r\nAlternatively with less intermediate Arrays and less comparison operations.\r\n\r\narr.sort do |a,b|\r\n c = a[0]<=>b[0]\r\n c == 0 ? b[1]<=>a[1] : c\r\nend\r\n\r\nYou can as well do\r\n\r\narr.sort_by {|a,b| [a[0]<=>b[0], b[1]<=>a[1]]}	1.9.3	shortcutter@googlemail.com	2009-03-18 11:19:00	Robert	Klemme	2012-05-02 12:33:03.797213	2012-05-03 22:55:19.469464
523	ruby-talk	FileUtils	File: open().each doesn't close file	fileutils, file, close, open.each, pass, block	> On Ruby 1.9.3 (win7(64))\r\n>\r\n> Because code says more the thousand words:\r\n> ##################\r\n> open("test.txt","r").each do end # doesn't close file\r\n> FileUtils.rm "test.txt"  # will fail: Permission denied\r\n> ##################\r\n> (it doesn't matter if the "do end" is filled or omitted)\r\n>\r\n> Bug, 'Feature' or my mistake?\r\n\r\nopen will only close if you pass it a block directly.\r\n\r\nopen('test.txt'){|file| file.each{ ... } }	1.9.3	m.fellinger@gmail.com	2011-12-04 14:19:00	Michael	Fellinger	2012-05-04 20:17:46.893014	2012-05-04 20:17:46.893014
287	ruby-talk	Numeric	Numeric#coerce docs are a disaster	numeric, class, coerce, explanation, link	> 1) I don't know how coerce works.\r\n\r\n<a href="http://blog.rubybestpractices.com/posts/rklemme/019-Complete_Numeric_Class.html">http://blog.rubybestpractices.com/posts/rklemme/019-Complete_Numeric_Class.html</a>	1.9.3	shortcutter@googlemail.com	2011-08-02 14:55:00	Robert	Klemme	2012-05-02 12:34:19.755397	2012-05-11 20:11:02.887429
308	ruby-talk	HTML	Displaying the html from a ruby .cgi script?	code, grab, html, console, cli, code	> Is there an easy way to grab that generated html code and\r\n> display it (as a long string) on a console?\r\n\r\n% ruby foobar.cgi < /dev/null	1.9.3	ryand-ruby@zenspider.com	2009-12-22 15:15:00	Ryan	Davis	2012-05-02 12:37:34.529292	2012-05-04 00:03:39.865902
484	ruby-talk	C#	Generic List in Ruby	c#, ruby, list, ruby, wrapper, write, exception	> Class Thing\r\n>   string name;\r\n>   string id;\r\n> end\r\n>\r\n> Class Shelf\r\n>   List<Thing> lstthing = new List<Thing>;\r\n> end\r\n>\r\n> Above is C# code; How can I write same in Ruby....\r\n\r\nIt seems to me that the previous answers were essentially "Ruby lists *are* generic, what's wrong?".\r\n\r\nHowever, I interpret your question as: "how do I make a list NOT generic, using what some other languages call 'generics' because the *rest* of it is generic, so that a Shelf can ONLY contain Things?".\r\n\r\nIs that what you mean? \r\n\r\nIf so, you can't do that quite so easily, but you can extend or wrap some container class.  You'd have to tell it what class of things you want to put in, or maybe some other test.  For your immediate needs, maybe something like:\r\n\r\nclass Thing\r\n  # insert guts of class Thing here\r\nend\r\n\r\n\r\n# simple array wrapper\r\nclass Shelf\r\n\r\n  def initialize\r\n    @myArray = Array.new\r\n  end\r\n\r\n  def add thang\r\n    raise 'Error: Shelves can only contain Things' if ! thang.is_a? Thing\r\n    @myArray.push thang\r\n  end\r\n\r\n  # insert here similar calls for any other methods you want that add things\r\n  # insert here any calls you want to remove things from it, look at the shelf, etc.;\r\n  # some of it could probably be automagically delegated to Array with one def\r\n  # of method_missing.  Could probably do that with *everything* except \r\n  # the calls that insert things....\r\n\r\nend\r\n\r\nLong-term, if I needed that kind of thing a lot, I'd be tempted to\r\nmake a generic wrapper and pass it a block, and say that only things\r\nthat make that block return true would get inserted, with everything\r\nelse causing an exception.  However, that sounds to me like the kind\r\nof thing that might be needed often enough that someone might have\r\nalready made a gem for it.  	1.9.3	rubytalk2dave@davearonson.com	2011-11-24 12:35:00	Dave	Aronson	2012-05-02 14:11:20.368029	2012-05-07 00:25:46.282137
467	ruby-talk	truthy	Ruby way to define binary	truthy, falsey, everything, logical, expression, object	> I have some trouble. How can i define the binary of value in ruby? (I\r\n> have a value, and I want to know that's it true or false).\r\n\r\nYou don't really need to. Everything in ruby has a "truthiness" to it and can be used in logical expressions. Only nil and false are "falsey" and everything else are "truthy". In other words, just use objects and they'll take care of you.\r\n\r\nif var then\r\n  do_something\r\nend\r\n\r\nIf you feel REALLY insecure about typing in a dynamic language you can always double-negate:\r\n\r\nclass Object\r\n  def truthy?\r\n    !!self\r\n  end\r\nend\r\n\r\nif var.truthy? then # wasted cycles for no gain\r\n  do_something\r\nend	1.9.3	ryand-ruby@zenspider.com	2011-12-07 03:45:00	Ryan	Davis	2012-05-02 14:05:13.695895	2012-05-07 00:27:05.048886
205	ruby-talk	Array	Array problem	array, delete_if, string	> I have an array like this:\r\n> array = [ "manyThings.mp3", "myLike.gif", "moreCoco.bmp",\r\n> "theFormat.bmp"]\r\n>\r\n> and I want to make some comparison to eliminate all the words in the\r\n> array that are NOT of the bmp format.  So at the end the array will look\r\n> like this:\r\n>\r\n> array = ["moreCoco.bmp", "theFormat.bmp"]\r\n>\r\n> is there a way to do this???\r\n\r\nI think this should do it:\r\n\r\narray.delete_if { |elem| not elem =~ /.bmp/i }\r\n\r\nIt worked for the following test:\r\n\r\narray = [ "manyThings.mp3", "myLike.gif", "moreCoco.BmP", "theFormat.bmp"]\r\narray.delete_if { |elem| not elem =~ /.bmp/i }\r\narray.each do |elem|\r\n  puts elem\r\nend	1.9.3	chezball@gmail.com	2008-12-17 20:48:00	Joshua	Ball	2012-05-02 12:16:53.600988	2012-05-11 15:39:55.01291
\.


--
-- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: captdowner
--

COPY users (id, email, password_digest, created_at, updated_at) FROM stdin;
\.


--
-- Name: tips_pkey; Type: CONSTRAINT; Schema: public; Owner: captdowner; Tablespace: 
--

ALTER TABLE ONLY tips
    ADD CONSTRAINT tips_pkey PRIMARY KEY (id);


--
-- Name: users_pkey; Type: CONSTRAINT; Schema: public; Owner: captdowner; Tablespace: 
--

ALTER TABLE ONLY users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id);


--
-- Name: unique_schema_migrations; Type: INDEX; Schema: public; Owner: captdowner; Tablespace: 
--

CREATE UNIQUE INDEX unique_schema_migrations ON schema_migrations USING btree (version);


--
-- Name: public; Type: ACL; Schema: -; Owner: postgres
--

REVOKE ALL ON SCHEMA public FROM PUBLIC;
REVOKE ALL ON SCHEMA public FROM postgres;
GRANT ALL ON SCHEMA public TO postgres;
GRANT ALL ON SCHEMA public TO PUBLIC;


--
-- PostgreSQL database dump complete
--

